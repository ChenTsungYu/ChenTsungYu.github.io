---
title: "[Python] 讓Pipenv 幫你做套件管理"
catalog: true
date: 2020/01/10 20:23:10
tags: [Python]
categories: [Backend]
toc: true
---
![](https://miro.medium.com/max/2400/1*zPe_kLqaQ7Iie19_uH4vUA.jpeg)
<!-- toc -->
## 什麼是Pipenv?
Pipenv 是一個簡單、更快速的 Python 套件管理工具，整合Pipfile, pip, virtualenv，我們需要一個乾淨環境來開發，會使用 virtualenv 建一個虛擬環境，再透過 pip 以及 requirements.txt 去管理套件的版本。
解決痛點:
剛學python時，對於套件管理不是那麼熟悉，路徑設置也是一知半解，用到的套件都亂安裝，安裝方式有時根本大雜燴，(mac為例)可能用`brew install` ，又用`anaconda install`，或是 `pip install`，又有 `pip3 install`，有時候發生，明明就有裝，但是 import 的時候卻找不到套件，後來才發現原來是該目錄沒有加入path，或是把專案發佈的時，不清楚這個專案到底安裝了哪些套件，一個一個回去查找專案內容等問題......
這時如果有個工具可在虛擬環境下做套件管理，就可以解決上述問題
<!--more--> 
建立虛擬環境的幾個好處:
* 不同專案可使用不同版本相同套件，且不互相影響，可避免版本衝突。
* 在虛擬環境裡，pip 安裝的套件會被放在虛擬環境中，每個專案可擁有獨立環境。
* 套件版本升級時不會影響到其他的專案。

## 前面說了這麼多，接著開始實作看看吧！

### 安裝
```pip=
pip install pipenv
```
mac也可以用homebrew進行安裝
```clike=
brew install pipenv
```
``
### 進入專案資料夾中
建立新的專案資料夾，並切換至該資料夾下。
![](https://i.imgur.com/R2WaB9R.png)
### 創建虛擬環境
```python=
pipenv install 你要的套件
```

若後面沒有帶任何參數則會安裝Pipfile內所有套件。
`pipenv install`

安裝特定套件可參考下方範例:
```python=
pipenv install --three       #使用python 3建立環境
pipenv install --two          #使用python 2建立環境
pipenv install --python 3.7.4 #更精確的指定版本
```

安裝成功
![](https://i.imgur.com/qR4s0iF.png)

目錄下若無Pipfile，Pipenv會預設產生一個Pipfile，Pipfile會幫你記錄所載的相依套件
![](https://i.imgur.com/sg6b91k.png)
若我下載requests這個套件
```python=
pipenv install requests
```
![](https://i.imgur.com/mldYzHa.png)
Pipfile內的packages會新增`requests`這項紀錄，Pipfile.lock也會有`requests`紀錄，同時記錄 requests 所需相依套件的版本，用來確保在任何地方透過這份檔案安裝套件都是相同的套件。

### 執行python
相關指令如下:

不進入虛擬環境中
```python=
pipenv run python test.py
```

進入虛擬環境中
```python=
pipenv shell
```
![](https://i.imgur.com/1GEQByM.png)

印出專案相依套件的圖
```python=
pipenv graph
```
![](https://i.imgur.com/dlQpuxL.png)

如果仍然需要導出 requirements.txt，可能是要部署至特定平台服務，如AWS
```python=
pipenv lock --requirements > requirements.txt
```
![](https://i.imgur.com/HMav9oV.png)
其他指令:
移除指定套件
```python=
pipenv uninstall requests
```
更新pipenv＆pip到最新版本
```python=
pipenv --upgrade
```

顯示虛擬環境根目錄資訊
```python=
pipenv --upgrade
```
`pipenv --where`

顯示虛擬環境執行檔所在目錄
```python=
pipenv --venv
```

顯示目前使用的python執行檔資訊(同which python)
```python=
pipenv --py
```

輸出相關環境變數
```python=
pipenv --envs
```
顯示版本
```python=
pipenv --version
```

[參考文章](https://medium.com/@johnnyellisjohnny/pipenv%E6%8C%87%E4%BB%A4%E5%A4%A7%E5%85%A8-6e4415cc8a15)
[參考文章](https://github.com/pypa/pipenv)
[圖片](data:image/jpeg;base64,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)
