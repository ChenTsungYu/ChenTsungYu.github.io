---
title: '網路概論入門'
catalog: true
date: 2019/07/14 20:23:10
tags: Internet
categories: Internet
---
<!-- toc -->
# 前言
這學期修了外系的一堂網路概論，利用這個機會做個複習用的筆記。

課堂主要在討論現今網路的標準，採用的是TCP/IP及OSI的混合架構

以下做個簡單的整理:
<!--more--> 
由最下層開始排序:

## 第一層: 實體層(Physical layer)

採用實體設備，並用**2進制**做數據傳輸，實體層需規範設備或傳輸線的規格，確保訊號傳輸穩定。 常見設備: 網路線、集線器(Hub)

## 第二層: 數據鏈接層(Data link layer)

在網路(Network)之間建立邏輯連結，並在傳輸過程做流量控制、錯誤偵測，將實體層的訊號封裝，稱作Data Frame。常見例子: 網路卡地址(MAC Address)、Switch

## 第三層: 網絡層(Internet layer)

將IP、資料組成封包，並決定數據封包要經過哪些router或switch。例子: Router、switch、ADSL

## 第四層: 傳輸層(Transport layer)

進行點對點的處理，進行傳輸時會先將較大的資料切割成多個適合傳輸的封包(packet)，除了偵測錯誤之外，更重要的是，他會進行**錯誤更正** 這是傳輸層才會有的，只要錯一個bit，資料就會整個砍掉，重新傳輸。 主要協定: TCP、UTP

## 第五層: 應用層(Application layer)

處理應用程式，提供users網路服務。 常見協定有: http、smtp、ftp 例子: e-mail、文件傳輸、數據加密

## TCP/IP 的遞送原理:

1.將來源IP和目的IP分別與子網路遮罩(Subnet Mask)進行AND運算

2.比較AND運算結果:

a. 相同: 透過LAN的方式傳送 原因: **來源和目的IP在同一子網路**

b. 不相同: 透過WAN傳送 原因：**目的IP不在本地網段**

一些名詞解釋：

### 路由器router(又做gateway):

將多個區域網路做串聯的裝置

### 廣域網路(Wide Area Network, WAN)

跨區域型的計算機網路的集合，連接多個網路節點，大部分都是跨越一個省、市，或是國家。

其中WAN包含大小不同的子網，這些子網可以是LAN或小型WAN

### 區域網路(Local Area Network, LAN)

某區域內的多台計算機網路的集合，單一個網路節點，是封閉型的，例如公司內部的區域網路、學校網路

生活實例：一家大型公司的總公司在美國，分公司分佈各地，若將所有分公司網路連接一起，一個分公司表一個區域網路，整個公司網路表一個廣域網路

### 無線區域網(Wireless LAN , WLAN):

用電磁波在空氣發送和接收數據，不須網路線 例子： WIFI

### 那Router接WAN的口和LAN的口有何區別？

WAN：接外部IP address 轉發來自內部的LAN發出的IP封包

LAN: 接內部IP address 內部為switch，可不接WAN

網路核心由互相連結成網狀的router所組成，資料在網路中傳送的方式分為3種:

## Circuit Switching( 線路交換)

在兩個通訊的端點之間建立實體線路連線。一旦建立兩端之間的連線後， 佔用線路並傳輸資料(即他人無法使用)。直到通信結束之後，這條專用路徑才停止使用，並讓出供他人繼續使用。目前的電話與電報交換系統就是使用這種技術。

### 特色：在傳輸過程中，傳輸線路不能分享給其它節點(node)使用，即頻寬不共用。

優點： 傳輸速度快延遲小。 不會產生線路衝突，錯誤率低。

缺點： 需花時建立線路連線。 因需等待傳輸完成才會釋放線路，容易形成 佔線而浪費資源。

## 訊息交換(Message Switching)

可視線路的忙碌狀況選擇不同的路徑來傳送 資料，不用建立專用線路。其中傳遞的資料包含**來源位址與目的地位址**， 網路中間裝置會將訊息先儲存再傳送出去。

優點： **每個節點都會檢查資料是否完整**，可降低傳 輸的錯誤率。 整體線路的使用率提升。

缺點： 當傳輸的資料量龐大時，會長時間佔用所選 擇的傳輸路徑，造成該段線路出現壅塞情形。

![](https://cdn-images-1.medium.com/max/2000/1*3pM60zruS01dkk5mprKlgA.png)

## **分封交換(Packet Switching)**

先將欲**傳遞的訊息分割成許多大小固定的小封包**，其中包含目的地的「位址」。 網路節點可依封包所指定的目的位址來決定傳輸路徑，**傳送至目的地後重新組合**，是世界上網際網路通訊、數據和語音通訊中最重要的基礎。

再舉個例子，好比今天在一條網路的高速公路(共用的頻寬)上，一個一個的packet可以同時在網路上進行傳輸。

優點： 封包資料量小，傳輸快速可避免壅塞，具有 Message Switching與Circuit Switching 技術的優點。

缺點： 封包不會計算所有路徑的節點(node)，只管傳遞給下一個節點，故不會按順序送達，接收端需花時間重整資料。

![](https://cdn-images-1.medium.com/max/2000/1*RqmvS39gIYXnDqipFFJbvA.png)

## 網際網路一些名詞:

## IPv4:

IPv4的ip共32個bit, 分成NetID 與 HostID。**Network Mask**即所謂的網路遮罩。

網路遮罩的最主要用途在於子網路（Subnetwork）的切割，並使電腦在彼此建立通訊管道之前，可先行判斷通訊對象是否可 直接連通（Directly Reachable），再決定是否須轉送服務。 因為傳統網段的切割方式會造成ip浪費, 故發展以HostID給NetID以增加NetMask的方法稱為SubNet。

## IPv6:

IPv6的是出現主要是為了解決可用的IPv4 位址將會不夠用的問題。因為原來的網路位址設計方法並不能提供給全球網路使用者足夠的地址空間。 IPv6是一個長度為 128 位元的識別名稱，比IPv4又在更長。

為了解決IP Address不夠的問題，除了未來轉用IPv6外，還有兩種主要方式:

## 網路位址轉換(NAT,Network Address Translation)

字面上的意思是『網路位址的傳送』，他主要的功能就是在提供內部私有網路的電腦之頻寬分享，如一般常聽到的"IP分享器"。

每個裝置若要連上網就需要一組公共IP，假設今天公司內部有20台電腦，如果買台電腦都配一組公共IP，要相當一筆花費!站在公司角度，希望只要一組IP就能讓公司所有電腦都能上網，那就需要一台IP分享器，並註冊一組公共IP，IP分享器會配給每個公司電腦一組虛擬IP(通常看到192.168開頭的就是了)，形成一個內部網路。

公司電腦今天要上網時，雖然在內部是虛擬IP，但是透過NAT轉址，連到外網時會變成註冊的公共IP(即所有電腦連出去都是同一組公共IP)，從外部網站來看，就是一組公司的公共IP。 鳥哥的[這篇文章](http://linux.vbird.org/linux_server/0250simple_firewall/0320nat.php#NAT_what)有更詳細的解說。

## 動態主機組態協定(DHCPD,Dynamic Host Configuration Protocol)

為了節省子網路中 IP 位址的使用量，可以設定網路中的一台主機做為指揮中心，稱為「動態主機組態協定伺服器（DHCP server）」

DHCP server負責動態分配 IP 位址、 子網路遮罩（Subnet mask）、預設閘道器（Default gateway）、 DNS 伺服器的 IP 。 當網路中有任何一台電腦要連線時，才向 DHCP server要求一個 IP 位址， DHCP 伺服器會從資料庫中找出一個目前尚未被使用的 IP 位址提供給該電腦使用，使用完畢後電腦再將這個 IP 位址還給 DHCP 伺服器，提供給其他上線的電腦使用，所以說IP是會不停變動的!相關文章參考[這篇](https://www.stockfeel.com.tw/dhcp%E4%BC%BA%E6%9C%8D%E5%99%A8%E6%98%AF%E4%BB%80%E9%BA%BC%EF%BC%9F%E5%A6%82%E4%BD%95%E9%81%8B%E7%94%A8%EF%BC%9F/)。

## 網域名稱系統（DNS,Domain Name System）

一般人使用網址名稱(Domain Name)來連接網路主要是為了方便人類記憶，可以從Domain Name猜出可能是什麼單位，或是網站大致內容。

DNS最主要的功能是將造訪的網站域名轉成難記的IP位置，因為電腦只看得懂數字，所以需要透過DNS Server進行查詢，查到和電腦溝通的一連串數字(IP Address)，並回傳給電腦。

打個比方，今天小明要撥電話給小華，小明不可能只對電話呼叫對方名字就撥通電話，而是撥小華的電話號碼(同IP Address)，撥出電話後，配對撥出的號碼，才能找到小華(域名)這個人。
