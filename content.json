{"pages":[{"title":"åˆ†é¡","text":"","link":"categories/index.html"},{"title":"æ¨™ç±¤","text":"","link":"tags/index.html"},{"title":"æ‰€æœ‰æ–‡ç« ","text":"","link":"all-archives/index.html"},{"title":"","text":"Hi there ğŸ‘‹ You are now reaching Tomâ€™s profile. ğŸ¤“ğŸš€ A Software Engineer.ğŸŒ± Python ğŸ , JavaScript, AWS, K8sğŸ”­ Backend, DevOps Connect with me ğŸ“¬","link":"about/index.html"}],"posts":[{"title":"[Canvas] å…¥é–€","text":"Go!ç‰¹æ€§ å¯è‡ªç”±ç¹ªè£½å…ƒä»¶å€åŸŸ å¯æ§åˆ¶æ¯åƒç´ çš„é¡è‰²èˆ‡ç¹ªè£½ æœ‰è¼ƒé«˜çš„æ“æ§åº¦ å¯å‹•æ…‹æ”¹å¯«åœ–ç‰‡ æŒæ¡è¦é» ç¹ªè£½åœ–å½¢ å‘é‡æ¦‚å¿µ ä¸‰è§’å‡½æ•¸ ç‰©ä»¶å°å‘é–‹ç™¼ åƒç´ åœ¨ä¸€å€‹å›ºå®šå¯¬åº¦å’Œé«˜åº¦çš„åœ–ç‰‡å…§ï¼Œåˆ‡å‰²æˆä¸€å€‹å€‹çš„å°æ ¼å­ï¼Œcanvaså¯åˆ†åˆ¥æŒ‡å®šæ¯å€‹æ ¼å­çš„é¡è‰² å¦‚ä½•çŸ¥é“åœ¨é‚£äº›åƒç´ åšæ”¹è®Šï¼Ÿé€éé»åº§æ¨™çš„æ–¹å¼å®šä½ï¼Œæ ¹æ“šåŸé»æŒ‡å®šå‚ç›´ï¼ˆYè»¸ï¼‰åŠæ©«å‘ï¼ˆXè»¸ï¼‰åç§»ï¼Œç¢ºèªä½ç½® Canvasçš„åæ¨™ç³»æ–¹å‘ åŸé»è¨­ç½®åœ¨å·¦ä¸Šè§’ è§’åº¦ç‚ºé€†æ™‚é˜ åŸé»å¾€ä¸‹å»¶ä¼¸ç‚ºï¼‚Yè»¸ï¼‚ 0åº¦è¡¨Xè»¸æ–¹å‘ 90åº¦è¡¨Yè»¸æ–¹å‘ å¦‚ä½•ä½¿ç”¨Canvasä»¥ç¹ªå‡ºä¸€å€‹å¡«æ»¿é»‘è‰²çš„ä¸‰è§’å½¢ç‚ºä¾‹ï¼š åœ¨HTMLåŠ ä¸Šcanvas#mycanvasï¼ŒåŠ ä¸ŠCanvasæ¨™ç±¤å¾Œè¨­ç½®idï¼Œæ–¹ä¾¿æŠ“å–ã€‚ åœ¨JSä¸­: 1234567891011121314151617const canvas = document.getElementById('mycanvas');const ctx = canvas.getContext(&quot;2d&quot;); // æŒ‡å®šç¹ªåœ–ä»‹é¢ï¼Œåœ¨2Dä¸Šç¹ªåœ– // è¨­å®šç•«å¸ƒå°ºå¯¸ï¼Œå°‡ç•«å¸ƒå°ºå¯¸è¨­ç‚ºç­‰åŒè¦–çª—å°ºå¯¸å¤§å°ï¼Œæ’æ»¿æ•´å€‹è¦–çª—canvas.width = window.innerWidth;canvas.height = window.innerHeight; // èµ·å§‹é»åº§æ¨™(50,50)ï¼Œç¹ªè£½ç›´ç·šé€£åˆ° ctx.beginPath(); // é–‹å§‹é€²è¡Œç¹ªåœ– ctx.moveTo(50,50); ctx.lineTo(100,100); ctx.lineTo(250,20); ctx.closePath();// é—œé–‰ç¹ªè£½ ctx.fillStyle = &quot;black&quot;; // ç¹ªè£½é¡è‰² ctx.fill(); // é€²è¡Œå¡«æ»¿ç¹ªè£½ åŸºç¤åœ–å½¢ å¡«æ»¿çŸ©å½¢ï¼šfillRect(x,y,w,h) ç¹ªè£½æ¡†ç·šçŸ©å½¢strokeRect(x,y,w,h) æ¸…é™¤çŸ©å½¢ç¯„åœclearRect(x,y,w,h) è¨­ç½®æ¡†ç·šçš„å¯¬åº¦ lineWidth è¨­ç½®åœ–å½¢é€æ˜åº¦ globalAlpha x,yè¡¨åº§æ¨™ä½ç½®ï¼Œw,hè¡¨å¯¬å’Œé«˜è·¯å¾‘ç¹ªåœ–ä¸Šè¿°çš„åŸºç¤åœ–å½¢åªèƒ½ç¹ªå‡ºçŸ©å½¢ï¼Œè‹¥è¦ç•«å‡ºå…¶ä»–åœ–å½¢ï¼Œå¯æ¡ç”¨è·¯å¾‘ç¹ªåœ–çš„æ–¹å¼å®Œæˆã€‚ é–‹å§‹ä¸€å€‹æ–°çš„è·¯å¾‘ï¼Œçµ¦äºˆé»åº§æ¨™ï¼Œåšé€£ç·šæ“ä½œï¼Œå†æŒ‡å®šå¡«è‰²æˆ–ç·šæ¢é¡è‰²ï¼Œæœ€å¾Œå°‡è·¯å¾‘å¡«è‰²æç¹ªå‡ºä¾†ã€‚ è·¯å¾‘çš„é–‹å§‹ï¼†é—œé–‰ï¼šbeginPathï¼†closePath ç§»å‹•ï¼†ç•«ç·š: moveToã€lineToã€arc(å¼§å½¢)â€¦ æŒ‡å®šå¡«è‰²æˆ–ç·šæ¢é¡è‰²:fillStyleã€lineStyle å°‡è·¯å¾‘å¡«è‰²&amp;æç¹ªå‡ºä¾†: stroke(æç¹ªè·¯å¾‘ç·šæ¢)ã€fill(å°‡åœ–æ¡ˆå¡«æ»¿) åœ“å½¢çš„è·¯å¾‘ arc(x,y,r,start Angle,end Angle,state)x,y ç‚ºåœ“å¿ƒåº§æ¨™ï¼Œrç‚ºåŠå¾‘ï¼Œstateç‚ºç•«å¼§æ–¹å‘: trueè¡¨é€†æ™‚é‡ï¼› falseè¡¨é †æ™‚é‡(é è¨­) è¨ˆç®—å¼§åº¦ï¼š0-360å¿…é ˆå¯« 0ï½2*Math.PI è§’åº¦æ˜¯ ï¼‚é€†é †æ™‚é‡é¸ç”±ä¸‹æ–¹é–‹å§‹æ—‹è½‰ï¼‚ è‰²å½©ç³»çµ± rgb rgba hsl(å½©åº¦,é£½å’Œåº¦,äº®åº¦)ï¼Œæ­£å¸¸å€¼:(50%,50%) hsla(å½©åº¦,é£½å’Œåº¦,äº®åº¦,é€æ˜åº¦) æ™‚é–“å‡½æ•¸ï¼†å‹•ç•« setInterval(updateFn,time) requestAnimationFrame(update):çµ¦å®šä¸€å€‹å‡½æ•¸å¾Œï¼Œè‡ªå‹•åˆ¤æ–·ä½•æ™‚è©²æ›´æ–°ç•«é¢ï¼Œæå‡å‹•ç•«æ•ˆèƒ½ã€‚ æ›´æ–°å½±æ ¼:ä½¿ç”¨clearRectæˆ–fillRectè¦†è“‹ä¸Šæ¬¡ç¹ªåœ–çš„åœ–å½¢","link":"2019/07/14/Canvas/Canvas/"},{"title":"[Canvas] åº§æ¨™ç³»æ“ä½œ","text":"åæ¨™ç³»è½‰ç§»ç¹ªè£½åŒæ¨£çš„åœ–å½¢æœ‰ç›¸åŒçš„åº§æ¨™ï¼Œæˆ‘å€‘å¯ä»¥é€éåº§æ¨™ç³»è½‰æ›ï¼Œç¹ªè£½åœ¨ä¸åŒçš„ä½ç½®/è§’åº¦ã€‚ è½‰ç§»æ–¹æ³• Translate(x,y): ç›¸å°ç•¶ä¸‹ä½ç½®åç§»(x,y) Rotate(deg): ä»¥ç•¶ä¸‹ä½ç½®ç‚ºä¸­å¿ƒ(ç›¸å°æ–¼åŸé»)æ—‹è½‰çš„è§’åº¦(deg) Scale(x,y): ä»¥ç•¶ä¸‹ä½ç½®ç‚ºä¸­å¿ƒ(ç›¸å°æ–¼åŸé»)ä½œç¸®æ”¾(x,y) ç‹€æ…‹ä¿å­˜&amp;é‚„åŸ save(): ä¿å­˜ç•¶ä¸‹ç‹€æ…‹ restore(): é‚„åŸä¸Šä¸€å€‹å„²å­˜ç‹€æ…‹ åŸå‰‡: æ¡è³‡æ–™çµæ§‹çš„å…ˆé€²å¾Œå‡º(stack)ï¼Œå³æœ€å…ˆå„²å­˜çš„ç‹€æ…‹ï¼Œé‚„åŸé †åºæ˜¯æ’æœ€å¾Œã€‚ åº§æ¨™è½‰æ›åœ¨ç¹ªè£½ç‰©ä»¶çš„æ‡‰ç”¨ å› åº§æ¨™é‡ç½®ï¼Œè¼ƒå®¹æ˜“æŒ‡å®š ç”¨ç›¸å°ä½ç½®å»æ€è€ƒæœƒæ¯”è¼ƒç›´è¦º å¯åœ¨ç•¶å‰åº§æ¨™åšé¡å¤–ç¹ªè£½ setTransform (ç›´æ¥è¨­å®šçŸ©é™£) A Xç¸®æ”¾ C Yå‚¾æ–œ E Xåç§» B Xå‚¾æ–œ D Yç¸®æ”¾ D Yåç§» è‹¥è¦é€²è¡Œé‡è¨­ï¼Œè¨­å®š(1,0,0,1,0,0)ï¼Œå°‡x,yçš„ç¸®æ”¾è¨­ç‚º1å€ï¼Œå…¶é¤˜è¨­ç‚º0ã€‚ ç›¸å°é—œä¿‚çš„ç¹ªè£½å‡è¨­ä»Šå¤©è¦ç¹ªè£½ä¸€é€£ä¸²çš„çŸ©å½¢ï¼Œå¯æ¡ä»¥ä¸‹æ–¹å¼: 123456789ctx.save(); // å„²å­˜åˆå§‹ç‹€æ…‹for(let i=0; i&lt;7; i++){ ctx.fillRect(0,0,50,50); ctx.translate(50,0);}ctx.restore(); // é‚„åŸæˆåˆå§‹ç‹€æ…‹ ç›¸å°è§’åº¦çš„ç¹ªè£½æ¯éš”45åº¦ï¼Œç¹ªè£½å¤šå€‹åœ“å½¢ç’°ç¹åœ“å¿ƒã€‚ 123456789101112ctx.save(); // å„²å­˜åˆå§‹ç‹€æ…‹for(let i=0; i&lt;8; i++){ ctx.beginPath(); // ç¹ªè£½åœ“å½¢ ctx.arc(50, 0, 10 ,0 ,Math.PI*2);} ctx.fill(); ctx.rotate(Math.PI / 4);ctx.restore(); // é‚„åŸæˆåˆå§‹ç‹€æ…‹","link":"2019/07/14/Canvas/Canvas(coordinate)/"},{"title":"Git&#x2F;Githubæ“ä½œ","text":"å‰è¨€æœ¬ç¯‡ç­†è¨˜å¦‚ä½•ç”¨Gitä¸Šå‚³è‡ªå·±çš„å°ˆæ¡ˆåˆ°githubä¸Šé¢ã€‚ ä¸‹è¼‰é¦–å…ˆï¼Œå…ˆåœ¨æœå°‹å¼•æ“è¼¸å…¥Gitæ‰¾åˆ°å®˜ç¶²ï¼Œé€²å…¥å®˜ç¶²å¾Œæ»¾è¼ªå¾€ä¸‹æ»‘å‹•æœƒçœ‹åˆ°é›»è…¦å¯å®‰è£ç‰ˆæœ¬ã€‚ Win10ç‚ºä¾‹ é»é¸ä¸‹è¼‰å®‰è£å¾Œå°±å¯ä»¥åˆ°â€é–‹å§‹â€å…§æ‰¾å°‹æœ‰ç„¡gitçš„æª”æ¡ˆï¼Œæ¥è‘—æ‰“é–‹å‘½ä»¤æç¤ºå­—å…ƒ(æˆ–ä½œçµ‚ç«¯æ©Ÿ)ï¼Œåœ¨â€é–‹å§‹â€çš„åœ°æ–¹æœå°‹ cmd ï¼Œæ‰“é–‹ä»‹é¢å¾Œè¼¸å…¥: git â€“version å¯ä»¥çœ‹åˆ°ç›®å‰ä¸‹è¼‰çš„ç‰ˆæœ¬ã€‚ æ¥ä¸‹ä¾†é€²è¡ŒGitæœ¬æ©Ÿç«¯åŸºæœ¬æ“ä½œ:å…ˆåˆ°è‡ªå·±çš„å°ˆæ¡ˆå»ºç«‹è³‡æ–™å¤¾ï¼Œä¾‹å¦‚æˆ‘åœ¨Dæ§½å»ºç«‹è³‡æ–™å¤¾åç‚º: project1ï¼Œå›åˆ°å‘½ä»¤æç¤ºå­—å…ƒè¨­å®šæª”æ¡ˆè·¯å¾‘ï¼Œä»Šå¤©æˆ‘å°‡å°ˆæ¡ˆè³‡æ–™å¤¾æ”¾Dæ§½ï¼Œé‚£æˆ‘çš„è·¯å¾‘å°±æ˜¯ d:è¡¨ç¤ºè·¯å¾‘åˆ‡æ›è‡³Dæ§½ï¼Œ cd å¾Œæ¥è³‡æ–™å¤¾è·¯å¾‘åç¨±ã€‚ åŸºæœ¬æŒ‡ä»¤å¦‚ä¸‹:git init: åˆå§‹åŒ– Git Repositorygit status: è§€å¯ŸRepositoryæª”æ¡ˆè¿½è¹¤ç‹€æ³git add æª”å : å°‡æª”æ¡ˆåŠ å…¥è¿½è¹¤æ¸…å–®ï¼Œå¦‚: git add .git commit -m â€œæ­¤è™•å¡«ç‰ˆæœ¬è¨Šæ¯â€: å»ºä¸€çµ„ç‰ˆæœ¬æ›´æ–°è¨Šæ¯git branch: æŸ¥çœ‹åˆ†æ”¯(branch) : é è¨­ç‚º mastergit remote -v: æŸ¥è©¢é ç«¯çš„repositorygit log: æŸ¥è©¢æ›´æ”¹ç´€éŒ„git remote add é›²ç«¯åç¨±(è‡ªå·±å–) ç¶²å€ :å°‡æœ¬æ©Ÿç«¯å’ŒGithubé›²ç«¯ä¸Šçš„å°ˆæ¡ˆç›¸é€£git push é ç«¯ç©ºé–“åç¨± é ç«¯ç©ºé–“çš„åˆ†æ”¯(åç¨±): å°‡æœ¬æ©Ÿç«¯çš„è³‡æ–™ä¸Šå‚³(push) åˆ°é›²ç«¯git clone é ç«¯ç©ºé–“ç¶²å€(cloneé‚£é‚Š) æœ¬æ©Ÿè³‡æ–™å¤¾åç¨±: ä¸‹è¼‰/è¤‡è£½(clone)Githubé›²ç«¯å°ˆæ¡ˆåˆ°æœ¬æ©Ÿç«¯é–‹å§‹é€²è¡Œå¯¦ä½œ:è¼¸å…¥æŒ‡ä»¤: git init é€²è¡Œåˆå§‹åŒ–ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹ç•«é¢ï¼Œè¦æ³¨æ„çš„é»åœ¨windowsä¸‹ç³»çµ±é è¨­æœƒéš±è—è³‡æ–™å¤¾æª”æ¡ˆã€‚ é€éè³‡æ–™å¤¾ä¸Šæ–¹å·¥å…·åˆ—çš„éƒ¨åˆ†å¯ä»¥æ‰¾åˆ°â€æª¢è¦–â€ï¼Œé»æ“Šå¾Œæ‰¾åˆ°éš±è—é …ç›®é€²è¡Œå‹¾é¸ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘å€‘éš±è—çš„gitè³‡æ–™å¤¾ã€‚ éš±è—çš„è³‡æ–™å¤¾æµ®ç¾äº†! è¼¸å…¥: git status è§€å¯ŸRepositoryæª”æ¡ˆè¿½è¹¤ç‹€æ³ã€‚ å¯ä»¥çœ‹è¦‹é è¨­çš„åˆ†æ”¯(branch)æ˜¯masterã€‚ å°‡æˆ‘çš„å°ˆæ¡ˆæ”¾å…¥è©²è³‡æ–™å¤¾å…§ æˆ‘å€‘åœ¨å‘½ä»¤æç¤ºå­—å…ƒè¼¸å…¥ git status ä¾†çœ‹ç™¼ç”Ÿä»€éº¼äº‹ è·³å‡ºæˆ‘å€‘å‰›å‰›æ–°å¢æª”æ¡ˆçš„ç›¸é—œè¨Šæ¯ å¦å¤–åªè¦ä¿®æ”¹éå°ˆæ¡ˆçš„ç¨‹å¼ç¢¼ä¹Ÿæœƒè¢«è¨˜éŒ„ã€‚ è¼¸å…¥ git add . å°‡æª”æ¡ˆåŠ å…¥è¿½è¹¤æ¸…å–®ï¼Œä¸¦è¼¸å…¥git status æŸ¥çœ‹ç‹€æ…‹ã€‚ é¡¯ç¤ºæ›´æ–°è¨Šæ¯ è¼¸å…¥ git commit -m â€œæ­¤è™•å¡«ç‰ˆæœ¬è¨Šæ¯â€ å†è¼¸å…¥ä¸€æ¬¡ git statusï¼Œå¯ä»¥ç™¼ç¾è¨Šæ¯å·²ç¶“è¢«æ¸…ç©ºï¼Œä¹‹å‰çš„æ›´æ”¹ç´€éŒ„å·²ç¶“è¢«ä¿ç•™ï¼Œå¾ŒçºŒå¯ä»¥åœ¨githubä¸Šçœ‹åˆ°ã€‚ git branchæŒ‡ä»¤å¯ä»¥çœ‹åˆ°åˆ†æ”¯åç¨± è¨»å†Šä¸€å€‹githubå¸³è™Ÿï¼Œç™»å…¥å¾Œçœ‹åˆ°ç•«é¢å³ä¸Šè§’ é»é¸â€Your repositoriesâ€ é»å…¥ä¹‹å¾Œçœ‹åˆ°ç•«é¢ä¸­é–“æœ‰å€‹ç¶ è‰²çš„â€Newâ€æŒ‰éˆ•ï¼Œå–ä½ è¦çš„repositoryåç¨±å†é»é¸creat repositoryã€‚ å‰µå»ºå®Œæˆæœƒåœ¨ç•«é¢çœ‹åˆ°è‡ªå·±å»ºç«‹çš„repositoryåç¨±ï¼Œé»é¸å¾Œé€²å…¥ç•«é¢ã€‚ çœ‹åˆ°è‡ªå·±çš„ç¶²å€è¤‡è£½èµ·ä¾† æ¥ä¸‹ä¾†è¦é€²è¡Œé ç«¯æ“ä½œè¼¸å…¥ git remote -v é€²è¡Œé ç«¯æŸ¥è©¢ï¼Œå› ç‚ºé‚„æ²’é€£æ¥åˆ°é ç«¯ï¼Œæ‰€ä»¥æ˜¯ç©ºçš„ï¼Œ å†ä¾†è¼¸å…¥ git remote add name url (nameå»ºç«‹è‡ªå·±çš„é ç«¯ç©ºé–“åç¨±;urlç‚ºé ç«¯åœ°å€ï¼ŒæŠŠå‰›å‰›è¤‡è£½çš„ç¶²å€è²¼ä¸Šå³å¯) è¼¸å…¥git remote -v é€²è¡ŒæŸ¥è©¢ã€‚ è¼¸å…¥ git push name branchName(name é ç«¯ç©ºé–“åç¨±; branchName é ç«¯ç©ºé–“çš„åˆ†æ”¯åç¨±) é ç«¯å‚³è¼¸æˆåŠŸ! é¤Šæˆç¢ºèªçš„å¥½ç¿’æ…£: git status å›åˆ°githubä¸Šå‰›å‰›æ–°å¢repositoryçš„åœ°æ–¹é€²è¡Œé é¢é‡æ•´ï¼Œå¦å¤–åœ¨ç•«é¢å¯ä»¥çœ‹åˆ°æˆ‘å€‘åˆæ¬¡æ–°å¢çš„commit åç‚º â€œfirst versionâ€ã€‚ åˆ·æ–°å¾ŒæˆåŠŸè¼‰å…¥! æœ€å¾Œæ˜¯å¯¦ä½œè¤‡è£½çš„éƒ¨åˆ†ï¼ŒæŠŠåˆ¥çš„å°ˆæ¡ˆè¤‡è£½(clone)ä¸‹ä¾†ã€‚ è¼¸å…¥ git clone é ç«¯ç©ºé–“ç¶²å€(cloneé‚£é‚Š) æœ¬æ©Ÿè³‡æ–™å¤¾åç¨± ä»¥æˆ‘ä¸‹è¼‰demoé€™å€‹repositoryç‚ºä¾‹ è¤‡è£½ä½ è¦çš„é ç«¯ç©ºé–“ç¶²å€ æ¥ä¸‹ä¾†è¦å°‡demoæ•´å€‹cloneåˆ°æˆ‘æœ¬æ©Ÿç«¯ï¼Œå‘½åç‚ºproject1çš„è³‡æ–™å¤¾ã€‚ cloneæˆåŠŸ! æŸ¥çœ‹æˆ‘çš„project1è³‡æ–™å¤¾æ˜¯ä¸æ˜¯æœ‰å¦ä¸€å€‹å«project1çš„è³‡æ–™å¤¾ã€‚ çµæŸ! ä»¥ä¸Šç‚ºä»Šæ—¥ç­†è¨˜ã€‚","link":"2019/07/14/Git/git_github/"},{"title":"[CSS] Flexbox æ’ç‰ˆ","text":"å‰è¨€é€™ç¯‡è¦è¨è«–çš„æ˜¯æ¯”è¼ƒæ–°å¼çš„æ’ç‰ˆ-FlexBoxFlexBoxç‚ºäº†é©æ‡‰ä¸åŒè¢å¹•å°ºå¯¸å’Œé¡¯ç¤ºè¨­å‚™è€Œç”Ÿçš„å¸ƒå±€æ¨¡å¼ã€‚ç¾åœ¨å› ç‚ºæ‰‹æ©Ÿæ™®åŠï¼Œä½¿ç”¨è€…å¤§å¤šç”¨æ‰‹æ©Ÿä¸Šç¶²ï¼Œç‚ºäº†æ”¹å–„ä½¿ç”¨è€…é«”é©—ï¼Œå¯«ç¶²é éœ€è¦è€ƒé‡åˆ°ç¶²é å‘ˆç¾åœ¨æ‰‹æ©Ÿä¸Šçš„æ’ç‰ˆæ–¹å¼ã€‚ Go! FlexBoxçš„ç‰¹å¾µ: é¦–å…ˆï¼Œè¦å…ˆå°‡FlexBoxåšåˆ†é¡ï¼Œ åˆ†ç‚ºå¤–å®¹å™¨å±¬æ€§(Container)èˆ‡å…§å…ƒä»¶å±¬æ€§(Items)ã€‚ å¤–å®¹å™¨(Container):è‹¥æƒ³åˆ‡æ›FlexBoxçš„æ’ç‰ˆæ¨¡å¼ï¼Œè¦åœ¨CSSæ¨£å¼å®£å‘Šdisplayï¼Œdisplayåˆ†ç‚ºå…©ç¨®ï¼š 1.display:** flex** ç‚ºå¡Šç´šå…ƒç´ ï¼Œä¼¼block ï¼’.display: inline-flex ç‚ºè¡Œå…§å¡Šå…ƒç´ ï¼Œä¼¼inline-block ä»¥ä¸‹æä¾›ç¯„ä¾‹: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;style&gt; * { margin: 0; padding: 0; } .box { max-width: 100%; border: 3px black solid; display:flex; } .item { width: 150px; text-align: center; padding: 1rem; font-size: 2rem; } .item:nth-of-type(1) { background: red; padding-bottom: 1rem; font-size: 2rem; } .item:nth-of-type(2) { background: yellow; padding-bottom: 5rem; font-size: 2rem; } .item:nth-of-type(3) { background: green; font-size: 2rem; } .item:nth-of-type(4) { background: blue; font-size: 2rem; } .item:nth-of-type(5) { background: pink; font-size: 2rem; } &lt;/style&gt; &lt;div class=&quot;box&quot;&gt; &lt;div class=&quot;item1 item&quot;&gt;item1&lt;/div&gt; &lt;div class=&quot;item2 item&quot;&gt;item2&lt;/div&gt; &lt;div class=&quot;item3 item&quot;&gt;item3&lt;/div&gt; &lt;div class=&quot;item4 item&quot;&gt;item4&lt;/div&gt; &lt;div class=&quot;item5 item&quot;&gt;item5&lt;/div&gt; &lt;/div&gt; ç•¶å¤–å±¤ç›’å­å®£å‘Šdisplayæ™‚ï¼Œè£¡é¢çš„ç›’å­æœƒè®Šæˆæ°´å¹³æ’åˆ—ã€‚ å¥½ï¼Œåˆ°é€™é‚Šæˆ‘å€‘éœ€è¦å…ˆç­è§£å¹¾ä»¶äº‹æƒ…ï¼š .box å·²ç¶“è®Šæˆäº† Flexbox Model æ’ç‰ˆæ¨¡å¼ï¼Œæœƒç›´æ¥å½±éŸ¿åˆ°å…¶ç¬¬ä¸€å±¤å­å…ƒç´ ( item)çš„æ’ç‰ˆè¡Œç‚ºã€‚ .box æ˜¯ Flexbox Model ä¸­çš„ Flex containerã€‚ item æ˜¯ Flexbox Model ä¸­çš„ Flex item(s)ï¼Œå› ç‚ºæ˜¯ .boxçš„ç¬¬ä¸€å±¤å­å…ƒç´ ã€‚ æ­¤ç¯„ä¾‹é©ç”¨æ–¼ä»»ä½•çˆ¶å­å…ƒç´ ï¼Œä¸åƒ…é™æ–¼ ulã€liï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨ä»»ä½• div æˆ–å…¶å®ƒå…ƒç´ ã€‚ Flex Container ç›¸é—œå±¬æ€§ï¼Œæ­¤ä¸Šåœ–ç¨‹å¼ç¢¼ç‚ºä¾‹å…±æœ‰å…­ç¨®å±¬æ€§å¯ä»¥è¨­å®šï¼Œåœ¨è¨˜å±¬æ€§å‰å¿…é ˆéœ€å…ˆäº†è§£FlexBoxçš„å…©å€‹è»¸ç·šã€‚ ç•¶ .box è¨­å®šç‚º display:flex **æ™‚ï¼Œå°±ä»£è¡¨æœƒæœ‰é€™å…©å€‹éš±å½¢çš„è»¸ï¼ŒMain Axis** è¡¨ç¤ºå¾å·¦è‡³å³ï¼›Cross Axis **è¡¨ç¤ºå¾ä¸Šè‡³ä¸‹**ã€‚ ç•¶** flex-direction** è¨­å®šç‚ºä»¥ä¸‹çš„å€¼æ™‚ï¼Œå°±æœƒå½±éŸ¿åˆ°ç¬¬ä¸€å±¤å­å…ƒç´ (Flex Items)çš„æ’åˆ—æ–¹å‘ï¼š rowï¼šç‚ºé è¨­å€¼ï¼Œä»£è¡¨ Flex Items æœƒå¾å·¦è‡³å³ä¾åºæ’åˆ—ã€‚ columnï¼šä»£è¡¨ Flex Items æœƒå¾ä¸Šè‡³ä¸‹ä¾åºæ’åˆ—ã€‚ row-reverseï¼šä»£è¡¨ Flex Items æœƒå¾å³è‡³å·¦ä¾åºæ’åˆ—ã€‚ column-reverseï¼šä»£è¡¨ Flex Items æœƒå¾ä¸‹è‡³ä¸Šä¾åºæ’åˆ—ã€‚ ç¨‹å¼ç¢¼(å‰å››å€‹): 1234.box{ // ç¬¬ä¸€ç¨® flex-direction: row || column || row-reverse || column-reverse;} flex-direction: row-reverse; flex-direction: column flex-direction: column-reverse 1234.box{ /* ç¬¬2ç¨®*/ flex-wrap: wrap || no-wrap || wrap-reverse;} èªªæ˜ï¼š wrapï¼šä»£è¡¨ç•¶ Flex Items æ•¸é‡éå¤šï¼Œå¤šåˆ° Flex Container è£ä¸ä¸‹çš„æ™‚å€™ï¼Œæœƒæ–·è¡Œï¼Œæœƒæ–·è¡Œçš„æ–¹å‘æœƒæ˜¯å¾€ä¸‹æ–·è¡Œã€‚ flex-wrap: wrap no-wrapï¼šæ­¤ç‚ºé è¨­å€¼ï¼Œä»£è¡¨å³ä½¿ Flex Items æ•¸é‡éå¤šï¼Œä¾ç„¶ä¸æœƒæ–·è¡Œï¼ŒFlex Container éƒ½æœƒè©¦åœ–å»åŒ…å«é€™äº› Flex Items åœ¨åŒä¸€åˆ—ã€‚ flex-wrap: nowrap wrap-reverseï¼šä»£è¡¨ç•¶ Flex Items æ•¸é‡éå¤šï¼Œå¤šåˆ° Flex Container è£ä¸ä¸‹çš„æ™‚å€™ï¼Œæœƒæ–·è¡Œï¼Œæœƒæ–·è¡Œçš„æ–¹å‘æœƒæ˜¯å¾€ä¸Šæ–·è¡Œã€‚ flex-wrap: wrap-reverse flex-flow å–®ç´”åªæ˜¯å€‹ flex-direction å’Œ flex-wrap åŒæ™‚ç”¨çš„ç¸®å¯« 1234.box{/* ç¬¬ä¸‰ç¨®*/ flex-flow: &lt;flex-direction&gt; &lt;flex-wrap&gt;;} justify-content æ˜¯ç”¨ä¾†å®šç¾© Flex Items è©²å¦‚ä½•åœ¨ Main Axis æ’åˆ—ã€‚ 1234.box{/* ç¬¬å››ç¨® */ justify-content: flex-start || flex-end || center || space-between || space-around || space-evenly ;} flex-startï¼šæ˜¯é è¨­å€¼ã€‚ä»£è¡¨ Flex Items å¾ Main Axis çš„èµ·é»é–‹å§‹æ’åˆ—ã€‚ flex-endï¼šä»£è¡¨ Flex Items æ•´å€‹çš„çµå°¾è¦å¾€ Main Axis çš„å°¾ç«¯è²¼é½Šã€‚ centerï¼šitemé‡å° Main Axis ä¾†ç½®ä¸­ã€‚ space-betweenï¼š å„å€‹ Flex Item å»¶è‘— Main Axis å¹³å‡åˆ†æ•£ï¼Œä½† Flex Item ä¹‹é–“æœƒä¿ç•™ç›¸åŒå¤§å°çš„ç©ºé–“ï¼Œé¦–ã€å°¾éƒ½è¦è²¼ç·Šé‚Šç•Œã€‚ space-aroundï¼šå„å€‹ Flex Item å»¶è‘— Main Axis å¹³å‡åˆ†æ•£ï¼Œä½†æ¯ä¸€å€‹ Flex Item å‘¨åœéƒ½è¦ä¿æŒç›¸åŒçš„è·é›¢ï¼Œåœ¨ä¸è¨­marginä¸‹ï¼Œé¦–ã€å°¾ä¸è²¼é‚Šç•Œï¼Œä¸”è·é›¢é‚Šç•Œä¿ç•™çš„ç©ºé–“å¤§å°ç›¸ç­‰ã€‚ space-evenlyï¼šæ¯å€‹å°æ–¹å¡Šä¹‹é–“å’Œèˆ‡çˆ¶å®¹å™¨ä¹‹é–“æ“æœ‰ç›¸åŒçš„é–“éš”ã€‚ space-between &amp; space-around &amp; space-evenlyå€åˆ¥ space-betweenï¼šæ¯å€‹å°æ–¹å¡Šæ“æœ‰ç›¸åŒçš„é–“éš”ï¼Œä½†èˆ‡çˆ¶å®¹å™¨ä¹‹é–“æ²’æœ‰é–“éš”ã€‚ space-aroundï¼šæ¯å€‹å°æ–¹å¡Šä¹‹é–“èˆ‡çˆ¶å®¹å™¨æœ‰é–“éš”ï¼Œä½†å°æ–¹å¡Šèˆ‡çˆ¶å®¹å™¨ä¹‹é–“çš„é–“éš”æ˜¯å°æ–¹å¡Šå½¼æ­¤é–“éš”çš„ä¸€åŠã€‚ å‡è¨­ä»Šå¤©èˆ‡çˆ¶å®¹å™¨çš„é–“éš”ç‚ºXï¼Œé‚£å°æ–¹æ ¼ä¹‹é–“çš„é–“éš”å°±æ˜¯2Xã€‚ space-evenlyï¼šæ¯å€‹å°æ–¹å¡Šä¹‹é–“å’Œèˆ‡çˆ¶å®¹å™¨ä¹‹é–“æ“æœ‰ç›¸åŒçš„é–“éš”ã€‚å‡è¨­ä»Šå¤©èˆ‡çˆ¶å®¹å™¨çš„é–“éš”ç‚ºXï¼Œé‚£å°æ–¹æ ¼ä¹‹é–“çš„é–“éš”ä»ç‚ºXã€‚ ä¾†çœ‹çœ‹å¯¦ä½œ: justify-content: flex-start justify-content: flex-end justify-content: center justify-content: space-between justify-content: space-around align-items :èˆ‡ justify-content éå¸¸ç›¸ä¼¼ï¼Œä½†å®šç¾© Flex Items è©²å¦‚ä½•åœ¨ Cross Axis æ’åˆ— flex-startï¼š è¡¨Flex Items é«˜åº¦ä¸¦ä¸æœƒå¢åŠ è‡³ Flex Container çš„é«˜åº¦ï¼Œå„ Flex Items æœƒç›´æ¥å°é½Š Cross Axis çš„èµ·é»ã€‚ flex-endï¼š è¡¨Flex Items é«˜åº¦ä¸¦ä¸æœƒå¢åŠ è‡³ Flex Container çš„é«˜åº¦ï¼Œå„ Flex Items æœƒç›´æ¥å°é½Š Cross Axis çš„æœ€çµ‚é»ã€‚ centerï¼šæ¯å€‹ Flex Items æœƒç›´æ¥å°é½Š** Cross Axis é«˜åº¦çš„ä¸­é–“**ã€‚ stretchï¼šé è¨­å€¼ï¼Œè¡¨ Flex Items çš„é«˜åº¦ï¼Œæ²¿è‘— Cross Axisï¼Œéƒ½æœƒè‡ªå‹•å¢åŠ é«˜åº¦è‡³ Flex Container çš„é«˜åº¦ã€‚æŒ‰ç…§å­—é¢å°±æ˜¯å»¶ä¼¸ï¼Œå°‡Itemçš„é«˜åº¦å»¶ä¼¸è‡³Containerçš„é«˜åº¦ã€‚ baselineï¼šæœƒä¾æ“š Flex Items çš„åŸºæº–ç·šä¾†å°é½Šã€‚ä¸‹åœ–ç¯„ä¾‹å¯çŸ¥é›–ç„¶å„å€‹itemé«˜åº¦ä¸åŒï¼Œä½†å°é½Šçš„åŸºæº–æ˜¯æ–‡å­—å…§å®¹ã€‚ align-content:ä¸»è¦æ˜¯ç”¨åœ¨ Flex Container ä¸­çš„ Flex Items ç”¢ç”Ÿå¤šè¡Œæ™‚ï¼Œé€™äº› Flex Item è©²å¦‚ä½•é‡å° Cross Axis ä¾†æ’åˆ—ã€‚ 1234.box{ /* ç¬¬å…­ç¨® */ align-content: flex-start || flex-end || center || stretch;} flex-startï¼šé‡åˆ° Flex Items æ–·è¡Œï¼Œæœƒæ²¿è‘— Cross Axis æ’åˆ—ï¼Œä¼¼ç½®é ‚çš„æ–¹å¼ï¼š flex-endï¼šé‡åˆ° Flex Items æ–·è¡Œï¼Œæœƒæ²¿è‘— Cross Axis æœƒå¦‚ä¸‹æ’åˆ—(ç½®åº•)ï¼š center: é‡åˆ° Flex Items æ–·è¡Œï¼Œæœƒæ²¿è‘— Cross Axis æœƒå¦‚ä¸‹æ’åˆ—(ç½®ä¸­)ï¼š stretchï¼šé è¨­å€¼ï¼Œé‡åˆ° Flex Items æ–·è¡Œï¼Œå„ items çš„é«˜åº¦æœƒæ²¿è‘— Cross Axis è‡ªå‹•å¢æ¸›ã€‚ Main Axiså’ŒAcross Axis æœƒå› ç‚ºflex-directionçš„è¨­ç½®è€Œæœ‰æ‰€ä¸åŒï¼Œç•¶flex-directionè¨­ç½®ç‚ºcolumnæ™‚ï¼ŒMain Axiså’ŒAcross Axisè¦å’Œflex-direction: rowæ™‚ç›¸åã€‚ å³rowçš„Main Axis = columnçš„Across Axisï¼Œåä¹‹äº¦ç„¶ã€‚Flex Item :ä¸Šé¢å¯¦ä½œå®ŒContainerç›¸é—œçš„å±¬æ€§å¾Œï¼Œå¾€ä¸‹å¯¦ä½œFlex Item ç›¸é—œå±¬æ€§ã€‚ Flex Itemå…±æœ‰å…­ç¨®å±¬æ€§å¯ä»¥è¨­å®š:1234.item{ /* ç¬¬ä¸€ç¨® *\\ order: &lt;number&gt;; // é è¨­å€¼ 0} order :å¯ä»¥æ˜¯ä»»ä½•çš„æ•´æ•¸ï¼Œæ‰€æœ‰çš„ Flex Items é è¨­å€¼éƒ½æ˜¯0ã€‚æ‰€æœ‰çš„ Flex Items æ’åˆ—é †åºéƒ½æœƒæŒ‰ç…§ order å€¼çš„å¤§å°ï¼Œå¾æœ€å°é–‹å§‹æ’ï¼Œä¾åºæ’åˆ°æœ€å¤§å€¼ã€‚ 1234.item:nth-of-type(1) { background: red; order: 1;} å› ç‚ºitemçš„orderè¢«è¨­ç‚º1ï¼Œæ¯”å…¶ä»–itemçš„orderå€¼(é è¨­ç‚º0)é‚„è¦å¤§ï¼Œæ•…æ’è‡³æœ€å¾Œã€‚ flex-grow:è¨­å®šè©² Flex Item è‡ªè¡Œå»¶ä¼¸ï¼Œå°‡å¤šé¤˜ç©ºé–“å¡«æ»¿ã€‚ flex-grow é è¨­å€¼æ˜¯ 0ï¼Œå…¶è¡¨ä¸å»¶å±•å¡«æ»¿ã€‚ *è‹¥åŒæ™‚æœ‰å¤šå€‹å…ƒç´ éƒ½è¨­æœ‰æ•¸å€¼æ™‚,æ˜¯ç›¸å°å€æ•¸åšæ”¾å¤§ã€‚** * **ä¸å¯ç‚ºè² å€¼ï¼Œä½†å¯ç‚ºå°æ•¸é»ã€‚ 1234.item{ // ç¬¬äºŒç¨® flex-grow: 0 ; // é è¨­å€¼æ˜¯ 0} è‹¥å°‡item1çš„flex-growå€¼è¨­ç‚º1ï¼Œå¯ä»¥å¾—ä¸‹é¢çµæœ: å‰©é¤˜çš„ç©ºé–“è¢« item1 æ‰€å¡«æ»¿ flex-shrink:å…ƒä»¶çš„ç¸®æ¸›ï¼Œæ˜¯ä¸€å€‹æ•¸å€¼ï¼Œç©ºé–“åˆ†é…ä¸è¶³æ™‚æœƒæ”¹è®Šç•¶å‰å…ƒä»¶çš„æ”¶ç¸®ç¨‹åº¦ï¼Œé è¨­å€¼ç‚º 1ï¼Œå¦‚æœè¨­ç½®ç‚º 0 å‰‡ä¸æœƒç¸®æ”¾ã€‚æ”¶ç¸®çš„ç¨‹åº¦ä¹Ÿæ˜¯ç›¸å°æ–¼å…¶ä»–å…ƒç´ çš„ã€‚æ•¸å€¼ä¸å¯ç‚ºè² æ•¸ã€‚ ***å¯ç”¨æ–¼åœ¨æ”¹è®Šè¢å¹•å¤§å°æ™‚ï¼Œå°‡ä¸é‡è¦çš„è³‡è¨Šåšç¸®å°ã€‚ 1234.item{ /* ç¬¬ä¸‰ç¨® */ flex-shrink:1 // é è¨­å€¼æ˜¯ 1} ä»¥ä¸‹ç¯„ä¾‹å¯¦ä½œï¼Œå°‡item1çš„flex-shrinkè¨­ç‚º4ï¼Œæœƒå¾—åˆ°ä»¥ä¸‹çµæœ: item1 æ‰€å°çš„å¹…åº¦å¤§æ–¼å…¶ä»– item flex-basis:å…ƒä»¶çš„åŸºæº–å€¼ï¼Œ ç”¨ä¾†è¨­å®š Flex Item çš„å¯¬åº¦ï¼Œå–®ä½å¯ä»¥æ˜¯ä»»ä½•ç™¾åˆ†æ¯”ã€ä¸åŒçš„å–®ä½å€¼(e.g. px ,rem)ï¼Œ é è¨­å€¼ç‚ºautoã€‚ é è¨­æƒ…æ³ä¸‹ï¼ŒFlex Item çš„å¯¬åº¦æ˜¯æœƒä¾æ“šå…§å®¹ä¾†è‡ªå‹•è®Šå¯¬ã€‚ 123.item:nth-of-type(1) { flex-basis: 50px;} item1è¢«é™åˆ¶åœ¨50pxçš„å¯¬åº¦ flex:flex æ˜¯ç¸®å¯«ï¼Œåˆ†åˆ¥ä»£è¡¨ flex-growã€flex-shrinkã€flex-basisã€‚ *flex: default *æ˜¯ flex: 0 1 auto; çš„ç¸®å¯«ã€‚ 1234.item{ /* ç¬¬äº”ç¨® */ flex: &lt;flex-grow&gt; &lt;flex-shrink&gt; &lt;flex-basis&gt;; // é è¨­å€¼ä¾åºç‚º 0 1 auto;} å¦‚æœè¦è¨­å…¶ä¸­1å€‹æˆ–2å€‹å–®ä½çš„è©±,æœƒæœ‰ä¸åŒçµæœ: 1å€‹å€¼: flex:2; /* **flex-grow /* flex: 30px ; /* **flex-basis /* 2å€‹å€¼: flex: 1 30px; /* **flex-grow | flex-basis */** flex: 2 2 ; /* **flex-grow | flex-shrink /* align-self:åªæœƒå½±éŸ¿ç‰¹å®š Flex Item ï¼Œé‡å°è©²Flex Itemçš„Cross Axis æ’åˆ—æ–¹å¼èª¿æ•´ï¼Œä¸æœƒå½±éŸ¿åˆ°å…¶å®ƒçš„ Flex Itemsã€‚ä¸‹é¢ç¯„ä¾‹ä»¥item3ç‚ºèª¿æ•´å°è±¡ã€‚ 12345.item{ /* ç¬¬å…­ç¨® */ align-self: auto || flex-start || flex-end || center || baseline || stretch; // é è¨­å€¼æ˜¯ stretch;} autoï¼šè©² Flex Item çš„å€¼ï¼Œæœƒç›´æ¥åƒè€ƒ Flex Container çš„ align-items å€¼ï¼Œå…©è€…ç›¸åŒã€‚ flex-startï¼šè©² Flex Item æœƒå°é½Š Cross Axis çš„èµ·é»ï¼Œé«˜åº¦ä¸æœƒè‡ªå‹•æ“´å±•ã€‚ flex-endï¼šè©² Flex Item æœƒå°é½Š Cross Axis çš„åº•éƒ¨ï¼Œé«˜åº¦ä¸æœƒè‡ªå‹•æ“´å±•ã€‚ centerï¼šè©² Flex Item æœƒå°é½Š Cross Axis çš„ä¸­é–“ï¼Œé«˜åº¦ä¸æœƒè‡ªå‹•æ“´å±•ã€‚ baselineï¼š æœ‰è¨­å®šæˆ baseline çš„é€™äº› Flex Items ï¼Œæœƒå½¼æ­¤å°é½Š baselineã€‚ å°‡ item1~3 éƒ½è¨­ baseline stretch(é è¨­)ï¼šè©² Flex Item æœƒè‡ªå‹•æ“´å±•ï¼Œä½”æ»¿æ•´å€‹ Flex Containerã€‚ ä»¥ä¸Šç‚ºé€™æ¬¡çš„ç­†è¨˜æ•´ç†ï¼Œç›¸è¼ƒä»¥å¾€çš„æ’ç‰ˆï¼Œé€™æ¨£çš„æ’ç‰ˆçš„ç¢ºå½ˆæ€§è¨±å¤šã€‚","link":"2019/07/14/CSS/CSS%20Layout%20_FlexBox/"},{"title":"[Postgres] è³‡æ–™åº«è£¡çš„å„²å­˜æ¦‚å¿µ","text":"å‰è¨€æœ¬æ–‡ä¸»è¦æ¢è¨è³‡æ–™åº«è£¡çš„å„²å­˜æ¦‚å¿µï¼Œäº†è§£è³‡æ–™åº«æ˜¯å¦‚ä½•å°‡è³‡æ–™å­˜åœ¨ç¡¬ç¢Ÿ(Disk)è£¡ï¼Œå„²å­˜åŸç†åœ¨å„å®¶ä¸»æµè³‡æ–™åº«æœƒæœ‰å·®ç•°ï¼Œä½†å¤§æ–¹å‘æ˜¯ç›¸åŒçš„ï¼Œå…§å®¹æœƒä»¥ Postgres ç‚ºä¸»ï¼Œå°‘éƒ¨åˆ†æåŠå…¶ä»–è³‡æ–™åº«çš„åšæ³•ã€‚ æœ¬ç¯‡ä¸»è¦ç­†è¨˜ Udemy - SQL and PostgreSQL: The Complete Developerâ€™s Guide åŠ Udemy - Fundamentals of Database Engineering çš„èª²ç¨‹å…§å®¹ï¼Œä½†ä»¥è‡ªå·±è¼ƒæ˜“ç†è§£çš„æ–¹å¼åŠ ä»¥æ•´ç†ï¼Œå¯èƒ½å’ŒåŸèª²ç¨‹å…§å®¹æœ‰äº›å‡ºå…¥ã€‚ è³‡æ–™åº«å„²å­˜çµæ§‹çš„ç›¸é—œåè©äº†è§£ä¸»æµçš„é—œè¯å¼è³‡æ–™åº«å¦‚ä½•å„²å­˜è³‡æ–™å‰ï¼Œé ˆå…ˆå°ä¸‹é¢å¹¾é …åè©æœ‰æ‰€ç†è§£: Table Row_ID Tuple Page I/O Heap Index Tableè³‡æ–™è¡¨ç”±è¡Œ(Column)ã€åˆ—(Row) çµ„æˆ Row_ID è³‡æ–™åº«å…§éƒ¨æœƒå°æ¯ç­†è³‡æ–™è‡ªå·±é¡å¤–å»ºä¸€å€‹ row_idï¼Œç”±ç³»çµ±ç¶­è­· é€™éƒ¨åˆ†å› å„å®¶è³‡æ–™åº«æœ‰æ‰€å·®ç•°: MySQL (innoDB) çš„ä¸»éµå’Œ row_id æ˜¯åŒä¸€å€‹ã€‚ Postgres å‰‡æ˜¯æœ‰å€‹ç³»çµ±ç”Ÿæˆçš„æ¬„ä½ row_id Tuple (or Item)æŒ‡çš„æ˜¯è³‡æ–™è¡¨è£¡çš„ä¸€ç­†è³‡æ–™(å³ä¸€å€‹ row)ï¼Œé€™äº› tuple æœƒè¢«å­˜æ”¾åˆ° Page ä¸Šï¼Œå¾ŒçºŒæœ‰åœ–ç‰‡èªªæ˜ä»–å€‘ä¹‹é–“çš„é—œä¿‚ã€‚ æ¯å€‹ Tuple éƒ½æœ‰å€‹åˆ¥çš„ IDï¼Œç°¡ç¨± TIDï¼Œåœ¨ Postgres è£¡é¢ç­‰åŒ row idï¼Œå…¶å…§å®¹åŒ…å«ï¼š block number: Block çš„ä½ç½®ç·¨è™Ÿ tuple index within block(Offset): tuple ä½æ–¼è©² block çš„ä½ç½® é—œæ–¼ Tuple ç›¸é—œèªªæ˜ï¼Œæ‘˜éŒ„è‡ª PG å®˜æ–¹æ–‡ä»¶å…§å®¹ï¼šObject Identifier TypesA final identifier type used by the system is tid, or tuple identifier (row identifier). This is the data type of the system column ctid. A tuple ID is a pair (block number, tuple index within block) that identifies the physical location of the row within its table. ç¯„ä¾‹ï¼š TID = (3,10)è¡¨ç¤ºè©² tuple è³‡æ–™ä½æ–¼ç¬¬ 11 å€‹(ç·¨è™Ÿå¾ 0 é–‹å§‹) block å…§çš„ç¬¬ 3 å€‹ elementã€‚ TID æœƒå’Œå¾ŒçºŒ Index å­˜æ”¾çš„å…§å®¹æ¯æ¯ç›¸é—œï¼Œå¾Œé¢æœƒæåˆ°ã€‚ Page(or Block) Page ç”¨æ–¼å­˜æ”¾è³‡æ–™è¡¨çš„æ‰€æœ‰è³‡æ–™ï¼Œæ•…æ¯å¼µ Page è£¡æœƒæœ‰å¤šå€‹ Tuple æ ¹æ“šä¸åŒçš„å„²å­˜æ¨¡å‹ï¼Œè³‡æ–™å­˜åœ¨ Page çš„æ–¹å¼ä¸åŒ è³‡æ–™åº«è®€å–è³‡æ–™çš„æ–¹å¼ï¼šå–®æ¬¡ I/O è®€å–ä¸€å¼µ or å¤šå¼µè¡¨çš„è³‡æ–™ æ¯å¼µè¡¨éƒ½æœ‰å›ºå®šçš„å¤§å° (e.g. 8KB in postgres and sql server, 16KB in MySQL) ç¯„ä¾‹: ä¸€å¼µ Page å¯æ”¾ 3 å€‹ Rowï¼Œè‹¥æœ‰ 1001 ç­†ï¼Œå‰‡æœƒæœ‰ 334 å€‹ Page (1001/3 = 333 ~, å¤šçš„å…©ç­†éœ€åŠ ä¸€å€‹ Page å­˜æ”¾) å½±éŸ¿ query æ•ˆèƒ½å¥½å£çš„é—œéµ:å–®å€‹ query è®€å–å¤šå°‘çš„ Pageã€ç”¢ç”Ÿäº†å¹¾æ¬¡ I/O I/Oinput/output åˆä½œ I/O ç”¨æ–¼è¡¨ç¤ºå‘ Disk ç™¼å‡ºè®€å–çš„è«‹æ±‚ ç›¡å¯èƒ½æ¸›å°‘ I/O æ¬¡æ•¸ â†’ å–®å€‹æŸ¥è©¢çš„ I/O æ¬¡æ•¸è¶Šå°‘ï¼ŒæŸ¥è©¢çš„å›æ‡‰é€Ÿåº¦è¶Šå¿« å–®æ¬¡ I/O å¯ä»¥å–å¾— 1 or å¤šå€‹ Page çš„è³‡æ–™ï¼Œæœƒå› ä¸åŒå› ç´ (e.g. Disk partition)æœ‰æ‰€ä¸åŒ å–®æ¬¡ I/O ç„¡æ³•åªè®€å–å–®ä¸€ç­† (Row) çš„è³‡æ–™ï¼Œè€Œæ˜¯è®€å– Page è£¡å¤šç­†è³‡æ–™ï¼Œè³‡æ–™åº«å†æŠŠå…¶ä»–ä¸éœ€è¦çš„è³‡æ–™çµ¦éæ¿¾æ‰ â†’ æ•…æ¯æ¬¡ query æœ‰ä¸å°çš„æˆæœ¬ Heapæ˜¯ä¸€ç¨®è³‡æ–™çµæ§‹ï¼Œç”¨æ–¼å­˜æ”¾ä¸€å€‹å€‹çš„ Page è³‡æ–™ï¼Œå¤šå€‹ Page çµ„æˆä¸€å€‹ Heap File è¦è¿­ä»£ Heap æ‰¾åˆ°æˆ‘å€‘æƒ³è¦çš„è³‡æ–™æ˜¯æ˜‚è²´çš„é–‹éŠ· å»ºç«‹ç´¢å¼•(Index) å¯ä»¥æº–ç¢ºåœ°å‘Šè¨´è³‡æ–™åº«è¦è®€å– Heap è£¡çš„å“ªå€‹éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯åªè®€å–å“ªäº› Page çš„è³‡æ–™ â†’ å³ index å¯ä»¥åŠ é€ŸæŸ¥è©¢æ•ˆç‡çš„åŸå›  Heap, Page, Tuple ä¹‹é–“çš„é—œä¿‚åœ–PostgreSQL å°‡ table è³‡æ–™éƒ½å­˜æˆä¸€å€‹ä¸€å€‹çš„æª”æ¡ˆï¼Œæˆ‘å€‘ç¨±ç‚º Heap æˆ– Heap filesï¼ŒHeap file ç”±å¤šå€‹ Block çµ„æˆï¼Œæ¯å€‹ Block ç‚º 8KBï¼ŒBlock(Page) è£¡é¢çš„ Item (Tuple)ï¼Œå°±æ˜¯å­˜æ”¾çš„è³‡æ–™ã€‚ è³‡æ–™åº«è®€å–è³‡æ–™çš„éç¨‹ï¼šè³‡æ–™åº«æœƒå¾é›»è…¦ç£ç¢Ÿ(Disk)è®€å–è³‡æ–™è¡¨ï¼Œå°‡è³‡æ–™è¡¨è£¡çš„è³‡æ–™è¼‰å…¥è¨˜æ†¶é«”(Memory)ï¼Œæœ€å¾Œç§»å‹•è‡³ CPU é€²è¡Œè™•ç†ã€‚ ä¾†çœ‹å€‹å¯¦éš›ä¾‹å­ï¼šè³‡æ–™åº«æœƒå…ˆåˆ° Disk çš„ Heap File è£¡è®€å– user è¡¨ï¼Œè¼‰å…¥è‡³è¨˜æ†¶é«”ï¼Œæ¥è‘—é€ç­†é€²è¡Œæœå°‹ã€‚ IndexIndex (ä¸­æ–‡ä½œâ€ç´¢å¼•â€)æ˜¯ B+ tree çš„è³‡æ–™çµæ§‹ï¼Œä»¥çŠ§ç‰²å„²å­˜ç©ºé–“ã€æ¸›æ…¢å¯«å…¥ &amp; æ›´æ–°è³‡æ–™çš„é€Ÿåº¦ç‚ºä»£åƒ¹ï¼Œæ›å–æ›´å¥½çš„æŸ¥è©¢æ•ˆç‡ï¼Œå…·æœ‰ pointer(æŒ‡é‡) æŒ‡å‘ Heap è£¡çš„è³‡æ–™ï¼Œé€™äº› pointer åœ¨æ„ç¾©ä¸Šæ˜¯å€‹æ•¸å€¼ï¼ŒæŒ‡å‘è³‡æ–™åº«çš„ TID(row id)ï¼ŒTID(row id) æœƒåŒ…å«è¨±å¤šæœ‰é—œæ–¼ Heap è£¡ Page çš„ meta dataã€‚ é—œæ–¼ Index çš„å¹¾å€‹é‡é»ï¼š å¯ä»¥å° 1 or å¤šå€‹æ¬„ä½ä¸‹ Index Index æœƒæº–ç¢ºåœ°å‘Šè¨´è³‡æ–™åº«åœ¨ Heap ä¸­å–çš„å“ªå€‹ Pageï¼Œè€Œä¸æ˜¯æŠŠ Heap è£¡çš„æ¯å€‹ Page éƒ½æƒéä¸€é Index æœƒè¢«å­˜åœ¨ç¨ç«‹ Heap File çš„ Page è£¡ï¼Œä¸€æ¨£é€é I/O å¾ Disk è£¡è®€å– Index è³‡æ–™ å¾ Disk å–å‡ºçš„ Index è³‡æ–™ï¼Œæœƒæ”¾å…¥ Memoryï¼Œå¦‚æœ Index éå¤§çš„è©±ï¼Œå¯èƒ½é‡åˆ°éæ‰€æœ‰ Index éƒ½èƒ½æ”¾é€² Memory æœå°‹ â†’ æ•…å–®å€‹ Index çš„å¤§å°ç›¡å¯èƒ½ç¸®å°ï¼Œæ‰èƒ½å¤ æ”¾å…¥ Memory å¿«é€Ÿåœ°æœå°‹ Index æ˜¯å¦‚ä½•å­˜æ”¾åœ¨ Disk? (ç°¡åŒ–çš„ç‰ˆæœ¬)Index è¡¨è£¡é¢å­˜æ”¾äº†è¢«è¨­ç½®ç‚º Index çš„æ¬„ä½å…§å®¹ä½œç‚º key å€¼ï¼Œä»¥åŠè©² key å°æ‡‰ Page(Block), Row(Tuple) çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯ã€Œå„²å­˜çš„ key å€¼èˆ‡ TID çš„é…å°é—œä¿‚ã€ã€‚ ä»¥ä¸Šåœ–è¡¨ç‚ºä¾‹ï¼ŒEMP_ID æ¬„ä½è¢«è¨­ç½®ç‚º Indexï¼ŒKey ç‚º EMP_ID çš„å€¼ï¼Œå…¶ä¸­ 10 (1,0) å¯ä»¥è§£è®€ç‚ºï¼šKey = 10, TID = (offset = 1, block = 0)ã€‚é€™çµ„æ•¸å­—è¡¨ç¤º EMP_ID ç‚º 10 çš„å€¼ä½åœ¨ç¬¬ 0 å€‹ Page(Block) è£¡çš„ç¬¬ 1 å€‹ Tupleã€‚æ³¨ï¼šoffset è¡¨åç§»é‡ ç›´æ¥å¾ index è£¡å–å¾— TIDï¼Œè—‰ç”±å–å¾—çš„ TID å€¼ï¼Œå¿«é€Ÿå®šä½è©²å€¼æ˜¯ä½åœ¨å“ªå€‹ Page(Block) å…§çš„ç¬¬å¹¾å€‹ Row(Tuple) å¦å¤–ï¼Œåœ¨ä½¿ç”¨ Index çš„éç¨‹ä¸­ï¼Œè³‡æ–™åº«æœƒç¶“æ­·å…©æ¬¡ I/Oï¼Œ ç¬¬ä¸€æ¬¡ I/O (IO1)å»å°ˆé–€å­˜æ”¾ Index çš„ç›®æ¨™è³‡æ–™çš„ Heap Fileï¼Œå¾ Index è£¡é¢å–å‡ºç›®æ¨™ Page å’Œ Row æ‰€åœ¨ä½ç½®å¾Œï¼Œä»¥æ­¤ç‚ºä¾æ“šé€²è¡Œç¬¬äºŒæ¬¡ I/O (IO2)ï¼Œåˆ°å­˜æ”¾åŸå§‹è³‡æ–™çš„ Heap File è£¡æ‰¾å‡ºç›®æ¨™è³‡æ–™ã€‚ å°çµå‰é¢å…§å®¹è¨è«–è³‡æ–™åº«å„²å­˜è³‡æ–™çš„å¹¾å€‹é‡è¦çµæ§‹: Heap, Page, Tuple, Indexï¼Œä»¥åŠä»–å€‘ä¹‹é–“çš„é—œç³»ï¼Œæœ€å¾Œè¨è«– SQL åŸ·è¡ŒæŸ¥è©¢èªå¥æ™‚ï¼Œæ˜¯å¦‚ä½•è·Ÿ Disk è¦è³‡æ–™è¼‰å…¥è¨˜æ†¶é«”ï¼Œå¦å¤–ï¼ŒçŸ¥é“çµæ§‹ä¹‹é–“çš„é—œä¿‚å°‡æœ‰åŠ©æ–¼æœªä¾†å„ªåŒ– SQL èªå¥ã€‚ åƒè€ƒ The Internals of PostgreSQL - Database Cluster, Databases, and Tables","link":"2022/06/20/Database/%E8%B3%87%E6%96%99%E5%BA%AB%E5%A6%82%E4%BD%95%E5%AD%98%E6%94%BE%E8%B3%87%E6%96%99/"},{"title":"[Postgres] è³‡æ–™åº«çš„ç´¢å¼•(Index)","text":"å‰è¨€ä¸Šä¸€ç¯‡è¨˜éŒ„äº†è³‡æ–™åº«å„²å­˜è³‡æ–™çš„æ¦‚å¿µèˆ‡å…¶å„²å­˜çµæ§‹ï¼Œæœ¬æ–‡å°‡åˆæ­¥æ¢è¨è³‡æ–™åº«è£¡çš„ç´¢å¼•(Index)ï¼Œäº†è§£ Index çš„ä½œç”¨ã€è¡Œç‚ºä»¥åŠå¯¦éš›æ“ä½œæ–¹å¼ã€‚ æœ¬ç¯‡ä¸»è¦ç­†è¨˜ Udemy - SQL and PostgreSQL: The Complete Developerâ€™s Guide åŠ Udemy - Fundamentals of Database Engineering çš„èª²ç¨‹å…§å®¹ï¼Œä½†ä»¥è‡ªå·±è¼ƒæ˜“ç†è§£çš„æ–¹å¼åŠ ä»¥æ•´ç†ï¼Œå¯èƒ½å’ŒåŸèª²ç¨‹å…§å®¹æœ‰äº›å‡ºå…¥ã€‚ è³‡æ–™åº«æœªä½¿ç”¨ Index çš„æƒ…æ³ä¸‹ï¼Œæœƒæ¡è®€å–æ•´å¼µè¡¨çš„æ–¹å¼ä¾†æ‰¾å‡ºç›®æ¨™è³‡æ–™ï¼Œé€™ç¨®æœå°‹æ–¹å¼ä½œ Full Table Scanã€‚ Full Table ScanFull Table Scan ä¸­æ–‡ç¿»ä½œå…¨è¡¨æƒæï¼Œåˆä½œ Sequential Scanï¼ŒæŒ‰é †åºè®€å–æ•´å¼µè³‡æ–™è¡¨ï¼Œæœå°‹æ•ˆç‡æœ€å·®ï¼Œéç¨‹ä¸­æ¶‰åŠå¤šæ¬¡ I/O è®€å– Heap Table File è£¡çš„ pageã€‚ è©¦æƒ³ä¸€ä¸‹ï¼Œè‹¥è¦åœ¨åšåšçš„ä¸€æœ¬æ›¸(è³‡æ–™è¡¨)è£¡æ‰¾å‡ºæŸå€‹æ–‡å­—æ®µè½(æŸç­†è³‡æ–™)ï¼Œåœ¨æ²’æœ‰ç›®éŒ„çš„å¹«åŠ©ä¸‹ï¼Œè‚¯å®šæ˜¯ä¸€é ä¸€é æ‰¾ï¼Œå¾—èŠ±ä¸Šä¸å°‘æ™‚é–“ï¼Œè³‡æ–™åº«ä¹Ÿæ˜¯åŒç­‰é“ç†ã€‚ å› æ­¤æˆ‘å€‘éœ€è¦æ‰¾æ–¹æ³•ä¾†æå‡æŸ¥è©¢æ•ˆç‡ï¼Œå…¶ä¸­ä¸€å€‹æ–¹å¼å°±æ˜¯ Indexã€‚ ä»€éº¼æ˜¯ Index? Index å°±é¡ä¼¼æ–¼ä¸€æœ¬æ›¸(è³‡æ–™è¡¨)çš„ç›®éŒ„ï¼Œæˆ‘å€‘èƒ½æ ¹æ“šç›®éŒ„å¿«é€Ÿåœ°æ‰¾åˆ°æƒ³è¦çš„å…§å®¹æ‰€åœ¨ä½ç½®ã€‚ Index ä¸€èˆ¬ä¾†èªªéƒ½æ¡ç”¨ B-Tree çš„è³‡æ–™çµæ§‹ï¼Œä¹Ÿæ˜¯æœ€å¸¸è¦‹çš„ Index é¡å‹ï¼Œé™¤äº† B-Tree å¤–é‚„æœ‰å…¶ä»–é¡å‹ï¼Œæœ¬ç¯‡ä¸»è¦èšç„¦åœ¨ B-Treeï¼Œindex è£¡é™¤äº†è¢«è¨­ç½®ç‚º index æ¬„ä½çš„å€¼å¤–ï¼Œæœƒæœ‰å€‹ row pointer (æŒ‡é‡) æŒ‡å‘è©² row ä½æ–¼ Heap Table File çš„ä½ç½®ï¼Œè®“è³‡æ–™åº«èƒ½æœ‰æ•ˆåœ°æ ¹æ“š pointer åƒç…§çš„ä½ç½®å–å¾—è³‡æ–™ï¼Œè—‰æ­¤æ”¹å–„æŸ¥è©¢æ•ˆç‡ã€‚ é€é Index æŸ¥è©¢çš„æµç¨‹å¦‚ä¸‹åœ–æ‰€ç¤ºï¼š åŸ·è¡Œ SQL SELECT æ™‚æŸ¥æ‰¾ä½¿ç”¨è€…åç‚º Tom çš„è³‡è¨Šï¼Œè‹¥ Index è£¡æ‰¾å‡º Tom é€™å€‹äººï¼Œå–å¾— Tom åœ¨ Heap Table File çš„ä½ç½®ç‚º Block 1ï¼Œè³‡æ–™åº«æœƒç›´æ¥åˆ° Heap File çš„ Block 1 è£¡å–å‡º Tom çš„è³‡æ–™ï¼Œè€Œéå¾ç¬¬ä¸€å€‹ block é–‹å§‹æœå°‹ï¼Œéç¨‹ä¸­æœƒç¶“æ­·å…©æ¬¡ I/O (å…©æ¬¡ I/O çš„éç¨‹å¯ä»¥åƒè€ƒå‰ä¸€ç¯‡è¨è«–)ã€‚ ä»€éº¼æ˜¯ B-Tree?B-Tree æ˜¯ä¸€ç¨®å¸¸ç”¨æ–¼å¤–éƒ¨å­˜å„²çš„è³‡æ–™çµæ§‹ï¼Œé©ç”¨æ–¼è®€&amp;å¯«è³‡æ–™å€å¡Šç›¸å°å¤§çš„å„²å­˜ç³»çµ±ï¼Œçµæ§‹ç‚º m-way çš„è‡ªå¹³è¡¡æœå°‹æ¨¹ï¼ŒB å³ Balance çš„æ„æ€ï¼Œå­˜æ”¾ æœ‰åº çš„è³‡æ–™ï¼Œæ¨¹çš„ç¯€é» (node) è£¡æœ‰å„²å­˜éµå€¼å°(key-value pair)çš„å…ƒç´ (element)ï¼Œåˆ†åˆ¥å­˜ index çš„ä½ç½®èˆ‡è©²ç­†è³‡æ–™æ–¼ Heap File çš„ä½ç½®ï¼Œçˆ¶å±¤ç¯€é»æœƒé€é pointer æŒ‡å‘å­ç¯€é» ã€‚ å¸¸è¦‹æ‡‰ç”¨ï¼šè³‡æ–™åº«ã€æ–‡ä»¶ç³»çµ± å¹¾å€‹é‡è¦åè©:Degree: åˆ†æ”¯åº¦ï¼Œä¸€å€‹ node æ“æœ‰å­æ¨¹çš„å€‹æ•¸Root Node: æ¨¹çš„æœ€ä¸Šå±¤Internal Node: è‡³å°‘æœ‰ä¸€å€‹å­ç¯€é»Leaf Node: æ²’æœ‰å­æ¨¹ B-Tree å¹¾é …é‡è¦ç‰¹æ€§ æ ¹ç¯€é» (Root Node) è‡³å°‘æœ‰å…©å€‹å­ç¯€é»(Child Node) å¯ä»¥ç‚ºç©º æ‰€æœ‰çš„ Leaf Node éƒ½åœ¨åŒä¸€éšå±¤ é™¤äº† Root Nodeã€Leaf Node å¤–ï¼Œå…¶ä»–ç¯€é»è‡³å°‘æœƒæœ‰å€‹å­ç¯€é»ï¼Œæœ€å¤šæœ‰ m å€‹ åŒå€‹ç¯€é»è£¡çš„ key æ˜¯å‡å†ªæ’åˆ— B-Treeçš„é«˜åº¦: ä¸åŒ…å« Leaf Node çš„éšå±¤æ•¸ B-Treeçš„é«˜åº¦å’Œç£ç¢Ÿå­˜å–æ™‚çš„ I/O æ¬¡æ•¸æœ‰æ­£ç›¸é—œï¼Œå½±éŸ¿èµ°è¨ª(traversal)æ•´æ£µæ¨¹çš„æ™‚é–“è¤‡é›œåº¦ B-tree æ˜¯å¦‚ä½•å¹«åŠ©è³‡æ–™åº«æœå°‹?è¨­ç½® index æ™‚ï¼ŒæœƒæŒ‡å®šå“ªå€‹æ¬„ä½ä½œç‚º index çš„è³‡æ–™ï¼Œè³‡æ–™åº«æœƒå°‡ Heap Table File è£¡è©²æ¬„ä½çš„å€¼åŠå°æ‡‰çš„ä½ç½®ã€‚ ä¸‹åœ–ä»¥ user name ä½œç‚º index çš„ç¯„ä¾‹ï¼š index çš„å…§å®¹åŒ…å«äº† user name (e.g. Alf)ã€è©²ç­†è³‡æ–™æ–¼ heap file çš„ä½ç½®(e.g. block 0)ï¼Œä¸¦ä»¥å­—æ¯ç‚ºä¾æ“šé€²è¡Œæ’åºï¼Œæ’åºå¥½ index å€¼å¾Œæœƒè¢«æ”¾å…¥æ¨¹ç‹€çš„è³‡æ–™çµæ§‹è£¡ï¼Œæ¨¹çš„è‘‰ç¯€é»å­˜æ”¾ä¸€å€‹å€‹éµå€¼(key-value)çš„å…ƒç´ ï¼Œè€Œ root node æœƒå®šç¾©å¥½ä¸€äº›è¦å‰‡åˆ¤åˆ¥è¦åˆ°å“ªå€‹è‘‰ç¯€é»å–è³‡æ–™ã€‚ ä¸Šåœ–ç¯„ä¾‹æ˜¯æ‰¾å‡º Riann é€™å€‹ user nameï¼Œè³‡æ–™åº«é€²è¡Œ index æœå°‹æ™‚æ‰¾å‡ºå³æ–¹è‘‰ç¯€é»è£¡çš„ Riannï¼Œä¸¦è—‰ç”± pointer å¾—çŸ¥ Riann ä½æ–¼ Heap File çš„ block 1ï¼Œå°±ç›´æ¥å¾ block 1 è£¡æ‰¾è³‡æ–™ï¼Œè€Œä¸æœƒå¾ block 0 é–‹å§‹æ‰¾ï¼ŒåŠ å¿«æœå°‹çš„æ™‚é–“ã€‚ Index å­˜æ”¾æ–¼ Disk &amp; Memory çš„ç¤ºæ„åœ–Disk è£¡ Index æœƒåŒ…å« Heap File çš„ meta dataã€æ ¹ç¯€é»ã€è‘‰ç¯€é»çš„è³‡æ–™ç­‰ Clustered Index v.s. Non-clustered IndexClustered Index æ˜¯æ ¹æ“šè³‡æ–™åœ¨å„²å­˜ç©ºé–“ä¸Šçš„æ’åºè€Œå»ºç«‹ï¼Œè€Œ Non-clustered Index ä¸ä¸€å®šè¦æŒ‰ç…§å¯¦é«”è³‡æ–™çš„æ’åºè€Œå»ºç«‹ã€‚ Clustered Indexä¸­æ–‡ä½œ å¢é›†ç´¢å¼• ï¼Œæ¦‚å¿µé¡ä¼¼æ›¸(æ¯”å–»ä½œè³‡æ–™è¡¨)çš„ç›®éŒ„ï¼Œç”¨æ–¼å¿«é€ŸæŸ¥æ‰¾æ›¸çš„å…§å®¹ï¼Œè€Œæ¯æœ¬æ›¸æœƒæœ‰ä¸€å€‹ç›®éŒ„ï¼Œæ‰€ä»¥æ¯å¼µè³‡æ–™è¡¨åªæœƒæœ‰ä¸€å€‹ Clustered indexã€‚ äº‹å¯¦ä¸Šï¼ŒClustered Index çš„æ©Ÿåˆ¶åœ¨ä¸åŒçš„é—œé€£å¼è³‡æ–™åº«æœ‰ä¸åŒçš„å¯¦ä½œæ–¹å¼ï¼Œå¦‚: SQL Serverè£¡é è¨­æœƒå°‡ Primary Key (ä¸»éµ) ä½œç‚º Clustered Indexã€‚ ä»¥ä¸‹å¼•ç”¨è‡ª MS SQL server æ–‡ä»¶ï¼š CLUSTERED | NONCLUSTEREDIndicate that a clustered or a nonclustered index is created for the PRIMARY KEY or UNIQUE constraint. PRIMARY KEY constraints default to CLUSTERED, and UNIQUE constraints default to NONCLUSTERED. è€Œ Clustered Index åœ¨ PostgreSQL è£¡æœ‰åˆ¥æ–¼ SQL serverï¼Œéœ€é€é CLUSTER çš„æŒ‡ä»¤ä¾†å®Œæˆ Clustered Indexã€‚ å…·é«”å¯¦ç¾æ©Ÿåˆ¶åƒè€ƒ Stack Overflow - About clustered index in postgresç›¸é—œè¨è«–ã€‚ Non-clustered Indexä¸­æ–‡ä½œ éå¢é›†ç´¢å¼•ï¼Œæ¦‚å¿µé¡ä¼¼æ›¸(æ¯”å–»ä½œè³‡æ–™è¡¨)çš„é™„éŒ„ï¼Œæ¯æœ¬æ›¸å¯ä»¥æœ‰å¤šå€‹é™„éŒ„ï¼Œæ¯å¼µè³‡æ–™è¡¨èƒ½æœ‰å¤šå€‹ Non-clustered Indexã€‚ æ¯”è¼ƒæœ‰ç„¡ index å·®ç•°å…ˆå»ºç«‹ 1 ç™¾è¬ç­†æ¸¬è©¦è³‡æ–™ 123456789101112131415161718192021create table employees( id serial primary key, name text); create or replace function random_string(length integer) returns text as $$ declare chars text[] := '{0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z}'; result text := ''; i integer := 0; length2 integer := (select trunc(random() * length + 1)); begin if length2 &lt; 0 then raise exception 'Given length cannot be less than 0'; end if; for i in 1..length2 loop result := result || chars[1+random()*(array_length(chars, 1)-1)]; end loop; return result; end; $$ language plpgsql; insert into employees(name)(select random_string(10) from generate_series(0, 1000000)); æŸ¥çœ‹è³‡æ–™è¡¨ 12345678postgres-# \\d employees; Table &quot;public.employees&quot;Column | Type | Collation | Nullable | Default--------+---------+-----------+----------+---------------------------------------id | integer | | not null | nextval('employees_id_seq'::regclass)name | text | | |Indexes: &quot;employees_pkey&quot; PRIMARY KEY, btree (id) æ³¨æ„:PostgreSQL è£¡ï¼Œæ¯å€‹ primary key é è¨­éƒ½æœƒå¦å¤–å»ºä¸€å€‹ btree é¡å‹çš„ index æŸ¥è©¢ employees è¡¨è£¡çš„ id = 2000 çš„ id å€¼ï¼Œ ä¸¦é€éæŸ¥è©¢è¨ˆåŠƒ explain analyze èªå¥ä¾†åˆ†ææŸ¥è©¢æ•ˆèƒ½ 1explain analyze SELECT id FROM employees WHERE id = 2000; æŸ¥è©¢çµæœ 12345678QUERY PLAN------------------------------------------------------------------------------------------------------------------------------- Index Only Scan using employees_pkey on employees (cost=0.42..4.44 rows=1 width=4) (actual time=0.058..0.062 rows=1 loops=1) Index Cond: (id = 2000) Heap Fetches: 0 Planning Time: 0.201 ms Execution Time: 0.113 ms(5 rows) çµæœè£¡å¯ä»¥çœ‹åˆ°æœ‰å‘½ä¸­é è¨­çš„ indexï¼ŒæŸ¥è©¢é€Ÿåº¦è®Šéå¸¸å¿«ã€‚ Heap Fetches: 0 ï¼šä¸éœ€è¦å­˜å– Heap Table File çš„è³‡æ–™ï¼Œç›´æ¥å­˜å– index å°±å¯ä»¥æ‹¿åˆ°è³‡æ–™ï¼Œå› ç‚ºæŸ¥è©¢èªå¥æŒ‡å®šçš„æ¬„ä½åªæœ‰ id è€Œå·²ï¼Œè€Œ id åœ¨ Postgres è£¡æœ‰é è¨­å»ºç«‹å¥½çš„ indexï¼Œæ•…ä¸éœ€å¾ Heap Table File æ‰¾å°æ‡‰çš„å€¼ã€‚ Postgres é è¨­æœƒåœ¨æ¯å¼µè¡¨çš„ä¸»éµ(Primary Key)æˆ–è¢«è¨­å”¯ä¸€é™åˆ¶(UNIQUE Constraint)çš„æ¬„ä½è‡ªå‹•å»ºç«‹ index ã€‚ Source: PostgreSQL Docs PostgreSQL automatically creates a unique index when a unique constraint or primary key is defined for a table. The index covers the columns that make up the primary key or unique constraint (a multicolumn index, if appropriate), and is the mechanism that enforces the constraint. æŠŠ select å‡ºä¾†çš„æ¬„ä½æ”¹æˆéé è¨­å»ºç«‹ index æ¬„ä½ - name ï¼š 12345678postgres=# explain analyze SELECT name FROM employees WHERE id = 937481; QUERY PLAN-------------------------------------------------------------------------------------------------------------------------- Index Scan using employees_pkey on employees (cost=0.42..8.44 rows=1 width=6) (actual time=0.219..0.225 rows=1 loops=1) Index Cond: (id = 937481) Planning Time: 0.323 ms Execution Time: 0.306 ms(4 rows) name æ¬„ä½æœªè¢«è¨­ç‚º indexï¼Œæœƒå­˜æ”¾æ–¼ disk è£¡çš„ heap tableï¼Œæ•…è³‡æ–™åº«è¦å…ˆå» heap table æ‹¿å°æ‡‰çš„è³‡æ–™ï¼Œæ‰€ä»¥å¤šä¸€æ®µèŠ±è²»æ™‚é–“ã€‚ Tips:åŸ·è¡Œé‡è¤‡çš„æŸ¥è©¢æœƒç™¼ç¾èŠ±è²»æ™‚é–“æœƒç¸®çŸ­ï¼ŒåŸå› æ˜¯è³‡æ–™åº«æœ¬èº«çš„å¿«å–(Cache) æ©Ÿåˆ¶ è‹¥æŠŠ WHERE æ¢ä»¶æ”¹æˆ nameï¼š 123456789101112postgres=# explain analyze SELECT id FROM employees WHERE name = 'Zs'; QUERY PLAN------------------------------------------------------------------------------------------------------------------------- Gather (cost=1000.00..11310.94 rows=6 width=6) (actual time=179.857..333.772 rows=21 loops=1) Workers Planned: 2 Workers Launched: 2 -&gt; Parallel Seq Scan on employees (cost=0.00..10310.34 rows=2 width=6) (actual time=14.909..147.673 rows=7 loops=3) Filter: (name = 'Zs'::text) Rows Removed by Filter: 333327 Planning Time: 0.944 ms Execution Time: 334.032 ms(8 rows) åœ¨æ²’æœ‰å‘½ä¸­ index çš„æŸ¥è©¢ä¸‹ï¼ŒPostgres Planner æœƒæ¡ Seq Scan (Sequential Scan) çš„æ–¹å¼æœå°‹æ•´å¼µè³‡æ–™è¡¨(full table scan)ï¼ŒèŠ±è²»æ™‚é–“ç‚º 334.032 ms ï¼Œè¼ƒå…ˆå‰æŸ¥è©¢è²»æ™‚è¨±å¤šï¼Œå¾çµæœå¯è§€å¯Ÿåˆ°æœ‰æ²’æœ‰å‘½ä¸­ index åœ¨è³‡æ–™é‡å¤§çš„ç‹€æ³ä¸‹æœƒé¡¯è‘—åœ°å½±éŸ¿æŸ¥è©¢æ•ˆèƒ½ã€‚ å»ºç«‹ Index çš„ç¼ºé»é›–ç„¶ index æœ‰åŠ©æ–¼æå‡æœå°‹æ•ˆèƒ½ï¼Œä½†ä¹Ÿæœ‰å…¶ç¼ºé»ï¼Œå¦‚ï¼šIndex æœƒä½”ç”¨è³‡æ–™åº«çš„ç©ºé–“ï¼Œæ˜¯ä»¥ç©ºé–“ä¾†æ›å–æ™‚é–“ï¼Œä¸”æ¯æ¬¡åœ¨è¡¨ä¸­æ–°å¢ã€ä¿®æ”¹æˆ–åˆªé™¤æ™‚ï¼Œéƒ½å¿…é ˆæ›´å‹•è©²è¡¨ä¸Šçš„æ‰€æœ‰ Indexï¼ŒIndex å»ºè¶Šå¤šï¼Œè³‡æ–™åº«éœ€è¦åŸ·è¡Œçš„å·¥ä½œå°±è¶Šå¤šï¼ŒèŠ±é¡å¤–æˆæœ¬ä¾†ç¶­è­· Indexï¼Œæœ€çµ‚å°è‡´æ•ˆèƒ½é™ä½ï¼Œæ‡‰è¬¹æ…è©•ä¼°ä½¿ç”¨ Indexã€‚ Index é›–æœ‰åŠ©æ–¼æé«˜ æŸ¥è©¢(SELECT) é€Ÿåº¦ï¼Œä½†æœƒé™ä½ å¯«å…¥(INSERT) ä»¥åŠ æ›´æ–°(UPDATE) è³‡æ–™çš„é€Ÿåº¦ â†’ å› ç‚ºåŒæ™‚è¦æ›´å‹• Index æ€è€ƒæ˜¯å¦çœŸçš„éœ€è¦å»º Index çš„æƒ…æ³ è³‡æ–™é‡è¼ƒå°çš„è¡¨ è©²æ¬„ä½é »ç¹ä¸”å¤§é‡è¢«æ›´æ–°æˆ–æ–°å¢ é¿å…ä½¿ç”¨åŒ…å«å¤ªå¤š NULL å€¼çš„æ¬„ä½ è©•ä¼° Index Hit RateåŸ·è¡Œä¸‹æ–¹çš„ SQL èªå¥å¯ä»¥æŸ¥çœ‹ Index å‘½ä¸­çš„æ¯”ç‡ï¼Œè—‰æ­¤è©•ä¼°å»ºå¥½çš„ Index æ˜¯ä¸æ˜¯åœ¨æŸ¥è©¢æ™‚è¢«æœ‰æ•ˆå‘½ä¸­ 1234567891011select t.schemaname, t.relname as &quot;Table Name&quot;, io_i.indexrelname as &quot;Index Name&quot;, case when (io_i.idx_blks_hit &lt;&gt; 0 or io_i.idx_blks_read &lt;&gt; 0) then round(io_i.idx_blks_hit/(io_i.idx_blks_hit::numeric + io_i.idx_blks_read::numeric), 4) else null end as &quot;Index Hit Ratio&quot;from pg_stat_user_tables t join pg_statio_user_indexes io_i on io_i.relid = t.relidorder by &quot;Index Hit Ratio&quot; desc; å»ºç«‹ indexèªæ³•: 1create index &lt;index_name&gt; on &lt;table&gt;(&lt;column&gt;); ç¯„ä¾‹ï¼šæ›¿ employees è¡¨è£¡çš„ name æ¬„ä½å»º index 1create index employees_name on employees(name); å†åŸ·è¡Œä¸€æ¬¡ name çš„æŸ¥è©¢ 1234567891011postgres=# explain analyze SELECT id,name FROM employees WHERE name = 'Zs'; QUERY PLAN------------------------------------------------------------------------------------------------------------------------ Bitmap Heap Scan on employees (cost=4.47..27.93 rows=6 width=10) (actual time=0.930..1.211 rows=21 loops=1) Recheck Cond: (name = 'Zs'::text) Heap Blocks: exact=21 -&gt; Bitmap Index Scan on employees_name (cost=0.00..4.47 rows=6 width=0) (actual time=0.859..0.861 rows=21 loops=1) Index Cond: (name = 'Zs'::text) Planning Time: 3.024 ms Execution Time: 1.299 ms(7 rows) å‘½ä¸­ index çš„æƒ…æ³ä¸‹ï¼ŒåŸ·è¡Œæ™‚é–“ä¸‹ä¿®åˆ°åªå‰© 1.299 msã€‚ é›–èªªæœ‰å° name æ¬„ä½ä¸‹äº† indexï¼Œä½†ç‰¹å®šæƒ…æ³ä¸‹ä»å¯èƒ½ç„¡æ³•ç™¼æ®ä½œç”¨ã€‚ä¾‹å¦‚ï¼š å°‡å‰›å‰› WHERE = çš„æ¢ä»¶æ”¹ç‚º LIKE 123456789101112postgres=# explain analyze SELECT id,name FROM employees WHERE name LIKE '%ZA%'; QUERY PLAN---------------------------------------------------------------------------------------------------------------------------- Gather (cost=1000.00..11319.34 rows=90 width=10) (actual time=1.113..132.030 rows=1215 loops=1) Workers Planned: 2 Workers Launched: 2 -&gt; Parallel Seq Scan on employees (cost=0.00..10310.34 rows=38 width=10) (actual time=0.340..114.713 rows=405 loops=3) Filter: (name ~~ '%ZA%'::text) Rows Removed by Filter: 332929 Planning Time: 2.710 ms Execution Time: 132.185 ms(8 rows) å¾çµæœè§€å¯Ÿåˆ°åŒæ¨£ä»¥ name ä½œç‚ºæœå°‹æ¢ä»¶ï¼Œå»å‡ºç¾æ²’æœ‰å‘½ä¸­ index çš„æƒ…å½¢ï¼Œé¸æ“‡ç”¨ Seq Scan (Sequential Scan)çš„æ–¹å¼æƒææ•´å¼µè¡¨ï¼Œç”±æ­¤å¯çŸ¥ä¸¦éåªè¦åŠ ä¸Š indexï¼Œè³‡æ–™åº«çš„ Planner å°±æœƒåœ¨æ¯æ¬¡æœå°‹æ™‚é¸æ“‡ indexã€‚ Index Scan v.s. Index Only ScanIndex Only Scan èˆ‡ Index Scan å…©è€…ä¸»è¦å·®ç•°åœ¨æ–¼: Index Only Scan çš„è³‡æ–™æ˜¯ç›´æ¥ä¾†è‡ªæ–¼ indexï¼Œä¸éœ€è¦å†åˆ° Heap File å–å¾—è³‡æ–™ï¼Œä¸€èˆ¬ä¾†èªªè®€å–çš„é€Ÿåº¦è¼ƒ Index Scan æ›´å¿«ã€‚ 1234567891011121314151617-- å»ºè¡¨create table grades (id serial primary key, g int, name text ); -- å¯«å…¥æ¸¬è©¦è³‡æ–™insert into grades (g,name ) select random()*100,substring(md5(random()::text ),0,floor(random()*31)::int) from generate_series(0, 500);-- å»º indexCREATE INDEX id_idx ON grades(id); åˆ†åˆ¥æ¸¬è©¦ SELECT ä¸åŒæ¬„ä½çš„çµæœï¼š æŸ¥è©¢ id 123456789postgres=# explain analyze select id from grades where id = 7; QUERY PLAN-------------------------------------------------------------------------------------------------------------------- Index Only Scan using id_idx on grades (cost=0.27..8.29 rows=1 width=4) (actual time=0.073..0.078 rows=1 loops=1) Index Cond: (id = 7) Heap Fetches: 1 Planning Time: 0.249 ms Execution Time: 0.130 ms(5 rows) æŸ¥è©¢ name 12345678postgres=# explain analyze select name from grades where id = 7; QUERY PLAN---------------------------------------------------------------------------------------------------------------- Index Scan using id_idx on grades (cost=0.27..8.29 rows=1 width=15) (actual time=0.060..0.064 rows=1 loops=1) Index Cond: (id = 7) Planning Time: 0.360 ms Execution Time: 0.219 ms(4 rows) æ¯”è¼ƒä¸Šæ–¹å…©æ¢ queryï¼Œç¶“ç”± explain åˆ†æçš„çµæœï¼Œä¸‹æ–¹çš„ query æŸ¥è©¢çš„ name æ¬„ä½éœ€åˆ° Heap Table File è£¡è®€å– name å°æ‡‰çš„è³‡æ–™ã€‚ ç›¸è¼ƒä¹‹ä¸‹æŸ¥è©¢ id çš„ query å› ç‚º id æœ¬èº«å·²è¢«è¨­å®šç‚º indexï¼Œæ•…è³‡æ–™åº«åœ¨è®€å– index æ™‚ï¼Œæœƒä¸€èµ·å°‡å‘½ä¸­çš„ index å€¼ä¸€ä¸¦å–å‡ºä¸¦å›å‚³ã€‚ Includes Indexå¦‚æœå¸Œæœ›æŠŠå…¶ä»–æ¬„ä½çš„å€¼ä¹Ÿå­˜åœ¨ index ä¸Šï¼Œå¯ä»¥æ¡ç”¨ include çš„ SQL èªå¥çµåˆ index å°‡å…¶ä»–æ¬„ä½ç´å…¥ indexã€‚ ç¯„ä¾‹:å…ˆç§»é™¤åŸå…ˆå»ºç«‹å¥½çš„ index 1DROP index id_idx; å°‡ name æ¬„ä½ç´å…¥ index 1create index id_idx on grades(id) include (name) æŸ¥çœ‹å»ºå¥½ index å¾Œçš„çµæœ 12345678910postgres=# \\d grades; Table &quot;public.grades&quot; Column | Type | Collation | Nullable | Default--------+---------+-----------+----------+------------------------------------ id | integer | | not null | nextval('grades_id_seq'::regclass) g | integer | | | name | text | | |Indexes: &quot;grades_pkey&quot; PRIMARY KEY, btree (id) &quot;id_idx&quot; btree (id) INCLUDE (name) æ¥è‘—å° SELECT èªå¥é€²è¡Œåˆ†æ 123456789postgres=# explain analyze select name from grades where id = 7; QUERY PLAN--------------------------------------------------------------------------------------------------------------------- Index Only Scan using id_idx on grades (cost=0.27..8.29 rows=1 width=15) (actual time=0.097..0.103 rows=1 loops=1) Index Cond: (id = 7) Heap Fetches: 1 Planning Time: 1.745 ms Execution Time: 0.182 ms(5 rows) åŠ äº† include ä¹‹å¾Œï¼Œexplain åˆ†æçš„çµæœå¾ Index Scan â†’ Index Only Scanï¼Œä»£è¡¨æŸ¥è©¢é€£åŒå¾Œä¾†ç´å…¥çš„ name å€¼ç›´æ¥å¾ Index è£¡é¢å–å‡ºï¼Œæ²’æœ‰é¡å¤–åˆ° Heap Table File è£¡å–å€¼ã€‚ NOTEï¼š include æœƒæŠŠå…¶ä»–æŒ‡å®šçš„æ¬„ä½ç´å…¥ Indexï¼Œé©åˆæŠŠ include æŒ‡å®šçš„æ¬„ä½ç”¨åœ¨ Index Only Scan çš„ç­–ç•¥ä¸Šã€‚ é‡è¦ï¼šinclude çš„æ¬„ä½ä¸¦ ä¸ä½œç‚º Index çš„ search keyï¼æ•…æŠŠä¸Šé¢çš„æŸ¥è©¢æ¢ä»¶ where æ”¹ç‚º name æ™‚ï¼Œè³‡æ–™åº«å°±ä¸æœƒåœ¨ Index è£¡æœå°‹åˆ° name å€¼ã€‚ æœƒå¢åŠ  Index çš„å¤§å°ï¼Œéš¨è‘— Index çš„å¢é•·ï¼ŒæŸ¥è©¢ index çš„é€Ÿåº¦æœƒè®Šæ…¢ï¼Œæ•…åœ¨ä½¿ç”¨ä¸Šè¦è©•ä¼°å¯¦éš›ä½¿ç”¨çš„å ´æ™¯ä»¥åŠå–æ¨ï¼Œå†æ±ºå®šæ˜¯å¦è¦æ¡ç”¨ã€‚ å°‡å‰›å‰› include çš„ name æ¬„ä½ä½œç‚º where æ¢ä»¶ï¼š 123456789postgres=# explain analyze select name from grades where name = 'Zs'; QUERY PLAN-------------------------------------------------------------------------------------------------- Seq Scan on grades (cost=0.00..10.26 rows=1 width=15) (actual time=0.661..0.663 rows=0 loops=1) Filter: (name = 'Zs'::text) Rows Removed by Filter: 501 Planning Time: 0.365 ms Execution Time: 0.733 ms(5 rows) å¾ä¸Šè¿°åˆ†æçµæœå¾—çŸ¥ï¼Œé›–ç„¶ name é€é include è¢«ç´å…¥ id_idxï¼Œä½† id_idx çš„ search key æ˜¯ id æ¬„ä½é nameï¼Œè³‡æ–™åº«æ¡ç”¨ Seq Scan çš„æ–¹å¼ã€‚ åˆ†æ index ä½¿ç”¨çš„æƒ…æ³é€éä»¥ä¸‹çš„ SQL query å¯ä»¥æŸ¥è©¢åˆ° index çš„ä½¿ç”¨æƒ…å½¢ 1SELECT * FROM pg_stat_user_indexes; æŸ¥è©¢çµæœ 123456relid | indexrelid | schemaname | relname | indexrelname | idx_scan | idx_tup_read | idx_tup_fetch-------+------------+------------+------------+-------------------------+----------+--------------+---------------39249 | 39256 | public | employees | employees_pkey | 36 | 2000035 | 2000032 39249 | 39259 | public | employees | employees_name | 2 | 21 | 0 39262 | 39269 | public | grades | grades_pkey | 0 | 0 | 0 39262 | 39272 | public | grades | id_idx | 17 | 17 | 17 æŸ¥çœ‹æŒ‡å®šçš„ index å¤§å°èªæ³•ï¼š&lt;index_name&gt; æ›¿æ›æˆæŒ‡å®šçš„ index åç¨± 1SELECT pg_size_pretty(pg_relation_size('&lt;index_name&gt;')); ç¯„ä¾‹ï¼š æŸ¥çœ‹ grades é€™å¼µè¡¨çš„ index: id_idx 12345postgres=# SELECT pg_size_pretty(pg_relation_size('id_idx')); pg_size_pretty---------------- 40 kB(1 row) å»¶ä¼¸æ¢è¨ ç‚ºä»€éº¼ Postgres æœ‰æ™‚ä¸é¸æ“‡ Index Scan å»é¸æ“‡ Sequential Scanï¼Ÿ æœ‰æ™‚å€™ PostgreSQL åœ¨æŸ¥è©¢æ™‚æœƒé¸æ“‡ç”¨ Sequential Scan çš„æ–¹å¼ï¼Œä¸æ¡ç”¨ä¸‹å¥½çš„ Index åš Index Scanï¼Œä¸»è¦æœ‰å¹¾å€‹åŸå› : è³‡æ–™é¡å‹ä¸åŒ¹é…æœ‰äº›å¼·åˆ¶å‹åˆ¥è½‰æ›æœƒå°è‡´ Index æœªè¢«ä½¿ç”¨çš„æƒ…å½¢ï¼Œæˆ‘å€‘æ‹¿å‰é¢çš„ SQL ç¯„ä¾‹åšèª¿æ•´ï¼ŒæŠŠæœå°‹æ¢ä»¶ id åŠ ä¸Šå‹åˆ¥è½‰æ›(cast) ::numeric çš„èªå¥ï¼Œæ”¹æˆä¸‹æ–¹çš„æ¨£å­: 1explain analyze select id from grades where id = 7::numeric; å‹åˆ¥è½‰æ›é˜»æ­¢ Postgres ä½¿ç”¨å»ºç«‹å¥½çš„ Indexï¼Œè—‰ç”± explain analyze åˆ†æç”¢ç”Ÿä»¥ä¸‹çµæœï¼š 123456789postgres=# explain analyze select id from grades where id = 7::numeric; QUERY PLAN------------------------------------------------------------------------------------------------- Seq Scan on grades (cost=0.00..11.52 rows=3 width=4) (actual time=0.086..0.840 rows=1 loops=1) Filter: ((id)::numeric = '7'::numeric) Rows Removed by Filter: 500 Planning Time: 0.372 ms Execution Time: 0.899 ms(5 rows) å¾çµæœå¯çœ‹å‡º Postgres Planner é¸æ“‡ Seq Scan è€Œéå‰é¢çš„ Index Only Scan using id_idx on grades è©•ä¼°çµæœæ˜¯Sequential Scan æ›´å¿«åœ¨è³‡æ–™é‡å¾ˆå°æ™‚ï¼ŒSequential Scan æœƒæ¯” Index Scan æ›´åŠ æœ‰æ•ˆï¼ŒåŸå› æ˜¯ Index Scan è‡³å°‘è¦ç™¼ç”Ÿå…©æ¬¡ I/Oï¼Œä¸€æ¬¡æ˜¯è®€å– Index çš„è³‡æ–™ï¼Œä¸€æ¬¡æ˜¯è®€å– Heap File è£¡çš„è³‡æ–™ï¼Œæœå°‹ä»£åƒ¹é é«˜æ–¼ Index Scanã€‚ ç¸½çµå‰é¢è«‡åˆ°æœ‰è¨­ç½®ä¸”å‘½ä¸­ Index åœ¨è³‡æ–™é‡å¤§çš„æƒ…æ³ä¸‹ï¼Œå°æŸ¥è©¢æ•ˆç‡æœƒæœ‰é¡¯è‘—çš„å·®ç•°ã€‚ ä½¿ç”¨ Index å‰ä¹Ÿé ˆè€ƒé‡ä½¿ç”¨æƒ…å¢ƒèˆ‡å…¶ç¼ºé»ï¼Œè€Œä¸”ä¸¦éåªè¦å»ºç«‹å¥½ Indexï¼ŒSQL æŸ¥è©¢å°±ä¸€å®šæœƒå‘½ä¸­ Indexï¼Œé€™äº›éƒ½æ˜¯ä½¿ç”¨ä¸Šè¦æ³¨æ„çš„åœ°æ–¹ã€‚ å–„ç”¨ PostgresSQL Planner çš„æç¤ºæœ‰åŠ©æ–¼è©•ä¼°ç•¶å‰ SQL é‹è¡Œçš„ç‹€æ³ï¼Œè¡¡é‡å¦‚ä½•ä½¿ç”¨ Indexã€‚ åƒè€ƒ Difference between Clustered and Non-clustered index Index-Only Scans and Covering Indexes Indexes in PostgreSQL â€” 1 CLUSTER - PostgreSQL Docs","link":"2022/06/29/Database/Index/"},{"title":"[Go] Map","text":"å‰è¨€æœ¬æ–‡ä¸»è¦ç´€éŒ„ Go èªè¨€ä¸­çš„ Map Golang ä¸­çš„ mapmap ç‚º Golang ä¸­éµå€¼å°(key-value)çš„è³‡æ–™çµæ§‹ï¼Œå·¦å´ç‚º key ï¼Œå³å´ç‚º valueï¼Œæœ‰ä»¥ä¸‹å¹¾å€‹ç‰¹æ€§: æ’åˆ—ç„¡ä¸€å®šé †åº key åœ¨ map æ˜¯å”¯ä¸€çš„ï¼Œè€Œ value å¯èƒ½ä¸æ˜¯ é©åˆç”¨åœ¨ï¼š åŸºæ–¼ key å¿«é€Ÿå°‹æ‰¾ã€å–å¾—å’Œåˆªé™¤è³‡æ–™ map çš„é›¶å€¼ç‚º nil ç›¸é—œæ“ä½œå®£å‘Š mapèªæ³•çµæ§‹ 1var m map[KeyType]ValueType èªªæ˜ KeyType: éµçš„è³‡æ–™å‹åˆ¥ ValueType: å€¼çš„è³‡æ–™å‹åˆ¥ map çš„é›¶å€¼å‰é¢æåˆ°é map çš„é›¶å€¼ç‚º nilï¼Œè€Œå€¼ç‚º nil çš„ map æ²’æœ‰ keyï¼Œä¾†çœ‹ä»¥ä¸‹ç¯„ä¾‹: 1234567var m map[string]intfmt.Println(m)if m == nil { fmt.Println(&quot;m is nil&quot;)} è¼¸å‡º 1m is nil è‹¥å°‡ key åŠ åˆ°å€¼ç‚º nil çš„ map çš„æœƒå°è‡´ Golang æ–¼åŸ·è¡Œæ™‚æœŸç™¼ç”ŸéŒ¯èª¤ 123var m map[string]intm[&quot;hello&quot;] = 1 å½™å ±å¦‚åŒä¸‹æ–¹çš„éŒ¯èª¤ 1panic: assignment to entry in nil map åˆå§‹åŒ– map å¯¦ä¾‹ä½¿ç”¨ make() å‡½ç¤ºå³å¯å»ºä¸€å€‹ map å¯¦ä¾‹ï¼Œè©²å‡½å¼æœƒå›å‚³å·²åˆå§‹åŒ–åŠå¯ä»¥ä½¿ç”¨çš„ map å€¼èªæ³•çµæ§‹ 1make(map[KeyType]KeyType) ä¾†çœ‹ç¯„ä¾‹ 123456789101112131415m := make(map[string]int) // ç­‰åŒ m := map[string]int {} or var m = map[string]int{}fmt.Println(m) // map[]fmt.Println(len(m)) // 0if m == nil { fmt.Println(&quot;m is nil&quot;)} else { fmt.Println(&quot;m is not nil&quot;)}m[&quot;hello&quot;] = 1fmt.Println(m) // map[hello:1]// å–å¾—ç‰¹å®š key å°æ‡‰çš„ valuefmt.Println(m[&quot;hello&quot;]) // 1 è¼¸å‡ºçµæœç‚ºï¼š 12345map[]0m is not nilmap[hello:1]1 åˆå§‹åŒ– map æ™‚çµ¦å€¼é‡åˆ°å·²çŸ¥ map ä¸­æœƒæœ‰ key-value çš„æƒ…å½¢ï¼Œå¯ä»¥å¦‚ä¸‹æ–¹ç¯„ä¾‹å»ºç«‹ map 123456789var m = map[string]int{ &quot;one&quot;: 1, &quot;two&quot;: 2, &quot;three&quot;: 3, &quot;four&quot;: 4, &quot;five&quot;: 5, }fmt.Println(m) // map[five:5 four:4 one:1 three:3 two:2 æ³¨æ„: æœ€å¾Œä¸€å€‹å¿…éœ€åŠ ä¸Šé€—è™Ÿï¼Œå¦å‰‡å°‡å‡ºç¾ç·¨è­¯éŒ¯èª¤è‹¥æ˜¯æœ€å¾Œä¸€å€‹ key-value é …ç›®å¾Œä¸æ›è¡Œï¼Œæœ€å¾Œä¸€å€‹å°±ä¸éœ€è¦é€—è™Ÿ 12t := map[string]int{&quot;t1&quot;: 1, &quot;t2&quot;: 2}fmt.Println(t) // map[t1:1 t2:2] å¯ç”¨ä¾†åšç‚º key çš„å€¼Golang è£¡å¯ç”¨ä¾†åšç‚º key çš„å€¼ï¼Œé ˆç‚º comparable å‹æ…‹ï¼Œå¦‚ï¼šæ•¸å€¼ã€å­—ä¸²ã€å¸ƒæ—å€¼ã€channelã€pointerã€structã€interface ç­‰ç­‰ï¼Œæ³¨æ„ï¼šå‡½å¼ã€åˆ‡ç‰‡(slice)ã€map çš†ä¸èƒ½åšç‚º key map ç‚ºåƒè€ƒå‹åˆ¥è‹¥å°‡ map æŒ‡æ´¾çµ¦æ–°è®Šæ•¸æ™‚ï¼Œå®ƒå€‘çš†åƒè€ƒåŒæ¨£åº•å±¤çš„è³‡æ–™çµæ§‹ 123456789101112131415mm1 := map[string]int{ &quot;one&quot;: 1, &quot;two&quot;: 2, &quot;three&quot;: 3, &quot;four&quot;: 4, &quot;five&quot;: 5,}mm2 := mm1fmt.Println(&quot;mm1 = &quot;, mm1)fmt.Println(&quot;m2 = &quot;, mm2)fmt.Println(&quot;========&quot;)mm2[&quot;ten&quot;] = 10fmt.Println(&quot;mm1 = &quot;, mm1)fmt.Println(&quot;mm2 = &quot;, mm2) ç”±ä¸‹è¿°çµæœå¯çŸ¥ï¼Œå°‡ mm1 è³¦å€¼çµ¦ mm2 å¾Œ(mm2 := mm1)ï¼Œåªæ”¹è®Š mm2 çš„ key å°æ‡‰çš„å€¼ï¼Œmm1 ç›¸åŒåç¨±çš„ key ä¹Ÿè·Ÿè‘—æ”¹è®Š -&gt; ä¸€å€‹æ”¹è®Šï¼Œå¦ä¸€å€‹ä¹Ÿç›¸æ‡‰çš„æ”¹è®Š 12345mm1 = map[five:5 four:4 one:1 three:3 two:2]mm2 = map[five:5 four:4 one:1 three:3 two:2]========mm1 = map[five:5 four:4 one:1 ten:10 three:3 two:2]mm2 = map[five:5 four:4 one:1 ten:10 three:3 two:2 key-value çš„æ“ä½œmap å­˜å–å¯«é Python çš„äººå°é€™å€‹ç”¨æ³•: m[key] ä¸€é»ä¹Ÿä¸é™Œç”Ÿï¼Œé¡ä¼¼æ–¼å° dictionary çš„æ“ä½œ 12345678910111213141516// åˆå§‹åŒ– mapvar person = make(map[string]string)// æŠŠ key, value åŠ åˆ° map è£¡person[&quot;name&quot;] = &quot;Tom&quot; person[&quot;gender&quot;] = &quot;male&quot;person[&quot;country&quot;] = &quot;ROC&quot;fmt.Println(person) // // map[country:ROC gender:male name:Tom]// å–å¾—ç›®æ¨™ key å°æ‡‰çš„å€¼fmt.Println(person[&quot;name&quot;]) // Tom// è‹¥æ˜¯æŒ‡å®šçš„ key å­˜åœ¨ï¼Œå‰‡æœƒè¦†å¯«è©² key åŸå…ˆå°æ‡‰çš„å€¼ person[&quot;name&quot;] = &quot;Jack&quot;fmt.Println(person) // map[country:ROC gender:male name:Jack] å–å¾—æœªåˆ†æ´¾çµ¦ map ä¸­ keyè‹¥åˆ†æ´¾å¾— key å°šæœªå­˜æ–¼ map ï¼Œå‰‡æœƒå¾—åˆ° map å€¼å‹åˆ¥çš„é›¶å€¼ 12city := person[&quot;city&quot;]fmt.Println(city) // &quot;&quot; åœ¨ä¸Šé¢çš„ç¯„ä¾‹ä¸­ï¼Œç”±æ–¼åç‚º city çš„ key ä¸å­˜æ–¼ map ä¸­ï¼Œå¾—åˆ° map å€¼å‹åˆ¥å°æ‡‰çš„é›¶å€¼ã€‚ç”±æ–¼ map å€¼çš„å‹åˆ¥æ˜¯ stringï¼Œå› æ­¤è¼¸å‡ºçš„çµæœç‚º &quot;&quot; æ‰€ä»¥åœ¨Golang ä¸­å³ä¾¿ key ä¸å­˜æ–¼ map è£¡ï¼Œä¹Ÿä¸æœƒå‡ºç¾åŸ·è¡Œæ™‚æœŸéŒ¯èª¤ å¦‚ä½•æª¢æŸ¥ map ä¸­ä¸å­˜åœ¨çš„ key?å…¶å¯¦ä½¿ç”¨ mapName[key] æ™‚ï¼Œé™¤äº†å¾—åˆ°åˆ†æ´¾çµ¦ç‰¹å®šçš„ key å°æ‡‰çš„å€¼ï¼ŒåŒæ™‚å›å‚³ä¸€å€‹å¸ƒæ—å€¼ã€‚æ›å¥è©±èªªï¼Œè‹¥æ˜¯æ²’æœ‰è©² key ï¼Œå³å›å‚³è©²å€¼çš„è³‡æ–™å‹åˆ¥çš„é›¶å€¼ï¼Œç¬¬äºŒå€‹æ˜¯å¸ƒæ—å€¼ï¼ŒæŒ‡å‡ºéµæ˜¯å¦å­˜åœ¨ã€‚æ‹¿ä¸Šè¿°ç¯„ä¾‹ä¾†çœ‹ 12345name, ok := person[&quot;name&quot;]fmt.Println(&quot;name: &quot;, name, ok)city, ok := person[&quot;city&quot;]fmt.Println(&quot;city: &quot;, city, ok) å›å‚³çµæœ 12name: Jennifer truecity: false å¾çµæœå¯çŸ¥ï¼Œè‹¥è©² key æ˜¯å­˜åœ¨çš„ï¼Œå›å‚³å¸ƒæ—å€¼ç‚º trueï¼Œåä¹‹å‰‡ç‚º falseã€‚è—‰ç”±ä¸Šè¿°æ–¹æ³•ï¼Œæˆ‘å€‘ä¹Ÿèƒ½å–®ç´”åšæª¢æŸ¥ key æ˜¯å¦å­˜åœ¨ï¼Œä½¿ç”¨ _ ç•¥éå›å‚³çš„å€¼ 1234567891011if _, ok := person[&quot;name&quot;]; ok { fmt.Println(&quot;Name existed&quot;)} else { fmt.Println(&quot;No name&quot;)}if _, ok := person[&quot;city&quot;]; ok { fmt.Println(&quot;City existed&quot;)} else { fmt.Println(&quot;No city&quot;)} çµæœ 12name: JenniferNo city åˆªé™¤ map ä¸­çš„ keyä½¿ç”¨å…§å»ºå‡½å¼ delete() åˆªé™¤ map ä¸­çš„ keyï¼Œè€Œå‡½å¼ä¸æœƒå›å‚³ä»»ä½•å€¼ã€‚è‹¥è©² key ä¸å­˜æ–¼ mapä¸­ï¼Œä¹Ÿä¸æœƒåŸ·è¡Œä»»ä½•æ“ä½œã€‚ èªæ³•çµæ§‹1delete(map, key) ç¯„ä¾‹ 12345678910person := map[string]string{ &quot;name&quot;: &quot;Tom&quot;, &quot;gender&quot;: &quot;male&quot;, &quot;country&quot;: &quot;ROC&quot;,}fmt.Println(person) // map[country:ROC gender:male name:Tom]delete(person, &quot;gender&quot;)fmt.Println(person) // map[country:ROC name:Tom] è¿­ä»£ mapé€é for è¿´åœˆæ­é… range è¿­ä»£ map 123456789101112131415161718192021person := map[string]string{ &quot;name&quot;: &quot;Tom&quot;, &quot;gender&quot;: &quot;male&quot;, &quot;country&quot;: &quot;ROC&quot;,}fmt.Println(&quot;====== è¿­ä»£ key, value ======&quot;)for k, v := range person { // è¿­ä»£ key, value fmt.Println(&quot;key: &quot;, k) fmt.Println(&quot;value: &quot;, v)}fmt.Println(&quot;====== åªè¿­ä»£ key ======&quot;)for k := range person { // åªè¿­ä»£ key fmt.Println(&quot;key: &quot;, k)}fmt.Println(&quot;====== åªè¿­ä»£ value ======&quot;)for _, v := range person { // åªè¿­ä»£ value fmt.Println(&quot;value: &quot;, v)} çµæœ 123456789101112131415====== è¿­ä»£ key, value ======key: namevalue: Tomkey: gendervalue: malekey: countryvalue: ROC====== åªè¿­ä»£ key ======key: namekey: genderkey: country====== åªè¿­ä»£ value ======value: Tomvalue: malevalue: ROC æ’åº mapæœ¬æ–‡é–‹é ­æœ‰æåŠ map æ’åˆ—ç„¡ä¸€å®šé †åºï¼Œè‹¥è¦å°‡çµæœåšæ’åºï¼Œå¿…é ˆå¦å¤–è™•ç† 123456789101112131415person := map[string]string{ &quot;name&quot;: &quot;Tom&quot;, &quot;gender&quot;: &quot;male&quot;, &quot;country&quot;: &quot;ROC&quot;,}keys := make([]string, 0, len(person))for key := range person { keys = append(keys, key)}sort.Strings(keys)for _, key := range keys { fmt.Printf(&quot;%s : %q\\n&quot;, key, person[key])} çµæœ 123country : &quot;ROC&quot;gender : &quot;male&quot;name : &quot;Tom&quot;","link":"2020/01/10/Go/%5BGo%5D%20Map/"},{"title":"[Go] GoåŸºç¤","text":"å‰è¨€æœ¬ç¯‡ç”¨æ–¼è¨˜éŒ„Goä¸€äº›åŸºç¤çš„æ¦‚å¿µï¼ŒåŒ…å«è®Šæ•¸é¡å‹ã€è¿´åœˆåŠæ¢ä»¶é‹ç®—ç­‰ è®Šæ•¸å®£å‘ŠGoæ˜¯ä¸€ç¨®éœæ…‹é¡å‹çš„èªè¨€ï¼Œæ˜¯å¼·å‹åˆ¥èªè¨€ã€‚å› ç‚ºå‹åˆ¥éƒ½æ˜¯å›ºå®šçš„ï¼Œå°±ç®—ä¸å…ˆå®£å‘Šå‹åˆ¥ï¼Œä¹Ÿå¿…é ˆè¦æœ‰åˆå§‹å€¼ï¼Œè®“ç·¨è­¯å™¨ä¾†åˆ¤æ–·é€™å€‹è®Šæ•¸çš„é è¨­å€¼æ˜¯ä»€éº¼å‹åˆ¥ã€‚ Goå®£å‘Šå‹åˆ¥æ˜¯æ”¾åœ¨è®Šæ•¸ä¹‹å¾Œ ä¸€èˆ¬å®£å‘Šç¯„ä¾‹:å®šç¾©ä¸€å€‹åç‚ºaçš„è®Šæ•¸ï¼Œè‹¥è³‡æ–™å‹åˆ¥æ˜¯intçš„è©±ï¼Œé è¨­å€¼ç‚º0 1var a int æˆ–æ˜¯ç›´æ¥è³¦å€¼çµ¦ä»– 1var a = 1 çŸ­èªæ³•Goä¹Ÿå¯ä»¥ä½¿ç”¨:=çš„æ–¹å¼ï¼Œç”¨æ›´ç°¡çŸ­çš„èªæ³•ä¾†å®šç¾©è®Šæ•¸ 1234567891011package mainimport &quot;fmt&quot;func main() { var i, j int = 1, 2 k := 3 c, python, java := true, false, &quot;no!&quot; fmt.Println(i, j, k, c, python, java)} :=çµæ§‹ä¸èƒ½ä½¿ç”¨åœ¨å‡½å¼å¤–ã€‚ åˆé©çš„ä½¿ç”¨æ™‚æ©Ÿä¸€èˆ¬ä¾†èªªï¼ŒçŸ­èªæ³•é©åˆçš„ä½¿ç”¨æ™‚æ©Ÿæœ‰ä¸‰å€‹: å·²çŸ¥è®Šæ•¸çš„åˆå§‹å€¼ è®“ç¨‹å¼æ›´ç°¡æ½” ç”¨æ–¼é‡è¤‡å®£å‘Š ç¯„ä¾‹12345678910111213141516171819202122// è®Šæ•¸åˆå§‹å€¼æœªçŸ¥// bestvar number int// worstnumber := 0// è®Šæ•¸åˆå§‹å€¼å·²çŸ¥// bestwidth, height := 100, 50// worstvar width, height int = 100, 50// ç”¨æ–¼é‡è¤‡å®£å‘Š// bestwidth, color := 70, &quot;red&quot;// worstwidth = 70color := &quot;red&quot; å®£å‘Šå¤šå€‹è®Šæ•¸123var a,b,c intvar a,b,c int = 1,2,3var a,b,c = 1,2,3 æ‹¬å¼§å¼å®£å‘Šåªè¦é‡è¤‡çš„å®£å‘Šæ–¹å¼ï¼Œéƒ½å¯ä»¥ç”¨()åŒ…èµ·ä¾† 1234var ( name = &quot;Tom&quot; c, d = 3, 4) å®£å‘Šå¸¸æ•¸é¦–å­—ä¸ä¸€å®šè¦å¤§å¯«ï¼Œä½†ç‚ºäº†å¼·èª¿å…¶é‡è¦æ€§ï¼Œå¤§å¤šé‚„æ˜¯æ¡å¤§å¯«ã€‚ 1const PI = 3.14 å¸¸æ•¸ä¸èƒ½ä½¿ç”¨ := çŸ­èªæ³•å®šç¾© é‡è¤‡å®£å‘Š(redeclaration)åœ¨Goçš„ç¨‹å¼è¨­è¨ˆä¸­ï¼Œæ˜¯ä¸å…è¨±åŒä¸€è®Šæ•¸å®£å‘Šå…©æ¬¡ï¼Œè‹¥é‡æ–°å°ä¸€è®Šæ•¸é€²è¡Œå®£å‘Šæ™‚æœƒå‡ºç¾name redeclared in this blockçš„éŒ¯èª¤è¨Šæ¯ã€‚ 12345var name string = &quot;hello&quot;var name string = &quot;hey&quot;fmt.Println(name)// name redeclared in this block è§£æ±ºé‡è¤‡å®£å‘Šçš„å•é¡Œå¯ä»¥æ¡ç”¨å®£å‘Šå¤šå€‹è®Šæ•¸ï¼Œä¹Ÿå°±æ˜¯é™¤äº†é‡è¤‡å®£å‘Šçš„è®Šæ•¸å¤–ï¼Œå†å¦å¤–ä»¥çŸ­èªæ³•çš„æ–¹å¼å®£å‘Šä¸€å€‹(æˆ–å¤šå€‹)æ–°è®Šæ•¸ã€‚ 123var name string = &quot;hello&quot;name, name1 := &quot;hey&quot;, &quot;ya~&quot;fmt.Println(name, name1) ä¸Šåœ–å¯ä»¥çœ‹å‡ºnameè®Šæ•¸è¢«é‡æ–°è³¦äºˆæ–°çš„å€¼ è‹¥æ¡ç”¨varçš„æ–¹å¼é€²è¡Œé‡è¤‡å®£å‘Šä¹Ÿæœƒå ±é‡è¤‡å®£å‘Šçš„éŒ¯èª¤è¨Šæ¯ 123var name string = &quot;hello&quot;var name, name1 = &quot;hey&quot;, &quot;ya~&quot;fmt.Println(name, name1) è³‡æ–™å‹åˆ¥Goä¸»è¦ä»¥ä¸‹å¹¾å€‹å‹åˆ¥: å­—ä¸²(String)ç›¸é—œçš„å‹åˆ¥ string: byte: uint8çš„åˆ¥å rune int32çš„åˆ¥åï¼Œå°‡å­—ä¸²ä»¥ Unicodeåˆ‡é–‹æ™‚æ‰€ç”¨çš„å‹åˆ¥ï¼Œä»£è¡¨ä¸€å€‹Unicodeç¢¼ã€‚ æ•¸å­—(Number)ç›¸é—œçš„å‹åˆ¥æœ‰è™Ÿæ•´æ•¸int(32æˆ–64ä½å…ƒ)ã€int8ã€int16ã€int32ã€int64 ç„¡è™Ÿæ•´æ•¸uint(32æˆ–64ä½å…ƒ)ã€uint8ã€uint16ã€uint32ã€uint64ã€uintptr æµ®é»æ•¸ float32: 32ä½å…ƒ float64: 64ä½å…ƒ è¤‡æ•¸åˆ†ç‚ºå¯¦æ•¸åŠè™›æ•¸å…©éƒ¨åˆ† complex64 complex128é¡å‹è½‰æ›ç¯„ä¾‹: æ•¸å€¼çš„è½‰æ›123var i int = 42var f float64 = float64(i)var u uint = uint(f) æˆ–æ›´ç°¡å–®çš„å½¢å¼ï¼š123i := 42f := float64(i)u := uint(f) æ•¸å­—è½‰å­—ä¸²å…©ç¨®inté¡å‹è½‰åŒ–æˆstringé¡å‹çš„æ–¹æ³•ï¼Œå¯é€éstrconvé€™å€‹packageå®Œæˆã€‚ Itoaæ–¹æ³• Sprintfæ–¹æ³• 1234567891011121314151617181920package main import ( &quot;fmt&quot; &quot;strconv&quot;) var i int = 10 func main() { // Itoaæ–¹æ³• str1 := strconv.Itoa(i) // Sprintfæ–¹æ³• str2 := fmt.Sprintf(&quot;%d&quot;, i) fmt.Println(str1) fmt.Println(str2)} %dè¡¨ç¤º Integer åˆå§‹å€¼Goåœ¨å®£å‘Šè®Šæ•¸æ™‚ï¼Œå¦‚æœæ²’æœ‰çµ¦å®šè©²è®Šæ•¸åˆå§‹å€¼ï¼ŒGoæœƒä¾ç…§å®£å‘Šè®Šæ•¸çš„è³‡æ–™å‹æ…‹å»çµ¦äºˆé è¨­çš„åˆå§‹å€¼ï¼Œå¦‚: int: 0 bool: false float64: 0 string: &quot;&quot;12345678910111213141516var ( init_int int init_float64 float64 init_bool bool init_string string)fmt.Println(init_int)fmt.Println(init_float64)fmt.Println(init_bool)fmt.Println(init_string)/*00false*/ ä¸å…è¨±å·²å®£å‘Šä½†æœªè¢«ä½¿ç”¨çš„è®Šæ•¸åœ¨Goçš„è¨­è¨ˆä¸­ï¼Œä¸å…è¨±å·²å®£å‘Šä½†æœªè¢«ä½¿ç”¨çš„è®Šæ•¸ï¼Œè‹¥æœ‰å‰é¢çš„æƒ…å½¢ï¼Œæœƒåœ¨ç·¨è­¯æ™‚è·³å‡ºdeclared and not usedçš„éŒ¯èª¤è¨Šæ¯ã€‚ 12345678910var ( init_int int init_float64 float64 init_bool bool init_string string) fmt.Println(init_float64)fmt.Println(init_bool)fmt.Println(init_string) çµæœinit_int declared and not used blank identifierä¸Šè¿°å®£é«˜æœªä½¿ç”¨çš„è®Šæ•¸ï¼ŒGoåœ¨ç·¨è­¯æ™‚æœƒè·³å‡ºéŒ¯èª¤çš„è¨Šæ¯ï¼Œè‹¥è¦åœ¨ç·¨è­¯æ™‚é¿å…è©²éŒ¯èª¤ï¼Œå¯ä»¥ä½¿ç”¨blank identifierï¼Œå°‡æœªä½¿ç”¨çš„è®Šæ•¸è³¦å€¼çµ¦_ã€‚ ç¯„ä¾‹123456789101112131415var ( init_int int init_float64 float64 init_bool bool init_string string)_ = init_int // è³¦å€¼æ“ä½œfmt.Println(init_float64)fmt.Println(init_bool)fmt.Println(init_string)/*0false*/ å‡½å¼()å…§çš„åƒæ•¸ä»¥åŠå›å‚³å€¼éœ€è¦å®£å‘Šå‹åˆ¥ã€‚ç¯„ä¾‹ 12345678910111213package mainimport &quot;fmt&quot;func add(x int, y int) int { return x + y}func main() { fmt.Println(add(42, 13))}// è¿”å›çµæœ// 55 ä¸Šè¿°ç¯„ä¾‹ç‚ºä¸€å€‹add functionï¼Œå‚³å…¥xã€yå…©å€‹è³‡æ–™å‹åˆ¥ç‚ºintçš„åƒæ•¸ï¼Œå›å‚³intçš„è³‡æ–™å‹åˆ¥ã€‚ ç¸®çŸ­åŒä¸€é¡å‹åƒæ•¸çš„å‹åˆ¥å®£å‘Šç•¶å…©å€‹æˆ–å¤šå€‹é€£çºŒçš„å‡½å¼å‘½ååƒæ•¸æ˜¯åŒä¸€é¡å‹ã€‚ç¯„ä¾‹: 12345678910111213package mainimport &quot;fmt&quot;func add(x, y int) int { return x + y}func main() { fmt.Println(add(42, 13))}// è¿”å›çµæœ// world hello å¤šå€¼è¿”å›å‡½å¼å¯ä»¥è¿”å›ä»»æ„æ•¸é‡çš„è¿”å›å€¼ã€‚ 1234567891011121314package mainimport &quot;fmt&quot;func swap(x, y string) (string, string) { return y, x}func main() { a, b := swap(&quot;hello&quot;, &quot;world&quot;) fmt.Println(a, b)}// è¿”å›çµæœ// world hello å‘½åè¿”å›å€¼å¦‚æœå‘½åäº†è¿”å›å€¼åƒæ•¸ï¼Œä¸€å€‹æ²’æœ‰åƒæ•¸çš„ return èªå¥ï¼Œæœƒå°‡ç•¶å‰çš„å€¼ä½œç‚ºè¿”å›å€¼è¿”å›ã€‚ 123456789101112131415package mainimport &quot;fmt&quot;func split(sum int) (x, y int) { x = sum * 4 / 9 y = sum - x return}func main() { fmt.Println(split(17))}// è¿”å›çµæœ// 7 10 :=å®£å‘Šè®Šæ•¸çš„èªæ³•åªèƒ½åœ¨å‡½æ•¸å…§éƒ¨ä½¿ç”¨ã€‚ è¿´åœˆ(Loop)Goåªæœ‰ä¸€ç¨®å¾ªç’°çµæ§‹ï¼šforè¿´åœˆã€‚Goçš„forè¿´åœˆæ²’æœ‰()ç¯„ä¾‹: 123456789101112package mainimport &quot;fmt&quot;func main() { sum := 0 for i := 0; i &lt; 10; i++ { sum += i } fmt.Println(sum)}// 45 å¯ä»¥è®“å‰ç½®ã€å¾Œç½®èªå¥ç‚ºç©º123456789101112package mainimport &quot;fmt&quot;func main() { sum := 1 for ; sum &lt; 1000; { sum += sum } fmt.Println(sum)}// 1024 åŒWhileå¯«æ³•123456789101112package mainimport &quot;fmt&quot;func main() { sum := 1 for sum &lt; 1000 { sum += sum } fmt.Println(sum)}// 1024 ç„¡çª®è¿´åœˆ123456package mainfunc main() { for { }} if-elseif èªå¥é™¤äº†æ²’æœ‰( ) if çš„ä¾¿æ·èªå¥è·Ÿ forä¸€æ¨£ï¼Œ ifå¯ä»¥åœ¨æ¢ä»¶ä¹‹å‰åŸ·è¡Œä¸€å€‹ç°¡å–®çš„é™³è¿°å¼ã€‚ ç”±é€™å€‹èªå¥å®šç¾©çš„è®Šæ•¸çš„ä½œç”¨åŸŸåƒ…åœ¨ if ç¯„åœä¹‹å…§ã€‚ ç¯„ä¾‹:123456789101112131415161718192021package mainimport ( &quot;fmt&quot; &quot;math&quot;)func pow(x, n, lim float64) float64 { if v := math.Pow(x, n); v &lt; lim { return v } return lim}func main() { fmt.Println( pow(3, 2, 10), pow(3, 3, 20), )}// 9 20 switchå’Œå¤§å¤šçš„ç¨‹å¼èªè¨€ä¸€æ¨£ï¼Œä¸éswitchå¾Œæ–¹ä¸éœ€æ¥() 12345678910111213141516171819202122package mainimport ( &quot;fmt&quot; &quot;runtime&quot;)func main() { fmt.Print(&quot;Go runs on &quot;) switch os := runtime.GOOS; os { case &quot;darwin&quot;: fmt.Println(&quot;OS X.&quot;) case &quot;linux&quot;: fmt.Println(&quot;Linux.&quot;) default: // freebsd, openbsd, // plan9, windows... fmt.Printf(&quot;%s.&quot;, os) }}// When's Saturday?// Too far away. æ²’æœ‰æ¢ä»¶çš„switchæ²’æœ‰æ¢ä»¶çš„switch åŒswitch trueä¸€æ¨£ã€‚ 12345678910111213141516171819package mainimport ( &quot;fmt&quot; &quot;time&quot;)func main() { t := time.Now() switch { case t.Hour() &lt; 12: fmt.Println(&quot;Good morning!&quot;) case t.Hour() &lt; 17: fmt.Println(&quot;Good afternoon.&quot;) default: fmt.Println(&quot;Good evening.&quot;) }}// Good evening. åƒè€ƒGolang å®˜æ–¹æ•™å­¸ å¦‚ä½•ç·¨å¯«Goç¨‹å¼ GOPATH èˆ‡å·¥ä½œç©ºé–“ Go ç¨‹å¼è¨­è¨ˆå°è«– Go èªè¨€çš„è³‡æ–™å‹åˆ¥ (Data Type)","link":"2020/01/07/Go/%5BGo%5D%20Go%E5%9F%BA%E7%A4%8E%E8%AA%8D%E8%AD%98/"},{"title":"[Go] ç’°å¢ƒå®‰è£èˆ‡è¨­å®š","text":"åœ–ç‰‡æº å‰è¨€æœ¬ç¯‡ç”¨æ–¼è¨˜éŒ„Goçš„å®‰è£ã€ç’°å¢ƒè¨­å®šç­‰å‰ç½®å·¥ä½œã€‚ å®‰è£GoMac OSXçš„è©±å¯ä»¥ç›´æ¥å¾Terminalç”¨Homebrewé€²è¡Œå®‰è£ï¼š 1brew install go æˆ–æ˜¯é€éå®˜æ–¹ä¸‹è¼‰ Goæœƒåœ¨ç³»çµ±å…§é è¨­ä¸€å€‹å°ˆå±¬æ–¼æ”¾ç½®æ‰€æœ‰Goå°ˆæ¡ˆçš„è³‡æ–™å¤¾ æŸ¥çœ‹ç›¸é—œè³‡è¨ŠåŠè¨­å®šæŸ¥çœ‹ç‰ˆæœ¬1go version æŸ¥çœ‹Goèªè¨€çš„ç’°å¢ƒè®Šæ•¸èˆ‡ä½¿ç”¨å·¥å…·çš„é…ç½®ç­‰è³‡è¨Šã€‚1go env åŸ·è¡ŒæŒ‡ä»¤å¾Œå¯ä»¥çœ‹åˆ°è¨±å¤šç›¸é—œè³‡è¨Š æŸ¥çœ‹Goå·¥ä½œç›®éŒ„goå‘½ä»¤ä»°è³´ä¸€å€‹é‡è¦çš„ç’°å¢ƒè®Šæ•¸:GOPATHï¼Œç‚ºGoçš„å·¥ä½œç›®éŒ„ï¼Œé›†ä¸­ç®¡ç†code, packageå’ŒåŸ·è¡Œæª”ï¼ŒåŸ·è¡Œä¸‹é¢çš„æŒ‡ä»¤å¯ä»¥çœ‹åˆ°ç›®å‰goçš„å·¥ä½œç›®éŒ„ 1go env GOPATH æˆ–æ˜¯åŸ·è¡Œä»¥ä¸‹æ–¹æ³• 1echo $GOPATH 1/Users/tsungyuchen/go å¦‚æœæƒ³è¦åœ¨éé è¨­å·¥ä½œå€çš„è·¯å¾‘å·¥ä½œï¼Œé‚£éº¼ä½ éœ€è¦è¨­å®šGOPATHç’°å¢ƒè®Šæ•¸æŒ‡å‘é‚£å€‹ç›®éŒ„ GOPATH è·¯å¾‘å•é¡Œ è§£æ±ºæ–¹æ³• GOROOTGolangä¸»ç¨‹å¼å®‰è£çš„ä½ç½® è¨­ç½®çš„ç’°å¢ƒè®Šæ•¸å¦‚æœæ˜¯bashä¸­è¨­ç½® 1vim .bash_profile ä½¿ä¿®æ”¹ç«‹åˆ»ç”Ÿæ•ˆ 1source .bash_profile ç·¨è­¯æˆäºŒå…ƒæª”åŸ·è¡Œgo buildå°‡æª”æ¡ˆé€²compileæˆäºŒå…ƒçš„åŸ·è¡Œæª”(çµ¦æ©Ÿå™¨è®€çš„) åŸ·è¡Œç‚ºåŸ·è¡Œæª”å¦‚:./main: åŸ·è¡Œåç‚ºmain çš„åŸ·è¡Œæª” æŸ¥çœ‹ç·¨è­¯å¾Œçš„äºŒé€²åˆ¶æª”æ¡ˆæŒ‡ä»¤: ls -l Packagesç‚ºè©²æª”æ¡ˆçš„æ¨™é¡Œï¼ŒåŒæ™‚ä¹Ÿè¡¨ç¤ºè©²æª”æ¡ˆçš„å…§å®¹æ‘˜è¦ï¼Œå¿…é ˆå¯«åœ¨ç¬¬ä¸€è¡Œã€‚package mainä»£è¡¨é€™å€‹æª”æ¡ˆå…§å®¹æ¨™é¡Œç‚ºmainï¼Œé€™æ˜¯Goå…§å»ºçš„è¦å‰‡ï¼Œåœ¨åŸ·è¡Œ.goçš„ç¨‹å¼æ™‚ï¼Œä¸€å®šè¦åŸ·è¡Œåç¨±ç‚ºmainçš„packageï¼Œè‹¥æ²’æœ‰æŒ‰ç…§è¦å‰‡ï¼ŒåŸ·è¡Œç¨‹å¼æœƒå‡ºç¾ä»¥ä¸‹éŒ¯èª¤è¨Šæ¯ï¼š é‡è¦è§€å¿µ: Packages: æ¯å€‹ Go ç¨‹å¼éƒ½æ˜¯ç”±packageçµ„æˆçš„ï¼Œç‚ºäº†æ–¹ä¾¿ç¶­è­·ï¼Œç›¡é‡å°‡packageåç¨±å’Œç›®éŒ„åç¨±ä¸€è‡´)åœ–ç‰‡ä¾†æº è‡ªå®šç¾©ä¸€å€‹packageGoå¯ä»¥è‡ªå·±å®šç¾©ä¸€å€‹packageï¼Œåœ¨ä¸»è¦æª”æ¡ˆå¼•å…¥è©²packageæ™‚ï¼ŒåŠ å…¥importè©²packageçš„è³‡æ–™å¤¾åç¨±ï¼Œè€Œè‡ªå®šç¾©çš„packageè‹¥è¦åŒ¯å‡ºçµ¦å…¶ä»–ä½¿ç”¨ï¼Œå…ˆå®šç¾©è©²æª”æ¡ˆä¸‹çš„packageåç¨±ã€å‡½å¼åç¨±ã€‚ è‹¥æ˜¯è‡ªå®šç¾©çš„æª”æ¡ˆåç¨±ï¼Œfuntionåç¨±å¿…é ˆè¦æ˜¯å¤§å¯«ã€‚ ç¯„ä¾‹:è‹¥ä»Šå¤©è¦è‡ªå·±å®šç¾©ä¸€å€‹packageï¼Œåœ¨srcç›®éŒ„ä¸‹å»ºç«‹åç‚ºaddçš„è³‡æ–™å¤¾åç¨±ï¼Œä¸¦åœ¨å…¶è³‡æ–™å¤¾åº•ä¸‹å»ºç«‹add.goçš„æª”æ¡ˆï¼Œæª”æ¡ˆå…§å®¹å¦‚ä¸‹add.go 12345678package add // å®šç¾©packageåimport &quot;fmt&quot;// function å¿…é ˆç‚º&quot;å¤§å¯«&quot;func Add() { fmt.Println(&quot;This is add&quot;)} main.goåŒ¯å…¥add 1234567891011package mainimport ( &quot;add&quot; &quot;fmt&quot;)func main() { fmt.Println(&quot;main is here!&quot;) add.Add() // å‘¼å«Add()} package æœ‰å…©ç¨®ï¼šåŸ·è¡Œç”¨çš„packageã€å‡½å¼åº«çš„packageæ¯”è¼ƒå‡½å¼åº«çš„package ä¸å¯è¢«ç·¨è­¯ï¼Œä½†å¯è¢«ä¸åŒå°ˆæ¡ˆå¼•å…¥ packageåå¯ä»¥è‡ªè¨‚ functionåå¯ä»¥è‡ªè¨‚ï¼Œä½†å¿…é ˆè¦å¤§å¯« åŸ·è¡Œç”¨çš„package ç”¨æ–¼åŸ·è¡Œæ•´æ”¯ç¨‹å¼ ä¸å¯è¢«å¼•å…¥ éœ€æœ‰åç‚ºmainçš„packageå éœ€æœ‰åç‚ºmainçš„functionå åŒ¯å…¥æ¨¡çµ„import å¥—ä»¶åç¨± fmtç‚ºformatç¸®å¯«çš„å¥—ä»¶åç¨±ï¼Œä¸»è¦ç”¨æ–¼èª¿æ•´åŠé¡¯ç¤ºå…§å®¹ã€‚ä¹Ÿå¯è‡ªè¨‚çš„packageåç¨±ã€‚ Goé è¨­æœå°‹packageæ˜¯å¾srcç›®éŒ„åº•ä¸‹é–‹å§‹æœå°‹ importè‡ªå®šç¾©packageæ™‚æ³¨æ„çš„é» ç”±æ–¼importåªèƒ½æŒ‡å®šè³‡æ–™å¤¾ï¼Œç„¡æ³•æŒ‡å®šæª”æ¡ˆ åŒå€‹è³‡æ–™å¤¾åº•ä¸‹åªèƒ½æœ‰ä¸€å€‹packageï¼Œå¦‚ï¼šè³‡æ–™å¤¾åº•ä¸‹æ‰€æœ‰æª”æ¡ˆçš„packageåç¨±éƒ½çµ±ä¸€æ˜¯test_package æª”æ¡ˆä¸»è¦åŸ·è¡Œçš„å‡½å¼è‹¥æª”æ¡ˆå…§çš„packageåç¨±æ˜¯mainï¼Œå‰‡ä¸€å®šè¦æœ‰ä¸€å€‹æ˜¯mainåç¨±çš„functionä½œç‚ºåŸ·è¡Œçš„å‡½å¼ã€‚ è‹¥æ²’æœ‰çš„è©±ï¼Œæœƒå‡ºç¾éŒ¯èª¤è¨Šæ¯ï¼š é™¤äº†mainä¹‹å¤–ï¼Œä¹Ÿå¯è‡ªå®šç¾©å…¶ä»–funcionï¼Œä½†é€™äº›functionä¸æœƒä¸»å‹•åŸ·è¡Œï¼Œè€Œæ˜¯éœ€è¦åœ¨main functionå…§é€²è¡Œå‘¼å«ã€‚å¦‚ä¸‹è¡Œç¯„ä¾‹ 1234567891011121314package mainimport ( &quot;fmt&quot;)func main() { fmt.Println(&quot;main here!1&quot;) test()}func test() { fmt.Println(&quot;test here!&quot;)} ä¸€æ¬¡åŸ·è¡ŒåŒå€‹è³‡æ–™å¤¾ä¸‹å¤šå€‹.goæª”æ¡ˆç•¶åŒå€‹è³‡æ–™å¤¾ä¸‹æœ‰å¤šå€‹.goæª”æ¡ˆæ™‚ï¼Œåœ¨å…¶ä¸­ä¸€å€‹ç¨‹å¼è£¡é¢å‘¼å«å…¶ä»–æª”æ¡ˆæ‰€å®šç¾©çš„å‡½å¼å¯ä»¥ä¸éœ€è¦importè©²æª”æ¡ˆè€Œç›´æ¥å‘¼å«ï¼Œä¸¦åŸ·è¡Œ 1go run *.go ç¯„ä¾‹å‡è¨­ä»Šå¤©åç‚ºtestçš„è³‡æ–™å¤¾ä¸‹åˆ†åˆ¥æœ‰ä¸€å€‹main.goåŠtest.goæª”test.goæª”å…§çš„ç¨‹å¼ç¢¼: 1234567package mainimport &quot;fmt&quot;func test() { fmt.Println(&quot;test here!&quot;)} main.goæª”å…§çš„ç¨‹å¼ç¢¼: 1234567891011package mainimport ( &quot;fmt&quot;)func main() { fmt.Println(&quot;main here!&quot;) test()} main.goæª”å…§çš„ç¨‹å¼ç¢¼åœ¨ä¸å¼•å…¥test.goæª”çš„æƒ…æ³ä¸‹åŸ·è¡Œgo run *.goæ™‚çš„åŸ·è¡Œçµæœ: æˆåŠŸå‘¼å«test.goæª”æ¡ˆè£¡é¢çš„test()å‡½å¼ã€‚ ä½†æ˜¯ï¼ï¼ï¼ï¼ å¦‚æœå–®ç¨åŸ·è¡Œmain.goæœƒå‡ºç¾undefined: testçš„éŒ¯èª¤è¨Šæ¯ åŸå› ï¼šgoåœ¨runä¹‹å‰æœƒå…ˆé€²è¡Œç·¨è­¯æ“ä½œï¼Œè€Œåœ¨æ­¤è™•çš„ç·¨è­¯å®ƒåªæœƒä»¥é€™å€‹main.goç‚ºæº–ï¼Œå°è‡´å…¶ä»–å¹¾å€‹å¼•ç”¨æ–‡ä»¶ä¸­çš„æ–¹æ³•å‡ºç¾æ‰¾ä¸åˆ°çš„æƒ…æ³(ä½†æ¡ç”¨go buildçš„æ–¹å¼åˆä¸ä¸€æ¨£ï¼Œgoæœƒè‡ªå‹•æ‰¾å¼•ç”¨æ–‡ä»¶ä¸¦æ‰“åŒ…) åƒè€ƒGolang å®˜æ–¹æ•™å­¸ å¦‚ä½•ç·¨å¯«Goç¨‹å¼ GOPATH èˆ‡å·¥ä½œç©ºé–“ Go ç¨‹å¼è¨­è¨ˆå°è«– Goèµ·æ­¥èµ° - æª”æ¡ˆåŸºæœ¬çµæ§‹","link":"2020/01/06/Go/%5BGo%5D%20Go%20%E7%92%B0%E5%A2%83%E5%AE%89%E8%A3%9D%E8%88%87%E8%A8%AD%E5%AE%9A/"},{"title":"[Go] JSON è™•ç†","text":"ä»€éº¼æ˜¯ JSONï¼ŸJSON å…¨åç‚º: Javascript Object Notationæ˜¯ä¸€ç¨®è¼•é‡çš„è³‡æ–™äº¤æ›æ ¼å¼ï¼Œåœ¨ç¶²è·¯è³‡æ–™å‚³è¼¸é ˜åŸŸéå¸¸å¸¸è¦‹ï¼Œå¾ˆå¤š open data éƒ½æ˜¯æ¡é€™æ¨£çš„æ ¼å¼åšç‚ºè³‡æ–™äº’å‹•çš„ä»‹é¢ã€‚ JSON ç¯„ä¾‹:è¡¨ç¤ºå¤šå€‹ä½¿ç”¨è€…ï¼Œæ¯å€‹ä½¿ç”¨è€…å¸¶æœ‰ name, gender, age, Country é€™å¹¾é¡çš„è³‡æ–™å±¬æ€§ 1234567891011121314151617181920212223242526&quot;users&quot;: [ { &quot;name&quot;: &quot;Tom&quot;, &quot;gender&quot;: &quot;Male&quot;, &quot;Age&quot;: 24, &quot;Country&quot;: &quot;Taiwan&quot; }, { &quot;name&quot;: &quot;Jack&quot;, &quot;gender&quot;: &quot;Male&quot;, &quot;Age&quot;: 40, &quot;Country&quot;: &quot;Taiwan&quot; }, { &quot;name&quot;: &quot;Amy&quot;, &quot;gender&quot;: &quot;Female&quot;, &quot;Age&quot;: 30, &quot;Country&quot;: &quot;US&quot; }, { &quot;name&quot;: &quot;Jean&quot;, &quot;gender&quot;: &quot;Female&quot;, &quot;Age&quot;: 33, &quot;Country&quot;: &quot;UK&quot; }] Go æä¾›åç‚º json çš„ packageï¼Œå¯ä»¥è—‰ç”±é€™å€‹ package è®“æˆ‘å€‘å° JSON åšç·¨ç¢¼ã€è§£ç¢¼ç­‰æ“ä½œ ç”¢ç”Ÿ JSONGo èªè¨€çš„ json package è£¡é¢æœ‰å€‹å«åš Marshal çš„å‡½å¼å¯å°è³‡æ–™ç·¨ç¢¼æˆ JSON æ ¼å¼ã€‚ èªæ³•çµæ§‹ï¼š1func Marshal(v interface{}) ([]byte, error) ä¸Šè¿°èªæ³•çµæ§‹ä¸­ï¼š interface{}: å¯ç”¨ä¾†å­˜æ”¾ä»»æ„è³‡æ–™å‹åˆ¥çš„ç‰©ä»¶ï¼Œå‰›å¥½é©ç”¨æ–¼è§£ææœªçŸ¥çµæ§‹çš„ json è³‡æ–™æ ¼å¼ []byte: byte å‹åˆ¥çš„ slice åœ¨ Go èªè¨€è£¡ç”¨ä¾†ç·¨ç¢¼ã€è§£ç¢¼ error: å›å‚³å¯èƒ½çš„éŒ¯èª¤çµæœ Marshal ç¯„ä¾‹ 12345678910111213141516171819202122232425// JSON is string data type permission map[string]booltype user struct { name, password string // permission map[string]bool permission}user := []user{ {&quot;tom&quot;, &quot;2332424&quot;, nil}, {&quot;jack&quot;, &quot;4434345&quot;, permission{&quot;admin&quot;: true}}, {&quot;james&quot;, &quot;43434343&quot;, permission{&quot;viewer&quot;: true}}, {&quot;John&quot;, &quot;34447831&quot;, permission{&quot;write&quot;: true}},}data, err := json.Marshal(user)if err != nil { fmt.Println(err) return}fmt.Println(string(data)) // [{},{},{},{}] åŸ·è¡Œä¸Šæ–¹ç¯„ä¾‹ï¼Œçœ‹åˆ°è¼¸å‡ºçµæœç«Ÿç„¶æ˜¯ [{},{},{},{}]??? åŸå› æ˜¯ Go åœ¨ç·¨ç¢¼ JSON æ™‚ï¼Œåªæœ‰é¦–å­—æ¯ç‚ºå¤§å¯«çš„ key å€¼æ‰æœƒè¢«è¼¸å‡ºï¼Œä¹Ÿå°±æ˜¯èªªï¼Œåªæœ‰åŒ¯å‡ºçš„æ¬„ä½æ‰æœƒè¢«è¼¸å‡ºï¼ŒJSON è§£æçš„æ™‚å€™åªæœƒè§£æèƒ½è¢«åŒ¯å‡ºçš„æ¬„ä½ï¼Œæ‰¾ä¸åˆ°çš„æ¬„ä½æœƒè¢«å¿½ç•¥ã€‚ æˆ‘å€‘å¯ä»¥åˆ©ç”¨é€™å€‹ç‰¹é»ï¼šè‹¥æ¥æ”¶åˆ°ä¸€å€‹è³‡æ–™é‡å¾ˆå¤§çš„ JSON è³‡æ–™çµæ§‹è€Œåªæƒ³å–å¾—å…¶ä¸­éƒ¨åˆ†çš„è³‡æ–™æ™‚ï¼Œåªéœ€å°‡æƒ³è¦çš„è³‡æ–™å°æ‡‰çš„æ¬„ä½åç¨±æ¡å¤§å¯«é–‹é ­ï¼Œå³å¯é”æˆç›®çš„ã€‚ struct tagä½† key å€¼éœ€è¦å°å¯«æˆ–å…¶ä»–çš„åç¨±æ€éº¼è¾¦å‘¢ï¼Ÿ Go èªè¨€æä¾›äº† struct tag ä¾†å¯¦ç¾å°å¯«æˆ–å…¶ä»–çš„åç¨±ï¼Œä¾†çœ‹æ”¹å¯«ä¸Šé¢çš„ç¯„ä¾‹: 1234567891011121314151617181920212223242526272829type permissions map[string]booltype user struct { Name string `json:&quot;name&quot;` Password string `json:&quot;password&quot;` // permission map[string]bool Permissions permissions `json:&quot;perms&quot;`}user := []user{ {&quot;tom&quot;, &quot;2332424&quot;, nil}, {&quot;jack&quot;, &quot;4434345&quot;, permissions{&quot;admin&quot;: true}}, {&quot;james&quot;, &quot;43434343&quot;, permissions{&quot;viewer&quot;: true}}, {&quot;John&quot;, &quot;34447831&quot;, permissions{&quot;write&quot;: true}},}data, err := json.Marshal(user)if err != nil { fmt.Println(err)return}fmt.Println(string(data))// output// [{&quot;name&quot;:&quot;tom&quot;,&quot;password&quot;:&quot;2332424&quot;,&quot;perms&quot;:null},{&quot;name&quot;:&quot;jack&quot;,&quot;password&quot;:&quot;4434345&quot;,&quot;perms&quot;:{&quot;admin&quot;:true}},{&quot;name&quot;:&quot;james&quot;,&quot;password&quot;:&quot;43434343&quot;,&quot;perms&quot;:{&quot;viewer&quot;:true}},{&quot;name&quot;:&quot;John&quot;,&quot;password&quot;:&quot;34447831&quot;,&quot;perms&quot;:{&quot;write&quot;:true}}] struct tag å¹¾å€‹ç‰¹é»: æ¬„ä½çš„ tag æ˜¯ &quot;-&quot;: é€™å€‹æ¬„ä½ä¸æœƒè¼¸å‡ºåˆ° JSON tag ä¸­å¸¶æœ‰è‡ªè¨‚åç¨±ï¼Œé‚£éº¼é€™å€‹è‡ªè¨‚åç¨±æœƒå‡ºç¾åœ¨ JSON çš„æ¬„ä½åä¸­ï¼Œä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­ tag é¸é …ä¸­å¦‚æœæœ‰ &quot;omitempty&quot; ï¼Œè¡¨è©²æ¬„ä½å¦‚æœå€¼ç‚ºç©ºå€¼ï¼Œå°±ä¸æœƒè¼¸å‡ºåˆ° JSON ä¸­ è‹¥æ¬„ä½æ˜¯ bool, string, int, int64 ç­‰å‹åˆ¥ï¼Œè€Œ tag ä¸­å¸¶æœ‰ &quot;,string&quot; ï¼Œè©²æ¬„ä½åœ¨è¼¸å‡ºåˆ° JSON å€™æœƒå°‡è©²æ¬„ä½å°æ‡‰çš„å€¼è½‰æ›æˆ JSON å­—ä¸² å°‡ä¸Šè¿°ç‰¹é»å¥—å…¥ç¯„ä¾‹: 123456789101112131415161718192021222324type permissions map[string]booltype user struct { Name string `json:&quot;name&quot;` Password string `json:&quot;password&quot;` Age int `json:&quot;age,string&quot;` Permissions permissions `json:&quot;perms,omitempty&quot;`}user := []user{ {&quot;tom&quot;, &quot;2332424&quot;, 20, nil}, {&quot;jack&quot;, &quot;4434345&quot;, 30, permissions{&quot;admin&quot;: true}},}data, err := json.Marshal(user)if err != nil { fmt.Println(err) return}fmt.Println(string(data))// output// [{&quot;name&quot;:&quot;tom&quot;,&quot;password&quot;:&quot;2332424&quot;,&quot;age&quot;:&quot;20&quot;},{&quot;name&quot;:&quot;jack&quot;,&quot;password&quot;:&quot;4434345&quot;,&quot;age&quot;:&quot;30&quot;,&quot;perms&quot;:{&quot;admin&quot;:true}}] è§€å¯Ÿè¼¸å‡ºçµæœï¼Œname ç‚º tom çš„ user å› ç‚º perms è¢«æ·»åŠ äº† &quot;omitempty&quot; é¸é …ï¼Œæ•… perms æ²’æœ‰å€¼è¼¸å‡º(è¥¿ç›¸è¼ƒæ–¼ä¸Šå€‹ç¯„ä¾‹çš„ &quot;perms&quot;:null )ï¼Œè€Œ jack å‰‡è¼¸å‡º perms&quot;:{&quot;admin&quot;:true}ã€‚ å¦å¤–ï¼Œage åŸå§‹å‹åˆ¥ç‚º int ï¼Œè—‰ç”± &quot;,string&quot; é¸é …è¢«è½‰æˆå­—ä¸²ã€‚ Marshal å‡½å¼åªæœ‰åœ¨è½‰æ›æˆåŠŸçš„æ™‚å€™æ‰æœƒå›å‚³è³‡æ–™ï¼Œè½‰æ›çš„éç¨‹ä¸­éœ€è¦æ³¨æ„å¹¾é»ï¼š JSON ç‰©ä»¶ key å€¼åªæ”¯æ´ string å‹åˆ¥ï¼Œæ•…ç·¨ç¢¼(encoding) ä¸€å€‹ map å‹åˆ¥å¿…é ˆæ˜¯ map[string]T é€™ç¨®å‹åˆ¥ (è£œå……ï¼š T æ˜¯ Go èªè¨€ä¸­çš„ä»»æ„å‹åˆ¥) å·¢ç‹€è³‡æ–™æ˜¯ä¸èƒ½ç·¨ç¢¼ JSON æŒ‡æ¨™æ–¼ç·¨ç¢¼æ™‚æœƒè¼¸å‡ºæŒ‡æ¨™æŒ‡å‘çš„å…§å®¹ï¼Œè€Œç©ºæŒ‡æ¨™å‰‡æœƒè¼¸å‡º null è§£æ JSONå‰é¢å·²ç¶“æåˆ°å¦‚ä½•ç”¢ç”Ÿ JSON è³‡æ–™ï¼Œæ¥è‘—çœ‹å¦‚ä½•è§£æ JSON å§ï¼è€Œjson é€™å€‹ package æä¾› Unmarshal å‡½å¼ä¾†è§£æ JSONã€‚ æ–¼ json.UnMarshal() æ–¹æ³•æ¥æ”¶çš„æ˜¯ä½å…ƒçµ„(Bytes)åˆ‡ç‰‡(Slice)ï¼Œéœ€å…ˆæŠŠ JSON å­—ä¸²è½‰æ›æˆä½å…ƒçµ„åˆ‡ç‰‡ èªæ³•çµæ§‹ï¼š1func Unmarshal(data []byte, v interface{}) error å·²çŸ¥ JSON è³‡æ–™çµæ§‹çš„æƒ…å½¢ä¸‹ä¾†çœ‹æ®µç¯„ä¾‹ 12345678910111213141516171819202122232425type User struct { ID int Name string Money float64 Skills []string Relationship map[string]string Identification Identification}type Identification struct { Phone bool `json:&quot;phone&quot;` Email bool `json:&quot;email&quot;`}var jsonData = []byte(`{&quot;ID&quot;:1,&quot;Name&quot;:&quot;Tony&quot;,&quot;Money&quot;:10.1,&quot;Skills&quot;:[&quot;program&quot;,&quot;rich&quot;,&quot;play&quot;],&quot;Relationship&quot;:{&quot;Dad&quot;:&quot;Hulk&quot;,&quot;Mon&quot;:&quot;Natasha&quot;},&quot;Identification&quot;:{&quot;phone&quot;:true,&quot;email&quot;:false}}`)var user Usererr := json.Unmarshal(jsonData, &amp;user)if err != nil { fmt.Println(&quot;error:&quot;, err)}fmt.Printf(&quot;%+v\\n&quot;, user)// {ID:1 Name:Tony Money:10.1 Skills:[program rich play] Relationship:map[Dad:Hulk Mon:Natasha] Identification:{Phone:true Email:false}} æœªçŸ¥ JSON è³‡æ–™çµæ§‹çš„æƒ…å½¢ä¸‹è‹¥ä¸çŸ¥é“è¢«è§£æçš„ä¾†æº JSON è³‡æ–™çµæ§‹ï¼Œå¯æ¡ç”¨ interface{} ä¾†å­˜ä»»æ„è³‡æ–™å‹åˆ¥çš„ç‰©ä»¶ã€‚ json å¥—ä»¶æ¡ç”¨ map[string]interface{} å’Œ[]interface{} çµæ§‹ä¾†å­˜æ”¾ä»»æ„çš„ JSON ç‰©ä»¶å’Œé™£åˆ—ã€‚ Go å‹åˆ¥å’Œ JSON å‹åˆ¥çš„å°æ‡‰é—œä¿‚æ•´ç†æˆä¸‹æ–¹è³‡è¨Šï¼š bool: JSON booleans, float64: JSON numbers, string: JSON strings, nil: JSON null. ç¯„ä¾‹:å‡è¨­æœ‰å¦‚ä¸‹çš„ JSON è³‡æ–™ 1jsonData := []byte(`{&quot;Name&quot;:&quot;Eve&quot;,&quot;Age&quot;:6,&quot;Parents&quot;:[&quot;Alice&quot;,&quot;Bob&quot;]}`) åœ¨ä¸çŸ¥å…¶çµæ§‹æƒ…æ³ä¸‹ï¼Œå°‡å…¶è§£æåˆ° interface{} è£¡ 1234567var v interface{}json.Unmarshal(jsonData, &amp;v)jdata := v.(map[string]interface{})fmt.Println(&quot;jdata after parsing json: &quot;, jdata) // jdata after parsing json: map[Age:6 Name:Eve Parents:[Alice Bob]] é€™æ™‚ f è®Šæ•¸è£¡ç­‰åŒå­˜æ”¾äº†ä¸€å€‹ map å‹åˆ¥ï¼Œkey å€¼ç‚º stringï¼Œå€¼å­˜åœ¨ç©ºçš„ interface{} è£¡ï¼ŒåŒä¸‹æ–¹ç¯„ä¾‹ 123456v := map[string]interface{}{ &quot;Name&quot;: &quot;Eve&quot;, &quot;Age&quot;: 6, &quot;Parents&quot;: []interface{}{&quot;Alice&quot;, &quot;Bob&quot;},}fmt.Println(&quot;v: &quot;, v) // v: map[Age:6 Name:Eve Parents:[Alice Bob]] æ¥è‘—é€éæ–·è¨€çš„æ–¹å¼ä¾†æå– JSON è³‡æ–™ Type assertions å‹æ…‹æ–·è¨€å‹æ…‹æ–·è¨€æ–¼å®˜æ–¹æ–‡ä»¶æœ‰ç´°éƒ¨èªªæ˜ï¼Œæœ¬ç¯‡åªæœƒäº›å¾®å¸¶é èªæ³•çµæ§‹: 1x.(T) 12345jdata := v.(map[string]interface{})fmt.Println(&quot;jdata after parsing json: &quot;, jdata)// fmt.Println(&quot;jdata after parsing json: &quot;, jdata) æ¥è‘—ç”¨ for loop å°å‡ºæ‰€æœ‰è³‡æ–™ 123456789101112131415161718192021for k, v := range jdata { switch v := v.(type) { case string: fmt.Println(k, v, &quot;(string)&quot;) case float64: fmt.Println(k, v, &quot;(float64)&quot;) case []interface{}: fmt.Println(k, &quot;(array):&quot;) for i, u := range v { fmt.Println(&quot; &quot;, i, u) } default: fmt.Println(k, v, &quot;(unknown)&quot;) }}// Name Eve (string)// Age 6 (float64)// Parents (array):// 0 Alice// 1 Bob å†ä¾†çœ‹å¦ä¸€å€‹ç¯„ä¾‹: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package mainimport ( &quot;encoding/json&quot; &quot;fmt&quot;)type user struct { Name string `json:&quot;username&quot;` Permissions map[string]bool `json:&quot;perms&quot;`}func main() { input := []byte(` [ { &quot;username&quot;: &quot;inanc&quot; }, { &quot;username&quot;: &quot;god&quot;, &quot;perms&quot;: { &quot;admin&quot;: true } }, { &quot;username&quot;: &quot;devil&quot;, &quot;perms&quot;: { &quot;write&quot;: true } } ]`) var users []user if err := json.Unmarshal(input, &amp;users); err != nil { fmt.Println(err) return } fmt.Println(&quot;users: &quot;, users) // users: [{inanc map[]} {god map[admin:true]} {devil map[write:true]}] for _, user := range users { fmt.Print(&quot;+ &quot;, user.Name) switch p := user.Permissions; { case p == nil: fmt.Print(&quot; has no power.&quot;) case p[&quot;admin&quot;]: fmt.Print(&quot; is an admin.&quot;) case p[&quot;write&quot;]: fmt.Print(&quot; can write.&quot;) } fmt.Println() }}// users: [{inanc map[]} {god map[admin:true]} {devil map[write:true]}] åˆ©ç”¨ *json.RawMessage å»¶é²è§£ææœ‰æ™‚æœƒåœ¨è§£æ JSON æ™‚æ‰æœƒçŸ¥é“å…¶è³‡æ–™çµæ§‹ï¼Œå¯é€éä½¿ç”¨ json.RawMessage çš„æ–¹å¼ä¾†å»¶é²è§£æï¼Œè®“è³‡æ–™ä»¥ byte çš„å½¢å¼ç¹¼çºŒå­˜åœ¨ï¼Œç­‰å¾…ä¸‹æ¬¡è§£æã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091package mainimport ( &quot;encoding/json&quot; &quot;fmt&quot;)type Engineer struct { Skill string `json:&quot;skill&quot;` Description string `json:&quot;description&quot;`}type Manager struct { Experienced bool `json:&quot;experienced&quot;`}type user struct { Name string `json:&quot;username&quot;` Permissions map[string]bool `json:&quot;perms&quot;` Role string `json:&quot;role&quot;` Responsibility json.RawMessage}func main() { input := []byte(` [ { &quot;username&quot;: &quot;inanc&quot;, &quot;role&quot;: &quot;Engineer&quot;, &quot;Responsibility&quot;:{ &quot;skill&quot;:&quot;Python&amp;Golang&quot;, &quot;description&quot;:&quot;coding&quot; } }, { &quot;username&quot;: &quot;god&quot;, &quot;role&quot;: &quot;Manager&quot;, &quot;Responsibility&quot;:{ &quot;experienced&quot;: true }, &quot;perms&quot;: { &quot;admin&quot;: true } }, { &quot;username&quot;: &quot;devil&quot;, &quot;role&quot;: &quot;Engineer&quot;, &quot;Responsibility&quot;:{ &quot;skill&quot;:&quot;Infra&amp;Network&quot;, &quot;description&quot;:&quot;coding&quot; }, &quot;perms&quot;: { &quot;deploy&quot;: true } } ]`) var users []user if err := json.Unmarshal(input, &amp;users); err != nil { fmt.Println(err) return } // fmt.Println(&quot;users: &quot;, users) // users: [{inanc map[]} {god map[admin:true]} {devil map[write:true]}] for _, user := range users { fmt.Print(&quot;+ &quot;, user.Name) switch r := user.Role; r { case &quot;&quot;: fmt.Println(&quot; has no power.&quot;) case &quot;Manager&quot;: fmt.Println(&quot; is an Manager.&quot;) var responsibility Manager if err := json.Unmarshal(user.Responsibility, &amp;responsibility); err != nil { fmt.Println(&quot;error:&quot;, err) } fmt.Println(&quot;Manager's responsibility: &quot;, responsibility.Experienced) case &quot;Engineer&quot;: fmt.Println(&quot; is an Engineer.&quot;) var responsibility Engineer if err := json.Unmarshal(user.Responsibility, &amp;responsibility); err != nil { fmt.Println(&quot;error:&quot;, err) } fmt.Println(&quot;Engineer's responsibility: &quot;, responsibility.Description) fmt.Println(&quot;Engineer's skill: &quot;, responsibility.Skill) default: fmt.Println(&quot;No Role&quot;) } fmt.Println() }}","link":"2020/01/18/Go/%5BGo%5D%20JSON%20%E8%99%95%E7%90%86/"},{"title":"[JSDC 2020] åƒèˆ‡å¿ƒå¾—","text":"å‰è¨€ä¸Šé€±åƒåŠ ä»Šå¹´JavaScript é–‹ç™¼è€…å¹´æœƒ(JavaScript Developer Conference; ç°¡ç¨±JSDC)ï¼Œå…¶å¯¦é€™æ˜¯ç¬¬ä¸€æ¬¡åƒåŠ ï¼Œå»å¹´åŸæœ¬æœ‰æƒ³å ±ï¼ŒçµæœéŒ¯éå ±åæ™‚é–“â€¦â€¦. å›æ­¸æ­£é¡Œï¼Œæœ¬æ¬¡ JSDC çš„æ‰€æœ‰è­°ç¨‹ä¸­ä¸»è¦æƒ³è½æ˜¯é—œæ–¼:é ç«¯å·¥ä½œä»¥åŠå°å…¥ TypeScript ç›¸é—œè­°é¡Œ ä»¥ä¸‹åˆ—èˆ‰åƒåŠ å…¶ä¸­å¹¾å ´çš„åˆ†äº«åŠå¿ƒå¾— Topic: Remote TeamSpeaker: TonyQ (ç‹æ™¯å¼˜) é€™å ´çš„è¬›è€…æ˜¯å¤§åé¼é¼çš„ TonyQ ! TonyQ åœ¨æœ¬æ¬¡è­°ç¨‹ä¸­ï¼Œä»¥å‡è¨­åœ¨è¢«è¿«é ç«¯(æˆ–é¢è©¦éœ€è¦é ç«¯)çš„æƒ…æ³ä¸‹ï¼Œå¾ä¸‰å€‹é¢å‘ä¾†è¨è«–é ç«¯å·¥ä½œ åŸå›  ç‚ºä½•è¦Remote? TonyQ ä»¥è‡ªèº«åŠæ‰€èå‘¨é­çš„é ç«¯å·¥ä½œè€…ç¶“é©—ä¾†è¨è«–æœƒ Remote çš„ç†ç”±ï¼š å·¥ä½œå‹æ…‹ï¼šæœ¬èº«å¯èƒ½æ˜¯SOHOæ—ï¼Œä»¥æ¥æ¡ˆçš„å½¢å¼å·¥ä½œï¼Œå®¢æˆ¶æœ¬èº«ä¸¦ä¸é—œå¿ƒè‡ªå·±åœ¨å“ªè£¡å·¥ä½œï¼Œå°æ–¹æå‡ºéœ€æ±‚ï¼Œä½ æä¾›ç”¢å‡ºï¼Œåªéœ€è¦å®šæœŸé–‹æœƒ(or ç¢°é¢)ç¢ºèªé€²åº¦ï¼Œç¢ºä¿èƒ½å¤ æœ‰ç”¢å‡ºã€‚ äº¤é€šå› ç´ : é€šå‹¤æ™‚é–“éé•·ï¼Œä¹¾è„†åœ¨å®¶å·¥ä½œï¼Œé æ¯”é€šå‹¤æ‰€èŠ±çš„æ™‚é–“ä¾†çš„æœ‰æ•ˆç›Š æ™‚é–“å› ç´ : è‡ªèº«å·¥ä½œå…§å®¹æ¯”è¼ƒç‰¹æ®Šï¼Œå¦‚:ç®¡ä¼ºæœå™¨ or ç³»çµ±çš„äººï¼Œå› ç‚ºç³»çµ±å¯èƒ½åœ¨é›¢å³°æ™‚é–“ã€éæ­£å¸¸ä¸Šç­æ™‚é–“å‡ºäº‹ï¼Œéœ€è¦On-call é ç«¯ç¶­è­·ä¸»æ©Ÿ ç©ºé–“å› ç´ : åœ˜éšŠåˆ†æ•£åœ¨å„åœ°ï¼Œè¾¦å…¬å®¤æœ‰å¤šå€‹é»ï¼Œå¤§å®¶ä¸åœ¨åŒä¸€å€‹ç©ºé–“ï¼Œè‹¥è¦å¯¦é«”è¨è«–ï¼ŒèŠ±è²»çš„æ™‚é–“ã€é‡‘éŒ¢çš„æˆæœ¬éé«˜ï¼Œè‹¥é€éæ•¸ä½å·¥å…·ï¼Œå¯ä»¥å¹«åŠ©åœ˜éšŠçœä¸‹é€™éƒ¨åˆ†çš„æˆæœ¬ å®¶åº­/å¥åº·å› ç´ ï¼š å®¶è£¡è‡¨æ™‚éœ€è¦å”åŠ©ï¼Œe.g. å®¶äººæœ‰çªç™¼ç‹€æ³ã€COVID-19 è¬›è€…è¡¨ç¤ºèƒ½å¤ é¢å°é¢æºé€šå¾ˆå¥½ï¼Œä¹Ÿå–œæ­¡éš¨æ™‚é€²å…¥å·¥ä½œç‹€æ…‹ï¼Œä¸ç”¨è²»ç›¡å¿ƒæ€å‡ºé–€åˆ°è¾¦å…¬å®¤å·¥ä½œï¼Œéš¨æ™‚èˆ‡åœ˜éšŠå¤¥ä¼´ä¿æŒè¯ç¹«ã€‚ è€Œé ç«¯å·¥ä½œå°æ–¼ TonyQ ä¾†èªªï¼Œæ˜¯ä¸€ç¨®å·¥ä½œæ–¹æ³•ï¼Œä¸åŒçš„å·¥ä½œæ–¹æ³•ï¼Œè¦ç”¨ä¸åŒçš„æ…‹åº¦ä¾†è™•ç†ï¼Œæƒ³è¦ä¸Šæ‰‹é ç«¯å·¥ä½œï¼Œéœ€å…·å‚™å¹¾é …æ¢ä»¶: è‡ªæˆ‘ç®¡ç† åœ˜éšŠæ•´é«”å°ç›®æ¨™æœ‰ä¸€å®šçš„å…±è­˜(é¿å…å¤§å®¶çœ‹èµ·ä¾†åšåŒä¸€ä»¶äº‹æƒ…ï¼Œå»åˆ†é“æšé‘£çš„çª˜å¢ƒ) æ¥è‘—ä»¥ç®¡ç†è€…çš„èº«ä»½ä¾†åˆ†äº«è‡ªå·±åœ¨ç®¡ç† Remote Team çš„ç¶“é©— å€‹äººå…ˆæ‰¾ç¸½æ©Ÿæœ‰ä¸€å€‹çµ±ä¸€çš„ç®¡é“å¯ä»¥è®“åœ˜éšŠæˆå“¡å»å•å•é¡Œï¼Œä½œç‚ºä¸»è¦çš„æºé€šçª—å£ Line Slack Teams å»ºç’°å¢ƒç”±æ–¼é è·å·¥ä½œå€šè³´æ•¸ä½æºé€šï¼Œæœƒéœ€è¦ä¸€äº›å…¶ä»–å·¥å…· VPN: é€£é€²å…¬å¸å…§ç¶² Git Repo Security Guide ç¢ºèªå¿…é ˆçš„è¡Œæ”¿é‚è¼¯ å·¥æ™‚ è«‹å‡ afk (away from keyboard) åœ˜éšŠå·¥ä½œæ™‚é–“ç¢ºèªå¿…é ˆçš„è¡Œæ”¿é‚è¼¯ ç¢ºèªä»»å‹™åˆ†é…æ¨¡å¼ issue tracking Redmine Trello Teams PM / ä¸»ç®¡ åŒäº‹ æºé€šè¨è«–å…¬ç§åˆ†æ˜ï¼Œè¨è«–å®Œå¾Œå†æŠŠçµè«–å¡«å› issue treacking PR &amp; Code Review ä½¿ç”¨ Azure DevOps å…ˆ push åˆ°å…¶ä»– branch ç™¼ PRï¼Œcode review å¾Œå† merge concall/é›»è©± Teams å¯ä»¥åœ¨ pure web å®Œæˆåˆ†äº«è¢å¹•ã€é€šè¨Š åœ¨å®¶å·¥ä½œå»ºè­°æº–å‚™å¯å·¥ä½œçš„æ›¸æˆ¿æˆ–ç©ºé–“ ç®¡ç†è€…æƒ…æ„Ÿé ç«¯é‚„æ˜¯è¦åš Team Building é¿å…éƒ¨å±¬èˆ‡ä¸Šå¸ç›¸äº’çŒœæ¸¬å½¼æ­¤å·¥ä½œç‹€æ³ æœ‰æ²’æœ‰äººæœ€è¿‘å°‘è¬›è©±æˆ–æƒ…ç·’ä¸å¤ªç©©å®š é—œç…§æƒ…ç·’éœ€è¦é›»è©±æˆ–è€…è¦‹é¢äº†è§£ è¦åŠƒç›¡é‡ç”¨æ–‡å­—è€Œå°‘ç”¨é›»è©±ï¼Œå®‰æ’è¦æ¸›å°‘æƒ…ç·’ã€‚ é€²åº¦å•é¡Œ å‚³çµ±å«ä¸‹å±¬äº¤å·¥ä½œå ±å‘Š ç”¨ Readmine æŸ¥çœ‹æ´»èºåº¦ï¼ŒæŸ¥çœ‹ commit èŠ±è²»æ™‚é–“å’Œç´€éŒ„ æ–°äººæ–‡ä»¶ä¸€å®šè¦å¯« å¹«åŠ©æ–°äººèå…¥åœ˜éšŠæœ€å¿«çš„æ–¹æ³• ä¸ç”¨å¤ªç²¾ç·»ï¼Œtxt ä¹Ÿè¡Œ åŒä»å·²è®€ä¸å›æ€éº¼è¾¦ æŠŠå·¥ä½œäº¤ä»˜ä»–äººï¼ˆå°åŒä»çš„è™•ç½°ï¼‰ SOS æ€éº¼è™•ç† æœ‰æ’äººå€¼ç­ oncallï¼Œç”¨é›»è©±æºé€š å¦‚ä½•é¿å…é‡å·¥ é¿å…é‡Œé•·ä¼¯é¡å‹çš„åŒä» æ˜ç¢ºæŒ‡æ´¾ä»»å‹™ SOSäººå“¡ç„¡æ³•è§£æ±ºæ™‚æ‡‰å‘ä¸Šå‘ˆå ± æŠ€èƒ½è½å·® è¦æ­»ç·šå‰æ‰ç™¼ç¾ç„¡æ³•å®Œæˆ è¦æ´¾æœ‰æŠ€è¡“çš„äºº watchï¼Œå®šæ™‚ commit è¨˜éŒ„è½å¾Œæ´¾äººå»ç›¯ ä¸ç”¨å…¨éƒ¨éƒ½ç›¯ï¼Œç›¯é‡è¦ issue å°±å¥½ é–‹æœƒæ¨¡å¼ ä¸é–‹å¤§æœƒï¼Œé–‹å°çµ„æœƒ åŒä»ä¸é©æ‡‰æ€è¾¦ ç”¨ä¸»ç®¡æ¬Šåˆ©å¼•å°ä»–ï¼Œå®šæœŸ tag åŒä»å›å¾©è¨è«–ï¼Œé€šå¸¸è¦å˜›ä»–é©æ‡‰ï¼Œè¦å˜›ä»–èµ° å»ºè­°åŸå‰‡ï¼š é«˜éŸ¿æ‡‰ å®šæœŸ keep alive å°æ–¼æ–°äººï¼Œå¯ä»¥è¦æ±‚æŒ‡å®šæ™‚é–“å›å ±ç‹€æ³ é«˜å®¹éŒ¯ å°æ–¼æ–‡å­—å¤šæ€è€ƒå¯èƒ½çš„æ„æ€ æºé€šéœ€è¦æ›´å¤šçš„å®¹éŒ¯ ç›¡å¯èƒ½æœ‰ç¬¬ä¸‰å€‹äººåœ¨å ´ (é¿å… 1v1 å–®äººèŠå¤©)-è®“å…¶ä»–äººä¹ŸçŸ¥é“ç‹€æ…‹ï¼Œé¿å…é›™æ–¹èªçŸ¥æœ‰è½å·®ï¼Œæ­¤æ™‚æœ‰ç¬¬ä¸‰æ–¹å¯ä»¥å¹«å¿™ä½œè­‰ é«˜ç”¢å‡º å·¥ä½œä¸è¦æ’æ»¿ï¼Œä¸ƒå…«åˆ†å°±å¥½ï¼Œæ’æ»¿å¾ˆå±éšª ç¦å¿Œï¼š å¿Œæ¶ˆå¤± å¿Œä¸æ‡‚è£æ‡‚ å¿Œç¼ºç¢ºèª å¿Œè¿½æ®º (é™¤é SOS) ç¸½çµåœ˜éšŠéœ€è¦å®šæœŸæ›´æ–°ç›®æ¨™ï¼Œè½å¯¦ç›®æ¨™ç®¡ç†ï¼Œèµ°åœ¨æ­£ç¢ºçš„æ–¹å‘ Topic: æœ¬ç§‘ / é ç«¯ / æ–°å‰µ ç¶“é©—åˆ†äº«Speaker: é‚±å¼˜æ¯… (æ²’ä¸€æ‘)è¬›è€…æœ‰åœ¨ç¶“ç‡Ÿç²‰å°ˆ - æ²’ä¸€æ‘éš¨ä¾¿èªªï¼Œæ¥è‘—å›ç­”å¹¾å€‹å¤§å®¶éƒ½æœƒå•çš„å•é¡Œ æœ¬ç§‘ vs ç ”ç©¶æ‰€å¾ˆå¤šäººå¿…é ˆé¢å°çš„èª²é¡Œ: è€ƒç ”ï¼Ÿ or å·¥ä½œï¼Ÿè¬›è€…æåˆ°å¯ä»¥å…ˆæƒ³ç†æƒ³å·¥ä½œæ˜¯ä»€éº¼ ç†æƒ³å·¥ä½œ IC åŠå°é«” vs è»Ÿé«”å·¥ç¨‹å¸« å°ç£ IC åŠå°é«”ä¸€å®šè¦å”¸ç¢©å£«(é–€æª») Data Engineer vs software engineer ç ”ç©¶ vs é–‹ç™¼ä»¥Software Engineer ä¾†èªªï¼Œå› ç‚ºæœ¬èº«éƒ½æ˜¯åšé–‹ç™¼ï¼Œä¸ã„§å®šè¦å”¸ç ”ç©¶æ‰€ åœ‹å…§ vs åœ‹å¤–ç ”ç©¶æ‰€ åœ‹å…§: ç ”ç©¶ã€ä¿®èª² åœ‹å¤–: ä¿®èª² å¦‚æœæœ‰æƒ³è¦åœ‹å¤–å·¥ä½œï¼Œå¯ä»¥å¿µåœ‹å¤–ç ”ç©¶æ‰€ æ©Ÿæœƒæˆæœ¬å°è¬›è€…ä¾†èªªï¼Œæ©Ÿæœƒæˆæœ¬æ˜¯éå¸¸é‡è¦çš„ï¼Œæ¯”è¼ƒä¸‹é¢å…©å€‹ æœ¬ç§‘ç›´æ¥å·¥ä½œï¼šç´¯ç©å…©å¹´å·¥ä½œç¶“é©— + è–ªæ°´ ç ”ç©¶æ‰€ï¼š å¾—åˆ°æ›´å¤š domain specific ç ”ç©¶ç¶“é©— å…©è€…è¦åšå–æ¨ï¼Œé€™å°±å›åˆ°è‡ªå·±æœ¬èº«çš„ç†æƒ³å·¥ä½œæ˜¯ä»€éº¼ï¼Ÿ é ç«¯å·¥ä½œè¬›è€…ç›®å‰çš„å…¬å¸ä½æ–¼ç¾åœ‹ï¼Œåœ˜éšŠçš„é–‹ç™¼è€…ä¹Ÿéƒ½æ˜¯å››æ•£åœ¨å„åœ°ï¼Œç°¡å–®è·Ÿå¤§å®¶åˆ†äº«è¿‘ä¸€å¹´çš„é ç«¯å·¥ä½œå¿ƒå¾— é ç«¯å·¥ä½œç–‘å•å¦‚ä½•æ‰¾åˆ°å·¥ä½œï¼Ÿ AngelListï¼šå¤§å¤šæ•¸ç‚ºåœ‹å¤–æ–°å‰µ Upworks (æ¥æ¡ˆç™¼åŒ…) Linkedin è‡‰æ›¸é ç«¯ç¤¾åœ˜ https://www.facebook.com/groups/1190343134374259/ https://www.facebook.com/groups/remotetaiwan/ èƒ½åŠ›éœ€æ±‚ï¼Ÿ è‹±æ–‡ or å¤–æ–‡ï¼šèƒ½å¤ æºé€šï¼Œè½èªªè®€å¯«æ“šåŸºæœ¬èƒ½åŠ›ã€‚ è‡ªåˆ¶åŠ›ï¼šå°é ç«¯å·¥ä½œè€…æ˜¯å¿…é ˆå…·å‚™çš„èƒ½åŠ› è‡ªå­¸èƒ½åŠ› æºé€šèƒ½åŠ› å„ªç¼ºé»? å„ªé»:æ™‚é–“å½ˆæ€§ã€æ¸›å°‘é€šå‹¤æ™‚é–“ã€æ•ˆç‡é«˜ ç¼ºé»: å®¹æ˜“è¶…æ™‚å·¥ä½œã€ç¼ºå°‘å’ŒåŒäº‹äº¤æµ Topic: ç”¨ä¸ç”¨ TypeScript éš¨ä¾¿ä½ ï¼Œåæ­£æˆ‘æ˜¯ç”¨äº†Speaker: Will ä¿å“¥ä¿å“¥æœ¬æ¬¡æƒ³è¨è«–çš„ä¸»é¡Œæ˜¯ç‚ºä½•è¦ä½¿ç”¨TypeScriptï¼Œç”¨äº†æœ‰ä»€éº¼å¥½è™•ï¼Ÿ ä»€éº¼æ˜¯ TypeScriptï¼ŸTypeScript ç”±å¾®è»Ÿé–‹ç™¼ï¼Œä¸»è¦æä¾› JavaScript å‹åˆ¥ç³»çµ±å’Œå° ES6 çš„æ”¯æ´ï¼Œå±¬æ–¼å¼·å‹åˆ¥ã€‚ å› ç‚º TypeScript èª•ç”Ÿå¾—ä¸»å› æ˜¯ JavaScript æœ¬èº«æ˜¯å¼±å‹åˆ¥èªè¨€ï¼Œåœ¨æ’°å¯«ä¸Šéå¸¸è‡ªç”±ï¼Œä¸éœ€äº‹å…ˆå®šç¾©å¥½è³‡æ–™å‹åˆ¥ã€‚ä¸éä¹Ÿå› ç‚ºé¢¨æ ¼è‡ªç”±ï¼Œå¯èƒ½å€’ç½®ç¨‹å¼åŸ·è¡Œæ™‚ï¼Œç™¼ç”Ÿä¸å¯é æœŸä¹‹éŒ¯èª¤ã€‚èˆ‰ä¾‹ä¾†èªªï¼š ä»¥ä¸‹åœ–ç‰‡å–è‡ªä¿å“¥çš„ç°¡å ± ä¸Šè¿°ç¯„ä¾‹å¯ä»¥çœ‹å‡ºï¼Œå› ç‚ºæœªäº‹å…ˆå®£å‘Šè³‡æ–™å‹åˆ¥ï¼Œæ‰€ä»¥åœ¨åŸ·è¡Œ processData é€™å€‹å‡½å¼æ™‚ï¼Œç„¡æ³•å¾—çŸ¥è¡—é“çš„ç‰©ä»¶dataæœƒæ˜¯ä»€éº¼ï¼Œæ¥è‘—åŸ·è¡Œå‡½å¼å…§é‚è¼¯æ™‚ï¼Œå‡ºç¾TypeErroré€™é …å‹åˆ¥éŒ¯èª¤çš„æç¤ºè¨Šæ¯ï¼Œåªè¦æ‰“éŒ¯å­—ï¼Œé€™æ”¯ç¨‹å¼åŸºæœ¬ä¸Šå°±æ›äº†ã€‚ è‹¥è½‰æˆ TypeScript ä¸Šè¿°ä¿å“¥æ‰€èˆ‰å¾—ç¯„ä¾‹ï¼Œå·¦é‚Šé å…ˆå®šç¾©ä¸€å€‹Interfaceï¼Œå®£å‘ŠDataé€™å€‹ç‰©ä»¶çš„å±¬æ€§åŒ…å«ä¸‰ç¨®å‹åˆ¥ã€‚ è€Œä¸‹æ–¹çš„éŒ¯èª¤è¨Šæ¯ä¾†è‡ªIDEçš„æç¤ºï¼Œå¾ˆè²¼å¿ƒçš„æç¤ºä½ å¯èƒ½ç™¼ç”Ÿçš„å•é¡Œã€‚ è¬›è€…è§€é»:å¼±å‹åˆ¥ä¸¦éæ²’æœ‰ï¼Œé‚„æ˜¯æœ‰äº›å¤§ç¥å¯ä»¥æŠŠä»–ç©åˆ°æ¥µè‡´ï¼Œç”¢å‡ºå¦‚åŒè—è¡“å®¶èˆ¬çš„ä½œå“ï¼Œä½†æ˜¯å°ä¸€èˆ¬äººä¾†èªªæ˜¯å¾ˆé›£åšåˆ°;è€Œå¼·å‹åˆ¥ç©åˆ°æ¥µè‡´ï¼Œå¦‚åŒè“‹å¤§æ¨“ï¼Œè—‰ç”±å¤§é‡å‹åˆ¥çš„å®šç¾©ï¼Œå¹«åŠ©é–‹ç™¼è€…å»ºæ§‹ä¸­å¤§å‹çš„å°ˆæ¡ˆï¼Œåœ¨å¯¦éš›æ¡ˆä¾‹ä¸­ï¼Œä¸å¯èƒ½æ‰€æœ‰é–‹ç™¼è€…éƒ½æ˜¯è—è¡“å®¶ç´šåˆ¥ã€‚ é€éè¦ç¯„ä¾†å¹«åŠ©é–‹ç™¼è€…å»ºæ§‹å‡ºæ˜“ç¶­è­·ã€æ“´å……çš„ç¨‹å¼ç¢¼ï¼Œæ¸›å°‘éŒ¯èª¤ã€‚ TypeScript æ˜¯é€éå‹åˆ¥ä¾†æ“´å…… JavaScriptï¼Œé€éç·¨è­¯çš„æ–¹å¼ä¾†ç”¢ç”Ÿ JavaScriptï¼Œè€Œ TypeScript çš„å‹åˆ¥æª¢æŸ¥æ˜¯ç™¼ç”Ÿåœ¨ç¨‹å¼ç·¨è­¯çš„éšæ®µ å¥½è™•: è®“é–‹ç™¼å·¥å…·çœ‹æ‡‚åŸå§‹ç¢¼ å¾ŒçºŒä¿å“¥åˆ†äº«äº†ä»–åœ¨å…¬å¸å°‡ä¸€å€‹å…©è¬è¡ŒJS Code çš„å°ˆæ¡ˆå‡ç´šæˆ TypeScriptï¼Œéç¨‹ä¸­ç™¼ç¾å‹åˆ¥çš„å•é¡Œéå¸¸å¤§ï¼ŒèŠ±è²»ä¸å°‘æ™‚é–“åšComplie Errorï¼Œé™¸çºŒå°‡å¯è¢«è¦ç¯„çš„ç‰©ä»¶ï¼Œå®šç¾©å‡ºè©²æœ‰çš„æ¨£å­ï¼ŒåŒæ™‚ä¹Ÿæåˆ°å°å…¥ TypeScript çš„ç¢ºæœƒå¢åŠ é–‹ç™¼æ™‚é–“ï¼Œç•¢ç«Ÿè¦å…ˆå®šç¾©å¥½å‹åˆ¥ï¼Œä¸éæ”¾é•·é ä¾†æƒ³ï¼Œæˆ–è¨±æ˜¯å€‹å€¼å¾—æŠ•è³‡çš„é …ç›®ã€‚ å¾Œè¨˜æ„Ÿè¬ ALPHA Camp æ´»å‹•è´ŠåŠ©ï¼Œä»¥å„ªæƒ åƒ¹å–å¾—é–€ç¥¨ï¼Œæœ‰å¹¸åƒèˆ‡ä»Šå¹´JSDCç ”è¨æœƒï¼Œå¯¦å±¬é›£å¾—çš„æ©Ÿæœƒã€‚","link":"2020/10/24/Conference/%5BJSDC%202020%5D%20%E5%8F%83%E8%88%87%E5%BF%83%E5%BE%97/"},{"title":"[Go] Pointer (æŒ‡æ¨™)","text":"ä»€éº¼æ˜¯æŒ‡æ¨™ï¼ŸæŒ‡æ¨™æ˜¯ä»¥è®Šæ•¸çš„å½¢å¼ä¾†å­˜å¦ä¸€å€‹è®Šæ•¸çš„è¨˜æ†¶é«”ä½å€ã€‚ä¸€èˆ¬æƒ…æ³ä¸‹ï¼Œä¸æœƒç›´æ¥ä½¿ç”¨æŒ‡æ¨™çš„å€¼ï¼Œè€Œæœƒé€éæŒ‡æ¨™é–“æ¥æ“ä½œå¦ä¸€å€‹å€¼ã€‚ 1234567n := 2// åƒè€ƒè®Šæ•¸ n çš„è¨˜æ†¶é«”ä½ç½®nPtr := &amp;n// å°å‡ºè¨˜æ†¶é«”ä½å€fmt.Println(nPtr) æŒ‡æ¨™å®£å‘Šèªæ³•çµæ§‹ï¼š 12// A pointer of type Tvar p *T èªªæ˜ï¼š å‹åˆ¥ T æ˜¯æŒ‡æ¨™æŒ‡å‘çš„è®Šæ•¸çš„å‹åˆ¥ï¼Œ T å¯æ›¿æ›æˆå…¶ä»–è³‡æ–™å‹åˆ¥ 12// A pointer of type intvar p *int ä¸Šè¿°ç¯„ä¾‹è¡¨ p æŒ‡æ¨™åªèƒ½å„²å­˜ int é¡å‹çš„è®Šæ•¸è¨˜æ†¶é«”ä½å€ã€‚ æŒ‡æ¨™çš„é›¶å€¼ï¼šä¸ç®¡æŒ‡å‘çš„å‹åˆ¥ç‚ºä½•ï¼Œä»»ä½•æœªåˆå§‹åŒ–çš„æŒ‡æ¨™éƒ½æœƒæ˜¯ nil â†’ æŒ‡æ¨™çš„é›¶å€¼ç‚º nil 1234var p *intvar s *stringfmt.Println(&quot;p = &quot;, p) // p = &lt;nil&gt;fmt.Println(&quot;s = &quot;, s) // s = &lt;nil&gt; æŒ‡æ¨™åˆå§‹åŒ–123456789var x = 10var y *int = &amp;x// ç”±æ–¼ç·¨è­¯å™¨å¯æ¨æ–·å‡ºæŒ‡æ¨™è®Šæ•¸çš„å‹åˆ¥ï¼Œæ‰€ä»¥å¯çœç•¥ä¸Šé¢ç¯„ä¾‹ä¸­æŒ‡æ¨™ y çš„å‹åˆ¥å®£å‘Š(*int)ï¼švar y = &amp;xfmt.Println(&quot;Value stored in variable x = &quot;, x) // 10fmt.Println(&quot;Address of variable x = &quot;, &amp;x) // 0xc000012078fmt.Println(&quot;Value stored in variable p = &quot;, y) // 0xc000012078 è§£åƒè€ƒæŒ‡æ¨™è§£åƒè€ƒåˆä½œé–“æ¥å–å€¼ï¼Œåªè¦æ–¼æŒ‡æ¨™å‰é¢åŠ å€‹ * ç¬¦è™Ÿï¼Œå¯å­˜å–å­˜åœ¨æŒ‡æ¨™æ‰€æŒ‡å‘è®Šæ•¸ä¸­çš„å€¼ã€‚ 1234var x = 10var y = &amp;xfmt.Println(&quot;y = &quot;, *y) // 10 ä¿®æ”¹æŒ‡æ¨™è¨­å®šå­˜åœ¨è®Šæ•¸ä¸­çš„å€¼è§£åƒè€ƒé™¤äº†å‰è¿°çš„é–“æ¥å–å€¼çš„ç”¨é€”å¤–ï¼Œäº¦å¯å°å…¶åšä¿®æ”¹ 123456var x = 10var y = &amp;xfmt.Println(&quot;y before assigned a new value = &quot;, *y) // 10*y = 20fmt.Println(&quot;y after assigned a new value = &quot;, *y) // 20 new() å‡½æ•¸å»ºç«‹æŒ‡æ¨™é€é new() å‡½æ•¸å°‡å‹åˆ¥ä½œç‚ºåƒæ•¸ï¼Œé…ç½®è¶³å¤ çš„è¨˜æ†¶é«”ä¾†è£è©²å‹åˆ¥çš„å€¼ï¼Œå›å‚³æŒ‡å‘è©²å‹åˆ¥çš„æŒ‡æ¨™ 1234z := new(int) // æŒ‡æ¨™æ¥æ”¶ int å‹åˆ¥çš„åƒæ•¸*z = 10000fmt.Println(&quot;z and *z: &quot;, z, *z) // 0xc000116020 10000 æŒ‡æ¨™æŒ‡å‘æŒ‡æ¨™æŒ‡æ¨™é™¤äº†èƒ½æŒ‡å‘ä»»ä½•å‹åˆ¥çš„è®Šæ•¸å¤–ï¼Œäº¦å¯æŒ‡å‘å¦ä¸€å€‹æŒ‡æ¨™ 123456789101112131415a := 1b := &amp;ac := &amp;bfmt.Println(&quot;a: &quot;, a) // a: 1fmt.Println(&quot;address of a: &quot;, &amp;a) // address of a: 0xc0000ac038fmt.Println(&quot;b: &quot;, b) // b: 0xc0000ac038fmt.Println(&quot;address of b: &quot;, &amp;b) // address of b: 0xc0000b0020fmt.Println(&quot;c: &quot;, c) // c: 0xc0000b0020// å°‡æŒ‡æ¨™çš„æŒ‡æ¨™é€²è¡Œè§£åƒè€ƒfmt.Println(&quot;*c: &quot;, *c) /* *c: 0xc0000ac038 */fmt.Println(&quot;**c: &quot;, **c) /* **c: 1 */ &gt; æ³¨æ„ï¼šGo æ²’æœ‰æŒ‡æ¨™é‹ç®—ï¼Œä½†å¯é€²è¡Œæ¯”è¼ƒ","link":"2020/01/13/Go/%5BGo%5D%20Pointer%20%E6%8C%87%E6%A8%99/"},{"title":"[Go] Slice(åˆ‡ç‰‡)","text":"å‰è¨€Sliceæ˜¯åœ¨ä¸€å€‹é™£åˆ—ä¸­çš„ä¸€å€‹å€æ®µï¼Œèˆ‡é™£åˆ—ä¸€æ¨£ï¼Œslice å¯é€éç´¢å¼•çš„æ–¹å¼å­˜å–ï¼ŒåŒæ™‚ä¹Ÿå…·æœ‰é•·åº¦ã€‚ä½†èˆ‡é™£åˆ—ä¸åŒçš„æ˜¯ï¼Œslice é•·åº¦æ˜¯å¯ä»¥æ”¹è®Šçš„ï¼Œè‹¥åªæƒ³è™•ç†é™£åˆ—ä¸­æŸç‰‡å€åŸŸå¯ä»¥ä½¿ç”¨sliceã€‚ slice åœ¨ä¸­æ‹¬è™Ÿ[]ä¹‹é–“æ²’æœ‰è¡¨ç¤ºé•·åº¦çš„æ•¸å­— slice åº•å±¤å¯¦éš›ä¸Šé‚„æ˜¯å€‹é™£åˆ— åƒè€ƒçš„é è¨­å€¼éƒ½æ˜¯nil slice å”¯ä¸€å¯ä»¥ç”¨ == æ¯”è¼ƒçš„å°è±¡ç‚ºnilï¼Œå„²å­˜sliceåƒè€ƒçš„è®Šæ•¸ä¹Ÿç„¡æ³•é€²è¡Œ== æ¯”è¼ƒ Slice åŸºç¤ç”¨æ³•å®£å‘Š slicesliceå®£å‘Šæ–¹æ³•æœ‰å…©ç¨®ï¼š åƒarrayä¸€æ¨£å®£å‘Š, ä¸é ˆæŒ‡å®š slice å¤§å° ä½¿ç”¨å…§å»ºå‡½æ•¸make åƒ array ä¸€æ¨£å®£å‘Š123a := []int{1, 2, 3, 4, 5}fmt.Println(len(a)) //5fmt.Println(cap(b)) //5 ä½¿ç”¨å…§å»ºå‡½æ•¸ makeé™¤äº†ä¸Šè¿°æ–¹æ³•å¤–ï¼Œ Golang æä¾›äº†ä¸€å€‹åç‚º make() çš„å‡½æ•¸ä¾†å»ºç«‹ sliceã€‚ å®ƒåˆ†é… é•·åº¦èˆ‡çµ¦å®šå®¹é‡ç›¸åŒçš„åº•å±¤é™£åˆ—ï¼Œä¸¦è¿”å›åƒè€ƒè©²é™£åˆ—çš„ sliceã€‚ èªæ³•çµæ§‹:1make([]T, len, cap) åƒæ•¸èªªæ˜ï¼š T: è©² slice å­˜æ”¾çš„è³‡æ–™é¡å‹ len: è©² slice çš„é•·åº¦ cap: è©² slice çš„å®¹é‡ï¼Œæ­¤åƒæ•¸æ˜¯éå¿…è¦çš„ã€‚è‹¥çœç•¥ï¼Œå‰‡é è¨­ç‚ºæŒ‡å®šçš„é•·åº¦ ç¯„ä¾‹:æœ‰æŒ‡å®š slice çš„å®¹é‡ï¼š 1234567func main() { s := make([]int, 5, 10) fmt.Println(s) // [0 0 0 0 0] fmt.Println(len(s)) // 5 fmt.Println(cap(s)) // 10} æ²’æœ‰æŒ‡å®š slice çš„å®¹é‡ï¼š 1234567func main() { s := make([]int, 5) fmt.Println(s) // [0 0 0 0 0] fmt.Println(len(s)) // 5 fmt.Println(cap(s)) // 5} Slice çš„é›¶å€¼slice çš„é›¶å€¼ç‚º nilã€‚å¸¶æœ‰é›¶å€¼çš„ slice æ²’æœ‰ä»»ä½•åº•å±¤é™£åˆ—ï¼Œä¸”é•·åº¦å’Œå®¹é‡ç‚º 0 12345678910111213var slice []int// zero value of a slice is nilfmt.Println(&quot;slice == nil?&quot;, slice == nil) // truefmt.Printf(&quot;slice = %v, len = %d, cap = %d\\n&quot;, slice, len(slice), cap(slice)) // slice = [], len = 0, cap = 0 var games []stringgame := []string{}fmt.Printf(&quot;games == nil? : %t\\n&quot;, games == nil) // truefmt.Printf(&quot;game == nil? : %t\\n&quot;, game == nil) // falsefmt.Printf(&quot;game == nil? : %t\\n&quot;, game) // [] å¸¸è¦‹ç”¨æ³•re-slicing é‡æ–°åˆ‡ç‰‡ä½¿ç”¨å†’è™Ÿé–“éš”å…©å€‹åƒæ•¸ï¼Œæ­¤æ–¹å¼å¯æ“·å– slice ç‰¹å®šç¯„åœçš„å€¼ã€‚ èªæ³•çµæ§‹1slice[start:end] èªªæ˜ start: èµ·å§‹ä½ç½®ï¼Œé è¨­å€¼ç‚º 0 end: çµ‚é»ï¼Œé è¨­å€¼ç‚ºè©² slice çš„é•·åº¦(len(slice)) éœ€è¦æ³¨æ„çš„æ˜¯: [start:end] å–å‡ºçš„ç¯„åœæ˜¯ start åˆ° end - 1 çš„ç¯„åœ start, end å€¼å¯ä¸çµ¦ï¼Œå¦‚: [:] 12345678910x := []int{1, 2, 3, 4, 5}y := x[:] fmt.Println(&quot;y: &quot;, y) // y: [1 2 3 4 5]y = x[:2]fmt.Println(&quot;y: &quot;, y) // y: [1 2]y = x[2:] fmt.Println(&quot;y: &quot;, y) // y: [3 4 5]y[2] = 0 fmt.Println(&quot;y: &quot;, y) // y: [3 4 0]fmt.Println(&quot;x: &quot;, x) // x: [1 2 3 4 0] é‡æ–°åˆ‡ç‰‡å¾Œçš„ slice åº•å±¤é™£åˆ—ä¸è®Šï¼Œåƒ…æ”¹è®ŠæŒ‡æ¨™ä½å€ è§€å¯Ÿåˆ°ä¸Šè¿°é‡æ–°åˆ‡ç‰‡å¾Œçš„ slice åº•å±¤é™£åˆ—ä¸è®Šçš„æƒ…æ³å¾Œï¼Œè‹¥ä¸æƒ³å…©å€‹ slice å…±ç”¨åŒä¸€å€‹é™£åˆ—ï¼Œå‰‡è¦ä½¿ç”¨å¦ä¸€å€‹å…§å»ºå‡½æ•¸ copy() æ‹·è²: copy()copy() å°‡ä¸€å€‹ slice çš„å…§å®¹ï¼Œè¤‡è£½è‡³å¦ä¸€å€‹ slice (è¤‡è£½ slice ä¸­åŸå§‹æŒ‡å‘çš„åº•å±¤é™£åˆ—è‡³å¦ä¸€å€‹æ–°çš„ slice ï¼Œä¸”æ–°slice æŒ‡å‘æ–°é™£åˆ— èªæ³•çµæ§‹1copy(dst-slice, src-slice) çµåˆ re-slicing æŒ‡å®šè¦è¤‡è£½çš„ä½ç½®123456x := []int{1, 2, 3, 4, 5}y := []int{6, 7, 8}copy(y, x[2:]) // æŠŠ x ä¸­å¾ç¬¬ 2 å€‹æ•¸è‡³æœ€å¾Œä¸€å€‹æ•¸å€¼ï¼Œè¤‡è£½é€² yfmt.Println(&quot;x:&quot;, x, &quot;y: &quot;, y) // x: [1 2 3 4 5] y: [3 4 5]y[2] = 0fmt.Println(&quot;x:&quot;, x, &quot;y: &quot;, y) // x: [1 2 3 4 5] y: [3 4 0] æ³¨æ„ä»¥ä¸‹æƒ…æ³ len(src-slice) &lt; len(dst-slice) æ™‚: æœƒè¦†è“‹ dst-sliceçš„å‰ len(src-slice) å€‹æ•¸123456x := []int{1, 2, 3, 4, 5}y := []int{6, 7, 8}copy(x, y) // æŠŠyè¤‡è£½é€²xfmt.Println(&quot;x:&quot;, x, &quot;y: &quot;, y) // x: [6 7 8 4 5] y: [6 7 8]y[2] = 0fmt.Println(&quot;x:&quot;, x, &quot;y: &quot;, y) // [1 2] len(src-slice) &gt; len(dst-slice) æ™‚: è¤‡è£½src-slice èˆ‡ dst-slice ç­‰é•·çš„å€¼123456x := []int{1, 2, 3, 4, 5}y := []int{6, 7, 8}copy(y, x) // æŠŠ x è¤‡è£½é€² yfmt.Println(&quot;x:&quot;, x, &quot;y: &quot;, y) // x: [1 2 3 4 5] y: [1 2 3]y[2] = 0fmt.Println(&quot;x:&quot;, x, &quot;y: &quot;, y) // x: [1 2 3 4 5] y: [1 2 0] æ“´å¢: append()åœ¨çµ¦å®šçš„ slice å°¾ç«¯æ“´å¢çš„æ–°å…ƒç´ ï¼Œå›å‚³ä¸€å€‹æ–°çš„ slice è‹¥çµ¦å®šçš„ Slice ç„¡è¶³å¤ çš„å®¹é‡å®¹ç´é€™äº›æ–°å…ƒç´ ï¼Œå‰‡æœƒæ–°é…ç™¼å…·æœ‰æ›´å¤§å®¹é‡çš„åº•å±¤é™£åˆ—ã€‚åŸæœ‰çš„ slice åº•å±¤é™£åˆ—ä¸­æ‰€æœ‰å…ƒç´ éƒ½æœƒè¢«è¤‡è£½åˆ°æ–°é™£åˆ—å…§ï¼Œå†æ·»åŠ æ–°å…ƒç´ ã€‚ åä¹‹ï¼Œè‹¥çµ¦å®šçš„ slice æœ‰è¶³å¤ å®¹é‡ä¾†å®¹ç´æ–°å…ƒç´ ï¼Œå‰‡ä½¿ç”¨å…¶åº•å±¤é™£åˆ—ä¸¦å°‡æ–°å…ƒç´ é™„åŠ åˆ°åŒä¸€é™£åˆ—ä¸­ã€‚ èªæ³•çµæ§‹1append(s []T, x ...T) ç¯„ä¾‹æ“´å¢å–®ä¸€å…ƒç´  123456789nums = []int{1, 2, 3}_ = append(nums, 4)fmt.Println(nums) // [1 2 3]nums = append(nums, 4)fmt.Println(nums) // [1 2 3 4] ellipsis: å°‡ä¸€å€‹ Slice æ·»åŠ åˆ°å¦ä¸€å€‹ sliceä½¿ç”¨é‹ç®—å­: ... å°‡ä¸€å€‹ slice ç›´æ¥æ·»åŠ è‡³å¦ä¸€ slice 1234567nums = []int{1, 2, 3}tens := []int{12, 13}nums = append(nums, tens...) fmt.Println(nums) // [1 2 3 12 13] slice ä¸­æ”¾ sliceæˆ‘å€‘äº¦å¯æ–¼ slice ä¸­æ”¾å¦å¤–ä¸€å€‹ sliceï¼Œé¡ä¼¼äºŒç¶­çš„æ¦‚å¿µ 123456789number := [][]int{ {1, 2}, {3, 4}, {5, 6},}fmt.Println(&quot;slice number: &quot;, number) // slice number: [[1 2] [3 4] [5 6]]fmt.Println(&quot;length: &quot;, len(number)) // length: 3fmt.Println(&quot;capacity: &quot;, cap(number)) // capacity: 3 slice literalså¯ç”¨èˆ‡è¿­ä»£é™£åˆ—ç›¸åŒçš„æ–¹å¼å° slice åšè¿­ä»£ã€‚ for-loop çš„å½¢å¼ (without range)123for i := 0; i &lt; len(numb); i++ { fmt.Println(numb[i])} for-loop çš„å½¢å¼ (with range)123for i, v := range numb { fmt.Println(i, v)} éœ€æ³¨æ„ä¹‹è™•slice åº•å±¤æœ‰å€‹æŒ‡æ¨™æŒ‡å‘ä¸€å€‹ arrayslice æœ¬èº«æ˜¯ä¸€å€‹å¼•ç”¨å‹åˆ¥ï¼Œåº•å±¤æœƒæœ‰å€‹æŒ‡æ¨™æŒ‡å‘ä¸€å€‹array slice çš„é•·åº¦ == slice ä¸­å…ƒç´ çš„æ•¸é‡slice çš„é•·åº¦æ˜¯ slice ä¸­å…ƒç´ çš„æ•¸é‡ slice ç‚º nil æ™‚ï¼Œä¸æœƒæ–¼ loop ä¸­çš„ range åŸ·è¡Œ123456var games []stringfor i, game := range games { fmt.Println(&quot;nil!!!&quot;) fmt.Println(&quot;game in range: &quot;, game)} ä¸Šè¿°ç¯„ä¾‹æœƒç™¼ç¾å®£å‘Š games ç‚º slice å‹åˆ¥å¾Œï¼Œåˆå§‹å€¼ç‚º nil ï¼Œå˜—è©¦ç”¨è¿´åœˆè®€å–è£¡é¢çš„å€¼ï¼Œç™¼ç¾æ²’æœ‰å°å‡ºä»»ä½•æ±è¥¿ï¼Œç¨‹å¼ä»èƒ½å¤ æ­£å¸¸é‹ä½œã€‚ç©ºçš„ Slice å€¼ç­‰åŒæ–¼ nilï¼Œä¾†çœ‹ä¸‹è¿°ç¯„ä¾‹ï¼š 1fmt.Println(&quot;equal? &quot;, games == nil) åŸ·è¡Œçš„çµæœç‚º trueï¼Œè¡¨å…©è€…åŒç­‰ã€‚ array v.s slice å·®ç•°array å›ºå®šé•·åº¦ï¼Œé•·åº¦åœ¨ç·¨è­¯æ™‚æœŸ(complie time)å·²ç¶“å»ºç«‹ array é•·åº¦å±¬æ–¼å‹åˆ¥çš„ä¸€éƒ¨åˆ† å®£å‘Šå¾Œç„¡æ³•æ”¹è®Šé™£åˆ—é•·åº¦ å®£å‘Š array å…§çš„å…ƒç´ å‹åˆ¥ç‚º int ä¸”æœªçµ¦å€¼æ™‚ï¼Œarray å…§çš„å…ƒç´ å€¼ç‚º 0 array åœ¨é•·åº¦ç›¸åŒæ™‚å¯é€²è¡Œæ¯”è¼ƒ array åœ¨é•·åº¦ç›¸åŒæ™‚å¯é€²è¡Œè³¦å€¼(assign: =)æ“ä½œ slice é•·åº¦å¯è®Šå‹• é•·åº¦ä¸å±¬æ–¼å‹åˆ¥çš„ä¸€éƒ¨åˆ† é•·åº¦æ–¼åŸ·è¡ŒæœŸ(runtime)æ‰è®Šå‹• å®£å‘Š slice è€Œæœªçµ¦å€¼æ™‚ï¼Œslice å…§çš„å€¼ç‚º nil slice åªå¯å° nil å€¼åšæ¯”è¼ƒ(æ¯”è¼ƒçš„å°è±¡æ˜¯ nil) slice åœ¨å…ƒç´ å‹åˆ¥ç›¸åŒæ™‚å³å¯é€²è¡Œè³¦å€¼(assign: =)æ“ä½œï¼Œè·Ÿé•·åº¦ç„¡é—œ ç¯„ä¾‹1234567891011121314151617func main() { { // its length is part of its type var nums_arr [5]int // å®£å‘Šé•·åº¦ç‚º 5 çš„ç©º array fmt.Printf(&quot;nums array: %#v\\n&quot;, nums_arr) // [5]int{0, 0, 0, 0, 0} } { // its length is not part of its type var nums_slice []int // å®£å‘Šé•·åº¦ç‚º 5 çš„ç©º slice fmt.Printf(&quot;nums slice: %#v\\n&quot;, nums_slice) // []int(nil) fmt.Printf(&quot;len(nums_slice) : %d\\n&quot;, len(nums_slice)) // []int(nil) // won't work: the slice is nil. fmt.Printf(&quot;nums_slice[0]: %d\\n&quot;, nums_slice[0]) // panic: runtime error: index out of range [0] with length 0 fmt.Printf(&quot;nums_slice[1]: %d\\n&quot;, nums_slice[1]) // panic: runtime error: index out of range [1] with length 0 } Ref [Golang] Array v.s. Slice Golang Slice ä»‹ç´¹ åº•å±¤ç‚ºé™£åˆ—çš„ slice","link":"2020/01/09/Go/%5BGo%5D%20Slice(%E5%88%87%E7%89%87)/"},{"title":"[Go] Struct(çµæ§‹) åŸºç¤","text":"å‰è¨€åœ¨ Go èªè¨€ä¸­ï¼Œæä¾›äº†åƒ struct é€™æ¨£çš„è¤‡åˆå¼å‹åˆ¥ï¼Œå…ˆå‰å¹¾ç¯‡æ–‡ç« è£¡ï¼Œç¯„ä¾‹ä¸­çš„è®Šæ•¸éƒ½æ˜¯å­˜å–®ä¸€çš„å€¼ï¼Œè‹¥æƒ³ç”¨è®Šæ•¸è¡¨ç¤ºè¼ƒè¤‡é›œçš„æ¦‚å¿µï¼Œä¾‹å¦‚ï¼š å»ºç«‹ä¸€å€‹è‡ªè¨‚å‹åˆ¥ Person è¡¨ä¸€å€‹äººçš„å¯¦é«”ã€‚ é€™å€‹å¯¦é«”æ“æœ‰å…¶å±¬æ€§ï¼šå§“å(name)ã€æ€§åˆ¥å’Œå¹´é½¡(age) ï¼Œå°ç…§ç¾å¯¦ä¸–ç•Œçš„å¯¦é«”éƒ½å¯ä»¥ä½¿ç”¨çµæ§‹è¡¨ç¤ºï¼Œè€Œç¯„ä¾‹åŒ…å«å·²å‘½åæ¬„ä½&amp;å±¬æ€§ï¼Œå°‡ç›¸é—œè³‡æ–™åˆ†çµ„åœ¨ä¸€èµ·å½¢æˆä¸€å€‹å–®ä½ã€‚ Go èªè¨€ä½¿ç”¨ type å®šç¾©ä¸€æ–°å‹åˆ¥æ ¹æ“šå‰é¢æåŠçš„ç¯„ä¾‹è½‰æ›æˆç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š 12345678910111213// å®šç¾©ä¸€å€‹ Person å¯¦ä¾‹// æœªç°¡åŒ–type Person struct { Name string Gender string Age int}// é‡å°åŒè³‡æ–™å‹åˆ¥çš„æ¬„ä½é€²è¡Œç°¡åŒ–type Person struct { Name, Gender string Age int} struct çš„å®£å‘Šå’Œåˆå§‹åŒ–å®£å‘Š structå‰é¢å·²ç¶“æœ‰åˆæ­¥ç¤ºç¯„å¦‚ä½•å®šç¾©ä¸€å€‹ struct çµæ§‹ï¼Œè€Œå®£å‘Š struct å‹åˆ¥è·Ÿä¸€èˆ¬è®Šæ•¸ä¸€æ¨£ 1var p Person // p ç¾åœ¨ç‚º Person å‹åˆ¥çš„è®Šæ•¸ struct é è¨­å€¼ç‚ºé›¶ã€‚å°æ–¼ struct ä¾†èªªï¼Œé›¶è¡¨æ‰€æœ‰æ¬„ä½å‡è¨­å®šç‚ºå…¶å°æ‡‰çš„é›¶å€¼ã€‚ä»¥ä¸Šè¿°å®šç¾©å¥½çš„ Person èˆ‰ä¾‹ï¼Œæ¬„ä½ Name å’Œ Gender å› å‹åˆ¥ç‚º string ï¼Œæ•…é è¨­å€¼ç‚º &quot;&quot;ï¼Œè€Œ Age å‹åˆ¥ç‚º int ï¼Œæ•…é è¨­ç‚º 0ã€‚ 12345var s Personfmt.Println(&quot;Person s: &quot;, s) // Person s: { 0}s.Age = 22s.Name = &quot;Jack&quot;fmt.Println(&quot;Person s: &quot;, s) // Person s: {Jack 22} åˆå§‹åŒ– structæˆ‘å€‘å¯ä»¥åœ¨åˆå§‹åŒ–æ™‚çµ¦å€¼ 1234p := Person{&quot;Tom&quot;, &quot;Male&quot;, 25}// å­˜å– p çš„ name å±¬æ€§fmt.Printf(&quot;The person's name is %s , gender is %s , age is %d\\n&quot;, p.Name, p.Gender, p.Age) // The person's name is Tom , gender is Male , age is 25 éœ€æ³¨æ„çš„æ˜¯ï¼š ä¸èƒ½åƒ…åˆå§‹åŒ–ä¸€éƒ¨åˆ†æ¬„ä½ 1var p = Person{&quot;Tom&quot;} // Compiler Error: too few values in struct initializer åˆå§‹åŒ– struct æ™‚å°æ¬„ä½å‘½å (ç„¡æ›è¡Œç¬¦è™Ÿåˆ†éš”å¤šå€‹æ¬„ä½)é€é field:value çš„æ–¹å¼åˆå§‹åŒ– structï¼Œé€™æ¨£æ¬„ä½é †åºå°±ç„¡é—œç·Šè¦ã€‚å°‡ä¸Šå€‹ç¯„ä¾‹åŠ ä¸Šæ¬„ä½å‘½ååšæ”¹å¯«ï¼š 1234p := Person{Age: 25, Name: &quot;Tom&quot;, Gender: &quot;Male&quot;}// å­˜å– p çš„ name å±¬æ€§fmt.Printf(&quot;The person's name is %s , gender is %s , age is %d\\n&quot;, p.Name, p.Gender, p.Age) // The person's name is Tom , gender is Male , age is 25 æ¯”è¼ƒå…©è€…çš„è¼¸å‡ºçµæœä¸¦ç„¡å·®ç•°ã€‚ åˆå§‹åŒ– struct æ™‚å°æ¬„ä½å‘½å (æœ‰æ›è¡Œç¬¦è™Ÿåˆ†éš”å¤šå€‹æ¬„ä½)ç‚ºæé«˜å¯è®€æ€§ï¼Œå¯ä»¥ç”¨æ›è¡Œç¬¦è™Ÿåˆ†éš”å¤šå€‹æ¬„ä½ï¼Œéœ€æ³¨æ„è©²æƒ…å½¢ä¸‹å¿…é ˆä»¥é€—è™Ÿçµå°¾ 12345p := Person{ Age: 25, Name: &quot;Tom&quot;, Gender: &quot;Male&quot;,} åƒ…åˆå§‹åŒ–ä¸€éƒ¨åˆ†æ¬„ä½æ¡ç”¨æ¬„ä½å‘½åä¾†åˆå§‹åŒ– struct å…è¨±åªæœ‰åˆå§‹åŒ–ä¸€éƒ¨åˆ†æ¬„ä½ï¼Œå…¶ä»–æœªåˆå§‹åŒ–çš„æ¬„ä½å‡è¨­å®šç‚ºå…¶å°æ‡‰çš„é›¶å€¼ 123456p := Person{ Age: 25,}fmt.Printf(&quot;The person's name is %s , gender is %s , age is %d\\n&quot;, p.Name, p.Gender, p.Age) // The person's name is , gender is , age is 25 å­˜å– struct çš„æ¬„ä½å° struct çµæ§‹ä½¿ç”¨é» . ä¾†å­˜å– struct çš„å„å€‹æ¬„ä½æ‰€å°æ‡‰çš„å€¼ï¼Œä¹Ÿå¯ä»¥åšè³¦å€¼ 12345678910111213141516171819type VideoGame struct { Title, Genre string Published bool}pacman := VideoGame{ Title: &quot;Pac-Man&quot;, Genre: &quot;Arcade Game&quot;, Published: true,}fmt.Printf(&quot;pacman: %+v\\n&quot;, pacman) // pacman: {Title:Pac-Man Genre:Arcade Game Published:true}fmt.Println(&quot;VideoGame Title: &quot;, pacman.Title) // VideoGame Title: Pac-Manfmt.Println(&quot;VideoGame Genre: &quot;, pacman.Genre) // VideoGame Genre: Arcade Game// assgin æ–°çš„å€¼çµ¦ Published æ¬„ä½pacman.Published = falsefmt.Println(&quot;VideoGame: &quot;, pacman) // VideoGame: {Pac-Man Arcade Game false} å‚³é structï¼š å€¼å‹åˆ¥struct æœ¬èº«æ˜¯å€¼å‹åˆ¥ï¼Œè‹¥å°‡ä¸€å€‹ struct çš„è®Šæ•¸ assign çµ¦å¦ä¸€å€‹è®Šæ•¸æ™‚ï¼Œæœƒè¤‡è£½åŸæœ‰çš„struct è®Šæ•¸ä¸”åˆ†æ´¾çµ¦ä¸€å€‹æ–°çš„ struct ã€‚ åŒæ¨£åœ°ï¼Œå°‡ struct å‚³éçµ¦å¦ä¸€å€‹å‡½æ•¸æ™‚ï¼Œè©²å‡½æ•¸å°‡å–å¾—è¤‡è£½å¾Œçš„ structã€‚ 12345678910111213type Point struct { X, Y int}p1 := Point{10, 20}p2 := p1 // è¤‡è£½ p1 çš„ struct çµæ§‹çµ¦ p2fmt.Println(&quot;p1 = &quot;, p1) // p1 = {10 20}fmt.Println(&quot;p2 = &quot;, p2) // p2 = {10 20}p2.X = 15fmt.Println(&quot;\\n =========== After modifying p2 ===========&quot;)fmt.Println(&quot;p1 = &quot;, p1) // p1 = {10 20}fmt.Println(&quot;p2 = &quot;, p2) // p2 = {15 20} å‚³é structï¼š æŒ‡å‘ struct çš„æŒ‡æ¨™(pointer)Go å…è¨±é€éæŒ‡æ¨™ç›´æ¥å­˜å– struct çš„æ¬„ä½ï¼Œä½¿ç”¨ &amp; ç¬¦è™Ÿå–å¾—æŒ‡å‘ struct çš„æŒ‡æ¨™ 1234567891011121314151617181920212223242526type Rental struct { Address string Rooms, Size, Price int}r := Rental{ Address: &quot;Taipei&quot;, Rooms: 111, Size: 222, Price: 9999,}r1 := &amp;rfmt.Printf(&quot;r1: %+v\\n&quot;, r1) // r1: &amp;{Address:Taipei Rooms:111 Size:222 Price:9999}fmt.Printf(&quot;r1 with *: %+v\\n&quot;, *r1) // r1 with *: {Address:Taipei Rooms:111 Size:222 Price:9999}// ===============fmt.Printf(&quot;with * -&gt; Address: %s ; Price: %d ; Rooms: %d ; Size: %d \\n&quot;, (*r1).Address, (*r1).Price, (*r1).Rooms, (*r1).Size) // with * -&gt; Address: Taipei ; Price: 9999 ; Rooms: 111 ; Size: 222// èˆ‡ä¸Šé¢ç›¸åŒ// r1.Address ç­‰åŒæ–¼ (*r1).Address -&gt; ä»¥æ­¤é¡æ¨fmt.Printf(&quot;Address: %s ; Price: %d ; Rooms: %d ; Size: %d \\n&quot;, r1.Address, r1.Price, r1.Rooms, r1.Size)// Address: Taipei ; Price: 9999 ; Rooms: 111 ; Size: 222 æœ‰ç„¡ä½¿ç”¨æŒ‡æ‘½(pointer) å‚³é struct çš„å·®ç•° è‹¥æŒ‡å®šæˆ–å‚³é struct çµæ§‹æ™‚ï¼Œä¸¦éæƒ³è¦è¤‡è£½å€¼åŸŸï¼Œå¯ä»¥ä½¿ç”¨æŒ‡æ¨™ new() å‡½æ•¸å»ºç«‹ structä½¿ç”¨ Go çš„ new() å‡½æ•¸ä¾†å»ºç«‹ struct çš„å¯¦ä¾‹ã€‚new() å‡½æ•¸åˆ†é…è¶³å¤ çš„è¨˜æ†¶é«”ä¾†ç¬¦åˆæ‰€æœ‰çš„ struct æ¬„ä½ï¼Œå„è‡ªè¨­ç‚ºé›¶å€¼ï¼Œå›å‚³æŒ‡æ´¾æ–°çš„ struct çš„æŒ‡æ¨™ 1234567891011type Point struct { X, Y int}// å»ºç«‹Point çš„ struct å¯¦ä¾‹p3 := new(Point) // æ­¤è™• p3 çš„å‹åˆ¥ç‚º*Pointfmt.Println(&quot;p3: &quot;, *p3) // p3: {0 0}p3.X = 1p3.Y = 3fmt.Println(&quot;p3: &quot;, *p3) // p3: {1 3} struct çš„åŒ¿åæ¬„ä½è‹¥åŒ¿åæ¬„ä½ç‚ºä¸€å€‹ struct çš„æ™‚å€™ï¼Œè©² struct æ‰€æœ‰æ¬„ä½éƒ½æœƒè·Ÿè‘—(éš±æ€§)è¢«å¼•å…¥ç•¶å‰å®šç¾©çš„å¦ä¸€å€‹ struct 12345678910111213141516171819202122232425262728293031323334type Human struct { Name string Age, Weight int}type Student struct { Human // åŒ¿åæ¬„ä½ï¼ŒStudent é è¨­æœƒåŒ…å« Human ä¸‹çš„æ‰€æœ‰æ¬„ä½ speciality string}// åˆå§‹åŒ–ä¸€å€‹å­¸ç”Ÿtom := Student{Human{&quot;Tom&quot;, 25, 120}, &quot;Computer Science&quot;}// ===== å­˜å–ç›¸æ‡‰çš„æ¬„ä½ =====fmt.Println(&quot;His name is &quot;, tom.Name) // His name is Tomfmt.Println(&quot;His age is &quot;, tom.Age) // His age is 25fmt.Println(&quot;His weight is &quot;, tom.Weight) // His weight is 120fmt.Println(&quot;His speciality is &quot;, tom.speciality) //His speciality is Computer Science// ===== ä¿®æ”¹æ¬„ä½ç›¸æ‡‰çš„å€¼ =====// ä¿®æ”¹ä¸»ä¿®ç§‘ç›®tom.speciality = &quot;Finance&quot;fmt.Println(&quot;Tom changed his speciality&quot;)fmt.Println(&quot;His speciality is &quot;, tom.speciality) // His speciality is Finance// ä¿®æ”¹å¹´é½¡fmt.Println(&quot;Tom become old&quot;)tom.Age = 46fmt.Println(&quot;His age is&quot;, tom.Age) // His age is 46// ä¿®æ”¹é«”é‡fmt.Println(&quot;Tom is not an athlet anymore&quot;)tom.Weight += 60fmt.Println(&quot;His weight is&quot;, tom.Weight) // His weight is 180 ç”±ä¸Šè¿°ç¯„ä¾‹å¯çŸ¥ï¼ŒStudent çµ„åˆäº† Human struct å’Œ string é€™äº›åŸºæœ¬å‹åˆ¥ï¼Œå¯¦ç¾æ¬„ä½çš„ç¹¼æ‰¿ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š è‹¥ç¹¼æ‰¿èˆ‡è¢«ç¹¼æ‰¿çš„ struct ç™¼ç”Ÿæ¬„ä½æ¬„ä½åç¨±è¡çª(field names conflict)ï¼Œä»¥è¼ƒä¸Šå±¤çš„ struct å„ªå…ˆæ¬¡åºè¼ƒé«˜ å¦å¤–ï¼ŒStudent äº¦å¯å­˜å– Human é€™å€‹æ¬„ä½ä½œç‚ºæ¬„ä½å 123tom.Human = Human{&quot;Marcus&quot;, 30, 70} tom.Human.Age -= 1fmt.Println(&quot;tom.Age: &quot;, tom.Age) // tom.Age: 29 é™¤ struct æ¬„ä½ä¹‹å¤–ï¼Œæ‰€æœ‰çš„å…§å»ºå‹åˆ¥å’Œè‡ªè¨‚å‹åˆ¥éƒ½å¯ä»¥ä½œç‚ºåŒ¿åæ¬„ä½ 1234567891011121314151617181920212223242526272829type Human struct { name string age, weight int}type Student struct { Human // åŒ¿åæ¬„ä½ï¼Œstruct Skills // åŒ¿åæ¬„ä½ï¼Œè‡ªè¨‚çš„å‹åˆ¥ string slice int // å…§å»ºå‹åˆ¥ int ä½œç‚ºåŒ¿åæ¬„ä½ speciality string}// åˆå§‹åŒ–å­¸ç”Ÿ Jennyjenny := Student{Human: Human{&quot;Jenny&quot;, 35, 50}, speciality: &quot;Biology&quot;}// å­˜å–ç›¸æ‡‰çš„æ¬„ä½fmt.Println(&quot;Her name is &quot;, jenny.name) // Her name is Jennyfmt.Println(&quot;Her age is &quot;, jenny.age) // Her age is 35fmt.Println(&quot;Her weight is &quot;, jenny.weight) // Her weight is 50fmt.Println(&quot;Her speciality is &quot;, jenny.speciality) // Her speciality is Biology// ä¿®æ”¹ skill æŠ€èƒ½æ¬„ä½jenny.Skills = []string{&quot;anatomy&quot;}fmt.Println(&quot;Her skills are &quot;, jenny.Skills) // Her skills are [anatomy]jenny.Skills = append(jenny.Skills, &quot;pyhon&quot;, &quot;golang&quot;)fmt.Println(&quot;Her skills now are &quot;, jenny.Skills) // Her skills now are [anatomy pyhon golang]// ä¿®æ”¹åŒ¿åå…§å»ºå‹åˆ¥æ¬„ä½å‰ï¼Œ int é è¨­åˆå§‹å€¼ç‚º 0fmt.Println(&quot;Her preferred number is&quot;, jenny.int) // Her preferred number is 0// ä¿®æ”¹åŒ¿åå…§å»ºå‹åˆ¥æ¬„ä½å¾Œjenny.int = 3fmt.Println(&quot;Her preferred number is&quot;, jenny.int) // Her preferred number is 3 é€éä¸Šè¿°ç¯„ä¾‹å¯çŸ¥ï¼Œ struct æ—¢å¯ä»¥å°‡ struct ä½œç‚ºåŒ¿åæ¬„ä½ï¼Œè‡ªè¨‚å‹åˆ¥ã€å…§å»ºå‹åˆ¥éƒ½å¯ä»¥ä½œç‚ºåŒ¿åæ¬„ä½ï¼Œé‚„èƒ½æ–¼å°æ‡‰çš„æ¬„ä½ä¸Šé¢åšå‡½å¼æ“ä½œï¼ˆå¦‚ä¾‹å­ä¸­çš„ append()ï¼‰ struct çš„æ¯”è¼ƒè‹¥å…©å€‹ struct è®Šæ•¸çš„æ‰€æœ‰å°æ‡‰æ¬„ä½éƒ½ç›¸ç­‰ï¼Œå‰‡å…©è€…ç›¸ç­‰ 1234567891011121314type Point struct { X, Y int}p1 := Point{3, 4}p2 := Point{3, 4}if p1 == p2 { fmt.Println(&quot;p1 and p2 ç›¸ç­‰&quot;)} else { fmt.Println(&quot;p1 and p2 ä¸ç›¸ç­‰&quot;)}// output: p1 and p2 ç›¸ç­‰ åŒ¯å‡º struct å’Œ struct æ¬„ä½åœ¨ Go è¨­è¨ˆçš„è¦å‰‡ä¸­ï¼Œæœ‰å¹¾å€‹æ˜¯ä¸€å®šè¦çŸ¥é“çš„: å¤§å¯«å­—æ¯é–‹é ­çš„è®Šæ•¸ã€å‡½å¼ã€struct å‹åˆ¥å’Œ struct æ¬„ä½éƒ½æ˜¯å¯åŒ¯å‡ºçš„ï¼Œå¯ä¾›å¤–éƒ¨çš„ package ä¸­å­˜å– -&gt; å…¬æœ‰è®Šæ•¸ åä¹‹å°å¯«å­—æ¯é–‹é ­çš„è®Šæ•¸ã€å‡½å¼æ˜¯ä¸å¯åŒ¯å‡ºçš„ï¼Œåƒ…èƒ½åœ¨åŒä¸€ package ä¸­å¯è¦‹ -&gt; ç§æœ‰è®Šæ•¸ Ref Golang - Pointer, Structs, Methods ä½¿ç”¨ Golang æ‰“é€  Web æ‡‰ç”¨ç¨‹å¼ - struct Golang struct æ•™å­¸èˆ‡ç¯„ä¾‹ Golang çµæ§‹å…¥é–€ golang å‚³å€¼ã€å‚³æŒ‡æ¨™ è§€é»","link":"2020/01/15/Go/%5BGo%5D%20Struct(%E7%B5%90%E6%A7%8B)%20%E5%9F%BA%E7%A4%8E/"},{"title":"ç¶²è·¯æ¦‚è«–å…¥é–€","text":"å‰è¨€é€™å­¸æœŸä¿®äº†å¤–ç³»çš„ä¸€å ‚ç¶²è·¯æ¦‚è«–ï¼Œåˆ©ç”¨é€™å€‹æ©Ÿæœƒåšå€‹è¤‡ç¿’ç”¨çš„ç­†è¨˜ã€‚ èª²å ‚ä¸»è¦åœ¨è¨è«–ç¾ä»Šç¶²è·¯çš„æ¨™æº–ï¼Œæ¡ç”¨çš„æ˜¯TCP/IPåŠOSIçš„æ··åˆæ¶æ§‹ ä»¥ä¸‹åšå€‹ç°¡å–®çš„æ•´ç†: ç”±æœ€ä¸‹å±¤é–‹å§‹æ’åº: ç¬¬ä¸€å±¤: å¯¦é«”å±¤(Physical layer)æ¡ç”¨å¯¦é«”è¨­å‚™ï¼Œä¸¦ç”¨2é€²åˆ¶åšæ•¸æ“šå‚³è¼¸ï¼Œå¯¦é«”å±¤éœ€è¦ç¯„è¨­å‚™æˆ–å‚³è¼¸ç·šçš„è¦æ ¼ï¼Œç¢ºä¿è¨Šè™Ÿå‚³è¼¸ç©©å®šã€‚ å¸¸è¦‹è¨­å‚™: ç¶²è·¯ç·šã€é›†ç·šå™¨(Hub) ç¬¬äºŒå±¤: æ•¸æ“šéˆæ¥å±¤(Data link layer)åœ¨ç¶²è·¯(Network)ä¹‹é–“å»ºç«‹é‚è¼¯é€£çµï¼Œä¸¦åœ¨å‚³è¼¸éç¨‹åšæµé‡æ§åˆ¶ã€éŒ¯èª¤åµæ¸¬ï¼Œå°‡å¯¦é«”å±¤çš„è¨Šè™Ÿå°è£ï¼Œç¨±ä½œData Frameã€‚å¸¸è¦‹ä¾‹å­: ç¶²è·¯å¡åœ°å€(MAC Address)ã€Switch ç¬¬ä¸‰å±¤: ç¶²çµ¡å±¤(Internet layer)å°‡IPã€è³‡æ–™çµ„æˆå°åŒ…ï¼Œä¸¦æ±ºå®šæ•¸æ“šå°åŒ…è¦ç¶“éå“ªäº›routeræˆ–switchã€‚ä¾‹å­: Routerã€switchã€ADSL ç¬¬å››å±¤: å‚³è¼¸å±¤(Transport layer)é€²è¡Œé»å°é»çš„è™•ç†ï¼Œé€²è¡Œå‚³è¼¸æ™‚æœƒå…ˆå°‡è¼ƒå¤§çš„è³‡æ–™åˆ‡å‰²æˆå¤šå€‹é©åˆå‚³è¼¸çš„å°åŒ…(packet)ï¼Œé™¤äº†åµæ¸¬éŒ¯èª¤ä¹‹å¤–ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œä»–æœƒé€²è¡ŒéŒ¯èª¤æ›´æ­£ é€™æ˜¯å‚³è¼¸å±¤æ‰æœƒæœ‰çš„ï¼Œåªè¦éŒ¯ä¸€å€‹bitï¼Œè³‡æ–™å°±æœƒæ•´å€‹ç æ‰ï¼Œé‡æ–°å‚³è¼¸ã€‚ ä¸»è¦å”å®š: TCPã€UTP ç¬¬äº”å±¤: æ‡‰ç”¨å±¤(Application layer)è™•ç†æ‡‰ç”¨ç¨‹å¼ï¼Œæä¾›usersç¶²è·¯æœå‹™ã€‚ å¸¸è¦‹å”å®šæœ‰: httpã€smtpã€ftp ä¾‹å­: e-mailã€æ–‡ä»¶å‚³è¼¸ã€æ•¸æ“šåŠ å¯† TCP/IP çš„éé€åŸç†:1.å°‡ä¾†æºIPå’Œç›®çš„IPåˆ†åˆ¥èˆ‡å­ç¶²è·¯é®ç½©(Subnet Mask)é€²è¡ŒANDé‹ç®— 2.æ¯”è¼ƒANDé‹ç®—çµæœ: a. ç›¸åŒ: é€éLANçš„æ–¹å¼å‚³é€ åŸå› : ä¾†æºå’Œç›®çš„IPåœ¨åŒä¸€å­ç¶²è·¯ b. ä¸ç›¸åŒ: é€éWANå‚³é€ åŸå› ï¼šç›®çš„IPä¸åœ¨æœ¬åœ°ç¶²æ®µ ä¸€äº›åè©è§£é‡‹ï¼š è·¯ç”±å™¨router(åˆåšgateway):å°‡å¤šå€‹å€åŸŸç¶²è·¯åšä¸²è¯çš„è£ç½® å»£åŸŸç¶²è·¯(Wide Area Network, WAN)è·¨å€åŸŸå‹çš„è¨ˆç®—æ©Ÿç¶²è·¯çš„é›†åˆï¼Œé€£æ¥å¤šå€‹ç¶²è·¯ç¯€é»ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯è·¨è¶Šä¸€å€‹çœã€å¸‚ï¼Œæˆ–æ˜¯åœ‹å®¶ã€‚ å…¶ä¸­WANåŒ…å«å¤§å°ä¸åŒçš„å­ç¶²ï¼Œé€™äº›å­ç¶²å¯ä»¥æ˜¯LANæˆ–å°å‹WAN å€åŸŸç¶²è·¯(Local Area Network, LAN)æŸå€åŸŸå…§çš„å¤šå°è¨ˆç®—æ©Ÿç¶²è·¯çš„é›†åˆï¼Œå–®ä¸€å€‹ç¶²è·¯ç¯€é»ï¼Œæ˜¯å°é–‰å‹çš„ï¼Œä¾‹å¦‚å…¬å¸å…§éƒ¨çš„å€åŸŸç¶²è·¯ã€å­¸æ ¡ç¶²è·¯ ç”Ÿæ´»å¯¦ä¾‹ï¼šä¸€å®¶å¤§å‹å…¬å¸çš„ç¸½å…¬å¸åœ¨ç¾åœ‹ï¼Œåˆ†å…¬å¸åˆ†ä½ˆå„åœ°ï¼Œè‹¥å°‡æ‰€æœ‰åˆ†å…¬å¸ç¶²è·¯é€£æ¥ä¸€èµ·ï¼Œä¸€å€‹åˆ†å…¬å¸è¡¨ä¸€å€‹å€åŸŸç¶²è·¯ï¼Œæ•´å€‹å…¬å¸ç¶²è·¯è¡¨ä¸€å€‹å»£åŸŸç¶²è·¯ ç„¡ç·šå€åŸŸç¶²(Wireless LAN , WLAN):ç”¨é›»ç£æ³¢åœ¨ç©ºæ°£ç™¼é€å’Œæ¥æ”¶æ•¸æ“šï¼Œä¸é ˆç¶²è·¯ç·š ä¾‹å­ï¼š WIFI é‚£Routeræ¥WANçš„å£å’ŒLANçš„å£æœ‰ä½•å€åˆ¥ï¼ŸWANï¼šæ¥å¤–éƒ¨IP address è½‰ç™¼ä¾†è‡ªå…§éƒ¨çš„LANç™¼å‡ºçš„IPå°åŒ… LAN: æ¥å…§éƒ¨IP address å…§éƒ¨ç‚ºswitchï¼Œå¯ä¸æ¥WAN ç¶²è·¯æ ¸å¿ƒç”±äº’ç›¸é€£çµæˆç¶²ç‹€çš„routeræ‰€çµ„æˆï¼Œè³‡æ–™åœ¨ç¶²è·¯ä¸­å‚³é€çš„æ–¹å¼åˆ†ç‚º3ç¨®: Circuit Switching( ç·šè·¯äº¤æ›)åœ¨å…©å€‹é€šè¨Šçš„ç«¯é»ä¹‹é–“å»ºç«‹å¯¦é«”ç·šè·¯é€£ç·šã€‚ä¸€æ—¦å»ºç«‹å…©ç«¯ä¹‹é–“çš„é€£ç·šå¾Œï¼Œ ä½”ç”¨ç·šè·¯ä¸¦å‚³è¼¸è³‡æ–™(å³ä»–äººç„¡æ³•ä½¿ç”¨)ã€‚ç›´åˆ°é€šä¿¡çµæŸä¹‹å¾Œï¼Œé€™æ¢å°ˆç”¨è·¯å¾‘æ‰åœæ­¢ä½¿ç”¨ï¼Œä¸¦è®“å‡ºä¾›ä»–äººç¹¼çºŒä½¿ç”¨ã€‚ç›®å‰çš„é›»è©±èˆ‡é›»å ±äº¤æ›ç³»çµ±å°±æ˜¯ä½¿ç”¨é€™ç¨®æŠ€è¡“ã€‚ ç‰¹è‰²ï¼šåœ¨å‚³è¼¸éç¨‹ä¸­ï¼Œå‚³è¼¸ç·šè·¯ä¸èƒ½åˆ†äº«çµ¦å…¶å®ƒç¯€é»(node)ä½¿ç”¨ï¼Œå³é »å¯¬ä¸å…±ç”¨ã€‚å„ªé»ï¼š å‚³è¼¸é€Ÿåº¦å¿«å»¶é²å°ã€‚ ä¸æœƒç”¢ç”Ÿç·šè·¯è¡çªï¼ŒéŒ¯èª¤ç‡ä½ã€‚ ç¼ºé»ï¼š éœ€èŠ±æ™‚å»ºç«‹ç·šè·¯é€£ç·šã€‚ å› éœ€ç­‰å¾…å‚³è¼¸å®Œæˆæ‰æœƒé‡‹æ”¾ç·šè·¯ï¼Œå®¹æ˜“å½¢æˆ ä½”ç·šè€Œæµªè²»è³‡æºã€‚ è¨Šæ¯äº¤æ›(Message Switching)å¯è¦–ç·šè·¯çš„å¿™ç¢Œç‹€æ³é¸æ“‡ä¸åŒçš„è·¯å¾‘ä¾†å‚³é€ è³‡æ–™ï¼Œä¸ç”¨å»ºç«‹å°ˆç”¨ç·šè·¯ã€‚å…¶ä¸­å‚³éçš„è³‡æ–™åŒ…å«ä¾†æºä½å€èˆ‡ç›®çš„åœ°ä½å€ï¼Œ ç¶²è·¯ä¸­é–“è£ç½®æœƒå°‡è¨Šæ¯å…ˆå„²å­˜å†å‚³é€å‡ºå»ã€‚ å„ªé»ï¼š æ¯å€‹ç¯€é»éƒ½æœƒæª¢æŸ¥è³‡æ–™æ˜¯å¦å®Œæ•´ï¼Œå¯é™ä½å‚³ è¼¸çš„éŒ¯èª¤ç‡ã€‚ æ•´é«”ç·šè·¯çš„ä½¿ç”¨ç‡æå‡ã€‚ ç¼ºé»ï¼š ç•¶å‚³è¼¸çš„è³‡æ–™é‡é¾å¤§æ™‚ï¼Œæœƒé•·æ™‚é–“ä½”ç”¨æ‰€é¸ æ“‡çš„å‚³è¼¸è·¯å¾‘ï¼Œé€ æˆè©²æ®µç·šè·¯å‡ºç¾å£…å¡æƒ…å½¢ã€‚ åˆ†å°äº¤æ›(Packet Switching)å…ˆå°‡æ¬²å‚³éçš„è¨Šæ¯åˆ†å‰²æˆè¨±å¤šå¤§å°å›ºå®šçš„å°å°åŒ…ï¼Œå…¶ä¸­åŒ…å«ç›®çš„åœ°çš„ã€Œä½å€ã€ã€‚ ç¶²è·¯ç¯€é»å¯ä¾å°åŒ…æ‰€æŒ‡å®šçš„ç›®çš„ä½å€ä¾†æ±ºå®šå‚³è¼¸è·¯å¾‘ï¼Œå‚³é€è‡³ç›®çš„åœ°å¾Œé‡æ–°çµ„åˆï¼Œæ˜¯ä¸–ç•Œä¸Šç¶²éš›ç¶²è·¯é€šè¨Šã€æ•¸æ“šå’ŒèªéŸ³é€šè¨Šä¸­æœ€é‡è¦çš„åŸºç¤ã€‚ å†èˆ‰å€‹ä¾‹å­ï¼Œå¥½æ¯”ä»Šå¤©åœ¨ä¸€æ¢ç¶²è·¯çš„é«˜é€Ÿå…¬è·¯(å…±ç”¨çš„é »å¯¬)ä¸Šï¼Œä¸€å€‹ä¸€å€‹çš„packetå¯ä»¥åŒæ™‚åœ¨ç¶²è·¯ä¸Šé€²è¡Œå‚³è¼¸ã€‚ å„ªé»ï¼š å°åŒ…è³‡æ–™é‡å°ï¼Œå‚³è¼¸å¿«é€Ÿå¯é¿å…å£…å¡ï¼Œå…·æœ‰ Message Switchingèˆ‡Circuit Switching æŠ€è¡“çš„å„ªé»ã€‚ ç¼ºé»ï¼š å°åŒ…ä¸æœƒè¨ˆç®—æ‰€æœ‰è·¯å¾‘çš„ç¯€é»(node)ï¼Œåªç®¡å‚³éçµ¦ä¸‹ä¸€å€‹ç¯€é»ï¼Œæ•…ä¸æœƒæŒ‰é †åºé€é”ï¼Œæ¥æ”¶ç«¯éœ€èŠ±æ™‚é–“é‡æ•´è³‡æ–™ã€‚ ç¶²éš›ç¶²è·¯ä¸€äº›åè©:IPv4:IPv4çš„ipå…±32å€‹bit, åˆ†æˆNetID èˆ‡ HostIDã€‚Network Maskå³æ‰€è¬‚çš„ç¶²è·¯é®ç½©ã€‚ ç¶²è·¯é®ç½©çš„æœ€ä¸»è¦ç”¨é€”åœ¨æ–¼å­ç¶²è·¯ï¼ˆSubnetworkï¼‰çš„åˆ‡å‰²ï¼Œä¸¦ä½¿é›»è…¦åœ¨å½¼æ­¤å»ºç«‹é€šè¨Šç®¡é“ä¹‹å‰ï¼Œå¯å…ˆè¡Œåˆ¤æ–·é€šè¨Šå°è±¡æ˜¯å¦å¯ ç›´æ¥é€£é€šï¼ˆDirectly Reachableï¼‰ï¼Œå†æ±ºå®šæ˜¯å¦é ˆè½‰é€æœå‹™ã€‚ å› ç‚ºå‚³çµ±ç¶²æ®µçš„åˆ‡å‰²æ–¹å¼æœƒé€ æˆipæµªè²», æ•…ç™¼å±•ä»¥HostIDçµ¦NetIDä»¥å¢åŠ NetMaskçš„æ–¹æ³•ç¨±ç‚ºSubNetã€‚ IPv6:IPv6çš„æ˜¯å‡ºç¾ä¸»è¦æ˜¯ç‚ºäº†è§£æ±ºå¯ç”¨çš„IPv4 ä½å€å°‡æœƒä¸å¤ ç”¨çš„å•é¡Œã€‚å› ç‚ºåŸä¾†çš„ç¶²è·¯ä½å€è¨­è¨ˆæ–¹æ³•ä¸¦ä¸èƒ½æä¾›çµ¦å…¨çƒç¶²è·¯ä½¿ç”¨è€…è¶³å¤ çš„åœ°å€ç©ºé–“ã€‚ IPv6æ˜¯ä¸€å€‹é•·åº¦ç‚º 128 ä½å…ƒçš„è­˜åˆ¥åç¨±ï¼Œæ¯”IPv4åˆåœ¨æ›´é•·ã€‚ ç‚ºäº†è§£æ±ºIP Addressä¸å¤ çš„å•é¡Œï¼Œé™¤äº†æœªä¾†è½‰ç”¨IPv6å¤–ï¼Œé‚„æœ‰å…©ç¨®ä¸»è¦æ–¹å¼: ç¶²è·¯ä½å€è½‰æ›(NAT,Network Address Translation)å­—é¢ä¸Šçš„æ„æ€æ˜¯ã€ç¶²è·¯ä½å€çš„å‚³é€ã€ï¼Œä»–ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯åœ¨æä¾›å…§éƒ¨ç§æœ‰ç¶²è·¯çš„é›»è…¦ä¹‹é »å¯¬åˆ†äº«ï¼Œå¦‚ä¸€èˆ¬å¸¸è½åˆ°çš„â€IPåˆ†äº«å™¨â€ã€‚ æ¯å€‹è£ç½®è‹¥è¦é€£ä¸Šç¶²å°±éœ€è¦ä¸€çµ„å…¬å…±IPï¼Œå‡è¨­ä»Šå¤©å…¬å¸å…§éƒ¨æœ‰20å°é›»è…¦ï¼Œå¦‚æœè²·å°é›»è…¦éƒ½é…ä¸€çµ„å…¬å…±IPï¼Œè¦ç›¸ç•¶ä¸€ç­†èŠ±è²»!ç«™åœ¨å…¬å¸è§’åº¦ï¼Œå¸Œæœ›åªè¦ä¸€çµ„IPå°±èƒ½è®“å…¬å¸æ‰€æœ‰é›»è…¦éƒ½èƒ½ä¸Šç¶²ï¼Œé‚£å°±éœ€è¦ä¸€å°IPåˆ†äº«å™¨ï¼Œä¸¦è¨»å†Šä¸€çµ„å…¬å…±IPï¼ŒIPåˆ†äº«å™¨æœƒé…çµ¦æ¯å€‹å…¬å¸é›»è…¦ä¸€çµ„è™›æ“¬IP(é€šå¸¸çœ‹åˆ°192.168é–‹é ­çš„å°±æ˜¯äº†)ï¼Œå½¢æˆä¸€å€‹å…§éƒ¨ç¶²è·¯ã€‚ å…¬å¸é›»è…¦ä»Šå¤©è¦ä¸Šç¶²æ™‚ï¼Œé›–ç„¶åœ¨å…§éƒ¨æ˜¯è™›æ“¬IPï¼Œä½†æ˜¯é€éNATè½‰å€ï¼Œé€£åˆ°å¤–ç¶²æ™‚æœƒè®Šæˆè¨»å†Šçš„å…¬å…±IP(å³æ‰€æœ‰é›»è…¦é€£å‡ºå»éƒ½æ˜¯åŒä¸€çµ„å…¬å…±IP)ï¼Œå¾å¤–éƒ¨ç¶²ç«™ä¾†çœ‹ï¼Œå°±æ˜¯ä¸€çµ„å…¬å¸çš„å…¬å…±IPã€‚ é³¥å“¥çš„é€™ç¯‡æ–‡ç« æœ‰æ›´è©³ç´°çš„è§£èªªã€‚ å‹•æ…‹ä¸»æ©Ÿçµ„æ…‹å”å®š(DHCPD,Dynamic Host Configuration Protocol)ç‚ºäº†ç¯€çœå­ç¶²è·¯ä¸­ IP ä½å€çš„ä½¿ç”¨é‡ï¼Œå¯ä»¥è¨­å®šç¶²è·¯ä¸­çš„ä¸€å°ä¸»æ©Ÿåšç‚ºæŒ‡æ®ä¸­å¿ƒï¼Œç¨±ç‚ºã€Œå‹•æ…‹ä¸»æ©Ÿçµ„æ…‹å”å®šä¼ºæœå™¨ï¼ˆDHCP serverï¼‰ã€ DHCP serverè² è²¬å‹•æ…‹åˆ†é… IP ä½å€ã€ å­ç¶²è·¯é®ç½©ï¼ˆSubnet maskï¼‰ã€é è¨­é–˜é“å™¨ï¼ˆDefault gatewayï¼‰ã€ DNS ä¼ºæœå™¨çš„ IP ã€‚ ç•¶ç¶²è·¯ä¸­æœ‰ä»»ä½•ä¸€å°é›»è…¦è¦é€£ç·šæ™‚ï¼Œæ‰å‘ DHCP serverè¦æ±‚ä¸€å€‹ IP ä½å€ï¼Œ DHCP ä¼ºæœå™¨æœƒå¾è³‡æ–™åº«ä¸­æ‰¾å‡ºä¸€å€‹ç›®å‰å°šæœªè¢«ä½¿ç”¨çš„ IP ä½å€æä¾›çµ¦è©²é›»è…¦ä½¿ç”¨ï¼Œä½¿ç”¨å®Œç•¢å¾Œé›»è…¦å†å°‡é€™å€‹ IP ä½å€é‚„çµ¦ DHCP ä¼ºæœå™¨ï¼Œæä¾›çµ¦å…¶ä»–ä¸Šç·šçš„é›»è…¦ä½¿ç”¨ï¼Œæ‰€ä»¥èªªIPæ˜¯æœƒä¸åœè®Šå‹•çš„!ç›¸é—œæ–‡ç« åƒè€ƒé€™ç¯‡ã€‚ ç¶²åŸŸåç¨±ç³»çµ±ï¼ˆDNS,Domain Name Systemï¼‰ä¸€èˆ¬äººä½¿ç”¨ç¶²å€åç¨±(Domain Name)ä¾†é€£æ¥ç¶²è·¯ä¸»è¦æ˜¯ç‚ºäº†æ–¹ä¾¿äººé¡è¨˜æ†¶ï¼Œå¯ä»¥å¾Domain NameçŒœå‡ºå¯èƒ½æ˜¯ä»€éº¼å–®ä½ï¼Œæˆ–æ˜¯ç¶²ç«™å¤§è‡´å…§å®¹ã€‚ DNSæœ€ä¸»è¦çš„åŠŸèƒ½æ˜¯å°‡é€ è¨ªçš„ç¶²ç«™åŸŸåè½‰æˆé›£è¨˜çš„IPä½ç½®ï¼Œå› ç‚ºé›»è…¦åªçœ‹å¾—æ‡‚æ•¸å­—ï¼Œæ‰€ä»¥éœ€è¦é€éDNS Serveré€²è¡ŒæŸ¥è©¢ï¼ŒæŸ¥åˆ°å’Œé›»è…¦æºé€šçš„ä¸€é€£ä¸²æ•¸å­—(IP Address)ï¼Œä¸¦å›å‚³çµ¦é›»è…¦ã€‚ æ‰“å€‹æ¯”æ–¹ï¼Œä»Šå¤©å°æ˜è¦æ’¥é›»è©±çµ¦å°è¯ï¼Œå°æ˜ä¸å¯èƒ½åªå°é›»è©±å‘¼å«å°æ–¹åå­—å°±æ’¥é€šé›»è©±ï¼Œè€Œæ˜¯æ’¥å°è¯çš„é›»è©±è™Ÿç¢¼(åŒIP Address)ï¼Œæ’¥å‡ºé›»è©±å¾Œï¼Œé…å°æ’¥å‡ºçš„è™Ÿç¢¼ï¼Œæ‰èƒ½æ‰¾åˆ°å°è¯(åŸŸå)é€™å€‹äººã€‚","link":"2019/07/14/Network/Internet(Basic)/"},{"title":"Proxy","text":"ä»€éº¼æ˜¯Proxy?æ ¹æ“šç¶­åŸºç™¾ç§‘çš„å®šç¾©: ä»£ç†(Proxyï¼‰ä¹Ÿç¨±ç¶²è·¯ä»£ç†ï¼Œæ˜¯ä¸€ç¨®ç‰¹æ®Šçš„ç¶²è·¯æœå‹™ï¼Œå…è¨±ä¸€å€‹ç¶²è·¯çµ‚ç«¯ï¼ˆä¸€èˆ¬ç‚ºç”¨æˆ¶ç«¯ï¼‰é€šéé€™å€‹æœå‹™èˆ‡å¦ä¸€å€‹ç¶²è·¯çµ‚ç«¯ï¼ˆä¸€èˆ¬ç‚ºä¼ºæœå™¨ï¼‰é€²è¡Œéç›´æ¥çš„é€£æ¥ã€‚ä¸€äº›é–˜é“å™¨ã€è·¯ç”±å™¨ç­‰ç¶²è·¯è£ç½®å…·å‚™ç¶²è·¯ä»£ç†åŠŸèƒ½ã€‚ä¸€èˆ¬èªç‚ºä»£ç†æœå‹™æœ‰åˆ©æ–¼ä¿éšœç¶²è·¯çµ‚ç«¯çš„éš±ç§æˆ–å®‰å…¨ï¼Œé˜²æ­¢æ”»æ“Šã€‚ ä¸Šè¿°ä¸€æ®µå†—é•·çš„å­—ï¼Œè‡ªå·±æ˜¯é€™æ¨£ç†è§£ : ä¸€ç¨®å…·æœ‰é‡è¦çš„é›»è…¦å®‰å…¨åŠŸèƒ½ï¼Œä¹Ÿæ˜¯ç‰¹æ®Šçš„ç¶²è·¯æœå‹™ï¼Œå…è¨±å®¢æˆ¶ç«¯é€éå®ƒå’Œå¦ä¸€å€‹ç¶²è·¯æœå‹™é€²è¡Œéç›´æ¥çš„é€£ç·šã€‚ èˆ‰å€‹ä¾‹å­: ä»Šå¤©æˆ‘å¹«å®¶è£¡çš„çˆ¶æ¯è·‘è…¿ï¼Œä¾‹å¦‚åŒ¯æ¬¾ï¼Œ å› ç‚ºæˆ‘ä¸æ˜¯ã€ç”³è«‹è€…æœ¬äººã€è€Œæ˜¯ã€ä»£ç†äººã€çš„è§’è‰²ï¼Œå› æ­¤æœ‰æ™‚å€™æœƒéœ€è¦ç§€å‡ºä¸€äº›è­‰ä»¶ï¼Œæ‰èƒ½å®Œæˆä»£è¾¦äº‹é …ã€‚ å°‡å ´æ™¯æ›è‡³ç¶²è·¯ä¸Šé¢ä»£ç†ä¼ºæœå™¨ (Proxy Server) æ™‚: ç•¶ç”¨æˆ¶ç«¯æœ‰ç¶²è·¯çš„è³‡æ–™è¦æ±‚æ™‚ï¼ŒProxy æœƒå¹«ç”¨æˆ¶å»å‘ç›®çš„åœ°å–å¾—ç”¨æˆ¶æ‰€éœ€è¦çš„è³‡æ–™ã€‚ é€™å€‹è©æœ€æ—©æ‡‰æ˜¯å‡ºç¾åœ¨ç¶²è·¯çš„é˜²ç«ç‰†åŠŸèƒ½ä¸­ã€‚å¯ä»¥ç”¨ä¾†ä¿è­·ç¶²è·¯çš„å®‰å…¨ï¼Œåœ¨å…§éƒ¨ç¶²è·¯èˆ‡å¤–éƒ¨ç¶²è·¯ä¹‹é–“å»ºç«‹ä¸€é“åƒç‰†èˆ¬çš„ä¿è­·ï¼Œæ‰€æœ‰çš„è³‡æ–™é€²å‡ºéƒ½å¿…éœ€ç¶“éé€™é“ç‰†ã€‚ Proxy æœ‰é‚£äº›å¥½è™• ?æ¸›å°‘å–®é»å°å¤–çš„ç¶²è·¯é »å¯¬ï¼Œé™ä½ç¶²è·¯è² è¼‰é‡:å‡è¨­ä»Šå¤©è¦é€ è¨ªä¸€å€‹ç¶²ç«™ï¼Œ åœ¨æ­£å¸¸çš„ç¶²è·¯æµç¨‹ä¸­ï¼Œç•¶ä½¿ç”¨è€…çš„ç€è¦½å™¨çœ‹åˆ° www.xxxx.com.twçš„ç¶²åŸŸæ™‚ï¼Œæœƒå‘DNSå°‹æ‰¾www.xxxx.com.twæ‰€å°æ‡‰çš„IPï¼Œç•¶DNSå‚³å›å°æ‡‰çš„ IPå¾Œï¼Œç€è¦½å™¨æœƒå†å°çœŸæ­£çš„ä¼ºæœå™¨ç´¢å–è³‡æ–™ï¼Œä½†å¦‚æœç¶²è·¯å¡è»Šã€ç¶²ç«™çš„æ©Ÿå™¨é…å‚™ä¸å¥½ã€ç¶²ç«™çš„å°ˆç·šä¸å¤ å¿«ç­‰ä¸è‰¯çš„å› ç´ é€šé€šåŠ åœ¨ä¸€èµ·å¾Œï¼Œä½ è¦é€£æ¥çš„ç¶²ç«™å°±æœƒè®Šçš„å¾ˆæ…¢ã€‚ é€é Proxy Server ï¼Œå¯ä»¥æŠŠé€ è¨ªçš„ç¶²é è³‡æ–™æš«å­˜åœ¨ä¸€å€‹ä½ç½®ï¼Œä¸‹æ¬¡è¨ªå•è©²ç¶²ç«™æ™‚å¯ä»¥ç›´æ¥å¾Proxy Serverå„²å­˜çš„ç©ºé–“ä¸­(ç¡¬ç¢Ÿ)é€²è¡Œè³‡æ–™å¿«å–( Cache)ï¼Œä¸å¿…å†å‘ç¶²è·¯è¦è³‡æ–™ã€‚ ä»¥è¼ƒçŸ­çš„è·¯å¾‘å–å¾—ç¶²è·¯è³‡æ–™ï¼ŒåŠ å¿«ä¸Šç¶²é€Ÿåº¦:å¯ä»¥æŒ‡å®š ç¶²è·¯æœå‹™ä¾›æ‡‰å•†(ISP) æä¾›çš„ä»£ç†ä¼ºæœå™¨é€£æ¥åˆ°åœ‹å¤–ï¼Œé€šå¸¸ ISP æä¾›çš„ Proxy å…·æœ‰è¼ƒå¤§çš„å°å¤–é »å¯¬ï¼Œæ‰€ä»¥åœ¨å°åœ‹å¤–ç¶²ç«™çš„è³‡æ–™å–å¾—ä¸Šæœƒæ¯”è‡ªå·±çš„ä¸»æ©Ÿé€£ç·šåˆ°åœ‹å¤–å¿«å¤šäº†ã€‚ æä¾›é˜²ç«ç‰†å…§éƒ¨çš„é›»è…¦é€£ä¸Šç¶²è·¯Proxy Serverå¯ä»¥ç”¨ä¾†ã€Œä»£æ›¿ã€å¤–éƒ¨ç¶²è·¯çš„é›»è…¦é€£æ¥ç§æœ‰ç¶²è·¯ï¼ˆå…§éƒ¨ç¶²è·¯ï¼‰çš„ç¶²é ä¼ºæœå™¨ï¼Œ å°‡å…§éƒ¨ç¶²è·¯å…§ç¶²é ä¼ºæœå™¨çš„å…§å®¹å„²å­˜åœ¨ä»£ç†ä¼ºæœå™¨çš„è¨˜æ†¶é«”ï¼Œè®“å¤–éƒ¨ç¶²è·¯çš„é›»è…¦ç”±ä»£ç†ä¼ºæœå™¨çš„è¨˜æ†¶é«”ä¸­è®€å–è³‡æ–™ï¼Œè€Œä¸ç›´æ¥ç”±ç§æœ‰ç¶²è·¯çš„ç¶²é ä¼ºæœå™¨è®€å–ã€‚ ç°¡å–®å¯¦ä½œ Proxyè¨­å®š(Chromeç‰ˆæœ¬): å…ˆåˆ°ç¶²é å³ä¸Šè§’çš„å·¥å…·é»é¸ç¬¦è™Ÿç‚º3å€‹é»çš„é¸é …å¾Œé»é¸ â€œè¨­å®šâ€ å¾€ä¸‹æ»¾å‹•è‡³ç³»çµ±çš„åœ°æ–¹ é»é¸é–‹å•ŸProxyè¨­å®š å°±å¯ä»¥é–‹å§‹é€²è¡Œç›¸é—œè¨­å®šå•¦~ æ›´å¤šProxy ç›¸é—œè¨­å®šå¯ä»¥åƒè€ƒé³¥å“¥é€™ç¯‡æ–‡ç« ã€‚ Proxy Server å¦‚ä½•é‹ä½œ ?Proxy Server æ¥å—ä½¿ç”¨è€…çš„ request ä¹‹å¾Œæœƒå…ˆæª¢æŸ¥è‡ªå·±çš„ Server ä¸Šæœ‰æ²’æœ‰ä¸€ä»½ Client ç«¯è¦çš„è³‡æ–™ï¼Œä»£ç† Client ç«¯åˆ°è¨ªå•çš„ç›®çš„åœ°å»æˆªå–è³‡æ–™ï¼Œä¸€ä»½çµ¦ Client ç«¯ï¼ŒProxy Server å…§éƒ¨ä¹Ÿå­˜æ”¾ä¸€ä»½ï¼Œä¸‹ä¸€å€‹Client ç«¯ä½¿ç”¨è€…ä¾†åš request æ™‚ï¼ŒProxy Server ä¾¿æœƒä¸€æ¨£å…ˆåœ¨ Server ä¸­æª¢æŸ¥çœ‹çœ‹ï¼Œæª¢æŸ¥èˆ‡ç›®çš„ç«¯çš„è³‡æ–™æ˜¯å¦ç›¸ç¬¦ï¼Œè‹¥ç›¸ç¬¦å‰‡ç”± Proxy Server ç›´æ¥çµ¦è¦æ±‚çš„ Client ç«¯å³å¯ã€‚ ä¸éï¼Œâ€ å‘ç›®çš„åœ°å† check ä¸€æ¬¡ â€œ é€™æ¨£çš„å‹•ä½œï¼Œä¸€é–‹å§‹åœ¨æƒ³: ä¸æ˜¯æœƒæµªè²»æ™‚é–“å—? ä¸éé€™æ˜¯å¿…è¦çš„ï¼Œé›–ç„¶è¦å»çš„ç›®çš„åœ°çš„è³‡æ–™åœ¨ Proxy Server ä¸Šå­˜æ”¾äº†ä¸€ä»½ï¼Œä½†æ˜¯å¦æ˜¯æœ€æ–°çš„æ˜¯ç„¡æ³•å¾—çŸ¥çš„ï¼Œå¿…éœ€åšæ¯”å°ï¼Œæ¯”å°çš„æ™‚é–“ä¸æœƒé•·ã€‚ä¾‹å¦‚: æ–°èé€™é¡çš„ç¶²ç«™ï¼Œæ˜¯éš¨æ™‚éƒ½åœ¨æ›´æ–°çš„ï¼Œä½†æ˜¯æ¯”å°å¾Œç›¸åŒçš„éƒ¨åˆ†å°±ä¸éœ€è¦å†å‘ç›®çš„ç¶²ç«™é€²è¡Œå­˜å–ã€‚ åƒè€ƒè³‡æ–™:é³¥å“¥çš„ Linux ç§æˆ¿èœ â€“ ä»£ç†ä¼ºæœå™¨çš„è¨­å®šï¼š squidé€é squid ä¾†é€²è¡Œä»£ç†ä¼ºæœå™¨ (proxy) çš„è¨­å®šè¼”åŠ©å€ç¶²çš„ www ç€è¦½æ§åˆ¶ï¼linux.vbird.orgä»€éº¼æ˜¯Proxy?å¸¸å¸¸æœƒè½åˆ°åˆ¥äººèªªï¼Œä½ çš„ Browser è¦è¨­ Proxy Serverï¼Œé€™æ¨£ä½ ä¸Šç¶²çš„é€Ÿåº¦æœƒæ¯”è¼ƒå¿«ï¼Ÿåˆ°åº•ä»€éº¼æ˜¯ Proxy Serverï¼Œä»–åœ¨Internet è£¡æ‰®æ¼”ä»€éº¼æ¨£çš„è§’è‰²ï¼Ÿwww.ithome.com.twProxy ä¼ºæœå™¨æ˜¯ä»€éº¼ï¼Ÿå¦‚ä½•æ‡‰ç”¨ï¼Ÿ - StockFeel è‚¡æ„Ÿä»£ç†ä¼ºæœå™¨ï¼ˆProxy serverï¼‰ ä»£ç†ä¼ºæœå™¨æ˜¯ä¸€ç¨®é˜²ç«ç‰†æˆå“¡ï¼Œä¹Ÿæ˜¯ä¸€ç¨®ã€Œæ‡‰ç”¨é–˜é“å™¨ï¼ˆApplicationâ€¦www.stockfeel.com.twProxy æ˜¯ä»€éº¼æ±æ± ?å‚³çµ±çš„ Proxy Server æ˜¯åº•ä¸‹çš„æ©Ÿå™¨å…ˆå‘ Proxy Server åš request ï¼Œè‹¥ Server ä¸­æ²’æœ‰å°±ç›´æ¥ç”± Serverå‘ç›®çš„åœ°æˆªå–è³‡æ–™ã€‚é€™å°å¤§éƒ½æ•¸çš„ Proxy Serverâ€¦macgyver.info.fju.edu.tw ä»¥ä¸Šç‚ºä»Šæ—¥ç­†è¨˜ã€‚","link":"2019/07/14/Network/Proxy/"},{"title":"[Go] é™£åˆ—(Array)","text":"å‰è¨€é™£åˆ—æ˜¯ä¸€å€‹æœ‰è‘—ç·¨è™Ÿçš„åºåˆ—(ç´¢å¼•å€¼0ç‚ºé–‹é ­)ï¼Œé™£åˆ—è£¡çš„æ¯å€‹å…ƒç´ éƒ½æœ‰ç›¸åŒçš„å–®ä¸€å‹åˆ¥ï¼Œå…ƒç´ çš„å‹æ…‹åŠå€‹æ•¸æ±ºå®šäº†é™£åˆ—çš„å‹æ…‹ã€‚ å®£å‘Šå®£å‘Šé™£åˆ—æ™‚ï¼Œåœ¨[]å…§æ”¾å…¥å…ƒç´ å€‹æ•¸ï¼Œä¸¦ä¸”å®£å‘Šå…ƒç´ çš„è³‡æ–™å‹æ…‹ï¼Œç´¢å¼•å€¼ç”±0é–‹å§‹ã€‚å¦‚:å®£å‘Šä¸€å€‹æ”¾3å€‹integerçš„é™£åˆ—(å®¹å™¨) 1var arr [3]int ä¹Ÿå¯åœ¨ä¸Šè¿°ç¯„ä¾‹æ”¾å…¥{}ï¼Œå¿…é ˆæ¡çŸ­èªæ³•çš„æ–¹å¼ã€‚ 1arr := [5]int{0, 1, 2} å¦‚æœè³¦å€¼çš„æ•¸é‡æ¯”é™£åˆ—å¤§å°é‚„å°‘ï¼Œæœƒè‡ªå‹•çµ¦äºˆåˆå€¼ï¼Œå°±æ˜¯å¾ç·¨è™Ÿ0é–‹å§‹å¡«ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨...ï¼Œæˆ–è€…çµ¦äºˆä¸€å€‹ç©ºé™£åˆ—ï¼Œåªå¯«[]ï¼Œè®“ç·¨è­¯å™¨è‡ªå‹•åˆ¤æ–·æ•¸é‡ 12345arr := [...]int{1, 2, 3, 4, 5}fmt.Println(arr) // [1 2 3 4 5]// æˆ–æ˜¯arr := []int{1, 2, 3, 4, 5}fmt.Println(arr) // [1 2 3 4 5] åˆ†è¡Œå®£å‘Šæœ‰æ™‚é™£åˆ—å¯èƒ½æœƒå¤ªé•·è€Œç„¡æ³•ç”¨ä¸€è¡Œä¾†è¡¨ç¤ºï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„æ–¹å¼ä¾†åˆ†è¡Œ: 1234567x := [5]float64{ 1, 2, 3, 4, 5,} å¦‚æœå®£å‘Šçš„å…ƒç´ æ•¸é‡è¶…é[]ä¸­æŒ‡å®šçš„æ•¸é‡ï¼Œé‚£éº¼æœƒæœ‰out of boundsçš„ç·¨è­¯éŒ¯èª¤ã€‚ éŒ¯èª¤å®£å‘Šè‹¥æ¡ç”¨ä¸€èˆ¬å®£å‘Šçš„æ–¹å¼ï¼Œæœƒå ±éŒ¯ã€‚ 1var arr [5]int{0,1,2} æª¢è¦–é•·åº¦ä½¿ç”¨len()æª¢è¦–é™£åˆ—é•·åº¦(æˆ–åšå®¹å™¨å¤§å°) 12var arr [5]int{0,1,2}fmt.Println(len(arr)) // 5 æŒ‡å®šå…ƒç´ æŒ‡å®šæŸå€‹ä½ç½®çš„å€¼å¯é‡å°æŸå€‹ä½ç½®çš„å…ƒç´ é€²è¡Œè³¦å€¼ 123456789package mainimport &quot;fmt&quot;func main() { var arr [5]int arr[1] = 100 fmt.Println(arr) // [0 100 0 0 0]} æ­é…for loop12345var arr [10]intfor i := 0; i &lt; 10; i++ { arr[i] = i}fmt.Println(arr) // [0 1 2 3 4 5 6 7 8 9] for rangeé™¤äº†ä¸€èˆ¬æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨for index, value range 12345678var total float64x := [5]float64{98, 93, 77, 82, 83}for index, value := range x { fmt.Println(index) total += value}fmt.Println(total / float64(len(x))) æ¯”è¼ƒç°¡æ½”çš„æ–¹å¼è‹¥forä¸éœ€è¦ç´¢å¼•çš„æƒ…æ³ä¸‹ï¼Œå¯ä»¥æ¡ç”¨_é¿å…å› ç‚ºå®šç¾©indexå»æœªä½¿ç”¨ï¼Œå°è‡´ç·¨è­¯å™¨å ±éŒ¯çš„å•é¡Œã€‚ 123456var total float64x := [5]float64{98, 93, 77, 82, 83}for _, value := range x { total += value}fmt.Println(total / float64(len(x))) _ç‚ºGoä¸­çš„blank identifier é™£åˆ—çš„æ¯”è¼ƒè¦æ¯”è¼ƒä¸åŒé™£åˆ—é•·åº¦èˆ‡é™£åˆ—å…§çš„å…ƒç´ ï¼Œéœ€è¦å‹æ…‹ç›¸åŒæ‰å¯ä»¥åšæ¯”è¼ƒï¼Œå¦‚æœå°‡ [5]int èˆ‡ [10]int åšæ¯”è¼ƒï¼Œç·¨è­¯å™¨ç·¨è­¯æ™‚æœƒç™¼ç”Ÿ mismatched types çš„éŒ¯èª¤è¨Šæ¯ï¼Œè€ŒæŒ‡å®šé™£åˆ—çµ¦å¦ä¸€é™£åˆ—æ™‚ï¼Œä¹Ÿå¿…é ˆæ˜¯ç›¸åŒå‹æ…‹çš„é™£åˆ—ã€‚ å·¢ç‹€é™£åˆ—å¦‚æœæƒ³è¦åšä¸€å€‹å¤šç¶­é™£åˆ—ï¼Œå¯ä»¥ä½¿ç”¨å·¢ç‹€é™£åˆ—ä¾†å®Œæˆã€‚å¦‚: å»ºç«‹ä¸€å€‹2X2çš„é™£åˆ— 12345678package mainimport &quot;fmt&quot;func main() { var arr [2][2]int fmt.Println(arr) // [[0 0] [0 0]]} åƒè€ƒèº«ç‚ºè¤‡åˆå€¼çš„é™£åˆ—","link":"2020/01/08/Go/%5BGo%5D%20%E9%99%A3%E5%88%97(Array)/"},{"title":"Webhook VS. WebSocket","text":"å‰è¨€æœ¬æ–‡ç´€éŒ„å¸¸è¦‹çš„å…©ç¨®APIå½¢å¼ï¼šWebhookã€WebSocket æ¯”è¼ƒWebhookã€WebSocketå…©è€…æœ€å¤§çš„å·®åˆ¥åœ¨æ–¼ä¸€å€‹æ˜¯ä¸»å‹•å‹ï¼Œå¦ä¸€å€‹ç‚ºè¢«å‹•å‹ï¼Œä¾†è¿‘ä¸€æ­¥è¨è«–å…©è€…çš„å·®åˆ¥ã€‚ Webhookå±¬æ–¼è¢«å‹•å‹çš„APIï¼Œè—‰ç”±äº‹ä»¶å»è§¸ç™¼APIã€‚èˆ‰ä¸‹åœ–ç¯„ä¾‹ä¾†èªªå‡è¨­é–‹ç™¼ä¸€å€‹Linebotï¼Œä½¿ç”¨è€…å°æ©Ÿå™¨äººè¼¸å…¥æ–‡å­—ï¼Œé€™äº›æ–‡å­—è³‡æ–™é€éLineå¹³å°åˆ°Bot Applicationï¼Œé€™éç¨‹ä¸­ç”¢ç”Ÿä¸€å€‹äº‹ä»¶(Event)ï¼ŒBot Applicationæœƒè™•ç†é€™æ®µè³‡æ–™ï¼Œå†å›æ‡‰çµ¦Line å¹³å°ï¼Œæœ€å¾Œé€å›çµ¦ä½¿ç”¨è€…ï¼Œé€éäº‹ä»¶å»triggerã€‚ WebSocketå±¬æ–¼ä¸»å‹•å‹çš„APIï¼Œæœ€å…·ä»£è¡¨æ€§çš„ç”Ÿæ´»æ¡ˆä¾‹å°±æ˜¯èŠå¤©å®¤ï¼Œæœ‰æœ‹å‹ä¸»å‹•ç™¼è¨Šæ¯çµ¦è‡ªå·±æ™‚ï¼Œæœƒè‡ªå‹•æŠŠæ–°è¨Šæ¯åœ¨è‡ªå·±çš„é é¢åšæ›´æ–°ï¼Œè€Œä¸æ˜¯ç­‰è‡ªå·±ä¸»å‹•å»åˆ·æ–°ç¶²ç«™é é¢æ‰èƒ½æ”¶åˆ°å°æ–¹çš„è¨Šæ¯ã€‚ä»¥å¸¸è¦‹çš„ Client-Server æ¶æ§‹ä¾†èªªï¼Œæœƒé•·çš„åƒä¸‹æ–¹åœ–ç¤º åœ–ç‰‡æºWebSocketå…¶å¯¦æ˜¯ç¶²è·¯å”å®šçš„ä¸€ç¨®ï¼Œæœ‰åˆ¥æ–¼ä¸€èˆ¬å¸¸è¦‹çš„httpæˆ– httpsæ¡ç”¨ è¼ªè©¢(Polling) çš„æ–¹å¼ã€‚ è¼ªè©¢: è®“ Client ç«¯æ¯éš”ä¸€æ®µæ™‚é–“å°±è‡ªå‹•é€å‡ºä¸€å€‹ HTTP Request çµ¦ Serverï¼Œç²å–æœ€æ–°çš„è³‡æ–™ WebSocket å”å®šåªéœ€é€éä¸€æ¬¡é€£çµä¾¿èƒ½ä¿æŒé€£ç·šï¼Œä¸å¿…å†é€éä¸€ç›´ç™¼é€ Request ä¾†èˆ‡ Server äº’å‹•ï¼ HTTP å›å‚³è³‡è¨Šå¾Œå°±æœƒé—œé–‰ TCP çš„APIï¼Œè€Œ WebSocket æœƒä¸€ç›´é–‹è‘—ï¼Œåªéœ€é€éä¸€æ¬¡é€£çµä¾¿èƒ½ä¿æŒé€£ç·šï¼Œå¦‚åŒä¸€å€‹é€šé“ä¸€èˆ¬ï¼Œåªè¦é€šé“ä¿æŒé–‹å•Ÿä¸”æš¢é€šçš„ç‹€æ…‹ï¼Œå°±å¯ä»¥å…è¨± Server å’Œ Client ç«¯é€²è¡Œé›™å‘æºé€šï¼Œä¸å¿…å†é€éä¸€ç›´ç™¼é€ Request èˆ‡Server é€²è¡Œäº’å‹•ï¼Œç›´åˆ°é€šé“é—œé–‰ç‚ºæ­¢(ä¾‹å¦‚ï¼šé—œé–‰ç¶²é )ï¼Œè€Œé€™æ¨£çš„ç‰¹æ€§æœ‰åˆ©æ–¼å¯¦ä½œå…·å³æ™‚çš„åŠŸèƒ½(e.g. èŠå¤©å®¤)ã€‚ åƒé–± differences between webhook and websocket HTTP and Websockets: Understanding the capabilities of todayâ€™s web communication technologies WebSocket é€šè¨Šå”å®šç°¡ä»‹ï¼šæ¯”è¼ƒ Pollingã€Long-Polling èˆ‡ Streaming çš„é‹ä½œåŸç†","link":"2020/05/18/Network/Webhook%20VS.%20WebSocket/"},{"title":"[SSL] Nginx æ•´åˆ Certbot æ›¿ç¶²ç«™åŠ ä¸Š SSL","text":"å‰è¨€ä¸Šä¸€ç¯‡æ¶è¨­å®Œ Server å¾Œæœƒç™¼ç¾ç¶²ç«™æ˜¯æœªåŠ å¯†çš„ç‹€æ…‹ï¼Œå› æ­¤ç€è¦½å™¨æœƒå°‡è©²ç¶²ç«™æ¨™ç¤ºç‚º â€œä¸å®‰å…¨â€ï¼Œæœ¬æ–‡è¨˜éŒ„å¦‚ä½•æ›¿ç¶²ç«™åŠ ä¸Š SSL æ†‘è­‰é€²è¡ŒåŠ å¯†ã€‚ ç’°å¢ƒ OS: Ubuntu 18.04 Server: Nginx 1.14 ä¸‹è¼‰ Certbot12sudo add-apt-repository ppa:certbot/certbotsudo apt install python-certbot-nginx ç¢ºèª Nginxâ€™s è¨­å®šæª”ä¸Šä¸€ç¯‡æœ‰æåˆ°Nginxçš„ç›¸é—œè¨­å®šï¼ŒæŸ¥çœ‹ä¸€ä¸‹ 1cat /etc/nginx/sites-available/project_name.conf ç¢ºèªå¡«å¯«çš„ç¶²å€server_name example.com www.example.com; è‹¥é‡åˆ°inactiveçš„ç‹€æ³ï¼Œå‰‡åŸ·è¡Œsudo ufw enable 12sudo ufw enablesudo ufw status å–å¾— SSL Certificateä½¿ç”¨ nginx åŸ·è¡Œ certbotï¼Œä¸¦ä½¿ç”¨-dæŒ‡å®šæˆ‘å€‘å¸Œæœ›çš„ç¶²åŸŸåç¨±ï¼Œå°å…¶ç™¼è¡Œ certificatesã€‚ 1sudo certbot --nginx -d example.com -d www.example.com ç³»çµ±æœƒè¦æ±‚è¼¸å…¥emailï¼Œè¼¸å…¥å®Œç•¢å¾Œå†é¸æ“‡Agreeã€‚æ¥è‘—æœƒè©¢å•é¸æ“‡æ˜¯å¦è¦å°‡æ‰€æœ‰çš„è³‡æºè«‹æ±‚å°å‘HTTPSçš„ç¶²åŸŸï¼Œæ•…é¸æ“‡2 æ›´æ–° SSL certificates1sudo cerbot renew --dry-run è‹¥å‡ºç¾éŒ¯èª¤è¨Šæ¯: sudo: cerbot: command not foundï¼Œå¯ä»¥æ¡ç”¨ä»¥ä¸‹æ–¹å¼ã€‚ æ‰¾å‡ºcertbotè·¯å¾‘ 1which certbot æ¥è‘—åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤ï¼Œå°‡certbot_pathæ›¿æ›æˆå‰›å‰›æ‹¿åˆ°çš„è·¯å¾‘åç¨± 1sudo certbot_path renew --dry-run è¨­å®šæˆåŠŸçš„è¨Šæ¯ è‡ªå‹•æ›´æ–°æ†‘è­‰ç”±æ–¼ Letâ€™s Encrypt æ†‘è­‰ç°½ç™¼ç‚ºæ¯ä¸‰å€‹æœˆä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯æ¯ 90 å¤©å¿…é ˆæ›´æ–°ï¼ˆrenewï¼‰ä¸€æ¬¡ï¼Œé›–ç„¶ SSL For Free æä¾›è¨‚é–±é€šçŸ¥çš„æ©Ÿåˆ¶ï¼Œåœ¨æ†‘è­‰éæœŸå‰æœƒæ”¶åˆ°é›»å­éƒµä»¶å‘ŠçŸ¥ä½ è¦æ›´æ–°æ†‘è­‰ã€‚ ä¸éèº«ç‚ºä¸€ä½å·¥ç¨‹å¸«ï¼Œç§‰æŒèƒ½è‡ªå‹•å°±ä¸è¦æ‰‹å‹•çš„ç²¾ç¥ï¼Œæˆ‘å€‘å¯ä»¥è—‰ç”± crontab è¨­ç½®æ’ç¨‹å·¥ä½œå®šæœŸå¹«æˆ‘å€‘æ›´æ–° SSL æ†‘è­‰ã€‚ ç¢ºèªæ†‘è­‰ç‹€æ…‹1sudo certbot certificates æœƒå‡ºç¾é¡ä¼¼ä¸‹æ–¹è¨Šæ¯ 12345678910Saving debug log to /var/log/letsencrypt/letsencrypt.log- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -Found the following certs: Certificate Name: xxxx.xxxx.com Domains: xxxx.xxxxxx.com Expiry Date: xxxx-xxxx-xxxx 03:44:52+00:00 (VALID: 89 days) Certificate Path: /etc/letsencrypt/live/xxxxxx.xxxxxx.com/fullchain.pem Private Key Path: /etc/letsencrypt/live/xxxxxx.xxxxxx.com/privkey.pem- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - ä¸Šè¿°è³‡è¨Šå¯çœ‹å‡ºæ†‘è­‰è·é›¢åˆ°æœŸé‚„æœ‰å¤šä¹…çš„æ™‚é–“ è¨­ç½®æ’ç¨‹å·¥ä½œ1sudo crontab -e å¯«å…¥æ’ç¨‹è¦å‰‡ä¸‹æ–¹æŒ‡ä»¤ä»¥å›ºå®šæ¯æœˆ1è™Ÿé€²è¡Œ renew SSL æ†‘è­‰ç‚ºä¾‹ï¼Œå…¶ä¸­ --quiet è¡¨ä¸ç”¢ç”Ÿè¼¸å‡ºçµæœ 10 0 1 * * /usr/bin/certbot renew --quiet æƒ³äº†è§£æ›´å¤šæ’ç¨‹è¦å‰‡å¯ä»¥è©¦è©¦é€™å€‹ç¶²ç«™ï¼Œå¹«åŠ©å¤§å®¶èƒ½å¿«é€Ÿäº†è§£è‡ªå·±è¨­çš„è¦å‰‡ Reference Update: Using Free Letâ€™s Encrypt SSL/TLS Certificates with NGINX","link":"2020/07/20/Network/%5BSSL%5D%20Nginx%20%E6%95%B4%E5%90%88%20Certbot%20%E6%9B%BF%E7%B6%B2%E7%AB%99%E5%8A%A0%E4%B8%8A%20SSL/"},{"title":"[JavaScript] Array","text":"å‰è¨€JavaScript çš„é™£åˆ—å¯ä»¥çœ‹ä½œæ˜¯ä¸€ç¨®ç‰¹åˆ¥çš„ã€Œç‰©ä»¶ã€ï¼Œé€é typeofæœƒè¿”å›é™£åˆ—çš„é¡å‹æ˜¯objectã€‚é™£åˆ—æ˜¯ä¸€çµ„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ï¼Œ æ”¾åœ¨è£¡é¢çš„æ±è¥¿ç¨±ç‚ºå…ƒç´ ï¼Œæ¯å€‹å…ƒç´ éƒ½æœ‰å…¶ä½ç½®ï¼Œç¨±ç‚ºç´¢å¼•ï¼Œæ‰¾åˆ°ç´¢å¼•å€¼ï¼Œå°±å¯ä»¥å¾—çŸ¥è©²ä½ç½®å…ƒç´ çš„å€¼ã€‚ é™£åˆ—åªèƒ½é€é [] ä¾†å­˜å– ç´¢å¼•å€¼å¾0é–‹å§‹æ’åºï¼Œæœ€å¾Œä¸€å€‹ç´¢å¼•å€¼ç‚º array.length-1 é™£åˆ—å…§å¯ä»¥æ˜¯åŸå§‹çš„è³‡æ–™é¡å‹ã€å…¶ä»–é™£åˆ—ã€å‡½å¼ç­‰ç­‰ã€‚ å»ºç«‹é™£åˆ—çš„æ–¹å¼:ä½¿ç”¨ä¸­æ‹¬è™Ÿ[]12345678910var ary1 = []; //å»ºç«‹ä¸€å€‹ç©ºé™£åˆ—var ary2 = [1,2,3]; //æœ‰3å€‹å…ƒç´ çš„é™£åˆ—ï¼Œå…ƒç´ å‹åˆ¥ç‚ºnumbervar ary3 = [1,'a',true]; //é™£åˆ—å¯æ”¾å…¥ä¸åŒå‹åˆ¥çš„å…ƒç´ var arr =[ //é™£åˆ—ä¸­ä¹Ÿå¯ä»¥åŒ…å«é™£åˆ—ï¼Œç¨±ä½œå¤šç¶­é™£åˆ— [&quot;æ¹¯æ¯&quot;,&quot;170cm&quot;,&quot;60kg&quot;,123456], [&quot;æ¹¯å°¼&quot;,&quot;180cm&quot;,&quot;80kg&quot;,1235456], [&quot;å‚‘å°¼&quot;,&quot;175cm&quot;,&quot;70kg&quot;,456], [&quot;æ·å…‹&quot;,&quot;176cm&quot;,&quot;75kg&quot;,1256], ]var ary5 = [ {x:1,y:2},{x:3,y:4} ]; //é™£åˆ—ä¸­ä¹Ÿå¯ä»¥åŒ…å«ç‰©ä»¶ é€é new é—œéµå­—ä¾†å»ºç«‹12345var a = new Array();a[0] = &quot;apple&quot;;a[1] = &quot;boy&quot;;a[2] = &quot;cat&quot;; åˆ¤æ–·é™£åˆ— ä½¿ç”¨Array.isArray( )å‡½å¼ï¼Œä¾å›å‚³trueæˆ–falseä¾†åˆ¤æ–·è©²ç‰©ä»¶æ˜¯å¦ç‚ºé™£åˆ— 1234567var arr = [1, 2, 3, 4, 5, 6];var obj = { x: 1, y: 2};console.log(Array.isArray(arr)); //trueconsole.log(Array.isArray(obj)); //false é™£åˆ—çš„å­˜å–ç¨±ä½œé™£åˆ—å¯¦å­—(Array literal) 123456var a = [];a[0] = &quot;apple&quot;;a[1] = &quot;boy&quot;;a[2] = &quot;cat&quot;;a.length; // 3 é™£åˆ—èˆ‡å­—ä¸²çš„æ¯”è¼ƒ: 1234var str = 'Javascript';console.log(str[1]); //aconsole.log(typeof str); //stringconsole.log(Array.isArray(str)); //false å­—ä¸²åœ¨JavaScriptä¸­ä¼¼é™£åˆ—ï¼Œæ¯å€‹å…ƒç´ éƒ½å¯è¦–ç‚ºå­—å…ƒï¼Œæ‰€ä»¥èƒ½ç”¨ä¸­æ‹¬è™Ÿ[ ]ï¼Œé€éç´¢å¼•å€¼ä¾†è®€å–å­—ä¸²ï¼Œä½†å¯¦éš›é¡å‹ä¾èˆŠæ˜¯stringï¼Œè€Œä¸æ˜¯é™£åˆ—ã€‚ é™£åˆ—æ–¹æ³•(method)æ’åºsort( )é™£åˆ—ä¸­sort( )æ–¹æ³•ï¼Œæœƒå…ˆå°‡å…ƒç´ è½‰å­—ä¸²ï¼Œå†ä¾æ“šå­—ä¸²çš„Unicodeç·¨ç¢¼é€²è¡Œæ’åºï¼Œæœƒæ”¹è®ŠåŸé™£åˆ—ã€‚é è¨­ä»¥å­—ä¸²å½¢å¼å»æ¯”è¼ƒ(é¦–å­—æ¯”è¼ƒ)ï¼Œ å¤§å¯«æ’åœ¨å‰é¢ ï¼Œå¦‚æœæƒ³ä¸å€åˆ†å¤§å°å¯«æ’åºï¼Œå¯ä½¿ç”¨toLowerCase( )æ–¹æ³•ã€‚ 1234// æ¯”è¼ƒå­—ç¬¦ä¸²å¤§å°var str1 = 'abcdefd'var str2 = 'abbffda'alert(str1 &gt; str2) // true // ç¬¬3å€‹å­—ç¬¦ c&gt;b æ‰€ä»¥ str1æ¯”è¼ƒå¤§ è‹¥ä»¥æ•¸å­—æ–¹å¼å»åšsort( )æ’åºï¼Œæœƒå¾—å‡ºéé æœŸçš„çµæœ 1234arr = [2, 3, 17, 12, 32, 45, 13]var temp = arr.sort()console.log(temp); // 12,13,17,2,3,32,45 è§£æ±ºæ–¹å¼: ä½¿ç”¨ä¸€å€‹æ¯”è¼ƒçš„å‡½å¼åšç‚ºå¼•æ•¸ï¼Œä¾†åˆ¤æ–·å…ƒç´ çš„å¤§å°èˆ‡æ’åˆ—é †åº 1234567arr = [2, 3, 17, 12, 32, 45, 13]// æ’åºè™•ç†(å°‡str è½‰ç‚º int) -&gt; functionè™•ç†arr.sort(function(a,b) { return a - b // å›å‚³å€¼ç”±å°åˆ°å¤§ // [2, 3, 12, 13, 17, 32, 45] return b - a // å›å‚³å€¼ç”±å¤§åˆ°å° // [45, 32, 17, 13, 12, 3, 2]})console.log(arr); ç‰¹æ®Šæ’åºè™•ç†æ¡parseInt() 123456arr1 = ['235px', '123px', '64px', '654px']arr1.sort(function (a, b) { return parseInt(a) - parseInt(b) // 64px,123px,235px,654px return parseInt(b) - parseInt(a) // 654px,235px,123px,64px}) document.write(arr1) äº‚æ•¸æ’åºçš„é™£åˆ—æ¡Math.random() 123456var arr2 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]arr2.sort(function () { // è¿”å› true æˆ– false (äº¤æ›æˆ–ä¸äº¤æ›) return Math.random() - 0.5; Math.random()ç‚º0-1çš„æ•¸ è¿”å›true æˆ– false})document.write(arr2) // 9,8,3,2,10,1,5,7,6,4 å°‡é™£åˆ—ä¸­å…ƒç´ çš„æ’åˆ—é †åºå€’è½‰éä¾†æ¡reverse() 123var ary = ['A', 'B', 'C', 'D'];console.log(ary.reverse()); //[&quot;D&quot;, &quot;C&quot;, &quot;B&quot;, &quot;A&quot;]console.log(ary); //[&quot;D&quot;, &quot;C&quot;, &quot;B&quot;, &quot;A&quot;] indexOf() indexOf(searchValue,fromIndex) searchValue: æª¢ç´¢å­—ä¸²å€¼(å¿…å¡«) fromIndex: èµ·å§‹ä½ç½®(é¸å¡«) é»˜èªå€¼ç‚º: 0 æœå°‹é™£åˆ—ä¸­æ˜¯å¦æœ‰ç¬¦åˆçµ¦å®šå€¼çš„å…ƒç´ ï¼Œè‹¥æœ‰ï¼Œå°±å›å‚³ç¬¬ä¸€å€‹ç¬¦åˆå…ƒç´ çš„ç´¢å¼•å€¼ï¼›è‹¥ç„¡ï¼Œå›å‚³-1ã€‚ 1234var str4 = 'hello world!!!' // ç©ºæ ¼ä¹Ÿé ˆç®—å…¥console.log(str4.indexOf('o')); // æŸ¥æ‰¾ 'o' é¦–æ¬¡å‡ºç¾çš„ä½ç½® // 4console.log(str4.indexOf('o',5)); // å¾ç¬¬&quot;5&quot;å€‹å…ƒç´ é–‹å§‹æŸ¥æ‰¾ 'o' é¦–æ¬¡å‡ºç¾çš„ä½ç½® // 7 console.log(str4.indexOf('!!')); // æª¢ç´¢å¤šå€‹å­—ä¸² // 11 é™£åˆ—çš„å°¾ç«¯æ·»åŠ ä¸€å€‹æˆ–å¤šå€‹å…ƒç´ ï¼Œä¸¦è¿”å›æ·»åŠ æ–°å…ƒç´ å¾Œçš„é™£åˆ—é•·åº¦ push()æ–¹æ³•ï¼Œpush()æœƒæ”¹è®ŠåŸé™£åˆ— 1234567var arr1 = [];arr1.push(1); arr1.push(&quot;a&quot;); arr1.push(true, {});console.log(arr1.push()); // 4 (é™£åˆ—é•·åº¦)console.log(arr1); // [1, 'a', true, {}] åˆªé™¤é™£åˆ—çš„æœ€å¾Œä¸€å€‹å…ƒç´ ï¼Œä¸¦è¿”å›è©²å…ƒç´ ã€‚pop()æ–¹æ³• 1234var arr = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];console.log(arr.pop()); // cconsole.log(arr); // [&quot;a&quot;, &quot;b&quot;] å°ç©ºé™£åˆ—ä½¿ç”¨pop()æ–¹æ³•ï¼Œä¸æœƒå ±éŒ¯ï¼Œè€Œæ˜¯è¿”å›undefinedã€‚ 1[].pop() // undefined åˆªé™¤é™£åˆ—çš„ç¬¬ä¸€å€‹å…ƒç´ ï¼Œä¸¦è¿”å›è©²å…ƒç´ ã€‚shift()æ–¹æ³• 1234var a = ['a', 'b', 'c'];console.log(a.shift()); // 'a'console.log(a); // ['b', 'c'] ç”¨æ–¼åœ¨é™£åˆ—çš„ç¬¬ä¸€å€‹ä½ç½®æ·»åŠ å…ƒç´ ï¼Œä¸¦å›å‚³æ·»åŠ æ–°å…ƒç´ å¾Œçš„é™£åˆ—é•·åº¦ï¼Œ å¯ä»¥æ¥å—å¤šå€‹åƒæ•¸ã€‚unshift()æ–¹æ³• 12345var arr2 = [ 'c', 'd' ];arr2.unshift('a', 'b') console.log(arr2.unshift()); // 4console.log(arr2); // ['a', 'b', 'c','d'] åˆ†å‰²join()â€˜æ–¹æ³•ï¼Œ( )å…§çš„åƒæ•¸è¡¨åˆ†å‰²ç¬¦è™Ÿã€‚è‹¥ç„¡åƒæ•¸ï¼Œå‰‡ä»¥ , åšåˆ†å‰²ç¬¦è™Ÿ,ä¸¦ä¸”è½‰ç‚ºstring 12345var a = [1, 2, 3, 4];a.join(' ') // '1 2 3 4'a.join(' | ') // &quot;1 | 2 | 3 | 4&quot;a.join() // &quot;1,2,3,4&quot; å¦‚æœé™£åˆ—å…ƒç´ æ˜¯undefinedæˆ–nullæˆ–ç©ºå€¼ï¼Œæœƒè¢«è½‰æˆç©ºå­—ä¸²ã€‚ 123456789101112131415161718192021222324[undefined, null].join('#') // '#'['a',, 'b'].join('-') // 'a--b'``` ### åˆä½µ`concat( )` æ–¹æ³•ï¼Œå°‡2å€‹ä»¥ä¸Šçš„é™£åˆ—èˆ‡å­—ä¸²åˆä½µæˆæ–°çš„é™£åˆ—ï¼Œ å°‡æ–°é™£åˆ—å…ƒç´ ï¼Œæ·»åŠ åˆ°åŸé™£åˆ—çš„å°¾ç«¯ï¼Œ å›å‚³ä¸€å€‹æ–°é™£åˆ—ï¼ŒåŸé™£åˆ—ä¸è®Šã€‚```javascript// åˆä½µ2å€‹var arr1 = ['a', 'b', 'c'];var arr2 = ['d', 'e', 'f'];console.log(arr1.concat(arr2)); //[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;]// åˆä½µ3å€‹var arr1 = ['a', 'b', 'c'];var arr2 = ['d', 'e', 'f'];var arr3 = ['g', 'h', 'i'];console.log(arr1.concat(arr2, arr3)); //[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;]// åˆä½µå­—ä¸²ã€æ•¸å­—èˆ‡é™£åˆ—var arr1 = ['a', 'b', 'c'];var arr2 = ['d', 'e', 'f'];var arr3 = ['g', 'h', 'i'];console.log(arr1.concat(arr2, arr3, 'j', 'k', 1, 2)); //[&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;, &quot;k&quot;, 1, 2] æå–ç›®æ¨™é™£åˆ—çš„ä¸€éƒ¨åˆ†ï¼Œ å›å‚³ä¸€å€‹æ–°é™£åˆ—ï¼ŒåŸé™£åˆ—ä¸è®Šslice() arr.slice(start, end);1234567var a = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];console.log( a.slice(0)); // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]console.log( a.slice(1)); // [&quot;b&quot;, &quot;c&quot;]console.log(a.slice(1, 2)); // [&quot;b&quot;]console.log(a.slice(2, 6)); // [&quot;c&quot;]console.log(a.slice());// [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;] // è¿”å›åŸé™£åˆ— ä¸Šé¢ä¾‹å­ï¼Œslice()ç¬¬ä¸€å€‹åƒæ•¸ç‚ºèµ·å§‹ä½ç½®ï¼ˆå¾0é–‹å§‹ï¼‰ï¼Œç¬¬äºŒå€‹åƒæ•¸ç‚ºçµ‚æ­¢ä½ç½®ï¼ˆä½†è©²ä½ç½®çš„å…ƒç´ æœ¬èº«ä¸åŒ…æ‹¬åœ¨å…§ï¼‰ã€‚å¦‚æœçœç•¥ç¬¬äºŒå€‹åƒæ•¸ï¼Œå‰‡å›å‚³åˆ°åŸé™£åˆ—çš„æœ€å¾Œä¸€å€‹å…ƒç´ ã€‚ å¦‚æœslice()çš„åƒæ•¸æ˜¯è² æ•¸ï¼Œå‰‡è¡¨ç¤ºå€’æ•¸çš„ä½ç½®ï¼Œä¾‹: -1è¡¨ç¤ºå¾å€’æ•¸ç¬¬ä¸€å€‹å…ƒç´ é–‹å§‹ 123var a = ['a', 'b', 'c'];a.slice(-2) // [&quot;b&quot;, &quot;c&quot;]a.slice(-2, -1) // [&quot;b&quot;] å¦‚æœç¬¬ä¸€å€‹åƒæ•¸å¤§æ–¼ç­‰æ–¼é™£åˆ—é•·åº¦ï¼Œæˆ–è€…ç¬¬äºŒå€‹åƒæ•¸å°æ–¼ç¬¬ä¸€å€‹åƒæ•¸ï¼Œå‰‡å›å‚³ç©ºé™£åˆ—ã€‚ 123var a = ['a', 'b', 'c'];a.slice(4) // []a.slice(2, 1) // [] å­—ä¸²çš„åˆ†å‰²ï¼Œä¸¦å›å‚³é™£åˆ—ã€‚split()æ–¹æ³• split(sep,lenght) sepåšåˆ†å‰²ç¬¦; length: æŒ‡å®šå›å‚³é™£åˆ—æœ€å¤§é•·åº¦ 123456789101112131415161718192021'a|b|c'.split('|', 0) // []'a|b|c'.split('|', 1) // [&quot;a&quot;]'a|b|c'.split('|', 2) // [&quot;a&quot;, &quot;b&quot;]'a|b|c'.split('|', 3) // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]'a|b|c'.split('|', 4) // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]// splitæ–¹æ³•æŒ‰ç…§çµ¦å®šè¦å‰‡åˆ†å‰²å­—ä¸²ï¼Œè¿”å›ä¸€å€‹ç”±åˆ†å‰²å‡ºä¾†çš„å­å­—ä¸²çµ„æˆçš„é™£åˆ—ã€‚'a|b|c'.split('|') // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]// å¦‚æœåˆ†å‰²è¦å‰‡ç‚ºç©ºå­—ä¸²ï¼Œå‰‡è¿”å›é™£åˆ—çš„å…ƒç´ æ˜¯åŸå­—ä¸²çš„æ¯ä¸€å€‹å­—å…ƒã€‚'a|b|c'.split('') // [&quot;a&quot;, &quot;|&quot;, &quot;b&quot;, &quot;|&quot;, &quot;c&quot;]// å¦‚æœçœç•¥åƒæ•¸ï¼Œå‰‡è¿”å›é™£åˆ—çš„å”¯ä¸€å…ƒç´ å°±æ˜¯åŸå­—ä¸²ã€‚'a|b|c'.split() // [&quot;a|b|c&quot;]//å¦‚æœæ»¿è¶³åˆ†å‰²è¦å‰‡çš„å…©å€‹éƒ¨åˆ†ç·Šé„°è‘—ï¼ˆå³å…©å€‹åˆ†å‰²ç¬¦ä¸­é–“æ²’æœ‰å…¶ä»–å­—ä¸²ï¼‰ï¼Œå‰‡è¿”å›é™£åˆ—ä¹‹ä¸­æœƒæœ‰ä¸€å€‹ç©ºå­—ä¸²ã€‚'a||c'.split('|') // ['a', '', 'c']// å¦‚æœæ»¿è¶³åˆ†å‰²è¦å‰‡çš„éƒ¨åˆ†è™•æ–¼å­—ä¸²çš„é–‹é ­æˆ–çµå°¾ï¼ˆå³å®ƒçš„å‰é¢æˆ–å¾Œé¢æ²’æœ‰å…¶ä»–å­—ä¸²ï¼‰ï¼Œå‰‡è¿”å›é™£åˆ—çš„ç¬¬ä¸€å€‹æˆ–æœ€å¾Œä¸€å€‹æˆå“¡æ˜¯ä¸€å€‹ç©ºå­—ä¸²ã€‚'|b|c'.split('|') // [&quot;&quot;, &quot;b&quot;, &quot;c&quot;]'a|b|'.split('|') // [&quot;a&quot;, &quot;b&quot;, &quot;&quot;] é¡›å€’å­—ä¸²æ–¹æ³• è½‰ç‚ºé™£åˆ— : ç”¨ split(â€˜â€™) é™£åˆ—åè½‰ æ‹¼æ¥æˆå­—ç¬¦ä¸² : å¯ç”¨join(â€˜â€™)12var str1 = '123456'alert(str1.split('').reverse().join('')) åˆªé™¤åŸé™£åˆ—çš„ä¸€éƒ¨åˆ†å…ƒç´ splice()æ–¹æ³•ï¼Œä¸¦å¯ä»¥åœ¨åˆªé™¤çš„ä½ç½®æ·»åŠ æ–°çš„é™£åˆ—å…ƒç´ ï¼Œ å›å‚³å€¼æ˜¯è¢«åˆªé™¤çš„å…ƒç´ ï¼Œsplice()æœƒæ”¹è®ŠåŸé™£åˆ—ã€‚ arr.splice(start, count, addElement1, addElement2, ...); ç¬¬ä¸€å€‹åƒæ•¸æ˜¯åˆªé™¤çš„èµ·å§‹ä½ç½®ï¼ˆå¾0é–‹å§‹ï¼‰ï¼Œç¬¬äºŒå€‹åƒæ•¸æ˜¯è¢«åˆªé™¤çš„å…ƒç´ å€‹æ•¸ã€‚å¦‚æœå¾Œé¢é‚„æœ‰æ›´å¤šçš„åƒæ•¸ï¼Œå‰‡è¡¨ç¤ºé€™äº›å°±æ˜¯è¦è¢«æ’å…¥é™£åˆ—çš„æ–°å…ƒç´ ã€‚ å¾åŸé™£åˆ—4è™Ÿä½ç½®é–‹å§‹ï¼Œåˆªé™¤äº†å…©å€‹é™£åˆ—å…ƒç´ ã€‚1234var a = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;];console.log(a.splice(4, 2)); // [&quot;e&quot;, &quot;f&quot;]console.log(a); // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;] é™¤äº†åˆªé™¤å…ƒç´ ï¼Œé‚„æ’å…¥äº†å…©å€‹æ–°å…ƒç´ ã€‚1234var a = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;];console.log(a.splice(4, 2, 1, 2)); // [&quot;e&quot;, &quot;f&quot;] // å›å‚³è¢«åˆªé™¤çš„å…ƒç´ console.log(a); // [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, 1, 2] èµ·å§‹ä½ç½®å¦‚æœæ˜¯è² æ•¸ï¼Œå°±è¡¨ç¤ºå¾å€’æ•¸ä½ç½®é–‹å§‹åˆªé™¤ã€‚ 123var a = ['a', 'b', 'c', 'd', 'e', 'f'];console.log(a.splice(-4, 2)) // [&quot;c&quot;, &quot;d&quot;]// å¾å€’æ•¸ç¬¬å››å€‹ä½ç½®cé–‹å§‹åˆªé™¤å…©å€‹å…ƒç´ ã€‚ å¦‚æœåªæ˜¯å–®ç´”åœ°æ’å…¥å…ƒç´ ï¼Œsplice()çš„ç¬¬äºŒå€‹åƒæ•¸å¯ä»¥è¨­ç‚º0ã€‚ 123456789 var a = [1, 1, 1]; console.log(a.splice(1, 0, 2)) // [] console.log(a) // [1, 2, 1, 1]``` &gt; å¦‚æœåªæä¾›ç¬¬ä¸€å€‹åƒæ•¸ï¼Œç­‰åŒæ–¼å°‡åŸé™£åˆ—åœ¨æŒ‡å®šä½ç½®æ‹†åˆ†æˆå…©å€‹é™£åˆ—ã€‚```javascript var a = [1, 2, 3, 4]; console.log(a.splice(2)) // [3, 4] console.log(a) // [1, 2] é™£åˆ—çš„æ‰€æœ‰å…ƒç´ ä¾æ¬¡å‚³å…¥åƒæ•¸å‡½æ•¸map()æ–¹æ³•ï¼Œå›å‚³æ¯ä¸€æ¬¡çš„åŸ·è¡Œçµæœçµ„æˆä¸€å€‹æ–°é™£åˆ—ã€‚ 123456789var arr = [1, 2, 3, 4, 5, 6];console.log( arr.map(function(x) { return x * x; })); // [1, 4, 9, 16, 25, 36] console.log(arr); // [1, 2, 3, 4, 5, 6] // ä¸æ”¹è®ŠåŸå…ˆé™£åˆ— forEach()forEach()èˆ‡map()å¾ˆç›¸ä¼¼ï¼Œä¹Ÿæ˜¯å°é™£åˆ—çš„æ‰€æœ‰å…ƒç´ ä¾æ¬¡åŸ·è¡Œåƒæ•¸å‡½æ•¸ã€‚ä½†æ˜¯ï¼ŒforEachæ–¹æ³•ä¸å›å‚³å€¼ï¼Œåªç”¨ä¾†æ“ä½œå…ƒç´ ã€‚ forEachçš„ç”¨æ³•èˆ‡mapæ–¹æ³•ä¸€è‡´ï¼Œåƒæ•¸æ˜¯ä¸€å€‹å‡½æ•¸ï¼Œè©²å‡½æ•¸åŒæ¨£æ¥å—ä¸‰å€‹åƒæ•¸ï¼šç•¶å‰å€¼(Value)ã€ç•¶å‰ä½ç½®(Index)ã€æ•´å€‹é™£åˆ—(Array)ã€‚ 123456789101112var ary = [1, 2, 3, 4, 5, 6];var sum = 0;ary.forEach(function(v) { sum += v; });console.log(sum); //21 // a: ç•¶å‰å€¼ i: ç•¶å‰ä½ç½®(ç´¢å¼•å€¼) a: æ•´å€‹é™£åˆ—ary.forEach(function(v, i, a) { a[i] = v + 1;});console.log(ary); //[2, 3, 4, 5, 6, 7] // æ”¹è®ŠåŸå§‹é™£åˆ— forEach()ç„¡æ³•ä¸­æ–·åŸ·è¡Œï¼Œæœƒå°‡æ‰€æœ‰å…ƒç´ éƒ½è·‘å®Œã€‚å¦‚æœå¸Œæœ›ç¬¦åˆæŸç¨®æ¢ä»¶æ™‚å°±ä¸­æ–·éæ­·ï¼Œè¦ä½¿ç”¨forå¾ªç’°ã€‚ 123456var arr = [1, 2, 3];for (var i = 0; i &lt; arr.length; i++) { if (arr[i] === 2) break; console.log(arr[i]);} forEach()ä¸æœƒè·³éundefinedå’Œnullï¼Œä½†æœƒè·³éç©ºä½ã€‚ 1234567891011121314151617ar log = function (n) { console.log(n + 1);};[1, undefined, 2].forEach(log)// 2// NaN// 3[1, null, 2].forEach(log)// 2// 1// 3[1, , 2].forEach(log)// 2// 3 map( )å’ŒforEach()å·®ç•°: map( )å°åŸ·è¡Œåƒæ•¸å‡½æ•¸æ–¹å¼è·ŸforEach()ä¸€æ¨£ï¼Œå·®åˆ¥åœ¨æ–¼map( )æœƒå›å‚³æ–°é™£åˆ—ï¼Œä¸æœƒä¿®æ”¹åŸé™£åˆ—ã€‚å¦‚æœé™£åˆ—éæ­·çš„ç›®çš„æ˜¯ç‚ºäº†å¾—åˆ°å›å‚³å€¼ï¼Œé‚£éº¼ä½¿ç”¨map()ï¼Œå¦å‰‡ä½¿ç”¨forEach()ã€‚ filter()filter()ç”¨æ–¼éæ¿¾é™£åˆ—å…ƒç´ ï¼Œ å°‡å…ƒç´ ä¾åºå‚³å…¥å›å‚³çš„å‡½æ•¸ä¸­ï¼Œ å›å‚³æ»¿è¶³æ¢ä»¶(é‹ç®—çµæœç‚ºtrue)çš„å…ƒç´ æ‰€çµ„æˆçš„ä¸€å€‹é™£åˆ—ï¼Œ è©²ä¸æœƒæ”¹è®ŠåŸé™£åˆ—ã€‚ 1234var test = [1, 2, 3, 4, 5];test.filter(function(elem) { return elem &gt; 3;}); // [4, 5] // è¿”å›å¤§æ–¼3çš„å…ƒç´ æ‰€çµ„æˆçš„æ–°é™£åˆ— filter()çš„åƒæ•¸å‡½æ•¸å¯ä»¥æ¥å—ä¸‰å€‹åƒæ•¸ï¼šç•¶å‰å…ƒç´ ï¼Œç•¶å‰ä½ç½®å’Œæ•´å€‹é™£åˆ— 1234[1, 2, 3, 4, 5].filter(function (elem, index, arr) { return index % 2 === 0;});// [1, 3, 5] // è¿”å›å¶æ•¸ä½ç½®çš„å…ƒç´ çµ„æˆçš„æ–°é™£åˆ—ã€‚ some()ï¼Œevery()å›å‚³ä¸€å€‹ booleanå€¼ï¼Œè¡¨ç¤ºåˆ¤æ–·é™£åˆ—ä¸­çš„å…ƒç´ æ˜¯å¦ç¬¦åˆæŸç¨®æ¢ä»¶ã€‚ å…©è€…éƒ½æ¥å—ä¸‰å€‹åƒæ•¸ï¼šç•¶å‰å…ƒç´ ã€ç•¶å‰ä½ç½®å’Œæ•´å€‹é™£åˆ—ï¼Œç„¶å¾Œå›å‚³ä¸€å€‹booleanå€¼ã€‚ some()æ–¹æ³•åªè¦ä¸€å€‹(ä»¥ä¸Š)å…ƒç´ çš„å›å‚³å€¼æ˜¯trueï¼Œå‰‡æ•´å€‹some()çš„å›å‚³å€¼å°±æ˜¯trueï¼Œå¦å‰‡å›å‚³falseã€‚å¦å¤–ï¼Œsome( )æœƒåœ¨ç¬¬ä¸€æ¬¡é‡åˆ°é‹ç®—çµæœç‚ºtrueæ™‚ï¼Œå°±åœæ­¢ç¹¼çºŒå°å…ƒç´ é‹ç®— 12345var arr = [1, 2, 3, 4, 5];arr.some(function (elem, index, arr) { return elem &gt;= 3;}); // true// å¦‚æœé™£åˆ—arræœ‰ä¸€å€‹å…ƒç´  &gt;= 3ï¼Œsome()å°±å›å‚³`true`ã€‚ everyæ–¹æ³•æ‰€æœ‰å…ƒç´ çš„å›å‚³å€¼éƒ½æ˜¯trueï¼Œæ•´å€‹ever()æ‰å›å‚³trueï¼Œå¦å‰‡å›å‚³false 12345var arr = [1, 2, 3, 4, 5];arr.every(function (elem, index, arr) { return elem &gt;= 3;}); // false// é™£åˆ—arrä¸¦éæ‰€æœ‰å…ƒç´  &gt;=3ï¼Œ every() å›å‚³ falseã€‚ ç¯„ä¾‹ä¾†æº ç¯„ä¾‹ä¾†æº","link":"2019/07/18/Javascript/JavaScript_Array/"},{"title":"[JavaScript] Ajax","text":"ç­†è¨˜Ajaxå‰ï¼Œè¦å…ˆç†è§£ç¶²ç«™çš„ä¸»å¾æ¶æ§‹ï¼šå®¢æˆ¶ç«¯å’Œæœå‹™å™¨ç«¯ å®¢æˆ¶ç«¯(Client-side)ï¼š æŒ‡è¨ªå®¢çš„é›»è…¦å’Œç€è¦½å™¨ ä¼ºæœå™¨ç«¯(Server-side): å›æ‡‰å®¢æˆ¶ç«¯è«‹æ±‚ç‚ºä¼ºæœå™¨ç«¯ èˆ‰å€‹ä¾‹å­ï¼Œä»Šå¤©ç•¶ä½¿ç”¨è€…ç”¨ç€è¦½å™¨é€£ç·šä¸Šä½ çš„ ISP (ç¶²è·¯ä¾›æ‡‰å•† e.g. ä¸­è¯é›»ä¿¡)é€ è¨ªç¶²ç«™(å°ç¶²ç«™æå‡ºè«‹æ±‚)ï¼Œå°‡ç¶²ç«™ä¼ºæœå™¨ä¸Šçš„è³‡æ–™åŠç¨‹å¼ç¢¼ä¸‹è¼‰åˆ°æœ¬åœ°ç«¯(ä½¿ç”¨è€…é›»è…¦)ï¼Œä¸¦åœ¨ç€è¦½å™¨ä¸Šåšå‘ˆç¾ã€‚ ä¸‹é¢ç•«å¼µåœ–è¡¨åšèªªæ˜: å¥½ï¼Œç¾åœ¨çŸ¥é“é€ è¨ªç¶²é çš„éç¨‹ä¸­æœƒç™¼ç”Ÿä»€éº¼äº‹æƒ…ä¹‹å¾Œï¼Œè¦äº†è§£è¦å¦‚ä½•è·ŸServeræ‹¿è³‡æ–™ï¼Œç™¼é€Requestã€‚ ç”¨Javascriptå¯«ç¶²é çš„æ™‚å€™ï¼Œå¯ä»¥ç™¼ç¾Javascriptæ˜¯ä¸€è¡Œä¸€è¡ŒåŸ·è¡Œï¼Œé€™æ¨£çš„ç‰¹æ€§ç¨±ä½œâ€åŒæ­¥â€ã€‚ åŒæ­¥çš„æ„æ€æ˜¯JavascriptåŸ·è¡Œåˆ°æŸä¸€è¡Œçš„æ™‚å€™ï¼Œæœƒç­‰é€™è¡ŒåŸ·è¡Œå®Œç•¢ï¼Œæ‰åŸ·è¡Œåˆ°ä¸‹ä¸€è¡Œï¼Œç¢ºä¿åŸ·è¡Œé †åºã€‚ æ›å¥è©±èªªï¼Œç•¶ä»Šå¤©Javascriptç™¼å‡ºä¸€å€‹Requestæ™‚ï¼Œæœƒç­‰å¾…Responseå›ä¾†ï¼Œåœ¨å›ä¾†ä¹‹å‰ï¼ŒJavascriptå¼•æ“æ˜¯ä¸æœƒåšä»»ä½•å‹•ä½œçš„ï¼ å•é¡Œä¾†äº†ï¼Œç‰½æ¶‰åˆ°ç¶²è·¯æ“ä½œæ™‚ï¼Œç•¶ç¶²è·¯ä¸Šæœ‰å¤šå€‹è«‹æ±‚ï¼Œå¦‚æœé‚„æ˜¯ç¶­æŒåŒæ­¥çš„æ–¹å¼åŸ·è¡Œç¨‹å¼ç¢¼ï¼Œè¦æ¥æ”¶åˆ°ä¸Šä¸€å€‹Responseæ‰èƒ½é€å‡ºä¸‹ä¸€å€‹Request å¯ä»¥é æœŸåˆ°è®Šå¾—éå¸¸è€—æ™‚é–“ï¼Œä¸ç©©å®šçš„æ“ä½œå°±éœ€è¦ç”¨åˆ°â€éåŒæ­¥â€çš„æ–¹å¼ã€‚ éåŒæ­¥æ˜¯ä»€éº¼æ„æ€å‘¢ï¼Ÿå°±æ˜¯åŸ·è¡Œå®Œä¹‹å¾Œå°±ä¸ç®¡å®ƒäº†ï¼Œä¸ç­‰çµæœå›ä¾†å°±ç¹¼çºŒåŸ·è¡Œä¸‹ä¸€è¡Œã€‚ èˆ‰å€‹ä¾‹å­ï¼š ä»Šå¤©è¦å»ä¸€é–“å°åƒåº—åƒé£¯ï¼Œé»å®Œé¤å¾Œåœ¨èœå–®ä¸Šå¯«ä¸‹è‡ªå·±æ‰€åœ¨çš„æ¡Œè™Ÿï¼Œå°‡èœå–®äº¤çµ¦æ«ƒå°(ç™¼é€è«‹æ±‚)è®“è€é—†çŸ¥é“ä½ åå“ªä¸€æ¡Œï¼Œé»é¤å®Œç•¢ä¸éœ€è¦ç«™åœ¨åº—é–€å£ç­‰é¤é»åšå¥½(ä¸ç”¨ç­‰Response)ï¼Œå¯ä»¥å›åˆ°è‡ªå·±ä½ç½®åšè‡ªå·±çš„äº‹(ç™¼å‡ºå…¶ä»–Request)ï¼Œè€é—†è‡ªå‹•æŠŠåšå¥½çš„é¤é»é€éä¾†(Responseå›ä¾†)ã€‚ æœ€å¾Œæˆ‘å€‘å°±éœ€è¦é€éajaxæ“ä½œä¾†é”åˆ°éåŒæ­¥çš„ç›®çš„ï¼ ä»€éº¼æ˜¯ Ajaxï¼Ÿå…¨åæ˜¯ã€ŒAsynchronous JavaScript and XMLã€, ç¿»è­¯ï¼šJavascriptå°XML(è¨»)çš„ç•°æ­¥è«‹æ±‚æ“ä½œã€‚ é‡é»åœ¨æ–¼ï¼‚Asynchronousï¼‚é€™å€‹å­—ï¼Œå¯¦ç¾ï¼‚éåŒæ­¥ï¼‚çš„æ“ä½œç²å–æ•¸æ“šå…§å®¹ã€‚ å¦å¤–ï¼Œserverç«¯å‚³è¼¸90%æœƒæ˜¯JSONæ ¼å¼çš„æª”æ¡ˆï¼Œä¸‹é¢ç¨‹å¼ç¢¼æœƒç”¨JSONæª”åšä¾‹å­ï¼ˆé»æ­¤é€£çµåƒè€ƒè§£é‡‹JSONï¼‰ æˆ‘å€‘å¯ä»¥é€é é€éXMLHttpRequesté ç«¯æ’ˆåˆ¥äººçš„è³‡æ–™ã€‚ éç¨‹: æ‰“é–‹ç€è¦½å™¨ -&gt; å‰µå»ºå°è±¡: XMLHttpRequest() è¼¸å…¥ç¶²å€ -&gt; open()æ–¹æ³• open()éœ€å¸¶å…¥3å€‹åƒæ•¸: a. æ–¹æ³•(method): get/post b. url c. async(ç•°æ­¥) 3.enter(ç™¼é€request) -&gt; send() 4.æ¥æ”¶æ•¸æ“š request.onreadystatechange = functionï¼ˆï¼‰ åƒæ•¸ï¼šæ˜¯å‚³éçµ¦æœå‹™å™¨çš„å…·é«”æ•¸æ“šï¼Œä¾‹å¦‚ç™»å…¥çš„å¸³è™Ÿå¯†ç¢¼ï¼› å¸¸ç”¨è«‹æ±‚æ–¹å¼: get/post getè«‹æ±‚ï¼šåœ¨è«‹æ±‚URL(ç¶²å€)å¾Œé¢ä»¥ï¼‚?ï¼‚çš„å½¢å¼è·Ÿä¸Šç™¼çµ¦æœå‹™å™¨çš„åƒæ•¸ï¼Œå¤šå€‹åƒæ•¸ä¹‹é–“ç”¨&amp;éš”é–‹ ? å¾Œé¢è·Ÿçš„æ˜¯è¦å‚³çµ¦serverçš„åƒæ•¸ &amp; åƒæ•¸ä¹‹é–“çš„é–“éš” post è«‹æ±‚ï¼šç™¼çµ¦æœå‹™å™¨çš„åƒæ•¸å…¨éƒ¨æ”¾åœ¨è«‹æ±‚é«”ä¸­ï¼ˆURL ä¸­çœ‹ä¸åˆ°ï¼‰ ã€æ³¨ï¼špost å‚³éçš„æ•¸æ“šé‡æ²’æœ‰é¡¯ç¤ºï¼Œå…·é«”å¾—çœ‹æœå‹™å™¨çš„è™•ç†èƒ½åŠ›ã€‘ Httpè«‹æ±‚å ±æ–‡åˆ†3éƒ¨åˆ†1.è«‹æ±‚è¡Œ 2.è«‹æ±‚é ­ 3.è«‹æ±‚é«” *readystateå±¬æ€§: Ajaxè«‹æ±‚è¿”å›çš„æ•¸æ“šå³å­˜æ”¾åœ¨è©²å±¬æ€§ä¹‹ä¸‹(è¿”å›å­—ä¸²) 0: åˆå§‹åŒ–,é‚„æ²’èª¿ç”¨open()æ–¹æ³• 1: è¼‰å…¥,å·²èª¿ç”¨send()æ–¹æ³•,æ­£åœ¨ç™¼é€request 2: è¼‰å…¥å®Œæˆ,send()æ–¹æ³•å®Œæˆ,å·²æ”¶åˆ°å…¨éƒ¨response(éŸ¿æ‡‰å…§å®¹) è§£æ,æ­£åœ¨è§£æresponse(å¾serverç«¯è¿”å›çš„æ•¸æ“š) 4.å®Œæˆ,responseéŸ¿æ‡‰å…§å®¹è§£æå®Œæˆ,å¯åœ¨clientç«¯èª¿ç”¨ status: serverç‹€æ…‹(httpçš„ç‹€æ…‹ç¢¼):å¯å¾é–‹ç™¼è€…å·¥å…·è§€çœ‹ 1é–‹é ­: æ¶ˆæ¯é¡ 2é–‹é ­: æˆåŠŸé¡ 3é–‹é ­: é‡å®šå‘é¡ 4é–‹é ­: (clientç«¯)è«‹æ±‚éŒ¯èª¤é¡ ex: 404 5é–‹é ­: ä¼ºæœå™¨(server)éŒ¯èª¤é¡ ä»¥ä¸‹ç¨‹å¼ç¢¼é€²è¡Œæ“ä½œèªªæ˜ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;script&gt; document.onclick = function () { // é»æ“Šç¶²é ç™¼èµ·ajaxè«‹æ±‚ // å‰µå»ºè«‹æ±‚å°è±¡ å‘XMLHttpRequest æ’ˆè³‡æ–™ var request = new XMLHttpRequest() // è¨­ç½®è«‹æ±‚ request.open('GET', 'JSON1.json', true) // Trueè¡¨ç•°æ­¥æ“ä½œ request.send() // ç™¼é€è«‹æ±‚ // onreadystatechange (ç•¶readystateæ”¹è®Šæ™‚è§¸ç™¼) request.onreadystatechange = function () { // responseè§£æå®Œæˆ if (request.readyState == 4) { // è«‹æ±‚åˆ°æ•¸æ“š if (request.status == 200) { // 200 -&gt; success document.write(request.response) // æ•¸æ“šè½‰ç‚ºjsonå°è±¡(object) -&gt; jsonæ•¸æ“šè§£æ var jsonData = JSON.parse(request.response) // ç²å–key(people) å…§çš„é™£åˆ— var people = jsonData.people // æ¸²æŸ“ var oUl = document.createElement('ul') for (var i = 0; i &lt; people.length; i++) { var oLi = document.createElement('li') // å°æ¯å€‹peopleä¸‹çš„objectæ‰¾å°æ‡‰çš„key(firstName)é€²è¡Œæ¸²æŸ“ oLi.innerHTML = people[i].firstName; oUl.appendChild(oLi) } document.body.appendChild(oUl) } } } } &lt;/script&gt; è³‡æ–™æ ¼å¼ç‚º:12345678910111213141516171819{ &quot;people&quot; : [ { &quot;email&quot; : &quot;aaaa&quot;, &quot;firstName&quot; : &quot;Brett&quot;, &quot;lastName&quot; : &quot;McLaughlin&quot; }, { &quot;email&quot; : &quot;bbbb&quot;, &quot;firstName&quot; : &quot;Jason&quot;, &quot;lastName&quot; : &quot;Hunter&quot; }, { &quot;email&quot; : &quot;cccc&quot;, &quot;firstName&quot; : &quot;Elliotte&quot;, &quot;lastName&quot; : &quot;Harold&quot; } ]} è¼¸å‡ºçµæœå¦‚ä¸‹åœ–ï¼š Same Origin Policyä½†æ˜¯å¦‚æœå°‡åŸæœ¬çš„JSON1çš„æª”æ¡ˆæ”¹æˆä¸²æ¥åˆ°åˆ¥äººç¶²ç«™çš„é€£çµæ™‚ï¼š wtfâ€¦. ç€è¦½å™¨ç«‹é¦¬å ±éŒ¯ã€‚ ç‚ºä»€éº¼æœƒæœ‰é€™å€‹éŒ¯èª¤å‘¢ï¼Ÿ ç€è¦½å™¨å› ç‚ºå®‰å…¨æ€§çš„è€ƒé‡ï¼Œæœ‰ä¸€å€‹æ±è¥¿å«åšåŒæºæ”¿ç­–ï¼ŒSame-origin policyã€‚ ç¾åœ¨é€™å€‹ç¶²ç«™çš„ç¶²ç«™ã€Œä¸åŒæºã€çš„æ™‚å€™ï¼Œç€è¦½å™¨ä¸€æ¨£æœƒç™¼ Requestï¼Œä½†æ˜¯æœƒæŠŠ Response çµ¦æ“‹ä¸‹ä¾†ï¼ŒJavaScript æ‹¿åˆ°ä¸¦ä¸”å‚³å›éŒ¯èª¤ã€‚ ä¸åŒæºæ˜¯ä»€éº¼æ„æ€ï¼Ÿï¼Ÿï¼Ÿç°¡è¨€ä¹‹ï¼Œåªè¦æ˜¯ç¶²åŸŸï¼ˆ Domainï¼‰ ä¸ä¸€æ¨£å°±æ˜¯ä¸åŒæºï¼Œç¶²å€é–‹é ­httpå’Œhttpsä¹Ÿä¸åŒæºï¼Œç«¯å£è™Ÿ(port)ä¸ä¸€æ¨£ä¹Ÿä¸åŒæºã€‚ç›¸é—œçš„è§£æ±ºæ–¹æ¡ˆ ï¼Šè¨»ï¼šXMLç‚ºå„²å­˜ç¶²é æ•¸æ“šçš„çµæ§‹ åƒè€ƒè³‡æ–™ï¼š http://www.cnblogs.com/SanMaoSpace/archive/2013/06/15/3137180.html http://huli.logdown.com/posts/2223581-ajax-and-cors","link":"2019/07/14/Javascript/ajax(basic)/"},{"title":"[JavaScript] Function","text":"å‰è¨€å‡½æ•¸æ˜¯é‡è¤‡å‘¼å«çš„ç¨‹å¼å€å¡Šï¼Œé‚„èƒ½æ¥å—è¼¸å…¥çš„åƒæ•¸ï¼Œä¸åŒçš„åƒæ•¸æœƒè¿”å›ä¸åŒçš„å€¼ï¼Œå¦‚æœé‹ç”¨çš„ç•¶ï¼Œå¯ä»¥è®“ç¨‹å¼è®Šå¾—ç°¡æ½”ä¸”å½ˆæ€§ã€‚ å‡½æ•¸å®šç¾©(Function Definition)JavaScript æœ‰ä¸‰ç¨®å®šç¾©å‡½æ•¸çš„æ–¹å¼ 1.å‡½æ•¸å®£å‘Š 2.å‡½æ•¸è¡¨é”å¼ 3.ç”¨ new å»ºæ§‹å‡½å¼ å‡½æ•¸å®£å‘Š( Function Declaration)functionå®£å‘Šçš„å€å¡Šå°±æ˜¯ä¸€å€‹å‡½æ•¸ã€‚functionå¾Œé¢æ˜¯å‡½æ•¸åï¼Œå‡½æ•¸åå¾Œé¢æ˜¯()ï¼Œè£¡é¢æ˜¯å‚³å…¥å‡½æ•¸çš„åƒæ•¸ã€‚å‡½æ•¸é«”æ”¾åœ¨{}è£¡é¢ã€‚ä¸¦é€éå‡½æ•¸å()é€²è¡Œå‘¼å«ã€‚ 12345function hello() { console.log('Hi')}//å‡½æ•¸å‘¼å«hello() // Hi å‡½æ•¸è¡¨é”å¼( Function Expression)æ¡ç”¨è³¦å€¼çµ¦è®Šæ•¸çš„æ–¹å¼ï¼Œåˆç¨±ä½œåŒ¿åå‡½æ•¸ã€‚ 12345var hi = function hello() { console.log('Hi')}//åŒ¿åå‡½æ•¸çš„å‘¼å«hi() // Hi æ¡ç”¨å‡½æ•¸è¡¨é”å¼è²æ˜å‡½æ•¸æ™‚ï¼Œfunctionå¾Œé¢ä¸å¸¶æœ‰å‡½æ•¸åã€‚ä½†åŠ ä¸Šå‡½æ•¸åï¼Œè©²å‡½æ•¸ååªåœ¨å‡½æ•¸é«”å…§éƒ¨æœ‰æ•ˆï¼Œåœ¨å‡½æ•¸é«”å¤–éƒ¨ç„¡æ•ˆã€‚ 12345var print = function x(){ console.log(typeof x);};x // ReferenceError: x is not definedprint() // function ç”¨ new å»ºæ§‹å‡½å¼é€énewçš„èªæ³•å»ºç«‹ä¸€å€‹å‡½æ•¸ï¼Œä¸éé€™å€‹è¼ƒå°‘äººä½¿ç”¨ã€‚ 12345678var pluse = new Function( 'x','y', 'return x + y');// ç­‰åŒäºfunction pluse(x, y) { return x + y;} å¦‚æœåŒä¸€å€‹å‡½æ•¸è¢«å¤šæ¬¡è²æ˜ï¼Œå¾Œé¢çš„è²æ˜å°±æœƒè¦†è“‹å‰é¢çš„è²æ˜ã€‚ 12345var print = function x(){ console.log(typeof x);};x // ReferenceError: x is not definedprint() // function argumentså‰›æ‰ä¸Šè¿°çš„ä¾‹å­å¯ä»¥ç™¼ç¾ï¼Œå‘¼å«å‡½æ•¸å…§æ”¾çš„åƒæ•¸(10,20)ç¨±ä½œå¯¦éš›åƒæ•¸(ç°¡ç¨±å¯¦åƒ)ï¼Œè€Œfunctionå€å¡Šå…§çš„åƒæ•¸(a,b)ç¨±ä½œå½¢å¼åƒæ•¸(ç°¡ç¨±å½¢åƒ)ã€‚å¯¦åƒæœƒè¢«æ”¾å…¥ä¸€å€‹å«argumentsçš„objectè£¡é¢ã€‚ ä¾†çœ‹ç¯„ä¾‹: 1234567891011function sum(a, b) { console.log(arguments); // å„²å­˜å¯¦åƒ[10,20] console.log(a,b); // 10 20 console.log(arguments[0],arguments[1]); // 10 20 arguments[0] = 100; // 100 å°‡100è³¦å€¼çµ¦arguments[0]ï¼Œå–ä»£10 console.log(a,b); // 100 20 console.log(arguments[0],arguments[1]); // 100 20 console.log(arguments.length);// 2 ç²å¾—argumentsçš„é•·åº¦}sum(10,20); ä¸Šé¢ä¾‹å­å¯çŸ¥sum()å‡½æ•¸è¢«å‘¼å«å¾Œå‚³å…¥10,20å…©å€‹å¯¦åƒï¼Œä¸¦å­˜åœ¨argumentså…§ï¼Œå¯ä»¥é€éarguments[index]ä¾†ç²å¾—è£¡é¢çš„åƒæ•¸(indexè¡¨ç´¢å¼•å€¼)ã€‚å¦å¤–ä¹ŸçŸ¥é“å¯ä»¥é€é=çš„æ–¹å¼é€²è¡Œè³¦å€¼ï¼Œä¸”é€élengthç²å¾—é•·åº¦ã€‚ å‡è¨­ä»Šå¤©å¯¦åƒå€‹æ•¸&gt;å½¢åƒå€‹æ•¸ï¼Œå¤šé¤˜çš„å¯¦åƒæœƒä»ç„¶è¢«æ”¾å…¥argumentsçš„è£¡é¢ã€‚ 1234567 // å¯¦åƒ &gt; å½¢åƒå€‹æ•¸æ™‚ï¼Œå¤šçš„æœƒå­˜åœ¨argumentsfunction sum(a, b) { console.log(arguments); // å„²å­˜å¯¦åƒ[10,20,30,40,50] console.log(a, b); // 10 20 console.log(arguments.length); // 5 argumentsçš„é•·åº¦}sum(10, 20,30,40,50); ä¸Šé¢ä¾‹å­å¯çŸ¥ç•¶å¯¦åƒå€‹æ•¸&gt;å½¢åƒå€‹æ•¸ï¼Œå¤šé¤˜çš„é‚„æ˜¯æœƒè¢«å­˜æ”¾ï¼Œargumentsç¸½é•·åº¦ç‚º5 argumentsé›–ç„¶çœ‹èµ·ä¾†åƒarrayï¼Œä½†ä»–é‚„æ˜¯ä¸€å€‹objectï¼Œ arrayå°ˆæœ‰çš„æ–¹æ³•ï¼Œ ä¸èƒ½åœ¨argumentsä¸Šç›´æ¥ä½¿ç”¨ã€‚ å¦‚æœè¦è®“argumentsä½¿ç”¨arrayæ–¹æ³•ï¼ŒçœŸæ­£çš„è§£æ±ºæ–¹æ³•æ˜¯å°‡argumentsè½‰ç‚ºçœŸæ­£çš„arrayã€‚ä¸‹é¢æ˜¯å…©ç¨®å¸¸ç”¨çš„è½‰æ›æ–¹æ³•ï¼šsliceæ–¹æ³•å’Œé€ä¸€å¡«å…¥æ–°arrayã€‚åƒè€ƒä¾†æº 1234567var args = Array.prototype.slice.call(arguments);// æˆ–è€…var args = [];for (var i = 0; i &lt; arguments.length; i++) { args.push(arguments[i]);} returnå°‡è¿”å›çµæœå›å‚³åˆ°å‡½æ•¸å‘¼å«çš„åœ°æ–¹ï¼Œä¸‹é¢åšå€‹ç¯„ä¾‹: 123456function sum(a, b) { return a + b;}var h = sum(10, 20); // å›å‚³ a + båˆ°æ­¤è™•ï¼Œä¸¦è³¦å€¼çµ¦ hconsole.log(h); // 30 ä¸Šé¢ç¯„ä¾‹æ‰€å¾—å›å‚³çµæœè³¦å€¼çµ¦hï¼Œh=30ã€‚ å¦å¤–ï¼Œè¦æ³¨æ„çš„åœ°æ–¹æ˜¯: return ä¹‹å¾Œçš„ç¨‹å¼ä¸æœƒåŸ·è¡Œ 123456789 // return ä¹‹å¾Œçš„codeä¸æœƒåŸ·è¡Œfunction sum(a, b) { console.log(&quot;returnä¹‹å‰&quot;); return a + b; console.log(&quot;å¦‚æœçœ‹åˆ°æˆ‘ä»£è¡¨æœ‰åŸ·è¡Œreturnä¹‹å¾Œçš„code&quot;); // ç„¡é¡¯ç¤º}var h = sum(10, 20); console.log(h); // 30 æå‡ï¼ˆHoistingï¼‰åœ¨åŸ·è¡Œä»»ä½•ç¨‹å¼ç¢¼å‰ï¼Œ JavaScriptå°‡å®šç¾©çš„è®Šæ•¸(variables)å’Œå‡½æ•¸(function)å­˜æ”¾åœ¨è¨˜æ†¶é«”å…§ï¼Œ çœ‹èµ·ä¾†æ˜¯å–®ç´”åœ°å°‡è®Šæ•¸å’Œå‡½å¼å®£å‘Šï¼Œç§»å‹•åˆ°ç¨‹å¼çš„å€å¡Šé ‚ç«¯ï¼Œä½†å¯¦éš›ä½ç½®å’Œç¨‹å¼ç¢¼ä¸­å®Œå…¨ä¸€æ¨£ï¼Œé€™æ¨£çš„å‹•ä½œåªæœ‰å…ˆå„²å­˜å®£å‘Šï¼Œå°šæœªè³¦å€¼ã€‚ å…ˆæ¯”è¼ƒå…©å€‹ä¾‹å­: 1234function catName(name) { console.log(&quot;My cat's name is &quot; + name);}catName(&quot;Tigger&quot;); // è¼¸å‡ºçµæœ: &quot;My cat's name is Tigger&quot; 12345catName(&quot;Chloe&quot;); // &quot;My cat's name is Chloe&quot;function catName(name) { console.log(&quot;My cat's name is &quot; + name); } å³ä½¿æˆ‘å€‘å‡½å¼çš„ç¨‹å¼ç¢¼ä¹‹å‰å°±å…ˆå‘¼å«å®ƒï¼Œç¨‹å¼ç¢¼ä»ç„¶å¯ä»¥é‹ä½œï¼Œ ä½†æ˜¯ï¼Œå¦‚æœæ¡ç”¨è³¦å€¼å®šç¾©å‡½æ•¸ï¼ŒJavaScriptå°±æœƒå ±éŒ¯ã€‚ 12f(); // TypeError: undefined is not a functionvar f = function (){}; ä¸Šé¢çš„ç¨‹å¼ç­‰åŒæ–¼ä¸‹é¢çš„å½¢å¼: 123var f;f();f = function () {}; ä¸Šé¢ç¨‹å¼ç¬¬äºŒè¡Œï¼Œå‘¼å«fçš„æ™‚å€™ï¼Œfåªæ˜¯è¢«å®£å‘Šäº†ï¼Œä½†é‚„æ²’æœ‰è¢«è³¦å€¼ï¼Œç­‰æ–¼undefinedï¼Œæ‰€ä»¥æœƒå ±éŒ¯ã€‚ å¦‚æœåŒæ™‚æ¡ç”¨functionå‘½ä»¤å’Œè³¦å€¼èªå¥è²æ˜åŒä¸€å€‹å‡½æ•¸ï¼Œæœ€å¾Œç¸½æ˜¯æ¡ç”¨è³¦å€¼èªå¥çš„å®šç¾©ã€‚ åªæœ‰å®£å‘Šæœƒæå‡,è³¦å€¼ä¸æœƒ(è®Šæ•¸é è¨­å€¼è¢«è¨­ç‚ºundefined )æ‰€æœ‰JSçš„è®Šæ•¸, é è¨­å€¼ç‚ºundefinedundefined ç‚ºä¸€å€‹JSå…§å»ºçš„ç‰¹æ®Šå€¼,ä¸¦éå­—ä¸²,è¡¨ç¤ºè©²è®Šæ•¸å°šæœªè¢«è¨­å®š(è³¦å€¼) å¦‚æœåŒæ™‚æ¡ç”¨functionå®£å‘Šå’Œè³¦å€¼åŒä¸€å€‹å‡½æ•¸ï¼Œä¸€å¾‹æ¡ç”¨è³¦å€¼å®šç¾©çš„functionã€‚ 123456789var f = function () { console.log('1');}function f() { console.log('2');}f() // 1 ä¾‹å­ä¸»è¦åƒè€ƒMDN å‡½æ•¸å…§éƒ¨çš„è®Šæ•¸æå‡èˆ‡å…¨å±€ä½œç”¨åŸŸä¸€æ¨£ï¼Œå‡½æ•¸ä½œç”¨åŸŸå…§éƒ¨ä¹Ÿæœƒç”¢ç”Ÿâ€œHoistingâ€ç¾è±¡ã€‚varå®£å‘Šçš„è®Šæ•¸ï¼Œä¸ç®¡åœ¨ä»€éº¼ä½ç½®ï¼Œè®Šæ•¸å®£å‘Šéƒ½æœƒè¢«æå‡åˆ°å‡½æ•¸ä½œç”¨åŸŸçš„é ‚éƒ¨ï¼Œçœ‹å€‹ä¾‹å­: 12345678910111213function foo(x) { if (x = 100) { var tmp = x * 2; }}// ç­‰åŒä¸‹æ–¹function foo(x) { var tmp; if (x = 100) { tmp = x * 2; };} scope(å‡½æ•¸ä½œç”¨åŸŸ)ç‚ºè®Šæ•¸å­˜åœ¨çš„ç¯„åœï¼Œ åœ¨ES5 è¦ç¯„è£¡é¢ï¼ŒJavaScript åªæœ‰å…©ç¨®ä½œç”¨åŸŸï¼šä¸€ç¨®æ˜¯å…¨å±€(global)ä½œç”¨åŸŸ(ç°¡ç¨±å…¨åŸŸ)ï¼Œæ‰€æœ‰åœ°æ–¹éƒ½å¯ä»¥è®€å–ï¼›å¦ä¸€ç¨®æ˜¯å‡½æ•¸ä½œç”¨åŸŸï¼Œè®Šæ•¸åªåœ¨å‡½æ•¸å…§éƒ¨å­˜åœ¨ã€‚ES6 åˆæ–°å¢äº†å¡Šç´šä½œç”¨åŸŸï¼Œä¹‹å¾Œå¦å¤–è¨˜éŒ„æˆä¸€ç¯‡ã€‚ ç°¡å–®ä¾†èªª: ä¸åœ¨functionå…§å°±ç¨±ç‚ºå…¨åŸŸ! å¦å¤–ï¼Œè®Šæ•¸åœ¨å‡½æ•¸å¤–æ‰€å®£å‘Šç¨±ä½œå…¨åŸŸè®Šæ•¸ï¼Œåœ¨å‡½æ•¸å…§ç¨±ä½œå€åŸŸè®Šæ•¸ï¼Œä¸éå…ˆæ±ºæ¢ä»¶æ˜¯è¦åœ¨å®£å‘Švarçš„æƒ…æ³ä¸‹ã€‚ç´€éŒ„ä¸€ä¸‹å€åŸŸè®Šæ•¸å’Œè®Šæ•¸æœƒé‡åˆ°çš„æƒ…æ³ã€‚ å…¨åŸŸè®Šæ•¸å¯åœ¨å‡½æ•¸å…§è®€å– 123456var v = 1;function f() { console.log(v);}f() // 1 å‡½æ•¸å…§çš„å€åŸŸè®Šæ•¸ç„¡æ³•å¾å‡½æ•¸å¤–éƒ¨è®€å– 1234function f(){ var v = 1;}v // ReferenceError: v is not defined å‡½æ•¸å…§éƒ¨å®šç¾©çš„è®Šæ•¸ï¼Œæœƒåœ¨è©²ä½œç”¨åŸŸå…§è¦†è“‹åŒåçš„å…¨åŸŸè®Šæ•¸ã€‚ 1234567var v = 1;function f() { var v = 2; console.log(v);}f(); // 2console.log(v); // 1 å°æ–¼varä¾†èªªï¼Œå€åŸŸè®Šæ•¸åªèƒ½åœ¨å‡½æ•¸å…§éƒ¨å®£å‘Šï¼Œåœ¨å…¶ä»–å€å¡Šä¸­å®£å‘Šä¸€å¾‹éƒ½æ˜¯å…¨åŸŸè®Šæ•¸ã€‚ 1234if (true) { var x = 5;}console.log(x); // 5 å‡½æ•¸æœ¬èº«ä¹Ÿæ˜¯ä¸€å€‹å€¼ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸã€‚å®ƒçš„ä½œç”¨åŸŸèˆ‡è®Šæ•¸ä¸€æ¨£ï¼Œå°±æ˜¯å…¶å®£å‘Šæ™‚æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œèˆ‡å…¶é‹è¡Œæ™‚æ‰€åœ¨çš„ä½œç”¨åŸŸç„¡é—œã€‚æ›å¥è©±èªª: å‡½æ•¸åŸ·è¡Œæ™‚æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œæ˜¯å®šç¾©æ™‚çš„ä½œç”¨åŸŸï¼Œè€Œä¸æ˜¯å‘¼å«æ™‚æ‰€åœ¨çš„ä½œç”¨åŸŸ 1234567891011var a = 1;var b = function () { console.log(a);};function f() { var a = 2; b();}f() // 1 // é 2ä¸Šé¢çš„ä¾‹å­ï¼Œå‡½æ•¸bæ˜¯åœ¨å‡½æ•¸fçš„å¤–éƒ¨è²æ˜çš„ï¼Œæ‰€ä»¥å®ƒçš„ä½œç”¨åŸŸç¶å®šåœ¨å‡½æ•¸å¤–å±¤ï¼Œå€åŸŸè®Šæ•¸aä¸æœƒåˆ°å‡½æ•¸få…§å–å€¼ï¼Œæ‰€ä»¥è¼¸å‡º1ï¼Œè€Œä¸æ˜¯2ã€‚è‹¥å°‡var a = 1åˆªé™¤ï¼Œå°±æœƒå¾—åˆ°Uncaught ReferenceError: a is not definedçš„éŒ¯èª¤å›å ±ã€‚ å†ä¸€å€‹ä¾‹å­: 12345678910var x = function () { console.log(a);};function y(f) { var a = 2; f();}y(x) // ReferenceError: a is not defined ä¸Šé¢ä¾‹å­å°‡å‡½æ•¸xä½œç‚ºåƒæ•¸ï¼Œå‚³å…¥å‡½æ•¸yã€‚ä½†å‡½æ•¸xæ˜¯åœ¨å‡½æ•¸yå¤–å®£å‘Šï¼Œä½œç”¨åŸŸç¶å®šæ–¼å‡½æ•¸å¤–å±¤ï¼Œå› æ­¤æ‰¾ä¸åˆ°å‡½æ•¸yçš„å…§éƒ¨è®Šæ•¸aï¼Œå°è‡´å ±éŒ¯ã€‚ å‡½æ•¸å…§å®£å‘Šçš„å‡½æ•¸ï¼Œä½œç”¨åŸŸç¶å®šå‡½æ•¸å…§éƒ¨ 1234567891011function foo() { var x = 1; function bar() { console.log(x); } return bar;}var x = 2;var f = foo();f() // 1 ä¸Šé¢ä¾‹å­ï¼Œå‡½æ•¸fooå…§éƒ¨å®£å‘Šä¸€å€‹å‡½æ•¸barï¼Œbarçš„ä½œç”¨åŸŸç¶å®šfooã€‚ç•¶æˆ‘å€‘åœ¨fooå¤–éƒ¨å–å‡ºbaråŸ·è¡Œæ™‚ï¼Œè®Šæ•¸xæŒ‡å‘çš„æ˜¯fooå…§éƒ¨çš„xï¼Œè€Œä¸æ˜¯fooå¤–éƒ¨çš„xã€‚ å…©å€‹ä»¥ä¸Š function éƒ½æœ‰ä½œç”¨åŸŸï¼Œä½†ä¸åŒå€åŸŸçš„åŒå‘½è®Šæ•¸å¯¦éš›ä¸Šæ˜¯ä¸åŒçš„ã€‚å³ä½¿åŒåè®Šæ•¸è¢«å®£å‘Šå¤šæ¬¡ï¼Œä½†å½¼æ­¤ä¹‹é–“æ²’æœ‰é—œä¿‚ï¼Œéƒ½æ˜¯ç¨ç«‹çš„è®Šæ•¸ã€‚ 123456789101112var scope = &quot;å…¨åŸŸ&quot;;function value1() { var scope = &quot;å€åŸŸ1&quot;; return scope;}function value2() { var scope = &quot;å€åŸŸ2&quot;; return scope;}console.log(value1()); //å€åŸŸ1console.log(value2()); //å€åŸŸ2console.log(scope); //å…¨åŸŸ è‹¥ç„¡varå®£å‘Š 1234567scope = 'å…¨åŸŸ';function getValue() { scope = 'å€åŸŸ'; return scope;}console.log(getValue()); //å€åŸŸconsole.log(scope); //å€åŸŸ ä½œç”¨åŸŸé‚„ç‰½æ¶‰é–‰åŒ…(Closure)çš„å•é¡Œï¼Œä¹‹å¾Œæ‰¾æ™‚é–“ç ”ç©¶åšæˆä¸€ç¯‡ç­†è¨˜ã€‚","link":"2019/07/22/Javascript/JavaScript_Function/"},{"title":"[JavaScript] DOM æ“ä½œ","text":"å‰è¨€é€™ç¯‡ç­†è¨˜å…ˆåšä¸€éƒ¨åˆ†çš„ DOM åŸºç¤æ“ä½œï¼Œå¾ŒçºŒå†æ…¢æ…¢è£œã€‚ BOM (Browser Object Modelï¼›ç€è¦½å™¨ç‰©ä»¶æ¨¡å‹)æ˜¯ç€è¦½å™¨æ‰€æœ‰åŠŸèƒ½çš„æ ¸å¿ƒï¼Œèˆ‡ç¶²é çš„å…§å®¹ç„¡é—œã€‚ æ—©æœŸå„å®¶ç€è¦½å™¨å» å•†å¹¾ä¹å„è‡ªåœ¨è‡ªå®¶ç€è¦½å™¨ä¸Šå¯¦ä½œåŠŸèƒ½ï¼Œæ²’æœ‰åŒä¸€è¦ç¯„ï¼Œéå¸¸æ··äº‚ã€‚å¾Œä¾† W3C æŠŠå„å®¶ç€è¦½å™¨éƒ½æœ‰å¯¦ä½œçš„éƒ¨åˆ†ï¼Œé€²è¡Œæ•´åˆç´å…¥ HTML5 çš„æ¨™æº–ä¸­ï¼Œä¹Ÿå°±æ˜¯ BOM ã€‚ ä¾†æº BOM çš„æ ¸å¿ƒæ˜¯ window ç‰©ä»¶ã€‚ åœ¨ç€è¦½å™¨è£¡çš„ window ç‰©ä»¶æä¾›å…©å€‹åŠŸèƒ½: ECMAScript æ¨™æº–è£¡çš„ã€Œå…¨åŸŸç‰©ä»¶ã€ (Global Object)JavaScript ç”¨ä¾†èˆ‡ç€è¦½å™¨æºé€šçš„çª—å£ æ›´è©³ç´°çš„è§£é‡‹ä¿ç•™åœ¨é€™ç¯‡å¥½æ–‡ã€‚ DOM(æ–‡ä»¶ç‰©ä»¶æ¨¡å‹ï¼›Document Object Modelï¼‰æ˜¯ HTMLã€XML å’Œ SVG æ–‡ä»¶çš„ç¨‹å¼ä»‹é¢(API)ã€‚å®ƒæä¾›äº†ä¸€å€‹æ–‡ä»¶ï¼ˆæ¨¹ï¼‰çš„çµæ§‹åŒ–è¡¨ç¤ºæ³•ï¼Œä¸¦å®šç¾©è®“ç¨‹å¼å¯ä»¥å­˜å–ä¸¦æ”¹è®Šæ–‡ä»¶æ¶æ§‹ã€é¢¨æ ¼å’Œå…§å®¹çš„æ–¹æ³•ã€‚DOM æä¾›äº†æ–‡ä»¶ä»¥æ“æœ‰å±¬æ€§èˆ‡å‡½å¼çš„ç¯€é»èˆ‡ç‰©ä»¶çµ„æˆçš„çµæ§‹åŒ–è¡¨ç¤ºâ€”MDNè§£é‡‹ã€‚ å¦å¤–ï¼ŒDOM æ¨¹æ˜¯ç”±ä¸€å€‹ä¸€å€‹ç¯€é»æ‰€æ§‹æˆï¼Œæœ€ä¸Šå±¤çš„ç¯€é»åš documentï¼Œ HTML è£¡é¢æ¯å€‹å…ƒç´ ã€å±¬æ€§éƒ½ä»£è¡¨è‘—å…¶ä¸­ä¸€å€‹ç¯€é»ã€‚ DOM çš„ document å…¶å¯¦ä¹Ÿæ˜¯ window ç‰©ä»¶çš„å­ç‰©ä»¶ä¹‹ä¸€ï¼Œwindow æ˜¯ BOM ç‰©ä»¶ï¼Œè€Œé js ç‰©ä»¶ DOM æ¨™æº–è¢«åˆ†æˆ 3 å€‹ä¸åŒçš„éƒ¨åˆ†çµ„æˆï¼š æ ¸å¿ƒ DOM â€” å°æ‰€æœ‰æ–‡æª”é¡å‹æ¨™æº–æ¨¡å‹ XML DOM â€” ç‚º XML æ–‡æª”æ¨™æº–æ¨¡å‹ HTML DOM â€” ç‚º HTML æ–‡æª”çš„æ¨™æº–æ¨¡å¼ é™¤äº†æ ¹ç¯€é»ï¼Œå…¶ä»–ç¯€é»éƒ½æœ‰ä¸‰ç¨®å±¤ç´šé—œä¿‚: çˆ¶ç¯€é»é—œä¿‚ï¼ˆparentNode): è©²ç¯€é»çš„ä¸Šå±¤ç¯€é»å­ç¯€é»é—œä¿‚(childNode): è©²ç¯€é»çš„ä¸‹å±¤ç¯€é»åŒç´šç¯€é»é—œä¿‚ï¼ˆsiblingï¼‰: èˆ‡è©²ç¯€é»åŒå±¤çš„ç¯€é» ç¯€é»é€šå¸¸åˆ†æˆä»¥ä¸‹å¹¾ç¨®:Document: é€™ä»½æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯é€™ä»½ HTML æª”çš„é–‹é ­ï¼Œæ‰€æœ‰çš„ä¸€åˆ‡éƒ½æœƒå¾ Document é–‹å§‹å¾€ä¸‹åŸ·è¡Œã€‚ DocumentTypeï¼šdoctypeæ¨™ç±¤ï¼ˆå¦‚&lt;!DOCTYPE html&gt;ï¼‰ Element: æŒ‡æ–‡ä»¶å…§çš„å„å€‹æ¨™ç±¤ï¼Œå› æ­¤åƒæ˜¯ &lt;div&gt;ã€&lt;p&gt; ç­‰ç­‰å„ç¨® HTML Tag éƒ½æ˜¯è¢«æ­¸é¡åœ¨ Element è£¡é¢ã€‚ Text: æ¨™ç±¤åŒ…èµ·ä¾†çš„æ–‡å­—ï¼Œä¾‹: &lt;h1&gt;Hello World&lt;/h1&gt; ä¸­ï¼Œ Hello World è¢« &lt;h1&gt; æ¨™ç±¤åŒ…èµ·ä¾†ï¼Œå› æ­¤ Hello World å°±æ˜¯æ­¤æ¨™ç±¤çš„ Text Attribute Attribute å°±æ˜¯æŒ‡å„å€‹æ¨™ç±¤å…§çš„ç›¸é—œå±¬æ€§ï¼Œå¦‚&lt;a&gt;æ¨™ç±¤çš„hrefã€‚ Commentï¼šè¨»é‡‹ DocumentFragmentï¼šæ–‡æª”ç‰‡æ®µç¯€é»å±¬æ€§æœ‰ 3 ç¨®:1.nodeType 2.nodeName( å±¬æ€§å«æœ‰æŸå€‹ç¯€é»çš„åç¨±) 3.nodeValue nodeTypenodeType å±¬æ€§è¿”å›ä¸€å€‹æ•´æ•¸å€¼ï¼Œè¡¨ç¤ºç¯€é»çš„é¡å‹ã€‚ ä¸åŒç¯€é»æœ‰ä¸åŒçš„ nodeType å±¬æ€§å€¼: å…ƒç´ ç¯€é»ï¼ˆelementï¼‰ï¼š1 å±¬æ€§ç¯€é»ï¼ˆattrï¼‰ï¼š2 æ–‡æœ¬ç¯€é»ï¼ˆtextï¼‰ï¼š3 æ–‡æª”ç¯€é»ï¼ˆdocumentï¼‰ï¼š9 è¨»é‡‹ç¯€é»ï¼ˆCommentï¼‰ï¼š8nodeNamenodeName å±¬æ€§è¿”å›ç¯€é»çš„åç¨±ã€‚ ä¸åŒç¯€é»çš„ nodeName è¿”å›çš„å±¬æ€§å€¼å¦‚ä¸‹ å…ƒç´ ç¯€é»(element)ï¼šå¤§å¯«æ¨™ç±¤å å±¬æ€§ç¯€é»(attr): å±¬æ€§åç¨±(éå¤§å¯«) æ–‡æœ¬ç¯€é»(text)ï¼š#text æ–‡æª”ç¯€é»(document)ï¼š#document è¨»é‡‹ç¯€é»ï¼ˆCommentï¼‰ï¼š#commentnodeValuenodeValue å±¬æ€§è¿”å›ä¸€å€‹å­—ä¸²ï¼Œè¡¨ç•¶å‰ç¯€é»æœ¬èº«æ–‡æœ¬å€¼ã€‚ åªæœ‰æ–‡æœ¬ç¯€é»ï¼ˆtextï¼‰ã€è¨»é‡‹ç¯€é»ï¼ˆcommentï¼‰å’Œå±¬æ€§ç¯€é»ï¼ˆattrï¼‰æœ‰æ–‡æœ¬å€¼ï¼Œ å…¶ä»–é¡å‹çš„ç¯€é»ä¸€å¾‹è¿”å› null å…ƒç´ ç¯€é»(element)ï¼šnull å±¬æ€§ç¯€é»(attr): å±¬æ€§å€¼ æ–‡æœ¬ç¯€é»(text)ï¼šæ–‡æœ¬å…§å®¹ æ–‡æª”ç¯€é»(document)ï¼šnull è¨»é‡‹ç¯€é»(Comment)ï¼š#commentç¯„ä¾‹: 12345678910111213141516171819// å…ƒç´ ç¯€é»var oBox = $('box');alert(oBox.nodeName); // DIV // æ³¨æ„å¤§å¯«alert(oBox.nodeType); // 1alert(oBox.nodeValue); // null// å±¬æ€§ç¯€é»var att = oBox.attributes[0]; // ç²å–ç¯€é»å±¬æ€§alert(att.nodeName); // id // æ³¨æ„å°å¯«alert(att.nodeType); // 2alert(att.nodeValue); // box})&lt;body&gt; &lt;div id=&quot;box&quot;&gt; hello &lt;/div&gt;&lt;/body&gt; textContent textContent å±¬æ€§è¿”å›ç•¶å‰ç¯€é»å’Œå®ƒçš„æ‰€æœ‰å­ç¯€é»çš„æ–‡æœ¬å…§å®¹ã€‚textContent å±¬æ€§è‡ªå‹•å¿½ç•¥ç•¶å‰ç¯€é»å…§éƒ¨çš„ HTML æ¨™ç±¤ï¼Œè¿”å›æ‰€æœ‰æ–‡æœ¬å…§å®¹ã€‚åœ¨æ’å…¥æ–‡æœ¬æ™‚ï¼Œæœƒå°‡æ¨™ç±¤è§£é‡‹ç‚ºæ–‡æœ¬ï¼Œè€Œä¸æœƒç•¶ä½œæ¨™ç±¤è™•ç†ã€‚ 12345// HTML // &lt;div id=&quot;divA&quot;&gt;This is &lt;span&gt;some&lt;/span&gt; text&lt;/div&gt;document.getElementById('divA').textContent// This is some text firstChildfirstChild å±¬æ€§è¿”å›ç•¶å‰ç¯€é»çš„ç¬¬ä¸€å€‹å­ç¯€é»ï¼Œå¦‚æœç•¶å‰ç¯€é»æ²’æœ‰å­ç¯€é»ï¼Œå‰‡è¿”å› nullã€‚ 12345// HTML&lt;p id=&quot;p1&quot;&gt;&lt;span&gt;First span&lt;/span&gt;&lt;/p&gt;var p1 = document.getElementById('p1');p1.firstChild.nodeName // &quot;SPAN&quot; firstChild è¿”å›çš„é™¤äº†å…ƒç´ ç¯€é»ï¼Œé‚„å¯èƒ½æ˜¯æ–‡æœ¬ç¯€é»æˆ–è¨»é‡‹ç¯€é»ã€‚ 1234567// HTML&lt;p id=&quot;p1&quot;&gt; &lt;span&gt;First span&lt;/span&gt;&lt;/p&gt;var p1 = document.getElementById('p1');p1.firstChild.nodeName // &quot;#text&quot; lastChildlastChild å±¬æ€§è¿”å›ç•¶å‰ç¯€é»çš„æœ€å¾Œä¸€å€‹å­ç¯€é»ï¼Œå¦‚æœç•¶å‰ç¯€é»æ²’æœ‰å­ç¯€é»ï¼Œå‰‡è¿”å› nullã€‚ç”¨æ³•èˆ‡ firstChild å±¬æ€§ç›¸åŒã€‚ DOM åŸºæœ¬æ“ä½œ document.getElementById(â€˜idNameâ€™) æ‰¾å°‹ DOM ä¸­ç¬¦åˆæ­¤ id åç¨±çš„å…ƒç´ ï¼Œä¸¦å›å‚³å°æ‡‰çš„å…ƒç´ ï¼Œ é€™å€‹æ–¹æ³•åªèƒ½åœ¨ documentä¸Šä½¿ç”¨ï¼Œä¸èƒ½åœ¨å…¶ä»–å…ƒç´ ç¯€é»ä¸Šä½¿ç”¨ã€‚ã€‚ document.getElementsBytagName(â€˜tagâ€™) æ‰¾å°‹ DOM ä¸­ç¬¦åˆæ­¤ tag åç¨±çš„æ‰€æœ‰å…ƒç´ ï¼Œä¸¦å›å‚³å°æ‡‰çš„å…ƒç´ é›†åˆ(HTMLCollection )ï¼Œç‚º HTMLCollection ã€‚ document.getElementsByClassName(â€˜classNameâ€™) æ‰¾å°‹ DOM ä¸­ç¬¦åˆæ­¤ class åç¨±çš„æ‰€æœ‰å…ƒç´ ï¼Œä¸¦å›å‚³ç›¸å°æ‡‰çš„ element é›†åˆï¼Œç‚º HTMLCollection ã€‚ document.querySelector(â€˜selectorâ€™) document.querySelector æ–¹æ³•æ¥å—ä¸€å€‹ CSS é¸æ“‡å™¨ä½œç‚ºåƒæ•¸ï¼Œè¿”å›åŒ¹é…è©²é¸æ“‡å™¨çš„å…ƒç´ ç¯€é»ã€‚å¦‚æœæœ‰å¤šå€‹ç¯€é»æ»¿è¶³åŒ¹é…æ¢ä»¶ï¼Œå‰‡è¿”å›ç¬¬ä¸€å€‹åŒ¹é…çš„ç¯€é»ã€‚å¦‚æœæ²’æœ‰ç™¼ç¾åŒ¹é…çš„ç¯€é»ï¼Œå‰‡è¿”å› nullã€‚ å¦å¤–ï¼Œ querySelector ä¹Ÿå¯ä»¥ç”¨ä¾†é¸æ“‡ä¸‹ä¸€å±¤çš„å…ƒç´  12345// HTML&lt;h1 id=&quot;titleId&quot; class=&quot;titleClass&quot;&gt;&lt;b&gt;123&lt;/b&gt;&lt;/h1&gt;// querySelectordocument.querySelector('.titleClass b'); // 123 document.querySelectorAll(â€˜selectorâ€™) document.querySelectorAll æ–¹æ³•èˆ‡ querySelector ç”¨æ³•é¡ä¼¼ï¼Œå€åˆ¥æ˜¯è¿”å›ä¸€å€‹ NodeList é›†åˆï¼ŒåŒ…å«æ‰€æœ‰åŒ¹é…çµ¦å®šé¸æ“‡å™¨çš„ç¯€é»ã€‚ é€™å…©å€‹æ–¹æ³•éƒ½æ”¯æŒè¤‡é›œçš„ CSS é¸æ“‡å™¨ã€‚ 12345// é¸æ“‡ data-foo-bar å±¬æ€§ç‚º someval çš„å…ƒç´ document.querySelectorAll('[data-foo-bar=&quot;someval&quot;]');// åŒæ™‚é¸æ“‡ divï¼Œaï¼Œscript ä¸‰å€‹å…ƒç´ document.querySelectorAll('DIV, A, SCRIPT'); querySelectorå’ŒgetElementsByClassName çš„æ¯”è¼ƒ123456789101112131415// HTML&lt;ul class=&quot;view&quot;&gt; &lt;li&gt;ç¬¬ä¸€&lt;/li&gt; &lt;li&gt;ç¬¬äºŒ&lt;/li&gt; &lt;li&gt;ç¬¬ä¸‰&lt;/li&gt;&lt;/ul&gt;// JSvar text = document.querySelector(&quot;.view&quot;);var text1 = document.getElementsByClassName('view');var text2 = document.getElementsByTagName('h1');console.log(text1);console.log(text2); console.log(text); ä¸Šåœ–å¯çŸ¥ getElementByTagName å’Œ getElementsByClassName éƒ½æ˜¯è¿”å›ä¸€å€‹é¡ä¼¼é™£åˆ—çš„å…ƒç´ é›†åˆã€‚ querySelector ç³»åˆ—çš„æ˜¯ Static(éœæ…‹)çš„ node listï¼Œè€Œ getElementsBy*ç³»åˆ—çš„è¿”å›çš„æ˜¯ä¸€å€‹ Live(å‹•æ…‹) Node Listã€‚ 12345678910111213// Demo 1var ul = document.querySelectorAll('ul')[0], lis = ul.querySelectorAll(&quot;li&quot;);for(var i = 0; i &lt; lis.length ; i++){ ul.appendChild(document.createElement(&quot;li&quot;));}// Demo 2var ul = document.getElementsByTagName('ul')[0], lis = ul.getElementsByTagName(&quot;li&quot;); for(var i = 0; i &lt; lis.length ; i++){ ul.appendChild(document.createElement(&quot;li&quot;)); } Demo 2 ä¸­çš„ lis æ˜¯ä¸€å€‹å‹•æ…‹çš„ Node Listï¼Œæ¯ä¸€æ¬¡èª¿ç”¨ list éƒ½æœƒé‡æ–°å° document é€²è¡ŒæŸ¥è©¢ï¼Œå°è‡´ç„¡é™å¾ªç’°çš„å•é¡Œã€‚Demo 1 ä¸­çš„ lis æ˜¯ä¸€å€‹éœæ…‹çš„ Node Listï¼Œæ˜¯ä¸€å€‹ li é›†åˆï¼Œå° document çš„ä»»ä½•æ“ä½œéƒ½ä¸æœƒå°å…¶ç”¢ç”Ÿå½±éŸ¿ã€‚ createElement()å‰µå»ºå…ƒç´ ç¯€é»å¦‚æœéœ€è¦ä¿®æ”¹å…§å®¹æˆ–æ˜¯è¨­å®šå±¬æ€§é‚„éœ€è¦ç”¨å…¶ä»– DOM æ“ä½œï¼Œå¦‚:textContentã€setAttributeã€‚ 123456// å‰µå»ºå…ƒç´ ç¯€é»var oTitle = document.createElement('h1')oTitle.textContent = 'ä½ å¥½' // ä½ å¥½// æ·»åŠ å…ƒç´ åˆ°ä»‹é¢ä¸­: appendChild()document.body.appendChild(oTitle); ç”¨createElement èˆ‡ innerHTML å¯«å…¥æ–‡æª”çš„æ¯”è¼ƒ:`createElement`: 1.ä¸æœƒæŠŠåŸæœ¬çš„emæ‰€å–ä»£ã€‚ 2.æ–¹æ³•ï¼šçµ„å®Œå­—ä¸²å¾Œ,å°‡èªæ³•å‚³å…¥htmlé€²è¡Œæ¸²æŸ“ 3.å„ªé»ï¼šæ•ˆèƒ½è¼ƒå¥½ 4.ç¼ºé»ï¼šè³‡å®‰é¢¨éšªï¼Œæ˜“å¼•èµ·è…³æœ¬æ³¨å…¥æ”»æ“Šã€‚ `innerHTML`: 1.æœƒå…ˆå°‡åŸæœ‰çš„å…§å®¹å…¨éƒ¨åˆªé™¤å¾Œå†åšæ–°å¢ 2.æ–¹æ³•ï¼šä»¥DOMç¯€é»ä¾†è™•ç† 3.å„ªé»ï¼šå®‰å…¨æ€§è¼ƒé«˜ 4.ç¼ºé»ï¼šæ•ˆèƒ½è¼ƒå·®getAttribute() ç²å–ç¯€é»å±¬æ€§å€¼getAttribute()åªè¿”å›å­—ç¬¦ä¸²ï¼Œ ä¸æœƒè¿”å›å…¶ä»–é¡å‹çš„å€¼ã€‚ 1234567891011121314151617// HTML&lt;div id=&quot;box&quot; class=&quot;section&quot; data-index=&quot;0&quot; data-isShow=&quot;true&quot;&gt; Test Statement&lt;/div&gt;// è‡ªå®šç¾©å±¬æ€§oBox.tab = 10// ç²å–ç¯€é»å±¬æ€§alert(oBox.tab) // 10// ç²å–ç¯€é»å±¬æ€§çš„å€¼var att = oBox.attributes; // ç²å–åˆ°: id=&quot;box&quot; class=&quot;section&quot; data-index=&quot;0&quot; data-isShow=&quot;true&quot;alert(att['class'].nodeValue) // sectionalert(att['id'].nodeValue) // box// ç²å–ç¯€é»å±¬æ€§: getAttribute()alert(oBox.getAttribute('data-index')) // 0 setAttribute() å‰µå»ºå±¬æ€§.setAttribute()ç”¨æ–¼ç‚ºç•¶å‰å…ƒç´ ç¯€é»æ–°å¢å±¬æ€§ã€‚å¦‚æœåŒåå±¬æ€§å·²å­˜åœ¨ï¼Œå‰‡ç›¸ç•¶æ–¼ç·¨è¼¯å·²å­˜åœ¨çš„å±¬æ€§ã€‚ setAttribute(â€œå±¬æ€§åç¨±â€, â€œå±¬æ€§å…§å®¹â€) 12var b = document.querySelector('button');b.setAttribute('name', 'myButton'); removeAttribute() åˆªé™¤å±¬æ€§.removeAttribute()ç§»é™¤æŒ‡å®šå±¬æ€§ã€‚ 123456// old HTML // &lt;div id=&quot;div1&quot; align=&quot;left&quot; width=&quot;200px&quot;&gt; document.getElementById('div1').removeAttribute('align');// now HTML// &lt;div id=&quot;div1&quot; width=&quot;200px&quot;&gt; ä¾†æº1 ä¾†æº2 W3C","link":"2019/07/21/Javascript/JavaScript_DOM/"},{"title":"Sessionèˆ‡Cookieå·®åˆ¥","text":"å‰è¨€å…¶å¯¦é€™å€‹ç–‘å•ä¹‹å‰å°±å­˜åœ¨å¾ˆä¹…ï¼Œå°±å»æŸ¥è³‡æ–™äº†è§£ä¸€ä¸‹ï¼Œä½œç‚ºä»Šå¤©ç­†è¨˜å°è±¡ï¼Œåœ¨è¨˜éŒ„2è€…å·®ç•°ä¹‹å‰ï¼Œè¦å…ˆäº†è§£ç‚ºä½•éœ€è¦é€™å…©è€…ï¼Œä»–å€‘è§£æ±ºäº†ä»€éº¼æ¨£çš„å•é¡Œ? ä»€éº¼æ˜¯httpï¼Ÿhttpæœ¬èº«æ˜¯å€‹ç„¡ç‹€æ…‹( Stateless)çš„å”è­°ï¼Œå¯ä»¥åœ¨Clientèˆ‡Serverå…©ç«¯é€²è¡Œæºé€šï¼Œä½†æ˜¯ç„¡æ³•ç´€éŒ„ç¶²è·¯ä¸Šçš„è¡Œç‚ºã€‚ä¸€èˆ¬è€Œè¨€ï¼Œä»Šå¤©å¦‚æœè¦ç™»å…¥ä¸€å€‹ç¶²ç«™ï¼Œæ¯æ¬¡è¨ªå•è©²ç¶²ç«™æ™‚ï¼Œå°±éœ€è¦å°‡ç™»å…¥å¸³å¯†å†è¼¸å…¥ä¸€æ¬¡ï¼Œ æˆ–æ˜¯ç¾åœ¨é é¢ä¸Šçš„è³‡æ–™å¡«åˆ°ä¸€åŠï¼Œä¸å°å¿ƒæŠŠç¶²é é—œæ‰ï¼Œé‡é–‹é é¢åªå¥½å†é‡æ–°è¼¸å…¥ä¸€æ¬¡ï¼Œä½¿ç”¨èµ·ä¾†æœƒéå¸¸ä¸ä¾¿ã€‚Cookieå’ŒSessionå› æ­¤èª•ç”Ÿï¼Œè§£æ±ºç„¡ç´€éŒ„ç‹€æ…‹çš„å•é¡Œã€‚ Cookieä»–ä¸åªæ˜¯ä¸€å¡Šå°é¤…ä¹¾ï¼Œè€Œæ˜¯ä¸€æ®µç”±Serveré€çµ¦ä½¿ç”¨è€…ç€è¦½å™¨çš„ä¸€å°å¡Šè³‡æ–™(æ–‡æª”)ã€‚ç€è¦½å™¨æœƒå„²å­˜å®ƒä¸¦ä¸”åœ¨ç€è¦½å™¨ä¸‹ä¸€æ¬¡ç™¼é€è¦æ±‚çš„æ™‚å€™å°‡å®ƒé€å›åŸæœ¬é€ä¾†çš„ä¼ºæœå™¨ã€‚ Cookieå°±æ˜¯ç”¨ä¾†ç¹é–‹HTTPçš„ç„¡ç‹€æ…‹æ€§çš„ã€Œé¡å¤–æ‰‹æ®µã€ä¹‹ä¸€ åŸºæœ¬ä¸Šï¼Œå®ƒæ˜¯ç”¨ä¾†å€åˆ†å…©å€‹è¦æ±‚æ˜¯ä¾†è‡ªåŒä¸€å€‹ç€è¦½å™¨ â€” ä»¥æ­¤å»ä¿æŒä½¿ç”¨è€…çš„ç™»å…¥ç‹€æ…‹ã€‚ä¾‹å¦‚ï¼Œå®ƒæä¾›äº†ä¿å­˜ç‹€æ…‹è³‡è¨Šçš„åŠŸèƒ½ï¼Œä¾†å¹«åŠ©HTTPé€™å€‹ç„¡æ³•ç´€éŒ„ç‹€æ…‹çš„é€šè¨Šå”å®šã€‚ ç”¨å¯¦ä¾‹èªªæ˜çš„è©±å°±æ˜¯æˆ‘å€‘å¹³å¸¸é€›ç¶²æ‹ï¼Œè¦è³¼è²·å•†å“æ™‚éƒ½è¦ç™»å…¥æœƒå“¡è³‡æ–™ï¼Œé€²å…¥åˆ°ç™»å…¥ä»‹é¢ï¼Œæˆ‘å€‘å¯ä»¥é€éCookieçš„æ–¹å¼ç´€éŒ„ä¹‹å‰è¼¸å…¥çš„å¸³è™Ÿå¯†ç¢¼ï¼Œçœå»æ¯æ¬¡éƒ½è¦é‡æ–°æ‰“å¸³å¯†çš„ä¸ä¾¿ï¼Œ åªè¦Cookieå°šæœªåˆ°æœŸï¼Œç€è¦½å™¨æœƒå‚³é€è©²Cookieçµ¦ä¼ºæœå™¨ä½œé©—è­‰æ†‘æ“šã€‚é€™æ¨£çš„æ–¹å¼å·²ç¶“è§£æ±ºå¤§éƒ¨åˆ†çš„å•é¡Œã€‚ ç”±æ–¼é€™å€‹Cookieè¨­å®šå€¼æ˜¯å„²å­˜åœ¨ä½¿ç”¨è€…çš„é›»è…¦è£¡ï¼Œæˆ‘å€‘å¯é€éç€è¦½å™¨ä¾†æª¢æ¸¬é€™å€‹è¨­å®šå€¼æ˜¯å¦å„²å­˜ã€‚æ“ä½œå¦‚ä¸‹: é–‹å•Ÿç€è¦½å™¨ï¼Œè¼¸å…¥è¦æŸ¥çœ‹ç¶²å€ï¼Œå†é»ç¶²å€åˆ—å‰æ–¹çš„åœ–ç¤ºï¼Œæ¥è‘—å°±æœƒçœ‹åˆ°Cookie é»ä¸€ä¸‹ï¼Œé€²å…¥å¾Œåœ¨å…è¨±çš„é ç±¤ä¸­ï¼Œå°±æœƒçœ‹åˆ°ç›®å‰æ‰€å„²å­˜çš„Cookeå€¼æœ‰é‚£äº›ã€‚ é»ä¸€ä¸‹å±•é–‹å¾Œï¼Œå°±å¯çœ‹åˆ°æ¯å€‹Cookieæ‰€è¨˜éŒ„çš„å€¼èˆ‡å…§å®¹ï¼Œä¹‹å¾Œè‹¥æ‰¾ä¸åˆ°Cookieæ™‚ï¼Œå¯ä»¥å˜—è©¦å¾é€™é‚Šæ‰¾çœ‹çœ‹ã€‚ å¯¦ä½œåŸç†: client ç«¯çš„ç¨‹å¼åœ¨ä¸€æ—¦å¡«å¯«çš„è³‡æ–™æœ‰è®Šå‹•æ™‚ï¼Œå°±æŠŠè©²è³‡è¨Šå¯«å…¥ cookieã€‚ Cookie ç”±ç€è¦½å™¨è™•ç†ï¼Œå…·æœ‰å…©å€‹ç‰¹æ€§ï¼š ç‰¹å®šç¶²åŸŸï¼šåªé‡å°åŸæœ¬çš„ ç¶²åŸŸ(domain) èµ·ä½œç”¨ã€‚èˆ‰ä¾‹: åœ¨ .myExample.com å­˜å…¥çš„ cookieï¼Œä¸æœƒå‡ºç¾åœ¨ *.not-myExample.comæœ‰ç”Ÿå‘½æœŸé™: åˆ°äº†æ‰€è¨­å®šçš„ç”Ÿå‘½æœŸé™ä¹‹å¾Œæœƒå¤±æ•ˆã€‚*åœ¨å‘è©² domain çš„ server ç™¼é€è«‹æ±‚æ™‚ï¼Œä¹Ÿæœƒè¢«ä¸€ä½µå¸¶é€²å»è©²è«‹æ±‚ä¸­**ã€‚ é€™éº¼å¥½ç”¨çš„æ±è¥¿ç•¶ç„¶ä¹Ÿæœ‰ç¼ºé»cookie é›–ç„¶å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯ä½¿ç”¨cookie æœ‰ä¸€å€‹å¾ˆå¤§çš„å¼Šç«¯ï¼Œcookie ä¸­çš„æ‰€æœ‰æ•¸æ“šåœ¨Clientç«¯å°±å¯ä»¥è¢«ä¿®æ”¹ï¼Œæ•¸æ“šéå¸¸å®¹æ˜“è¢«å½é€ ï¼Œé‚£éº¼ä¸€äº›é‡è¦çš„æ•¸æ“šå°±ä¸èƒ½å­˜æ”¾åœ¨cookie ä¸­äº†ï¼Œè€Œä¸”å¦‚æœcookieä¸­æ•¸æ“šå­—æ®µå¤ªå¤šæœƒå½±éŸ¿å‚³è¼¸æ•ˆç‡ã€‚ç‚ºäº†è§£æ±ºé€™äº›å•é¡Œï¼Œå°±ç”¢ç”Ÿäº†sessionï¼Œsession ä¸­çš„æ•¸æ“šæ˜¯ä¿ç•™åœ¨Serverç«¯ã€‚ SessionSession è² è²¬ç´€éŒ„åœ¨ serverç«¯ä¸Šçš„ä½¿ç”¨è€…è¨Šæ¯ï¼Œæœƒåœ¨ä¸€å€‹ç”¨æˆ¶å®Œæˆèº«åˆ†èªè­‰å¾Œï¼Œå­˜ä¸‹æ‰€éœ€çš„ç”¨æˆ¶è³‡æ–™ï¼Œæ¥è‘—ç”¢ç”Ÿä¸€çµ„å°æ‡‰çš„ IDï¼Œå­˜å…¥ cookie å¾Œå‚³å›ç”¨æˆ¶ç«¯ã€‚ Sessionæ³›æŒ‡æœ‰å§‹æœ‰çµ‚çš„ç³»åˆ—å‹•ä½œ/æ¶ˆæ¯ï¼Œå¥½æ¯”æœƒè©±ä¸€èˆ¬ã€‚ è©¦æƒ³ Cookieæ˜¯ä¸€å¼µé ˜é¤çš„è™Ÿç¢¼ç‰Œï¼Œè€ŒSessionæ˜¯ä¸€å¼µæ•¸ä½æœƒå“¡å¡ï¼Œ è¨˜éŒ„ä½ çš„é»é¤è™Ÿç¢¼ï¼Œé‚„å¯ä»¥ç´€éŒ„ä½ çš„é¤é»ç´°ç¯€ï¼Œæ¶ˆè²»è¨˜éŒ„å’Œé»é¤å–œå¥½ã€‚ï¼Œè§£æ±ºCookieéºå¤±çš„å•é¡Œã€‚ è‹¥ä»Šå¤©æ›¿æŸå€‹Clientç«¯çš„Requestå»ºä¸€å€‹Sessionçš„æ™‚å€™ï¼ŒServeræœƒå…ˆæª¢æŸ¥é€™å€‹Clientç«¯çš„Requestè£¡æ˜¯å¦æœ‰åŒ…å«äº†Sessionæ¨™è­˜(Session id)ï¼Œå¦‚æœå·²åŒ…å«ä¸€å€‹Session idï¼Œè¡¨ç¤ºé€™å€‹ç™¼èµ·Requestçš„Clientç«¯æ˜¯å·²ç¶“å­˜æ”¾éçš„idï¼ŒServerå°±æŒ‰ç…§Session idï¼ŒæŠŠé€™å€‹Sessionæ‰¾å‡ºä¾†ä½¿ç”¨ã€‚ä½†å¦‚æœClientç«¯è«‹æ±‚ä¸åŒ…å«Session idï¼Œï¼Œå‰‡è¡¨ç¤ºä»–æ˜¯æ–°è‡‰å­”ï¼Œé‚£Serverç«¯å°±ç‚ºæ­¤Clientç«¯å‰µå»ºä¸€å€‹Sessionï¼Œä¸¦ç”Ÿæˆä¸€å€‹Session idï¼Œä¸¦Responseçµ¦Clientç«¯ä¿å­˜ã€‚ å°çµ: sessionï¼šå¸³è™Ÿç™»éŒ„é©—è­‰éå¾Œï¼ŒServerç«¯æ‰€ç™¼çš„è­˜åˆ¥è­‰ cookieï¼šæ˜¯ç€è¦½å™¨å­˜æ”¾è³‡æ–™çš„åœ°æ–¹ï¼Œå¯ä»¥å­˜æ”¾seesionä¹‹é¡çš„è³‡æ–™ åƒè€ƒé€£çµ:[ä¸æ˜¯å·¥ç¨‹å¸«] æœƒå“¡ç³»çµ±ç”¨Sessioné‚„æ˜¯Cookie? ä½ çŸ¥é“å…¶å¯¦ä»–å€‘å¸¸å¸¸æ··åœ¨ä¸€èµ·å—ï¼Ÿã€Œå¸¥å“¥~ä½ çš„æ—©é¤å¥½äº†ã€ï¼Œäº”åˆ†é˜æ¦‚è¿°ç¶²è·¯ç•Œçš„è¨˜æ†¶å¤§ç¥-Sessionprogressbar.tw[ä¸æ˜¯å·¥ç¨‹å¸«] Cookie æ˜¯æ–‡æª”é‚„æ˜¯é¤…ä¹¾ï¼Ÿç°¡è¿°HTTPç¶²é ç´€éŒ„æœƒå“¡è³‡è¨Šçš„ä¸€å¤§åŠŸè‡£ã€‚å¾æ·˜å¯¶åˆ°Airbnbï¼Œç‚ºä½•ä»–å€‘ç¸½èƒ½çŸ¥é“æˆ‘å€‘æ˜¯èª°å‘¢ï¼Ÿprogressbar.twä»‹ç´¹ Session åŠ Cookie å…©è€…çš„å·®åˆ¥èªªæ˜é€™å¹¾å¹´ SPAï¼ˆSingle Page Appï¼‰ç•¶é“ï¼Œé€ å°±ä¸€å€‹ç¾è±¡å°±æ˜¯ Server-side åŠ Client-side å£å£˜åˆ†æ˜ã€‚å¦‚æœä½ æ˜¯ Client-side çš„é–‹ç™¼è€…ï¼Œå¯èƒ½æ²’ä»€éº¼æ©Ÿæœƒè‡ªå·±æ¶ä¸€å€‹ webâ€¦blog.hellojcc.tw[çˆ¬èŸ²] èƒŒæ™¯çŸ¥è­˜ â€œ I try | MarsWWWW(World Wide Webã€Web) æ˜¯ä¸€å€‹ç”±è¨±å¤šé€šéç¶²éš›ç¶²è·¯å­˜å–è€Œäº’ç›¸é€£çµçš„ hypertext documents (å¸¸ç”¨HTML) çµ„æˆçš„ç³»çµ±ã€‚ è€Œä¸€å€‹ç¨ç«‹çš„ WWW é é¢ï¼Œæˆ‘å€‘â€¦tech-marsw.logdown.com","link":"2019/07/14/Network/cookie_session/"},{"title":"[JavaScript] ä½¿ç”¨Google Map API","text":"ç­†è¨˜å¦‚ä½•ä½¿ç”¨Google Map API é€²è¡Œæœå‹™ å‰è¨€Google Mapsæ˜¯ç¾ä»£äººå½¢å½±ä¸é›¢çš„å·¥å…·ï¼Œäº¤é€šçš„éƒ¨åˆ†æ™‚å¸¸éƒ½å¾—ä¾é ä»–çš„å¹«å¿™ï¼Œé€™ç¯‡å°±ä¾†ç­†è¨˜é€™é …å¼·å¤§æœå‹™çš„ä½¿ç”¨æ–¹æ³•å§! å‰ç½®ä½œæ¥­ Build API Key ä½¿ç”¨æ–¹å¼æ˜¯åƒè€ƒé€™ç¯‡ã€‚ How to use it? ä½¿ç”¨æ–¹å¼æœ‰åˆ†: Maps JavaScript APIã€Google Maps Embed APIã€Google Static Maps API Maps JavaScript APIAPI keyè¦æ”¾åœ¨&lt;script &gt; ä¸­src=&quot;YOUR_API_KEYçš„ä½ç½®&quot;ã€‚ ref: å®˜æ–¹æ•™å­¸ 1&lt;iframe src=&quot;https://medium.com/media/05cea78661b5fbd4070f58aafb9380fd&quot; frameborder=0&gt;&lt;/iframe&gt; åœ¨ç•«é¢ä¸Šæ”¾å…¥ä¸€å€‹ idåç‚ºmapçš„&lt;div&gt;æ¨™ç±¤è¼‰å…¥åœ°åœ–ï¼Œé€égoogle.maps.Map()çš„æ–¹æ³•å»ºç«‹åœ°åœ–ç‰©ä»¶ã€‚ centerå®šç¾©ä¸­å¿ƒé»ç¶“ç·¯åº¦ï¼Œlat æ˜¯ç·¯åº¦ latitudeï¼Œlngæ˜¯ç¶“åº¦ longitudeï¼Œzoom æŒ‡å®šæ”¾å¤§æ¯”ä¾‹ï¼Œæ•¸å­—è¶Šå¤§ï¼Œæ”¾è¶Šå¤§ã€‚ ç·¯åº¦èˆ‡ç¶“åº¦å–å¾—(Latitude &amp; Longitude) å¯ä»¥å¾ç¶²ç«™ä¸Šç²å¾— =&gt; https://www.latlong.net/ google mapä¸Šé»æ“Šä½ç½®å¾Œ,å¾ç¶²å€ä¸­å¯ä»¥æ’ˆåˆ° å¯¦ä½œ: 1&lt;iframe src=&quot;https://medium.com/media/17bc327ac83126ed1f3b13af896226ed&quot; frameborder=0&gt;&lt;/iframe&gt; å³é‚Šçš„map2è¨­å®šç„¡æ³•æ»‘é¼ æ‹–æ›³ &lt;è£œå……&gt; mapTypeId: é¡¯ç¤ºåœ°åœ–ç¨®é¡ï¼Œå¦‚:google.maps.MapTypeId.HYBRID : è¡›æ˜Ÿ+è¡—é“åœ–google.maps.MapTypeId.ROADMAP: ä¸€èˆ¬è¡—é“åœ–google.maps.MapTypeId.SATELLITE: è¡›æ˜Ÿåœ–google.maps.MapTypeId.TERRAIN: åœ°å½¢åœ–mapTypeControl: falseè¡¨ä¸é¡¯ç¤ºåˆ‡æ›åœ°åœ–é¡å‹çš„ä½¿ç”¨è€…å…ƒä»¶scaleCont:rol: falseè¡¨ä¸é¡¯ç¤ºç¸®æ”¾åœ°åœ–å¤§å°çš„ä½¿ç”¨è€…å…ƒä»¶draggable: false ä½¿ç”¨è€…ç„¡æ³•ç”¨æ»‘é¼ é€²è¡Œæ‹–æ›³ï¼Œæ”¹è®Šåœ°åœ–çš„é¡¯ç¤ºä½ç½® åˆ©ç”¨Geocoderå–å¾—ç¶“ç·¯åº¦Google Mapæä¾›Geocoderçš„æœå‹™ï¼Œå°‡åœ°åèˆ‡ç¶“ç·¯åº¦åšå°ç…§ï¼Œè®“ä½¿ç”¨è€…å¯åˆ©ç”¨åœ°åæŸ¥è©¢ç¶“ç·¯åº¦ï¼ŒæŸ¥è©¢çµæœç‚ºJSONæ ¼å¼ã€‚ å»ºç«‹Geocoderç‰©ä»¶ new google.maps.Geocoder() ç¯„ä¾‹: 1&lt;iframe src=&quot;https://medium.com/media/ff643a563fd520906a4b07d97a87e208&quot; frameborder=0&gt;&lt;/iframe&gt; å…è²»çš„GeocoderæŸ¥è©¢æœå‹™æ¯æ—¥2500æ¬¡çš„é™åˆ¶ã€‚ åœ¨åœ°åœ–ä¸­åŠ å…¥æ¨™è¨˜(Marker) 1234567891011// å»ºç«‹ Marker ç‰©ä»¶var marker = new google.maps.Marker({position: latlng, // æ¨™è¨˜çš„ä½ç½®map: mymap, // æ¨™è¨˜è¦æ”¾çš„åœ°åœ–title: åœ°å // æ»‘é¼ ç§»åˆ°æ¨™è¨˜ä¸Šé¢æ™‚é¡¯ç¤ºçš„æ–‡å­—}); ç¯„ä¾‹: ç²å–å„ç¸£å¸‚ç´«å¤–ç·šå¼·åº¦ 1&lt;iframe src=&quot;https://medium.com/media/070d7b016b6e9a9d8c78b4dcce8bd85a&quot; frameborder=0&gt;&lt;/iframe&gt; WGS84æ˜¯ç¶“ç·¯åº¦åº§æ¨™çš„ä¸€ç¨®ï¼ŒGoogle Mapsä¹Ÿæ˜¯æ¡ç”¨WGS84ï¼Œä½†æ˜¯æ ¼å¼æ¡ç”¨çš„æ˜¯ç´”æ•¸å­—æ ¼å¼ã€‚WGS84ä»¥è³‡æ–™ä¸­èŠ±è“®ç¸£ç‚ºä¾‹ WGS84ç¶“ç·¯åº¦æ ¼å¼é™¤äº†åº¦ä¹‹å¤–é‚„æœ‰åˆ†ã€ç§’ï¼Œä¸‰è€…ä¹‹é–“ä»¥é€—é»éš”é–‹ï¼Œå…¶ä¸­åˆ†ã€ç§’éƒ½æ˜¯å…­åé€²ä½ï¼Œè‹¥è¦å°‡ä¸Šè¿°WGS84ç¶“ç·¯åº¦æ ¼å¼è½‰æ›æˆåé€²ä½ï¼Œæ‰èƒ½å°‡ç¶“ç·¯åº¦ç”¨æ–¼Google Mapsï¼Œæ¡ä»¥ä¸‹ä½œæ³•: JSçš„split()æ–¹æ³•åˆ†å‰²å­—ä¸²ï¼Œå°‡&quot;23,58,30&quot;ä»¥é€—è™Ÿç‚ºåˆ†éš”ç¬¦split(',')ï¼Œåˆ†å‰²æˆ3å€‹æ•¸å­—çš„é™£åˆ—:['23', '58','30'] å¾ŒçºŒè½‰æˆå­—ä¸²é™£åˆ—é€²è¡Œæ›ç®—ã€‚ 123lat = 23 + // åº¦58 / 60 // 1åº¦ = 60åˆ†30 / 3600 // 1åº¦ = 60åˆ† = 3600ç§’ æ›´æ›åœ–æ¨™åœ¨å»ºç«‹Makerç‰©ä»¶ä¸­æ–°å¢ä¸€å€‹iconå±¬æ€§ã€‚ 1234567891011121314var marker = new google.maps.Marker({position: latlng, // æ¨™è¨˜çš„ä½ç½®map: mymap, // æ¨™è¨˜è¦æ”¾çš„åœ°åœ–// æ»‘é¼ ç§»åˆ°æ¨™è¨˜ä¸Šé¢æ™‚é¡¯ç¤ºçš„æ–‡å­—title: this.SiteName+','+this.County+',ç´«å¤–ç·šæŒ‡æ•¸'+this.UVI,label: uvi.toString() , // å°‡ UV æŒ‡æ•¸æ•¸å€¼è½‰å›å­—ä¸² // æ›´æ›åœ–æ¨™icon: 'http://maps.google.com/mapfiles/ms/micons/sunny.png'}); ç›¸é—œæ•™å­¸æ–‡ Google Maps Embed APIå•Ÿç”¨åˆ°Google API æœå‹™é é¢çš„è³‡è¨Šä¸»é ï¼Œé¸æ“‡Map Embed APIï¼Œé€²å…¥å¾Œé»é¸å•Ÿç”¨ã€‚ ç”±Google Mapsç¶²ç«™å–å¾—åµŒå…¥å¼åœ°åœ–ï¼Œé¸æ“‡è¦çš„åœ°é»å¾Œï¼Œé»é¸å·¦é‚Šçš„é¸å–®ï¼Œæ‰¾åˆ°åµŒå…¥åœ°åœ–çš„ä½ç½®ã€‚ é»é¸â€åµŒå…¥åœ°åœ–â€ï¼Œè¤‡è£½&lt;ifram&gt;æ¨™ç±¤å…§çš„URLï¼Œè²¼åˆ°&lt;body&gt;å…§å³å¯é¡¯ç¤ºã€‚ ç¯„ä¾‹: 1&lt;iframe src=&quot;https://medium.com/media/2bac1b3f4d13d998f09954ce323f5829&quot; frameborder=0&gt;&lt;/iframe&gt; å¯ä»¥æ¡ç”¨è‡ªè¨‚åµŒå…¥å¼åœ°åœ–1&lt;iframe src=&quot;https://medium.com/media/3e66a90d33c7a67197589b7dbfd5c6a4&quot; frameborder=0&gt;&lt;/iframe&gt; ä¸Šè¿°çš„codeå¯ç²å¾—ä¸€æ¨£çµæœã€‚ place:ä¸€ç­è¡¨ç¤ºä½ç½®çš„åœ°åœ–ï¼Œéœ€ç”¨åƒæ•¸ q æŒ‡å®šè¦é¡¯ç¤ºçš„ä½ç½®ã€‚ä½ç½®å­—ä¸²ä¸­è‹¥æœ‰ç©ºç™½(å¦‚è‹±æ–‡åœ°å)ï¼Œé ˆæ”¹ç”¨ + è™Ÿä»£æ›¿ã€‚å¦å¤–ï¼ŒURLä¸­ä¸åŒåƒæ•¸è¦ç”¨&amp; éš”é–‹ï¼Œpalceä¹‹å¾Œçš„åƒæ•¸ç„¡ä¸€å®šé †åºã€‚ view:å–®ç´”æª¢è¦–åœ°åœ–ï¼Œç„¡å…¶ä»–æ¨™ç¤ºï¼Œéœ€ç”¨centerã€zoomä¾†æ§åˆ¶ï¼Œcenterå…§çš„åƒæ•¸å‰å¾Œåˆ†åˆ¥ç‚º: ç·¯åº¦ã€ç¶“åº¦ï¼Œä»¥é€—é»åˆ†é–‹ã€‚ maptypeæŒ‡å®šåœ°åœ–é¡å‹ï¼Œå¦‚statellite(è¡›æ˜Ÿåœ–)ã€roadmap(è¡—é“åœ–;ç‚ºé è¨­)ã€‚ åƒæ•¸zoo=0æ™‚ï¼Œè¡¨ç¤ºå°‡å…¨ä¸–ç•Œçš„åœ°åœ–ç´å…¥ä¸€å€‹åœ–å¡Šä¸­ï¼Œæ•¸å­—æ¯å¢åŠ 1ï¼Œæ©«å‘åŠç¸±å‘å„æ”¾å¤§2ï¼Œå¦‚zoo=2 æ™‚ï¼Œæ¯å€‹åœ–å¡Šå°±æ˜¯1/16å¤§å°çš„å…¨çƒåœ°åœ–ã€‚ directions: é¡¯ç¤ºè·¯ç·šï¼Œè‡³å°‘éœ€ç”¨originã€destinationåƒæ•¸ï¼Œå…¶é¤˜å¦‚waypointã€modeã€avoidç­‰ç‚ºé¸æ“‡æ€§çš„åƒæ•¸ã€‚ origin: æŒ‡å®šèµ·é»destination: æŒ‡å®šçµ‚é»waypoints: ä¸­é–“ç¶“éçš„è·¯ç·šmode: æŒ‡å®šäº¤é€šæ–¹å¼avoid: é¿é–‹æ–¹å¼ ç¯„ä¾‹: 1&lt;iframe src=&quot;https://medium.com/media/ee8fc0cb51e3fc30570a1cea1db28996&quot; frameborder=0&gt;&lt;/iframe&gt; èµ·é»åç¨±å¾Œé¢å¯å¤šåŠ ä¸€å€‹éƒµéå€è™Ÿçš„åƒæ•¸ï¼Œå¯ä»¥ä½¿å®šä½æ›´ç²¾ç¢ºï¼Œå¦‚ä¸Šé¢çš„70449ï¼Œè‹¥ç¶“éå¤šå€‹åœ°é»(waypoints)ï¼Œå½¼æ­¤ç”¨ | ç¬¦è™Ÿåˆ†é–‹ã€‚ searchæœå°‹æ¨¡å¼ï¼Œä¾‹å¦‚æœå°‹æŸåœ°é¤å»³ã€å•†å®¶ï¼ŒåŒæ¨£ç”¨ q åšåƒæ•¸æŒ‡å®šã€‚ streetviewè¡—æ™¯æ¨¡å¼ï¼Œå¿…é ˆlocationæŒ‡å®šç¶“ç·¯åº¦ï¼Œå¦‚ä¸€å€‹é¡é ­çœ‹ä¸–ç•Œï¼Œæœ‰å¹¾å€‹å¯é¸ç”¨åƒæ•¸ï¼Œä¸åŒåƒæ•¸ä¸€æ¨£ç”¨â€ &amp; â€œ éš”é–‹ã€‚ ä»¥ä¸‹ä¸‰å€‹åƒæ•¸éƒ½ç”¨è§’åº¦(æ•¸å­—)è¡¨ç¤ºheading: é¡é ­æœå‘å“ªå€‹æ–¹å‘ï¼ŒåŒ—é‚Šç‚º0åº¦ï¼Œé †æ™‚é‡å¢åŠ pitch: æŒ‡å®šä»°è§’ï¼Œæ°´å¹³ç‚º0ï¼Œå‘ä¸Šç‚ºä¸Šï¼Œå‘ä¸‹ç‚ºè² fov: æŒ‡å®šè¦–é‡å¯¬åº¦ï¼ŒæŒ‡å®šç¯„åœ 10~110ï¼Œé è¨­ç‚º90 1&lt;iframe src=&quot;https://medium.com/media/1e483a375d3aaaf44c8279f65d21ca95&quot; frameborder=0&gt;&lt;/iframe&gt; Google Static Maps APIè‹¥ä¸æƒ³ä½¿ç”¨&lt;ifram&gt;æ¨™ç±¤ï¼Œå¯æ”¹ç”¨éœæ…‹åœ°åœ–(Static Maps)ã€‚ å¦‚ä½•ä½¿ç”¨? å®˜ç¶²æœ‰è©³ç´°èªªæ˜ å»ºç«‹&lt;img&gt;æ¨™ç±¤è¼‰å…¥ç¶²é çš„éœæ…‹åœ°åœ–ï¼Œå°‡srcå±¬æ€§è¨­ç‚ºAPIçš„URLï¼Œä¸¦åŠ ä¸Šé©ç•¶åƒæ•¸ã€‚ åŸºæœ¬çš„åƒæ•¸å¦‚centerã€zoomä¹‹å¤–ï¼Œé‚„æœ‰å…¶ä»–é¸ç”¨åƒæ•¸å¯èª¿æ•´ã€‚ format: å½±åƒæª”é¡å‹ï¼Œé è¨­ç‚ºpngï¼Œå¯è¨­ç‚ºpng32ã€gifã€jpgã€‚å¦‚æœè¦è¼ƒå¤§çš„åœ–æª”ï¼Œå¯åˆ©ç”¨format=jpg æ¸›å°‘æª”æ¡ˆå¤§å°ã€‚maptype: satellite(è¡›æ˜Ÿåœ–)ã€hybrid(è¡›æ˜Ÿ+åœ°å+è·¯å)ã€terrian(åœ°å½¢åœ–)ã€roadmap(è¡—æ™¯åœ–ï¼Œç‚ºé è¨­)ã€‚size: æŒ‡å®šåœ°åœ–å¤§å°ï¼Œé è¨­ç‚º1ï¼Œä¾‹å¦‚: size=100x100ï¼Œå³å›å‚³100x100å¤§å°çš„åœ°åœ–ã€‚scale: æŒ‡å®šåœ–åƒæ”¾å¤§çš„æ¯”ä¾‹(å¤šå°‘åƒç´ è¡¨ç¤º)ï¼Œå¦‚size=100x100&amp;scale=2ï¼Œæœƒå›å‚³200x200å¤§å°çš„åœ°åœ–ã€‚visible: æŒ‡å®šè¦å‡ºç¾åœ¨åœ°åœ–ä¸Šçš„åœ°æ¨™ï¼Œä½¿ç”¨æ­¤åƒæ•¸å¯çœç•¥zoomï¼Œè‹¥è¦æŒ‡å®šå¤šå€‹åœ°æ¨™ï¼Œå¯ç”¨ | ç¬¦è™Ÿåˆ†é–‹ã€‚ 1&lt;iframe src=&quot;https://medium.com/media/95b73953bc9683c317ac1a4aaa0df0c4&quot; frameborder=0&gt;&lt;/iframe&gt; Tip: å…è²»Google Static Mapæœ€å¤§åªæœƒå›å‚³640x640å¤§å°ï¼Œè‹¥è¨­scale=2å¯å¾—1280x1280å¤§å°çš„åœ°åœ– è‡ªè¨‚åœ°åœ–æ¨£å¼åœ¨éœæ…‹åœ°åœ–ä¸­ï¼Œå¯åˆ©ç”¨styleåƒæ•¸æŒ‡å®šåœ°åœ–æ¨£å¼ï¼Œå¤šå€‹åƒæ•¸ç”¨|éš”é–‹ã€‚ &amp;style=åƒæ•¸:åƒæ•¸å€¼ å¯é¸åƒæ•¸: hue: è¨­å®šåœ°åœ–è‰²èª¿(RGB)ï¼Œåƒæ•¸æ ¼å¼0xRRGGBBï¼Œå¦‚è¦ç´…è‰²çš„è©±:0xFF0000lightness: è¨­å®šåœ°åœ–äº®åº¦ï¼Œæ•¸å€¼ç¯„åœ: -100(å…¨é»‘)100(å…¨ç™½)saturation: è¨­å®šåœ°åœ–é£½å’Œåº¦ï¼Œæ•¸å€¼ç¯„åœ: -100(é£½å’Œåº¦æœ€å°)100(é£½å’Œåº¦æœ€å¤§) 1&lt;iframe src=&quot;https://medium.com/media/1dfb9d18d0e9fbd18bdde42f8a8f5fe2&quot; frameborder=0&gt;&lt;/iframe&gt; ç¯„ä¾‹: åœ¨åœ°åœ–ä¸ŠåŠ ä¸Šmarker(æ¨™è¨˜)æˆ‘å€‘é‚„å¯ä»¥åœ¨åŠ ä¸Šæ¨™è¨˜ï¼Œæ”¾å…¥éœæ…‹åœ°åœ–ã€‚èªæ³•æ ¼å¼å¦‚ä¸‹:markers=size:value|color:value|label:value|åœ°é» åœ°é»(å¿…è¦åƒæ•¸): åœ°é»å¯ä½¿ç”¨åœ°åæˆ–ç¶“ç·¯åº¦ï¼Œè‹¥æœ‰å¤šå€‹åœ°é»å¯ç”¨|åˆ†é–‹ size: markerçš„å¤§å°ï¼Œå¯è¨­ç‚º tinyã€smallã€midï¼Œé è¨­ç‚ºnormal(æœ€å¤§)ã€‚color: markerçš„é¡è‰²ï¼Œå¯ä½¿ç”¨0xRRGGBBæ ¼å¼æˆ–æ˜¯é è¨­çš„é¡è‰²å(blackã€whiteã€brownã€greenã€orangeã€purpleã€redã€yellowã€white)label: é¡¯ç¤ºmarkerä¸­çš„è‹±æ–‡å­—(å¤§å¯«)æˆ–æ•¸å­—(0~9)ã€‚ å¯¦ä½œ: é«˜é›„å¸‚ç©ºæ°£æ±™æŸ“æŒ‡æ¨™ åˆ°æ”¿åºœé–‹æ”¾è³‡æ–™å¹³å°ç²å–JSONè³‡æ–™ 1&lt;iframe src=&quot;https://medium.com/media/5b0f3ce5c9c226b40c559c02328a12f0&quot; frameborder=0&gt;&lt;/iframe&gt; ç¨‹å¼çµæœå¦‚ä¸Šåœ–(ç«Ÿç„¶ä¸æ˜¯ç´…è‰²çš„ï¼ŒçœŸä»¤äººé©šè¨XD)ã€‚ åœ¨JSONæ ¼å¼ä¸­ï¼ŒPM2.5åŒ…å«å°æ•¸é»ï¼Œæ‰€ä»¥ä¸ä½¿ç”¨object.attr(ç‰©ä»¶.å±¬æ€§)çš„æ–¹å¼è®€å–ï¼Œæ”¹æ¡object [&quot;attr&quot;]çš„æ–¹æ³•è®€å–å€¼ï¼Œå±¬æ€§åä¸€å®šè¦ç”¨[]æ‹¬èµ·ä¾†ï¼Œé¡ä¼¼å­˜å–é™£åˆ—å…ƒç´ ã€‚","link":"2019/07/19/Javascript/google_map/"},{"title":"[JavaScript] Date&amp; Timer","text":"å‰è¨€å®šæ™‚å™¨å’Œå€’æ•¸è¨ˆæ™‚å™¨æ‰€ç”¨åˆ°: Date()ã€ setTimeout()å’ŒsetInterval()é€™å¹¾å€‹æ–¹æ³•ä¾†å®Œæˆï¼Œç®—æ˜¯è »å¸¸ç”¨åˆ°çš„ã€‚ Date()Date()æ˜¯JavaScript åŸç”Ÿçš„æ™‚é–“æ–¹æ³•ï¼Œå®ƒä»¥åœ‹éš›æ¨™æº–æ™‚é–“(UTC)1970å¹´1æœˆ1æ—¥00:00:00ä½œç‚ºæ™‚é–“èµ·é»ï¼Œå–®ä½ç‚ºæ¯«ç§’ã€‚ å–å¾—ç•¶å‰æ™‚é–“çš„æ–¹æ³•:å¯ä»¥ä½œç‚ºä¸€èˆ¬å‡½æ•¸ç›´æ¥å‘¼å«ï¼Œå›å‚³ç•¶å‰æ™‚é–“ 1console.log(Date()); // Mon May 13 2019 09:32:21 GMT+0800 (å°åŒ—æ¨™æº–æ™‚é–“) å³ä½¿å¸¶æœ‰åƒæ•¸ï¼ŒDateä½œç‚ºæ™®é€šå‡½æ•¸ä½¿ç”¨æ™‚ï¼Œè¿”å›çš„é‚„æ˜¯ç•¶å‰æ™‚é–“ 1console.log(Date(2019,5,13)); // Mon May 13 2019 09:32:21 GMT+0800 (å°åŒ—æ¨™æº–æ™‚é–“ new æ–¹æ³•é€énew æ–¹æ³•è³¦å€¼çµ¦ä¸€è®Šæ•¸ï¼Œé€éè®Šæ•¸å–å¾—ç•¶å‰æ™‚é–“ï¼Œ è¿”å›çš„æ˜¯å­—ä¸²ã€‚ 123var nowTime = new Date();console.log(nowTime); // Mon May 13 2019 09:32:21 GMT+0800 (å°åŒ—æ¨™æº–æ™‚é–“) Date()æ–¹æ³•å¯æ¥å—å¤šç¨®æ ¼å¼åƒæ•¸ï¼Œå›å‚³ä¸€å€‹è©²åƒæ•¸å°æ‡‰çš„æ™‚é–“ 123456789101112131415// å‚æ•°ç‚ºæ™‚é–“é›¶é»é–‹å§‹è¨ˆç®—çš„æ¯«ç§’æ•°var nowTime = new Date(1378218728000)console.log(nowTime); // Tue Sep 03 2013 22:32:08 GMT+0800 (CST)// å‚æ•°ç‚ºæ—¥æœŸå­—ä¸²var nowTime = new Date('January 6, 2013');console.log(nowTime); // Sun Jan 06 2013 00:00:00 GMT+0800 (å°åŒ—æ¨™æº–æ™‚é–“)// å‚æ•°ç‚ºå¤šå€‹æ•´æ•°å€¼ï¼Œ// ä»£è¡¨å¹´ã€æœˆã€æ—¥ã€å°æ™‚ã€åˆ†é˜ã€ç§’ã€æ¯«ç§’var nowTime = new Date(2013, 0, 1, 0, 0, 0, 0)console.log(nowTime); // Tue Jan 01 2013 00:00:00 GMT+0800 (CST) Dateæ–¹æ³•ä½¿ç”¨å‡½æ•¸çš„åƒæ•¸ï¼Œæœ‰å¹¾é»è¦æ³¨æ„: åªè¦æ˜¯èƒ½è¢«Date.parse()è§£æçš„å­—ä¸²ï¼Œéƒ½å¯ä»¥ç•¶ä½œåƒæ•¸ ä»¥ä¸‹è¿”å›çš„éƒ½æ˜¯åŒä¸€å€‹æ™‚é–“ã€‚ 1234567891011new Date('2019-5-13')new Date('2019/5/13')new Date('05/13/2019')new Date('2019-May-13')new Date('May, 15, 2019')new Date('May 15, 2019')new Date('May, 15, 2019')new Date('May 15, 2019')new Date('15 May 2019')new Date('15, May, 2019')// Mon May15 2019 09:32:21 GMT+0800 åƒæ•¸ç‚ºå¹´ã€æœˆã€æ—¥ç­‰å¤šå€‹æ•´æ•¸æ™‚ï¼Œå¹´å’Œæœˆæ˜¯ä¸èƒ½çœç•¥çš„ï¼Œå…¶ä»–åƒæ•¸éƒ½å¯ä»¥çœç•¥çš„ã€‚ä¹Ÿå°±æ˜¯èªªï¼Œè‡³å°‘éœ€è¦å…©å€‹åƒæ•¸ï¼Œå› ç‚ºå¦‚æœåªä½¿ç”¨â€œå¹´â€é€™ä¸€å€‹åƒæ•¸ï¼ŒDateæœƒå°‡èª¤ç‚ºæ¯«ç§’æ•¸ã€‚ ä¸‹é¢ç¨‹å¼ç¢¼ä¸­ï¼Œ2013è¢«è§£é‡‹ç‚ºæ¯«ç§’æ•¸ï¼Œè€Œä¸æ˜¯å¹´ä»½ 12new Date(2013)// Thu Jan 01 1970 08:00:02 GMT+0800 ä¸‹é¢ç¯„ä¾‹è¿”å›çš„éƒ½æ˜¯2013å¹´1æœˆ1æ—¥é›¶é» 12345678new Date(2013, 0)// Tue Jan 01 2013 00:00:00 GMT+0800 (CST)new Date(2013, 0, 1)// Tue Jan 01 2013 00:00:00 GMT+0800 (CST)new Date(2013, 0, 1, 0)// Tue Jan 01 2013 00:00:00 GMT+0800 (CST)new Date(2013, 0, 1, 0, 0, 0, 0)// Tue Jan 01 2013 00:00:00 GMT+0800 (CST) é‡è¦çš„åƒæ•¸å–å€¼ç¯„åœï¼Œéœ€ç‰¹åˆ¥æ³¨æ„æœˆä»½è¨ˆç®—çš„èµ·å§‹é»æ˜¯0 å¹´ï¼šä½¿ç”¨å››ä½æ•¸å¹´ä»½ï¼Œæ¯”å¦‚2000ã€‚å¦‚æœå¯«æˆå…©ä½æ•¸æˆ–å€‹ä½æ•¸ï¼Œå‰‡åŠ ä¸Š1900ï¼Œå³10ä»£è¡¨1910å¹´ã€‚å¦‚æœæ˜¯è² æ•¸ï¼Œè¡¨ç¤ºå…¬å…ƒå‰ã€‚æœˆï¼š0è¡¨ç¤ºä¸€æœˆï¼Œä¾æ¬¡é¡æ¨ï¼Œ11è¡¨ç¤º12æœˆã€‚æ—¥ï¼š1åˆ°31ã€‚å°æ™‚ï¼š0åˆ°23ã€‚åˆ†é˜ï¼š0åˆ°59ã€‚ç§’ï¼š0åˆ°59æ¯«ç§’ï¼š0åˆ°999 åƒæ•¸å¦‚æœè¶…å‡ºäº†æ­£å¸¸ç¯„åœï¼Œæœƒè¢«è‡ªå‹•æ›ç®—12345678910111213new Date(2013, 15)// Tue Apr 01 2014 00:00:00 GMT+0800 new Date(2013, 0, 0)// Mon Dec 31 2012 00:00:00 GMT+0800// æ—¥æœŸè¨­ç‚º0ï¼Œè¡¨ä¸Šå€‹æœˆçš„æœ€å¾Œä¸€å¤©åƒæ•¸é‚„å¯ä»¥ä½¿ç”¨è² æ•¸ï¼Œè¡¨ç¤ºæ‰£å»çš„æ™‚é–“new Date(2013, -1)// Sat Dec 01 2012 00:00:00 GMT+0800 new Date(2013, 0, -1)// Sun Dec 30 2012 00:00:00 GMT+0800 get()é™¤ä¸Šè¿°æ–¹æ³•ï¼Œé‚„å¯ä»¥é€éä¸€ç³»åˆ—getæ–¹æ³•ï¼Œç²å–ç‰¹å®šæ™‚é–“ï¼Œ ä¸”è¿”å›çš„éƒ½æ˜¯*æ•´æ•¸**: getTime()ï¼šè¿”å›ç•¶å‰æ™‚é–“è·é›¢1970å¹´1æœˆ1æ—¥00:00:00çš„æ¯«ç§’æ•¸getDate()ï¼šè¿”å›ç•¶å‰æ™‚é–“å°æ‡‰æ¯å€‹æœˆçš„å¹¾è™Ÿï¼ˆå¾1é–‹å§‹ï¼‰ã€‚getDay()ï¼šè¿”å›æ˜ŸæœŸå¹¾ï¼Œæ˜ŸæœŸæ—¥ç‚º0ï¼Œæ˜ŸæœŸä¸€ç‚º1ï¼Œä»¥æ­¤é¡æ¨ã€‚getFullYear()ï¼šè¿”å›å››ä½çš„å¹´ä»½ã€‚getMonth()ï¼šè¿”å›æœˆä»½ï¼ˆ0è¡¨ç¤º1æœˆï¼Œ11è¡¨ç¤º12æœˆï¼‰ã€‚getHours()ï¼šè¿”å›å°æ™‚ï¼ˆ0-23ï¼‰ã€‚getMilliseconds()ï¼šè¿”å›æ¯«ç§’ï¼ˆ0-999ï¼‰ã€‚getMinutes()ï¼šè¿”å›åˆ†é˜ï¼ˆ0-59ï¼‰ã€‚getSeconds()ï¼šè¿”å›ç§’ï¼ˆ0-59ï¼‰ã€‚ ç¯„ä¾‹: 1&lt;iframe src=&quot;https://medium.com/media/b98d1fb2ab2415601ae8fd733e890dde&quot; frameborder=0&gt;&lt;/iframe&gt; æ™‚é–“è¨­ç½®çš„æ–¹æ³•set()ä¸€ç³»åˆ—set*æ–¹æ³•ï¼Œç”¨ä¾†è¨­ç½®ç•¶å‰æ™‚é–“ã€‚ setDate(date)ï¼šè¨­ç½®ç•¶å‰æ™‚é–“å°æ‡‰çš„æ¯å€‹æœˆçš„å¹¾è™Ÿï¼ˆ1-31ï¼‰ï¼Œè¿”å›æ”¹è®Šå¾Œæ™‚é–“(æ¯«ç§’)ã€‚setFullYear(year)ï¼šè¨­ç½®å››ä½å¹´ä»½ã€‚setHours(hour)ï¼šè¨­ç½®å°æ™‚ï¼ˆ0-23ï¼‰ã€‚setMilliseconds()ï¼šè¨­ç½®æ¯«ç§’ï¼ˆ0-999ï¼‰ã€‚setMinutes(min)ï¼šè¨­ç½®åˆ†é˜ï¼ˆ0-59ï¼‰ã€‚setMonth(month)ï¼šè¨­ç½®æœˆä»½ï¼ˆ0-11ï¼‰ã€‚setSeconds(sec)ï¼šè¨­ç½®ç§’ï¼ˆ0-59ï¼‰ã€‚setTime(milliseconds)ï¼šè¨­ç½®æ¯«ç§’æ™‚é–“ã€‚ TimerJavaScriptæä¾›å®šæ™‚çš„æ–¹æ³•ï¼Œå¯ä»¥è¨­ç½®å®šæ™‚å™¨ã€‚ setTimeout()setTimeout()ç”¨ä¾†æŒ‡å®šæŸå€‹å‡½æ•¸æˆ–æŸæ®µcodeåœ¨å¤šå°‘æ¯«ç§’ä¹‹å¾ŒåŸ·è¡Œã€‚var timer = setTimeout(function|code, delay); setTimeout()å‡½æ•¸æ¥å—å…©å€‹åƒæ•¸ï¼Œç¬¬ä¸€å€‹åƒæ•¸function|codeæ˜¯å°‡è¦å»¶é²åŸ·è¡Œçš„å‡½æ•¸åç¨±æˆ–ä¸€æ®µcodeï¼Œç¬¬äºŒå€‹åƒæ•¸delayæ˜¯å»¶é²åŸ·è¡Œçš„æ¯«ç§’æ•¸ã€‚ ç¬¬äºŒå€‹åƒæ•¸å¦‚æœçœç•¥ï¼Œå‰‡é»˜èªç‚º0ã€‚ 12345function test() { console.log(2);}setTimeout(test, 3000); // 3ç§’å¾ŒåŸ·è¡Œï¼Œè¼¸å‡º2 clearTimeout()å–æ¶ˆsetTimeout()è¨­çš„å®šæ™‚å™¨ã€‚ setInterval()setInterval()å‡½æ•¸çš„ç”¨æ³•èˆ‡setTimeout()å®Œå…¨ä¸€è‡´ï¼Œå·®åˆ¥åœ¨æ–¼setInterval()å¯ä»¥ç„¡é™æ¬¡çš„è¨­ç½®å®šæ™‚å™¨åŸ·è¡Œã€‚ 1var timer = setInterval(function|code, delay) clearInterval()å–æ¶ˆsetInterval()è¨­çš„å®šæ™‚å™¨ã€‚ setInterval()å¯ä»¥ç„¡é™æ¬¡çš„è¨­ç½®å®šæ™‚å™¨ï¼Œæ‰€ä»¥setInterval()æœ‰é‡è¤‡è¨­ç½®çš„å•é¡Œã€‚ 1&lt;iframe src=&quot;https://medium.com/media/d515060fcf7a2e27e7d7b4c74e49227c&quot; frameborder=0&gt;&lt;/iframe&gt; ä¸Šè¿°çš„codeæœƒé‡åˆ°é»æ“Šå…©æ¬¡startéˆ•æ™‚ï¼Œindex+1çš„æ™‚é–“æœƒåŠ å¿«ï¼Œé»stopéˆ•ç„¡æ³•åœæ­¢çš„ç‹€æ³ã€‚ è§£æ±ºè¾¦æ³•æ˜¯è¨­ç½®ifæ¢ä»¶åˆ¤æ–·: 1&lt;iframe src=&quot;https://medium.com/media/b04f24f869d003a1dd15a0dcc7acfa1d&quot; frameborder=0&gt;&lt;/iframe&gt; å°‡åœæ­¢æ™‚é˜çš„å‡½æ•¸åœ¨å¾Œé¢æ·»åŠ timer=nullï¼Œè¡¨æ™‚é˜ç‹€æ…‹ç‚ºé—œé–‰ï¼Œä¸¦ä¸”åœ¨é»æ“Šäº‹ä»¶å‡½æ•¸å…§çš„æ™‚é˜è¨­ç½®ï¼Œå¤šæ·»åŠ ifæ¢ä»¶åˆ¤æ–·ï¼Œç¢ºå®šæ™‚é˜ç‹€æ…‹ç‚ºnullæ‰èƒ½é–‹å•Ÿæ™‚é˜ï¼Œè§£æ±ºé‡è¤‡è¨­ç½®çš„å•é¡Œã€‚ å¯¦ä½œä¸€å€‹å€’æ•¸è¨ˆæ™‚å™¨1&lt;iframe src=&quot;https://medium.com/media/c8c8068fc7c9b32c16d657964c6133a8&quot; frameborder=0&gt;&lt;/iframe&gt; é€éå–å¾—ç•¶å‰æ™‚é–“ï¼Œä»¥åŠè¨­ç½®çµæŸæ™‚é–“å…©è€…ä¹‹é–“çš„å·®è·ï¼Œé…åˆsetInterval()ä¾†å®Œæˆã€‚åƒè€ƒä¾†æº1 åƒè€ƒä¾†æº2","link":"2019/07/13/Javascript/datatime/"},{"title":"[JavaScript] ES6 Syntax","text":"å‰è¨€ç­†è¨˜ä¸€ä¸‹é€™é™£å­å­¸çš„ä¸€äº› ES6 èªæ³• template literalï¼ˆæ¨¡ç‰ˆå­—ä¸²ï¼‰æ¨¡æ¿å­—ç¬¦ä¸²ä½¿ç”¨åå¼•è™Ÿ(``)ä¾†ä»£æ›¿æ™®é€šå­—ç¬¦ä¸²ä¸­çš„ç”¨é›™å¼•è™Ÿå’Œå–®å¼•è™Ÿã€‚æ¨¡æ¿å­—ç¬¦ä¸²å¯ä»¥åŒ…å«ç‰¹å®šèªæ³•ï¼ˆ${expression}ï¼‰çš„ä½”ä½ç¬¦ã€‚â€“MDN ä½¿ç”¨æ¨¡ç‰ˆå­—ä¸²å¯ä»¥è®“ code ç”¨æ›´å„ªé›…çš„æ–¹å¼ä¾†è¡¨ç¤ºï¼Œä»¥ä¸‹åšæ¯”è¼ƒã€‚ å‚³çµ±å­—ä¸²æ‹¼æ¥ 1234567const name = &quot;Bob&quot;;const lastName = &quot;sanders&quot;;const age = 25;const arr = document.querySelector(&quot;#test&quot;);const dialog = &quot;My name is &quot; + name + &quot;&quot; + lastName + &quot;. And I'm &quot; + age + &quot; years old&quot;; æ¨¡ç‰ˆå­—ä¸²å¯«æ³•ï¼Œçœç•¥è¨±å¤š â€œ + â€œ è™Ÿï¼Œ${}å…§å¯æ”¾å…¥è®Šæ•¸ 1const dialog = My name is ${name} ${lastName}.And I'm ${age} years old; é™¤æ­¤ä¹‹å¤–ï¼Œé‚„å¯ä»¥å¥—ç”¨æ¨™ç±¤ï¼Œå¯ä»¥ 1arr.innerHTML = `&lt;h1&gt; My name is ${name} &lt;/h1&gt;`; // è¼¸å‡º å…·&lt;h1&gt;æ¨™ç±¤ç‰¹æ€§çš„æ–‡å­— Destructure(è§£æ§‹)ES6 å…è¨±æŒ‰ç…§ä¸€å®šè¦å‰‡ï¼Œå¾é™£åˆ—å’Œç‰©ä»¶(object)ä¸­æå–å€¼ï¼Œå°è®Šæ•¸é€²è¡Œè³¦å€¼ï¼Œé€™è¢«ç¨±ä½œè§£æ§‹ã€‚ç¯„ä¾‹åƒè€ƒä¾†æº: MDN é™£åˆ—çš„è§£æ§‹è³¦å€¼ å¯ä»¥å¾é™£åˆ—ä¸­æå–å€¼ï¼ŒæŒ‰ç…§å°æ‡‰ä½ç½®ï¼Œå°è®Šæ•¸è³¦å€¼ã€‚ 12345678910111213ES5 let a = 1; let b = 2; let c = 3;** ES6 let [a, b, c] = [1, 2, 3]; // è®Šæ•¸è²æ˜ä¸¦è³¦å€¼æ™‚çš„è§£æ§‹ var foo = [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;]; var [one, two, three] = foo; console.log(one, two, three); // &quot;one&quot; å°é™£åˆ—ä½¿ç”¨åµŒå¥—çš„æ–¹å¼é€²è¡Œè§£æ§‹12let [foo, [[bar], baz]] = [1, [[2], 3]];console.log(foo, bar, baz); // 1 2 3 å¿½ç•¥æŸäº›è¿”å›å€¼12345let [, , third] = [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;];console.log(third); // &quot;baz&quot;let [x, , y] = [1, 2, 3];console.log(x, y); // 1 3 è§£æä¸€å€‹å¾å‡½æ•¸è¿”å›çš„é™£åˆ—1234567function f() { return [1, 2];}var a, b;[a, b] = f();console.log(a, b); // 1 2 äº¤æ›è®Šæ•¸12345var a = 1;var b = 3;[a, b] = [b, a];console.log(a, b); // 3 1 ç•¶è§£æ§‹ä¸€å€‹é™£åˆ—æ™‚ï¼Œå¯ä»¥ä½¿ç”¨å‰©é¤˜æ¨¡å¼ï¼Œå°‡é™£åˆ—å‰©é¤˜éƒ¨åˆ†è³¦å€¼çµ¦ä¸€å€‹è®Šæ•¸ 123let [head, â€¦tail] = [1, 2, 3, 4];console.log(head) // 1console.log(tail) // [2, 3, 4] å¦‚æœè§£æ§‹ä¸æˆåŠŸï¼Œè®Šæ•¸çš„å€¼å°±ç­‰æ–¼ undefined 12let { foo } = { bar: &quot;baz&quot; };console.log(foo); // undefined ç‰©ä»¶çš„è§£æ§‹è³¦å€¼é™¤äº†ä¸Šè¿°çš„é™£åˆ—ï¼Œé‚„å¯ä»¥è§£æ§‹ç‰©ä»¶èµ·æ‰‹å¼ 123let { foo, bar } = { foo: &quot;aaa&quot;, bar: &quot;bbb&quot; };console.log(foo); // &quot;aaa&quot;console.log(bar); // &quot;bbb&quot; é€šéè§£æ§‹ï¼Œç„¡éœ€è²æ˜å³å¯è³¦å€¼ä¸€å€‹è®Šæ•¸ 12345({ a, b } = { a: 1, b: 2 });console.log(a, b); // 1 2// å¦‚åŒvar { a, b } = { a: 1, b: 2 }; å¾ä¸€å€‹å°åƒä¸­æå–è®Šæ•¸ä¸¦è³¦å€¼çµ¦å’Œç‰©ä»¶å±¬æ€§åä¸åŒçš„æ–°çš„è®Šæ•¸å 1234let o = { p: 42, q: true };let { p, q } = o;console.log(p, q); // 42 true ç‰©ä»¶å¯è³¦å€¼çµ¦å¦ä¸€ç‰©ä»¶ç›¸åŒçš„å±¬æ€§å 123456789101112131415const person = { name: &quot;Tom&quot;, lastName: &quot;Chen&quot;, age: 25};// ES5const name = person.name;const lastName = person.lastName;// ES6const { name: firstName, age: old } = person;console.log(firstName, old); // Tom 25 é»˜èªå€¼: ç‰©ä»¶çš„è®Šæ•¸å¯ä»¥å…ˆè³¦äºˆé»˜èªå€¼ã€‚ç•¶è¦æå–çš„ç‰©ä»¶æ²’æœ‰å°æ‡‰çš„å±¬æ€§ï¼Œè®Šæ•¸å°±è¢«è³¦äºˆé»˜èªå€¼ã€‚ 123456789var { a = 10, b = 5 } = { a: 3 };console.log(a); // 3console.log(b); // 5// ä¹Ÿå¯ä»¥çµ¦æ–°çš„è®Šé‡å‘½åä¸¦æä¾›é»˜èªå€¼var { a: aa = 10, b: bb = 5 } = { a: 3 };console.log(aaã„, bb); // 3 5 ç‰©ä»¶çš„è§£æ§‹èˆ‡é™£åˆ—æœ‰ä¸€å€‹é‡è¦çš„ä¸åŒ: é™£åˆ—çš„å…ƒç´ æ˜¯æŒ‰æ¬¡åºæ’åˆ—çš„ï¼Œè®Šæ•¸çš„å–å€¼ç”±å®ƒçš„ä½ç½®æ±ºå®šï¼›è€Œç‰©ä»¶çš„å±¬æ€§æ²’æœ‰æ¬¡åºï¼Œè®Šæ•¸å¿…é ˆèˆ‡å±¬æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¢ºçš„å€¼ã€‚ ç‰©ä»¶å¯ä½œç‚ºå‡½æ•¸åƒæ•¸å‚³å…¥åŒå€‹å±¬æ€§åçš„å€¼1234567891011const person = { name: &quot;Tom&quot;, lastName:&quot;Chen&quot;, age:25}function sayName({*name*, *lastName*}) { console.log(name, lastName); // Tom Chen}sayName(person); ä»¥å‡½æ•¸å›å‚³ä¸€å€‹ç‰©ä»¶ï¼Œå°‡å±¬æ€§åè³¦å€¼çµ¦å¦ä¸€å€‹ç‰©ä»¶ç›¸åŒçš„å±¬æ€§å 12345678910function getPerson() { return { name1: &quot;Bob&quot;, lastName: &quot;Chen&quot;, age: 21 };}const { name1, age1 } = getPerson();console.log(name1, age1); // Bob 21 Arrow function(ç®­é ­å‡½å¼)ES6 å…è¨±ä½¿ç”¨ç®­é ­(=&gt;)å®šç¾©å‡½æ•¸ï¼Œç®­é ­å‡½æ•¸çœç•¥äº† ES5 çš„ function é€™å€‹é—œéµå­—ï¼Œè®“ code æ›´ç°¡æ½”ã€‚ åƒæ•¸å¦‚æœåªæœ‰ä¸€å€‹å¯ä»¥çœç•¥å°æ‹¬è™Ÿã€‚å‡½æ•¸åŸ·è¡Œçš„ code åŸ·è¡Œåªæœ‰ä¸€è¡Œå¯çœç•¥ return 123456var f = v =&gt; v;// ç­‰åŒvar f = function(v) { return v;}; å¦‚æœç®­é ­å‡½æ•¸ä¸éœ€è¦åƒæ•¸æˆ–éœ€è¦å¤šå€‹åƒæ•¸ï¼Œå°±ä½¿ç”¨ä¸€å€‹åœ“æ‹¬è™Ÿä»£è¡¨åƒæ•¸éƒ¨åˆ†ã€‚ 1234567891011var f = () =&gt; 5;// ç­‰åŒvar f = function() { return 5;};var sum = (num1, num2) =&gt; num1 + num2;// ç­‰åŒvar sum = function(num1, num2) { return num1 + num2;}; å¦‚æœç®­é ­å‡½æ•¸ç›´æ¥è¿”å›ä¸€å€‹object(ç‰©ä»¶)ï¼Œå¿…é ˆåœ¨å°åƒå¤–é¢åŠ ä¸Š{}å¤§æ‹¬è™Ÿ åƒæ•¸ç‚ºä¸€ç‰©ä»¶æ™‚ const obj = () =&gt; ({ name: &quot;bob&quot;, age: 25 }); const person = obj(); console.log(person); {name: &quot;bob&quot;, age: 25} [Top](#6bb4) [template literal](#b48d) [Destructure](#14e7) [Arrow function](#ade1) [rest&amp;spread operator](#c6e9) [bottom](#1fdc)rest operator(å…¶é¤˜é‹ç®—å­)&amp;spread operator(å±•é–‹é‹ç®—å­)åœ¨ ES6 ä¸­ï¼Œæ–°å¢äº†ä¸€å€‹ â€œâ€¦â€ çš„é—œéµå­—ï¼Œ â€œâ€¦â€ çš„é—œéµå­—ä¾æ“šä½¿ç”¨æ™‚æ©Ÿé»çš„ä¸åŒè€ŒåŠŸèƒ½æœ‰æ‰€ä¸åŒï¼Œä¸»è¦åˆ†ç‚º: rest operator(å…¶é¤˜é‹ç®—å­)&amp;spread operator(å±•é–‹é‹ç®—å­) æ‘˜è¦ å…©å€‹é‹ç®—å­ç¬¦è™Ÿéƒ½æ˜¯ä¸‰å€‹é»(â€¦) éƒ½æ˜¯åœ¨é™£åˆ—å€¼é‹ç®— ä¸€å€‹æ˜¯å±•é–‹é™£åˆ—ä¸­çš„å€¼ï¼Œä¸€å€‹æ˜¯é›†åˆå…¶é¤˜çš„å€¼æˆç‚ºé™£åˆ— spread operator(å±•é–‹é‹ç®—å­)æŠŠä¸€å€‹é™£åˆ—å±•é–‹æˆå€‹åˆ¥çš„å€¼ï¼Œå°±æ˜¯æŠŠåŸå…ˆé™£åˆ—å…§çš„å€¼ä¸€å€‹ä¸€å€‹æ‹†è§£ã€‚å±•é–‹é‹ç®—å­æœ‰å¹¾å€‹ç‰¹æ€§: æ·ºå±¤è¤‡è£½: é™£åˆ—èˆ‡ç‰©ä»¶ç›¸åŒéƒ½æœ‰è‘—å‚³åƒè€ƒçš„ç‰¹æ€§ã€‚è‹¥æŠŠé™£åˆ—è³¦äºˆåˆ°å¦ä¸€å€‹å€¼ä¸Šï¼Œä¿®æ”¹å…¶ä¸­ä¸€å€‹å¦ä¸€å€‹ä¹Ÿæœƒè·Ÿè‘—è®Šå‹•(é€£å¸¶è²¬ä»» XD)ã€‚ å‚³çµ±æ–¹æ³•123456const random = [&quot;txt1&quot;, &quot;text2&quot;];const more = random;more[0] = &quot;new&quot;;console.log(random); [&quot;new&quot;, &quot;text2&quot;] // æ”¹è®ŠåŸå§‹é™£åˆ—console.log(more); [&quot;new&quot;, &quot;text2&quot;] ###å±•é–‹é‹ç®—å­å¯«æ³•: 1234567891011const numbers = [1, 2, 3, 4];const value = [...numbers];console.log(value); [1, 2, 3, 4]value.push(5);console.log(numbers); [1, 2, 3, 4] // ä¸æ”¹è®ŠåŸå§‹é™£åˆ—console.log(value); [1, 2, 3, 4, 5] é¡é™£åˆ—è½‰æˆç´”é™£åˆ—JavaScript ä¸­æœ‰è¨±å¤šæŠ«è‘—é™£åˆ—çš„å¤–çš®ï¼Œä½†å»ä¸èƒ½ä½¿ç”¨é™£åˆ—æ–¹æ³•è™•ç†çš„é¡é™£åˆ—ã€‚ 12345const list = document.querySelectorAll(&quot;.list-item&quot;);console.log(list); // NodeList(3) [li.list-item, li.list-item.special, li.list-item]const special = list.filter(item =&gt; item.classList.contains(&quot;special&quot;)); // NodeList(3) ç„¡æ³•ç”¨é™£åˆ—è™•ç†console.log(special); // list.filter is not a function ä½¿ç”¨å±•é–‹é‹ç®—å­å°‡é¡é™£åˆ—è½‰æˆç´”é™£åˆ—1234567const list = [...document.querySelectorAll(&quot;.list-item&quot;)];console.log(list); // [li.list-item, li.list-item.special, li.list-item]// éæ¿¾å‡ºæœ‰specialé€™å€‹ classåç¨±çš„å…ƒç´ const special = list.filter(item =&gt; item.classList.contains(&quot;special&quot;));console.log(special); // [li.list-item.special] åˆä½µé™£åˆ—å‚³çµ±å…©å€‹é™£åˆ—åˆä½µç”¨ concat() 1234567// åˆä½µé™£åˆ— å‚³çµ±å¯«æ³•const names = [&quot;John&quot;, &quot;Peter&quot;, &quot;Bob&quot;];const moreName = [&quot;Susy&quot;, ...names];const namesAll = names.concat(moreName);console.log(even); // [&quot;John&quot;, &quot;Peter&quot;, &quot;Bob&quot;, &quot;Ken&quot;, &quot;Susy&quot;, &quot;John&quot;, &quot;Peter&quot;, &quot;Bob&quot;] å±•é–‹é‹ç®—å­å¯ä»¥æœ‰ä¸€æ¨£çš„æ•ˆæœï¼Œcode çš„å¯è®€æ€§æ›´é«˜12345const names = [&quot;John&quot;, &quot;Peter&quot;, &quot;Bob&quot;];const moreName = [&quot;Susy&quot;, ...names];const namesAll1 = [...names, ...moreName];console.log(namesAll1); // [&quot;John&quot;, &quot;Peter&quot;, &quot;Bob&quot;, Susy&quot;,&quot;John&quot;, &quot;Peter&quot;, &quot;Bob&quot;] è½‰è®Šå­—ä¸²ç‚ºå–®å­—ä¸²çš„é™£åˆ—123const letters = &quot;hello there&quot;;const arr = [â€¦letters];console.log(arr); ['h', 'e', 'l', 'l', 'o', ' ', 't', 'h', 'e', 'r', 'e'] å¯ä»¥ç”¨ä¾†æŠŠæŸå€‹é™£åˆ—å±•é–‹ï¼Œç„¶å¾Œå‚³å…¥å‡½å¼ä½œç‚ºå‚³å…¥åƒæ•¸å€¼123456789function add(num1, num2, num3, num4) { let result = num1 + num2 + num3 + num4; return result; }// const result = add(numbers); // 1,2,3,4 undefined undefined undefined// æŠŠé™£åˆ—ä¸­çš„å…ƒç´ å–å‡ºä¸¦ç›¸åŠ const result = add(...numbers); // 10console.log(result); å…¶é¤˜é‹ç®—å­ï¼ˆrest operatorï¼‰å…¶é¤˜é‹ç®—å­—æœƒæŠŠè¼¸å…¥å‡½å¼ä¸­çš„åƒæ•¸å€¼è®Šæˆé™£åˆ—çš„å½¢å¼ï¼ŒFunction æ¥å—çš„åƒæ•¸æ•¸é‡ä¸å›ºå®šï¼Œå¯åœ¨åƒæ•¸å‰é¢åŠ ä¸Šâ€ â€¦ â€ï¼Œä¸¦ä½¿ç”¨é™£åˆ—çš„æ–¹æ³•(forEachã€mapã€reduce) ã€‚ 123456789101112function sum(...args) { console.log(args); // (5) [1, 2, 3, 4, 5] let result = args .filter(item =&gt; item &gt; 3) .reduce((acc, curr) =&gt; { acc += curr; return acc; }, 0); console.log(result); }sum(1, 2, 3, 4, 5); // 9 å¦‚æœ function æœ‰å…ˆå®šç¾©åˆ¥çš„åƒæ•¸ï¼Œå°±æœƒå°‡å‚³å…¥çš„åƒæ•¸å€¼å…ˆçµ¦å®šç¾©å¥½çš„åƒæ•¸ï¼Œå‰©ä¸‹çš„å°±å…¨éƒ¨å¡«å…¥å…¶é¤˜åƒæ•¸ã€‚ 1234567function restArr(x, y, ...others) { console.log(&quot;x&quot;,x); // xï¼š 1 console.log(&quot;y&quot;,y); // yï¼š 2 console.log(&quot;others&quot;,others); // othersï¼š [3, 4, 5]}restArr(1, 2, 3, 4, 5); å…¶é¤˜åƒæ•¸å¿…é ˆæ˜¯å‡½å¼å…§åƒæ•¸çš„ã€Œæœ€å¾Œä¸€å€‹ã€ã€‚å¦‚æœæ”¾åœ¨å…¶é¤˜çš„åƒæ•¸å‰ï¼Œå°±æœƒç”¢ç”ŸéŒ¯èª¤ã€‚åƒè€ƒä¾†æº: ECMAScript 6 å…¥é–€ ã€ MDN","link":"2019/07/29/Javascript/javascript_ES6/"},{"title":"[Mac&#x2F;Linux] Command LineæŒ‡ä»¤","text":"æœ¬ç¯‡ç´€éŒ„Macå¸¸ç”¨çš„æŒ‡ä»¤(æœƒæŒçºŒæ›´æ–°) åŸºæœ¬æŒ‡ä»¤åŸºæœ¬æŸ¥è©¢man æŒ‡ä»¤åŠ ä¸Šè¦æŸ¥è©¢çš„æŒ‡ä»¤ä¾†é–±è®€ç·šä¸Šæ‰‹å†Šï¼Œé€éç·šä¸Šæ‰‹å†Šå¯ä»¥æŸ¥è©¢ç›¸é—œæŒ‡ä»¤æˆ–æ˜¯å‡½æ•¸çš„åç¨±ï¼Œå¦‚æŸ¥è©¢lsçš„ç”¨æ³•ï¼š 1man ls æŒ‰ä¸‹éµç›¤çš„qéµå³å¯é›¢é–‹ã€‚ æŸ¥è©¢éš±è—çš„æª”æ¡ˆ-aå¯é…åˆå…¶ä»–æŒ‡ä»¤ä¾†æŸ¥è©¢éš±è—çš„æª”æ¡ˆï¼Œå¦‚ï¼š 1ls -a ä¸Šåœ–å¯çœ‹å‡ºï¼Œæˆ‘é›»è…¦çš„å®¶(home)ç›®éŒ„åº•ä¸‹æœ‰è¨±å¤šéš±è—çš„æª”æ¡ˆ å»ºç«‹ç©ºæª”æ¡ˆåŸ·è¡Œtouchä¸¦æŒ‡å®šæª”æ¡ˆåç¨±ï¼Œç•¶æŒ‡å®šçš„æª”æ¡ˆä¸å­˜åœ¨æ™‚ï¼Œtouchå°±æœƒè‡ªå‹•å»ºç«‹ä¸€å€‹ç©ºæª”æ¡ˆï¼Œä¸¦å°‡æª”æ¡ˆçš„æ™‚é–“è¨­å®šç‚ºç›®å‰çš„æ™‚é–“touch è³‡æ–™è£œé½Šå¦‚æœæ–‡ä»¶åç¨±éé•·ï¼Œæˆ–æ˜¯æŒ‡ä»¤åªè¨˜å¾—ä¸€éƒ¨åˆ†çš„æƒ…å½¢ï¼ŒæŒ‰ä¸‹éµç›¤ä¸Šçš„Tabéµï¼Œæœƒçœ‹åˆ°ç›¸ä¼¼æª”åçš„å€™é¸åå–®ã€‚è€Œå¦‚æœåªæœ‰ä¸€å€‹ï¼Œå®ƒå°±æœƒè‡ªå‹•å…¨éƒ¨è£œä¸Šã€‚ è³‡æ–™å¤¾ç§»é™¤è³‡æ–™å¤¾å¾Œé¢åŠ å€‹ -r çš„æŒ‡ä»¤ï¼Œå°±æ˜¯æŒ‡è¦ç§»é™¤è³‡æ–™å¤¾ä»¥åŠè£¡é¢å…¨éƒ¨å…§å®¹ï¼Œ-rç‚º--recuriseçš„ç¸®å¯«ã€‚ 1rm -r è³‡æ–™å¤¾ è¤‡è£½è³‡æ–™å¤¾1cp -r èˆŠè³‡æ–™å¤¾åç¨± æ–°è³‡æ–™å¤¾åç¨± ç¯„ä¾‹å‡è¨­æ¡Œé¢æœ‰ä¸€æ–°å»ºçš„æ–™å¤¾testï¼Œå…§å«test.txtçš„æª”æ¡ˆå¦‚æœè¦è¤‡è£½testè³‡æ–™å¤¾ï¼Œä¸¦å‘½åæ–°è³‡æ–™å¤¾ç‚ºtest_folderï¼ŒåŸ·è¡Œ 1cp -r test test_folder ä¸Šé¢å¯çœ‹å‡ºæˆåŠŸè¤‡è£½æ–°çš„åç‚ºtest_folderçš„è³‡æ–™å¤¾ã€‚ è‹¥æ”¹æˆå­˜åœ¨å…©å€‹è³‡æ–™å¤¾ï¼Œåˆ†åˆ¥ç‚ºtestã€test_folderï¼Œå°‡test_folderè¤‡è£½åˆ°testè³‡æ–™å¤¾å…§ï¼Œå¯ä»¥åŸ·è¡Œ 1cp -r test_folder/ test ä¸Šåœ–å¯ç™¼ç¾æˆåŠŸå°‡test_folderè¤‡è£½åˆ°testè³‡æ–™å¤¾ï¼ è¬ç”¨å­—å…ƒè¬ç”¨å­—å…ƒçš„å¥½è™•æ˜¯å¯ä»¥ç¯€çœçš„æ™‚é–“ï¼Œå…¶ä¸­*ä»£è¡¨â€0å€‹åˆ°ç„¡çª®å¤šå€‹â€ä»»æ„å­—å…ƒï¼Œåˆ©ç”¨*æ­é…bashå…¶ä»–å¸¸ç”¨æŒ‡ä»¤ï¼Œè™•ç†è³‡æ–™å°±æ›´æ–¹ä¾¿å¿«é€Ÿï¼æ›´å¤šè¬ç”¨å­—å…ƒçš„èªªæ˜æŸ¥é–±é³¥å“¥çš„æ–‡ç« ã€‚ *å¸¸ç”¨æ–¼åˆªé™¤å¤§é‡åŒå€‹å‰¯æª”åçš„æª”æ¡ˆï¼Œå¦‚æŸå€‹å°ˆæ¡ˆè³‡æ–™å¤¾è£¡çš„.logæª”ï¼Œå°±å¯ä»¥ä½¿ç”¨*.logä¸€æ¬¡åˆªé™¤æ‰€æœ‰logæª”ã€‚ è¬ç”¨å­—å…ƒ*åœ¨åšæª”æ¡ˆæˆ–è³‡æ–™å¤¾åˆªé™¤æ™‚è¦ç‰¹åˆ¥å°å¿ƒï¼Œæœ‰æ™‚æœƒèª¤åˆªéƒ¨åˆ†ç›¸åŒçš„æª”æ¡ˆåŠè³‡æ–™å¤¾ã€‚ èª¤åˆªçš„æƒ…æ³ç›®å‰æ¡Œé¢ä¸Šçš„è³‡æ–™å¤¾æœ‰testã€test1_folderã€test_folderä¸‰å€‹è³‡æ–™å¤¾ï¼Œä»¥åŠtest.txtã€test1.txtå…©å€‹.txtæª”æ¡ˆç›®æ¨™è¦åˆªé™¤ä¸‰å€‹è³‡æ–™å¤¾ï¼Œå¦‚æœæ¡è¬ç”¨å­—å…ƒçš„åšæ³•æœƒæ˜¯ 1rm -r test* åŸ·è¡Œä¸Šè¿°å‘½ä»¤æœƒé€£åŒtest.txtã€test1.txtå…©å€‹.txtæª”æ¡ˆåˆªé™¤ï¼æ‰€ä»¥ä½¿ç”¨è¬ç”¨å­—å…ƒåšåˆªé™¤è¦ç‰¹åˆ¥å°å¿ƒï¼ ç§»é™¤æ–‡ä»¶1rm æª”æ¡ˆå æ‹·è²æª”æ¡ˆ1cp è¢«æ‹·è²çš„æª”æ¡ˆå æ‹·è²å¾Œçš„æª”æ¡ˆå å¦‚: æ‹·è² hi.txt åˆ° hello.txt 1cp hi.txt hello.txt æª”æ¡ˆçš„ç§»å‹•èˆ‡æ›´åæ›´å1mv åŸæª”æ¡ˆå æ–°æª”æ¡ˆå ç¯„ä¾‹æ›´åå‰:æ›´åå¾Œ: å°‡ hi.txt æ”¹ç‚º hello.txt 1mv hi.txt hello.txt ç§»å‹•1mv æª”æ¡ˆè·¯å¾‘ ç›®éŒ„è·¯å¾‘ å»ºç«‹ç›®éŒ„1mkdir ç›®éŒ„å æª¢è¦–ç•¶å‰ç›®éŒ„çš„æ–‡ä»¶1ls é¡¯ç¤ºç›®éŒ„ä¸‹æª”æ¡ˆ12ls -al : é¡¯ç¤ºç›®éŒ„ä¸‹éš±è—çš„æª”æ¡ˆls -l : é¡¯ç¤ºç›®éŒ„ä¸‹æª”æ¡ˆ ä¸Šåœ–çš„è¨Šæ¯åŒ…å«:æ¬Šé™ã€æª”æ¡ˆå¤§å°ã€ä¸Šæ¬¡ä¿®æ”¹æ™‚é–“ç­‰ é€€å›ä¸Šä¸€å±¤1cd .. å›åˆ°æ ¹ç›®éŒ„1cd ~ é–‹å•Ÿæ ¹ç›®éŒ„è³‡æ–™å¤¾1open / é–‹å•Ÿç•¶ä¸‹é›»è…¦ä½¿ç”¨è€…æ ¹ç›®éŒ„1open ~ é–‹å•Ÿç•¶å‰ç›®éŒ„1open . é¡¯ç¤ºç•¶å‰ä½¿ç”¨è€…ç›®éŒ„åç¨±1echo ~ é¡¯ç¤ºç•¶å‰ç›®éŒ„çš„è·¯å¾‘1pwd åˆ‡æ›è·¯å¾‘1cd ç›®æ¨™è³‡æ–™å¤¾ åˆ‡æ›è‡³æ ¹ç›®éŒ„1cd / æ ¹ç›®éŒ„V.S.å®¶(home)ç›®éŒ„Mac æ‰“é–‹Terminalé è¨­è·¯å¾‘æœƒåœ¨å®¶ç›®éŒ„ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°~çš„ç¬¦è™Ÿè‹¥æƒ³çŸ¥é“ç•¶å‰ç›®éŒ„çš„è·¯å¾‘ï¼Œå¯è¼¸å…¥pwd å¦‚æœæ˜¯è¦åˆ‡æ›è‡³æ ¹ç›®éŒ„ï¼Œå¯ä»¥è¼¸å…¥æŒ‡ä»¤: cd /ï¼Œåˆ‡æ›è·¯å¾‘è‡³æ ¹ç›®éŒ„å¤¾ä¸‹ã€‚ è¼¸å…¥lså¯æŸ¥çœ‹ç•¶å‰ç›®éŒ„ä¸‹æ‰€æœ‰çš„æª”æ¡ˆ å¦‚æœè¦å›åˆ°å®¶ç›®éŒ„ï¼Œè¼¸å…¥æŒ‡ä»¤cd ~ è§€å¿µé‡æ¸…æ³¢æµªç·šï½ç­‰æ–¼é›»è…¦çš„åå­—ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œcd ~èˆ‡cd /Users/tsungyuchenå…©è€…ç›¸ç­‰ çµ•å°è·¯å¾‘ V.S. ç›¸å°è·¯å¾‘çµ•å°è·¯å¾‘å»¶çºŒå‰›æ‰ä¸Šä¸€å€‹å•é¡Œï¼Œcd /Users/tsungyuchen è·¯å¾‘ç‚ºæ–œç·šé–‹é ­ï¼Œè¡¨ç¤ºå¾æ ¹ç›®éŒ„é–‹å§‹ã€‚ ç›¸å°è·¯å¾‘å¾ç›®å‰æ‰€åœ¨ç›®éŒ„é–‹å§‹ç®—èµ· é€²éšæŒ‡ä»¤æ‰¾æŒ‡å®šçš„æª”æ¡ˆfind æŒ‡ä»¤å¯åœ¨åŸ·è¡ŒæŒ‡ä»¤çš„ç›®éŒ„ä¸‹åšæœå°‹ï¼Œæ‰¾æŒ‡å®šçš„æª”æ¡ˆï¼Œä¸¦å›å‚³è·¯å¾‘ã€‚ åœ¨ç›®å‰çš„ç›®éŒ„åº•ä¸‹ä¸åˆ†è‹±æ–‡å¤§å°å¯«1find -iname è¦è¢«æœå°‹çš„æª”æ¡ˆåç¨± å€åˆ†è‹±æ–‡å¤§å°å¯«1find -name è¦è¢«æœå°‹çš„æª”æ¡ˆåç¨± åœ¨ /home ç›®éŒ„åº•ä¸‹ï¼Œæ‰¾å°‹æª”æ¡ˆä¸åˆ†è‹±æ–‡å¤§å°å¯«1find -iname è¦è¢«æœå°‹çš„æª”æ¡ˆåç¨± å€åˆ†è‹±æ–‡å¤§å°å¯«1find -name è¦è¢«æœå°‹çš„æª”æ¡ˆåç¨± å¿«é€ŸæŸ¥çœ‹æŸå€‹æª”æ¡ˆçš„å…§å®¹1cat è¦æŸ¥çœ‹çš„æª”æ¡ˆå…§å®¹ å…¶å¯¦catæŒ‡ä»¤åŸå§‹åŠŸèƒ½æ˜¯å°‡æª”æ¡ˆåˆä½µï¼Œå†é¡¯ç¤ºåˆä½µå¾Œçš„æª”æ¡ˆï¼Œå¦‚æœcatå¾Œæ–¹åªæ¥ä¸€å€‹æª”æ¡ˆï¼Œå‰‡ç›´æ¥é¡¯ç¤ºè©²æª”æ¡ˆå…§å®¹ã€‚ æŸ¥è©¢æª”æ¡ˆå…§çš„æ–‡å­—ä¸ç”¨æ‰“é–‹æ–‡ä»¶ï¼Œå°±èƒ½æŸ¥è©¢æª”æ¡ˆå…§çš„æ–‡å­—ã€‚ 1grep &quot;è¢«æœå°‹çš„æ–‡å­—åç¨±&quot; ä½ çš„æª”æ¡ˆåç¨± å¦‚:textæª”å…§æœ‰â€helloâ€çš„æ–‡å­—å…§å®¹åŸ·è¡ŒæŒ‡ä»¤ 1grep &quot;he&quot; text.txt ä¸å€åˆ†å¤§å°å¯«çš„æ¨¡å¼æœå°‹å­—è©å‰é¢åŠ å‰ç¶´è© -i 1grep -i &quot;è¢«æœå°‹çš„æ–‡å­—åç¨±&quot; ä½ çš„æª”æ¡ˆåç¨± apt-getapt-get æ˜¯å°ˆé–€çµ¦ ubuntu, debian ç­‰ Linux ç³»çµ±ä½¿ç”¨çš„å¥—ä»¶ä¸‹è¼‰è»Ÿé«” sshå¸¸ç”¨ä¾†é ç«¯é€£ç·š å¯«å…¥1echo &quot;è¦å¯«å…¥çš„å…§å®¹&quot; &gt; è¢«å¯«å…¥çš„æª”æ¡ˆ å…¶ä¸­&gt;å¯«å…¥æ™‚æœƒè¦†è“‹åŸæœ¬æª”æ¡ˆçš„å…§å®¹é‡æ–°å¯«å…¥ã€‚ ç¯„ä¾‹(é‡æ–°è¦†è“‹):å‡è¨­ä»Šå¤©æ¡Œé¢ä¸Šæœ‰å€‹test.txtæª”ï¼ŒåŸ·è¡Œå¯«å…¥æ–¹æ³•: 1echo &quot;hello test&quot; &gt; test.txt æŸ¥çœ‹è¢«å¯«å…¥çš„æª”æ¡ˆå…§å®¹ï¼š 1cat test.txt è¦†è“‹å‰›å‰›å¯«å…¥çš„æª”æ¡ˆ 1echo &quot;hello test will be cover&quot; &gt; test.txt æŸ¥çœ‹è¢«å¯«å…¥çš„æª”æ¡ˆå…§å®¹ï¼š 1cat test.txt è‹¥è¦ä¸è¦†è“‹åŸæœ¬çš„æª”æ¡ˆï¼Œå°‡ä¸Šå€‹ç¯„ä¾‹çš„&gt;æ”¹ç‚º&gt;&gt;å³å¯ã€‚ ç¯„ä¾‹(ä¸è¦†è“‹):å¯«å…¥1echo &quot;add new test line&quot; &gt;&gt; test.txt echoè¼¸å‡ºçš„å…§å®¹æœƒæ–·è¡Œï¼Œè‹¥ä¸æƒ³æ–·è¡Œå¯ä»¥æ”¹åŸ·è¡Œprintf æŸ¥çœ‹1cat test.txt åˆä½µæª”æ¡ˆå¯ä»¥é€écatæŒ‡ä»¤å°‡æª”æ¡ˆé€²è¡Œåˆä½µé¡¯ç¤º è¼¸å‡ºåˆä½µæª”æ¡ˆ(ä¸å½±éŸ¿åŸå§‹æª”æ¡ˆ)å¦‚æœè¦å°‡å…©å€‹å…§å®¹åˆä½µè¼¸å‡ºï¼Œå¯ä½¿ç”¨cat æª”æ¡ˆ1 æª”æ¡ˆ2çš„æŒ‡ä»¤å¦‚ï¼šå»ºç«‹ä¸€å€‹åç‚ºcat.txtçš„æª”æ¡ˆèˆ‡å‰›å‰›çš„test.txté€²è¡Œåˆä½µè¼¸å‡ºã€‚ 1echo &quot;content will be concat&quot; &gt; cat.txt 1cat cat.txt è¼¸å‡ºåˆä½µçµæœ catåªæœ‰å–®ç´”è¼¸å‡ºåˆä½µçµæœï¼Œä¸¦ä¸å½±éŸ¿åŸå§‹æª”æ¡ˆå…§å®¹ å°‡åˆä½µæª”æ¡ˆå¾Œçš„æª”æ¡ˆè¼¸å‡ºæˆæ–°æª”æ¡ˆ1cat æª”æ¡ˆ1 æª”æ¡ˆ2 &gt;&gt; åˆä½µå¾Œçš„æ–°æª”æ¡ˆ åˆä½µç›®æ¨™æª”æ¡ˆï¼Œä¸¦ç”¢å‡ºåˆä½µéå¾Œçš„æ–°æª”æ¡ˆã€‚å¦‚: 1cat test.txt cat.txt &gt;&gt; cat2.txt ä¸Šåœ–ä¾‹å­ç”¢å‡ºtest.txtå’Œcat.txtåˆä½µéå¾Œçš„æ–°æª”æ¡ˆï¼Œåç‚ºcat2.txtã€‚ ç§»å‹•æª”æ¡ˆå°‡æª”æ¡ˆé€²è¡Œç§»å‹•ã€‚ 1mv ç›®æ¨™çš„çµ•å°è·¯å¾‘ ç¯„ä¾‹å‡è¨­ä»Šå¤©æ¡Œé¢æœ‰å€‹test_folderç›®æ¨™è³‡æ–™å¤¾ï¼Œè¦å°‡å‰›å‰›å»ºç«‹çš„test.txtæª”ç§»è‡³ç›®æ¨™è³‡æ–™å¤¾ã€‚ 1mv test.txt /Users/tsungyuchen/Desktop/test_folder/ è£œå……Macå¦‚ä½•æ¸…é™¤ç³»çµ±ä¸Šè¢«ä½”ç”¨çš„Port?æŸ¥è©¢ PIDå¦‚: æŸ¥è©¢ Port:3000 ç‹€æ…‹ 1sudo lsof -i:3000 æ¸…é™¤ PIDæŸ¥è©¢PIDå¾Œï¼Œæ‰¾åˆ°ä½”ç”¨è©²portå°æ‡‰çš„PID 1kill PID å¦‚å°æ‡‰PIDç‚º32952ï¼Œå‰‡: 1kill 32952 åƒè€ƒæ–‡ç« [Day22] Linux ä»‹ç´¹èˆ‡åŸºç¤æŒ‡ä»¤ [Day23] Linux é€²éšæŒ‡ä»¤","link":"2020/01/22/OS/%5BLinux%5D%20%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C/"},{"title":"[Mac&#x2F;Linux] bash shellç­†è¨˜- ç”¨shell scriptåŸ·è¡Œä½ çš„ Pythonç¨‹å¼","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 06 å‰è¨€æœ¬ç¯‡ç´€éŒ„å¦‚ä½•ç”¨shell scriptåŸ·è¡Œå¯«å¥½çš„Pythonæª”æ¡ˆã€‚ å¯¦ä½œç¯„ä¾‹å‡è¨­ä¸€å€‹æª”æ¡ˆè£¡é¢æœ‰ä¸€æ”¯ç”±Pythonæ’°å¯«çš„scriptï¼Œåç‚ºecho.pyã€‚å¦‚æœè¦åˆ©ç”¨shellå»åŸ·è¡Œecho.pyï¼Œè¨˜å¾—å…ˆæ–°å¢æª”æ¡ˆæ¬Šé™çµ¦echo.py: 1chmod u+x echo.py åŸ·è¡ŒPythonæª” 1python echo.py å°å‡ºpython printï¼Œä½†æ˜¯ç„¡æ³•ç”¨bashçš„æŒ‡ä»¤ä¾†åŸ·è¡Œã€‚ è‹¥è¦ä½¿ç”¨bashæŒ‡ä»¤ä¾†åŸ·è¡ŒPythonæª”æ¡ˆï¼Œéœ€å…ˆç¢ºèªpythonä¸»ç¨‹å¼çš„ä½ç½® 1which python å›å‚³Pythonä¸»ç¨‹å¼çš„ä½ç½® åœ¨æª”æ¡ˆå…§å®¹çš„é–‹é ­åŠ ä¸Š#!ï¼Œå¾Œé¢åŠ ä¸ŠåŸ·è¡Œä¸»ç¨‹å¼çš„æ‰€åœ¨ä½ç½® 12#!/Users/tsungyuchen/anaconda3/bin/pythonprint(&quot;python print&quot;) æ¥è‘—åŸ·è¡Œ./echo.py Hashbangæ˜¯ä¸€å€‹ç”±äº•è™Ÿ(#)å’Œé©šå˜†è™Ÿ(!)æ§‹æˆçš„å­—å…ƒï¼Œéœ€å¯«åœ¨æ–‡å­—æª”æ¡ˆçš„ç¬¬ä¸€è¡Œçš„å‰å…©å€‹å­—å…ƒï¼Œä½œæ¥­ç³»çµ±çš„ç¨‹å¼è¼‰å…¥å™¨æœƒåˆ†æHashbangå¾Œçš„å…§å®¹ï¼Œå°‡é€™äº›å…§å®¹ä½œç‚ºç›´è­¯å™¨æŒ‡ä»¤ï¼Œä¸¦å‘¼å«è©²æŒ‡ä»¤ã€‚ å¦‚: ä»¥æŒ‡ä»¤#!/bin/bashé–‹é ­çš„æª”æ¡ˆåœ¨åŸ·è¡Œæ™‚æœƒå¯¦éš›å‘¼å«ä½æ–¼/bin/bashç¨‹å¼ã€‚ ä»¥ä¸Šç¯„ä¾‹ç‚ºç°¡å–®ç”¨Shell Scriptä¾†åŸ·è¡ŒPythonç¨‹å¼ç¢¼","link":"2020/03/22/OS/%5BMac&Linux%5D%20bash%20shell%E7%AD%86%E8%A8%98-%20%E7%94%A8shell%20script%E5%9F%B7%E8%A1%8C%E4%BD%A0%E7%9A%84%20Python%E7%A8%8B%E5%BC%8F/"},{"title":"[Mac&#x2F;Linux] bash shellç­†è¨˜- æª”æ¡ˆæ¬Šé™èˆ‡ç›®éŒ„","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 04 å‰è¨€æœ¬æ–‡ç´€éŒ„å¦‚ä½•åœ¨bash shellåšæª”æ¡ˆæ¬Šé™çš„é…ç½®ã€‚ æª”æ¡ˆå…·æœ‰çš„ä¸‰ç¨®èº«ä»½Linuxæª”æ¡ˆçš„åŸºæœ¬æ¬Šé™æœ‰ä¹å€‹ï¼Œåˆ†åˆ¥æ˜¯ownerã€groupã€othersä¸‰ç¨®èº«ä»½å„æœ‰è‡ªå·±çš„readã€writeã€executeæ¬Šé™ æª”æ¡ˆæ“æœ‰è€…(user) ç¾¤çµ„(group) å…¶ä»–äºº(other) å¦‚æœå°æ‰€æœ‰é–‹å•Ÿæª”æ¡ˆæ‰€æœ‰æ¬Šé™ï¼Œé¡¯ç¤ºçš„å­—å…ƒç‚ºï¼š-rwxrwxrwxï¼Œéœ€è¦æŠŠé€™ä¹å€‹æ¬Šé™(ä¸åŒ…å«-)ï¼Œä»¥ä¸‰å€‹ç‚ºä¸€çµ„åšå€åˆ†ã€‚ ç›¸é—œæŒ‡ä»¤æŸ¥çœ‹vimæ˜¯å¦å­˜åœ¨vi æŸ¥çœ‹vimçš„è·¯å¾‘which vimæˆ–æ˜¯which is vimæˆ–whereis vim å»ºç«‹æª”æ¡ˆvim fileNameæˆ–æ˜¯vim fileName.shï¼Œ.shå¯åŠ å¯ä¸åŠ ã€‚ ç¯„ä¾‹1vim pb_do æœƒé€²å…¥vimçš„ç·¨è¼¯æ¨¡å¼ï¼Œçœ‹åˆ°æ–°å¢çš„pb_doæª”ï¼Œè¼¸å…¥echo &quot;hi!&quot;å¾Œï¼ŒåŸ·è¡Œ:wq!ä¿å­˜ä¸¦é€€å‡ºã€‚ æŸ¥çœ‹ç³»çµ±è®Šæ•¸$PATHæˆ–æ˜¯echo $PATH åŸ·è¡Œæª”æ¡ˆ1./pb_do åŸ·è¡Œä¸Šæ–¹æŒ‡ä»¤æœƒè·³å‡ºæ¬Šé™ä¸è¶³çš„è¨Šæ¯ 1sudo ./pb_do åŸ·è¡Œä¸Šæ–¹æŒ‡ä»¤æœƒè·³å‡ºsudo: ./pb_do: command not foundï¼Œè¡¨ç¤ºç„¡æ³•åŸ·è¡Œè©²æª”æ¡ˆï¼Œæ‰€ä»¥è¦æŸ¥çœ‹è©²æª”æ¡ˆå…§å®¹åˆ¤æ–·æ˜¯å¦å¯åŸ·è¡Œ 1ls -l pb_do æ‰“é–‹ç™¼è·³å‡ºçš„è¨Šæ¯åªæœ‰rã€rwï¼Œè¡¨ç¤ºæ­¤æª”æ¡ˆåªå¯è®€å–(r)ã€å¯«å…¥(w)ï¼Œè€Œæ²’æœ‰x(åŸ·è¡Œ) ä¿®æ”¹æª”æ¡ˆ/ç›®éŒ„çš„æ¬Šé™ - chmodåœ¨Linuxæˆ–å…¶ä»–é¡Unixä½œæ¥­ç³»çµ±ä¸­, æ¯å€‹æª”æ¡ˆåŠç›®éŒ„éƒ½æœƒæœ‰ä¸€å€‹æ¬Šé™, é€™å€‹æ¬Šé™æœƒå®šç¾©èª°å¯ä»¥è®€å–(r)ã€å¯«å…¥(w)åŠåŸ·è¡Œ(x) è©²æª”æ¡ˆã€‚æª”æ¡ˆæ¬Šé™çš„æ”¹è®Šéœ€ä¸‹chmodæŒ‡ä»¤ï¼Œè¨­å®šæ–¹æ³•æœ‰å…©ç¨®ï¼š æ•¸å­—é¡å‹ ç¬¦è™Ÿé¡å‹ ä¸Šä¸€å€‹pb_doçš„ä¾‹å­å¯ä»¥çœ‹åˆ°vimå¯«å…¥çš„æ–°æª”æ¡ˆæ²’æœ‰åŸ·è¡Œçš„æ¬Šé™ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹æª”æ¡ˆç›®éŒ„æ¬Šé™chmodï¼Œæ›´å¤šèªªæ˜å¯ç¿»é–±é³¥å“¥é€™ç¯‡æ–‡ç«  ç¬¦è™Ÿé¡å‹ä¿®æ”¹æª”æ¡ˆæ¬Šé™ç¯„ä¾‹ï¼š åŠ å…¥åŸ·è¡Œçš„æ¬Šé™å»¶çºŒä¸Šå€‹ä¾‹å­ï¼Œé‡å°pb_doåŠ å…¥åŸ·è¡Œçš„æ¬Šé™ 1chmod +x pb_do ä¸Šåœ–å¯ç™¼ç¾åŸæœ¬æª”æ¡ˆè³‡è¨Šåªæœ‰-rw-r--r--@è®Šæˆ-rwxr-xr-xï¼Œæ–°å¢äº†xåŸ·è¡Œæ¬Šé™ã€‚ ç¾åœ¨æ“æœ‰åŸ·è¡Œæ¬Šé™å¾Œï¼ŒåŸ·è¡Œï¼š 1./pb_do æˆåŠŸåŸ·è¡Œå‰›å‰›åŠ å…¥çš„æª”æ¡ˆï¼ ç¯„ä¾‹ï¼š ç§»é™¤åŸ·è¡Œçš„æ¬Šé™å»¶çºŒä¸Šå€‹ä¾‹å­ï¼Œé‡å°pb_doç§»é™¤åŸ·è¡Œçš„æ¬Šé™ã€‚ 1chmod -x pb_do å°‡+xæ›¿æ›æˆ-xå³å¯ç§»é™¤ å¦‚æœæª”æ¡ˆæ¬Šé™ç‚º-rwxr-xr-xè¡¨ç¤º: user(u)ï¼šuè¡¨ç¤ºæª”æ¡ˆæ“æœ‰è€…æ‰å…·æœ‰å¯è®€ã€å¯å¯«ã€å¯åŸ·è¡Œçš„æ¬Šé™ group èˆ‡ others (g/o)ï¼šè¡¨ç¤ºgroupèˆ‡otherså³å…·æœ‰å¯è®€èˆ‡åŸ·è¡Œçš„æ¬Šé™ã€‚ å†çœ‹ä¸€å€‹ä¾‹å­ï¼š åªå°æª”æ¡ˆæ“æœ‰è€…ä¿®æ”¹åŸ·è¡Œçš„æ¬Šé™1chmod u+x pb_do uè¡¨ç¤ºæª”æ¡ˆä½¿ç”¨è€… ä¿®æ”¹groupçš„æ¬Šé™1chmod g+x pb_do åŒç†å¯ä»¥æ‡‰ç”¨åœ¨æ–°å¢å¯«å…¥çš„æ¬Šé™ä¸Šï¼Œä¾‹å¦‚ 1chmod g+w pb_do åŠ å…¥wå¯«å…¥çš„æª”æ¡ˆæ¬Šé™-rwxrwxr-- ä¿®æ”¹othersåŸ·è¡Œçš„æ¬Šé™1chmod o+x pb_do åŠ å…¥oåŸ·è¡Œæª”æ¡ˆçš„æ¬Šé™-rwxrwxr-- ä¿®æ”¹æ‰€æœ‰çš„åŸ·è¡Œæ¬Šé™aè¡¨ç¤ºæ‰€æœ‰ï¼ŒæŒ‡ä»¤æ›¿æ›æˆaï¼Œä¾‹å¦‚åˆªé™¤æ‰€æœ‰èº«ä»½çš„ä½¿ç”¨æ¬Šé™ 1chmod a-x pb_do åˆªé™¤æ‰€æœ‰èº«ä»½çš„åŸ·è¡Œæ¬Šé™ æ•¸å­—é¡å‹ä¿®æ”¹æª”æ¡ˆæ¬Šé™é™¤äº†é€éç¬¦è™Ÿä¾†æ¨™ç¤ºæª”æ¡ˆæ¬Šé™ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•¸å­—ä¾†ä»£è¡¨å„å€‹æ¬Šé™ï¼Œå€‹äººæ˜¯ä¸å¤ªå–œæ­¡ç”¨æ­»èƒŒçš„ï¼Œç¨å¾®ç”¨æ¨çš„å¾ˆå¿«å°±å¯ä»¥çŸ¥é“æ•¸å­—å°æ‡‰çš„æ¬Šé™ã€‚ æ–‡ç« é–‹é ­æœ‰æåˆ°æª”æ¡ˆçš„åŸºæœ¬æ¬Šé™æœ‰ä¹å€‹ï¼Œä¸‰å€‹çœ‹ä½œä¸€çµ„ï¼Œå¦‚æœæ‹†é–‹äº†çœ‹å°±æ˜¯rwxç‚ºä¸€çµ„(rwxä¸‰å€‹æ¬Šé™éƒ½æœ‰çš„æƒ…æ³ä¸‹)ï¼Œæ•¸å­—åŠ ç¸½æ˜¯7ï¼Œä»¥äºŒé€²ä½ä¾†çœ‹çš„è©±å°±æ˜¯111ã€‚ä¾†çœ‹æ®µç¯„ä¾‹:å‡è¨­ä»Šå¤©è¦é…ç½®æª”æ¡ˆæ¬Šé™æ˜¯æª”æ¡ˆæ“æœ‰è€…å¯è®€ã€å¯«ã€åŸ·è¡Œï¼Œå…¶é¤˜å…©å€‹èº«ä»½åªé–‹æ”¾è®€ã€åŸ·è¡Œï¼Œæ‰€ä»¥è¨­å®šæ¬Šé™çš„è®Šæ›´æ™‚ï¼Œè¼¸å…¥çš„æ•¸å€¼å°±æ˜¯755ï¼Œè©³æƒ…å¦‚ä¸‹ 123owner = rwx = 4+2+1 = 7group = r-x = 4+0+1 = 5others= r-x = 4+0+1 = 5 åŸ·è¡Œä¸‹é¢æŒ‡ä»¤ 1chmod 755 pb_do è¼¸å‡ºçµæœï¼š-rwxr-xr-xä¸Šåœ–çµæœè­‰å¯¦æ•¸å€¼ä¹Ÿå¯ä»¥åšæª”æ¡ˆæ¬Šé™ç®¡ç†ã€‚ ç•¶ç„¶ä¹Ÿå¯ä»¥æŠŠä¸‰å€‹èº«ä»½çš„ä¸‰å€‹æ¬Šé™éƒ½é–‹å•Ÿï¼ŒæŒ‡ä»¤æœƒè®Šæˆ: 1chmod 777 pb_do çµæœï¼š -rwxrwxrwx ç°¡å–®æ­¸ç´æ•¸å€¼ä»£è¡¨çš„æ¬Šé™ r:4 w:2 x:1 å›é¡§ä¸€ä¸‹ï¼ŒæŒæ¡å¹¾å€‹åŸå‰‡å°±å¯ä»¥å®Œæˆé…ç½®æª”æ¡ˆæ¬Šé™å›‰ï¼ æ¯å€‹æª”æ¡ˆçš„ä¹å€‹åŸºæœ¬æ¬Šé™(ä¸‰å€‹èº«ä»½èˆ‡å„è‡ªæ“æœ‰çš„æ¬Šé™) ä¸‰å€‹å­—å…ƒçœ‹ä½œä¸€çµ„ï¼Œåˆ†åˆ¥ä»£è¡¨çš„ä¸‰å€‹èº«ä»½ ç¬¦è™Ÿé¡å‹ä¿®æ”¹æª”æ¡ˆæ¬Šé™(r/w/x) æ•¸å­—é¡å‹ä¿®æ”¹æª”æ¡ˆæ¬Šé™(ç”¨äºŒé€²ä½å»æ€è€ƒï¼Œæˆ–æ˜¯ç›´æ¥è¨˜å°æ‡‰çš„æ•¸å€¼)ã€‚ è‹¥å…§å®¹æˆ–è§€å¿µæœ‰èª¤ï¼Œæ­¡è¿åœ¨ä¸‹é¢ç•™è¨€çµ¦æˆ‘ã€‚ åƒé–±Linux çš„æª”æ¡ˆæ¬Šé™èˆ‡ç›®éŒ„é…ç½®","link":"2020/03/08/OS/%5BLinux%5D%20bash%20shell%E7%AD%86%E8%A8%98-%20%E6%AA%94%E6%A1%88%E6%AC%8A%E9%99%90%E8%88%87%E7%9B%AE%E9%8C%84%E9%85%8D%E7%BD%AE/"},{"title":"[OS] ä½œæ¥­ç³»çµ±ç­†è¨˜-Process","text":"å‰è¨€ä¸Šç¯‡æœ‰ç¨å¾®æåˆ°é—œæ–¼Processçš„åŸºæœ¬æ¦‚å¿µï¼Œæœ¬ç¯‡è¦è¿‘ä¸€æ­¥æ¢è¨Processã€‚ ä»€éº¼æ˜¯Process?ä¸­æ–‡åˆä½œã€è¡Œç¨‹ã€;ç°¡å–®ä¾†èªªï¼ŒProcesså°±æ˜¯æ­£åœ¨é‹è¡Œä¸­çš„ç¨‹å¼ã€‚ä¹Ÿå°±æ˜¯èªªï¼Œç•¶åœ¨åŸ·è¡Œçš„æª”æ¡ˆè¼‰å…¥è¨˜æ†¶é«”æ™‚ï¼Œç¨‹å¼å°±æˆç‚ºè¡Œç¨‹(Process)ã€‚ ä¸€å€‹Processä¸»è¦åŒ…å«æœ‰ï¼š Code Section(ç¨‹å¼ç¢¼ã€ç¨‹å¼å€é–“) Data Section(è³‡æ–™å€é–“) Stack(å„²å­˜æš«æ™‚æ€§è³‡æ–™) processor register Program Counter(ç¨‹å¼è¨ˆæ•¸å™¨ï¼Œæ“ºæ”¾ä¸‹ä¸€å€‹è¦åŸ·è¡Œç¨‹å¼çš„åœ°å€) Process VS. Programä¾†æ¯”è¼ƒä¸€ä¸‹å…©è€…å·®åˆ¥ Process Program ã€Œä¸»å‹•ã€å„²å­˜åœ¨ç¡¬ç¢Ÿè£¡ è¢«å‹•çš„ï¼Œè¢«å­˜åœ¨ç¡¬ç¢Ÿä¸­(ç­‰å¾…åŸ·è¡Œ) Processçš„5ç¨®ç‹€æ…‹Processæœƒéš¨è‘—ç•¶ä¸‹çš„æƒ…æ³æ”¹è®Šç‹€æ…‹ newï¼šç”¢ç”Ÿæ–°å€‹Process runningï¼šé‹è¡Œä¸­çš„Process watingï¼šç•¶æœ‰å…¶ä»–äº‹ä»¶(Event)ç™¼ç”Ÿæ™‚ï¼Œå¦‚: é€±é‚Šè¨­å‚™çš„I/Oï¼Œæœƒé€²å…¥æš«æ™‚ç­‰å¾…çš„ç‹€æ…‹ã€‚ æ³¨æ„ï¼šProcessæ­¤æ™‚é›–ç„¶é‚„åœ¨è¨˜æ†¶é«”ä¸­ï¼Œä½†ä¸åœ¨Ready Queue readyï¼š æº–å‚™å¥½è¢«åˆ†é…è‡³CPUåŸ·è¡Œã€‚ç•¶I/Oäº‹ä»¶çµæŸæˆ–åŸ·è¡ŒæœŸé–“è¢«Interruptéƒ½æœƒProcesså›åˆ°readyç‹€æ…‹ terminatedï¼šProcessåŸ·è¡ŒçµæŸ Job Queue: ç³»çµ±ä¸­çš„æ‰€æœ‰Processæ‰€å½¢æˆçš„éšŠä¼Ready Queue: æ”¾åœ¨è¨˜æ†¶é«”ä¸­å¤šå€‹Processæ‰€å½¢æˆçš„éšŠä¼ï¼Œæº–å‚™éš¨æ™‚å¯ä»¥è¢«åˆ†é…è‡³CPUå…§åŸ·è¡Œ Process Managementç•¶ç³»çµ±æœ‰å¤šå€‹Processæ™‚ï¼Œå°±è¦é€²è¡Œç®¡ç†ï¼Œè€ŒProcess Control Block (ç°¡ç¨±PCB)å°±æ˜¯ç”¨ä¾†ç®¡ç†Processã€‚æ¯å€‹Processçš†æœ‰è‡ªå·²çš„PCBï¼ŒPCBåŒ…å«ä»¥ä¸‹è³‡è¨Šï¼š Process state: Process åœ¨å“ªä¸€å€‹ç‹€æ…‹ Process ID Program counter: æŒ‡æ˜è©²Processä¸‹ä¸€å€‹è¦åŸ·è¡Œçš„æŒ‡ä»¤ä½å€ CPU registers CPU scheduling informationï¼š Processå„ªå…ˆé †åº Memory-management information Accounting informationï¼š ç”¨æ‰å¤šå°‘CPUçš„æ™‚é–“ã€ä½¿ç”¨CPUçš„æœ€å¤§æ™‚é–“é‡ I/O status information: å°šæœªå®Œæˆçš„I/O Requesté‚„æœ‰å“ªäº›ã€é‚„åœ¨I/O Queueä¸­æ’éšŠä¹‹Processçš„ç·¨è™Ÿ process scheduling (æ’ç¨‹)ç‚ºäº†è¦è®“CPUèƒ½ç™¼æ®æœ€å¤§çš„æ•ˆç›Šï¼Œéœ€è¦process schedulerä¾†æ±ºå®š å¦‚ä½•åˆ†é…å“ªå€‹processèƒ½ä½¿ç”¨CPU process scheduleråˆ†æˆä¸‰ç¨® short-term scheduler: åˆç¨±ã€CPU schedulerã€ï¼Œè² è²¬æ±ºå®šè¨˜æ†¶é«”ä¸­çš„å“ªå€‹processèƒ½æ’é€²CPUåŸ·è¡Œï¼Œæ±ºå®šçš„æ™‚é–“æ¥µçŸ­ã€‚ long-term scheduler: åˆç¨±ã€job schedulerã€ï¼Œè² è²¬æ±ºå®šç³»çµ±ä¸­å“ªäº›processèƒ½æ’é€²è¨˜æ†¶é«”ï¼Œæ§åˆ¶è¨˜æ†¶é«”å…§processçš„æ•¸é‡ï¼Œç›¸è¼ƒä¹‹ä¸‹æœ‰è¼ƒé•·çš„æ™‚é–“å¯ä»¥æ±ºå®šã€‚ä¸éé€™å€‹éç¨‹æ˜¯å–®å‘çš„ï¼Œæ„å‘³è‘—ç„¡æ³•å¾è¨˜æ†¶é«”çš„Ready medium-term scheduler: ä¿ç•™long-term scheduleråŠŸèƒ½å¤–ï¼Œé‚„å¯ä»¥å°‡æ”¾åœ¨è¨˜æ†¶é«”(Ready Queue)ä¸­çš„Processæ¬å›Disk(Job Queue)ï¼Œæ¡Swap(äº¤æ›)çš„å½¢å¼ Context Switching (å…§å®¹è½‰æ›)CPUåœ¨åŸ·è¡Œæ™‚ï¼Œåªèƒ½é‹ç”¨ä¸€å€‹processï¼Œå¦‚æœåˆ‡æ›çµ¦å¦ä¸€å€‹Processæ™‚ï¼Œé ˆå°‡èˆŠProcessçš„ç›¸é—œè³‡è¨Š (e.g.PCBå…§å®¹) å„²å­˜èµ·ä¾†ï¼Œä¸¦è¼‰å…¥æ–°Processçš„ç›¸é—œè³‡è¨Šï¼Œæ­¤éç¨‹ç¨±ã€Context Switchingã€ã€‚ å›°é›£é»åœ¨Context Switchingçš„éç¨‹ä¸­ï¼Œç³»çµ±åšçš„äº‹æ˜¯ä¸å…·æœ‰ç”Ÿç”£åŠ›çš„å·¥ä½œï¼Œæœƒæµªè²»ç³»çµ±æ•ˆèƒ½ã€‚ è§£æ³• å¢åŠ Register Set: å› ç‚ºContext Switchingçš„é€Ÿåº¦å–æ±ºçš„ç¡¬é«”æ”¯æ´ç¨‹åº¦ï¼Œæ‰€ä»¥å¢åŠ Registeræ•¸é‡ï¼Œç›¡å¯èƒ½è®“æ¯å€‹Processåˆ†åˆ°ä¸€å€‹resgister ä»¥Threadä¾†ä»£æ›¿Processï¼š å› ç‚ºæ¯å€‹Processéƒ½æœ‰å…¶ç§æœ‰çš„è³‡è¨Š(PDB)ï¼Œé€™äº›ç§æœ‰è³‡è¨Šæœƒä½”ç”¨Registerã€‚è€ŒThreadsä¹‹é–“å½¼æ­¤å¯ä»¥å…±äº«Memory Space (å¦‚ï¼šCode Section,Data Section, Open Fileâ€¦)ï¼Œç§æœ‰çš„è³‡è¨Šé‡ä¸å¤šã€‚æ‰€ä»¥é€²è¡ŒContext Switchingæ™‚ä¸é ˆå°è¨˜æ†¶é«”é€²è¡Œå¤§é‡å­˜å–ï¼Œå¯é™ä½Context Switchè² æ“”ã€‚ Scheduling Criteriaå¦‚ä½•è¡¡é‡Schedulingçš„æ•ˆèƒ½ï¼Ÿ CPU Utilization (CPUä½¿ç”¨ç‡): åœ¨CPUèŠ±çš„æ‰€æœ‰æ™‚é–“ä¸­ï¼ŒçœŸæ­£èŠ±åœ¨åŸ·è¡ŒProcessçš„æ™‚é–“å æ¯”ï¼Œå…¬å¼æœƒæ˜¯: (CPU Use Time) / (CPU Use Time + CPU Idle Time) Throughput (ç”¢èƒ½): å–®ä½æ™‚é–“æ‰€èƒ½åŸ·è¡Œå®Œçš„Processæ•¸é‡ Waiting Time (ç­‰å¾…æ™‚é–“): å¾Processå¾…åœ¨Ready Queueåˆ°è¢«æ”¾å…¥CPUåŸ·è¡Œï¼Œé€™éç¨‹ä¸­çš„ç­‰å¾…æ™‚é–“ Turnaround Time(å®Œæˆæ™‚é–“): å¾ä¸€å€‹Processåˆ°å®Œæˆå·¥ä½œæ‰€è€—è²»çš„æ™‚é–“ Response Time (åæ‡‰æ™‚é–“): å¾Processé€²å…¥ç³»çµ±ï¼Œåˆ°ç³»çµ±ç”¢ç”Ÿç¬¬ä¸€å€‹å›æ‡‰çš„æ™‚é–“ å»¶ä¼¸é–±è®€ Course 4 è¡Œç¨‹ç®¡ç†","link":"2020/03/21/OS/%5BOS%5D%20%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1%E7%AD%86%E8%A8%98-Process/"},{"title":"[ç‰©ä»¶å°å‘] å…¥é–€","text":"ä½•è¬‚ç‰©ä»¶å°å‘?Def: åœ¨æ§åˆ¶ç¨‹å¼æ™‚ï¼Œä»¥â€ç‰©ä»¶â€ä¾†åŒ…è£æ‰€æœ‰çš„é‚è¼¯è·Ÿæ“ä½œå‡è¨­æƒ…å¢ƒ:å°‡å•é¡Œæè¿°ç‚ºç‰©ä»¶ï¼Œæœ‰å…©å€‹äººåˆ†åˆ¥ç‚ºAã€Bï¼ŒAè¦å°‡é¦™è•‰æ‹¿çµ¦Bï¼Œæ•…ç‰©ä»¶æœ‰Aã€Bã€é¦™è•‰ï¼Œç‰©ä»¶ä¹Ÿæœ‰å±¬æ€§å’Œè¡Œç‚ºï¼Œå¦‚Aã€Bå’Œé¦™è•‰çš„å±¬æ€§ç‚ºå¹´é½¡ã€åå­—å’Œåƒ¹æ ¼ï¼Œè¡Œç‚ºå‰‡ç‚ºæ‰“æ‹›å‘¼ã€èµ°è·¯å’Œå‰çš®ã€‚ä»¥ç¨‹å¼ä¾†çœ‹çš„è©±å°±æœƒå¦‚ä¸Šåœ–ï¼ŒAã€Béƒ½æ˜¯â€å¯¦é«”â€ï¼Œä¸¦å±¬æ–¼â€äººâ€é€™å€‹é¡åˆ¥ï¼Œä»Šå¤©Aèˆ‡Bæ‰“æ‹›å‘¼(A.æ‰“æ‹›å‘¼())ï¼ŒAçµ¦Bé¦™è•‰(A.çµ¦äºˆ(B,é¦™è•‰)ï¼Œçµ¦äºˆçš„å‹•ä½œå‚³å…¥Bå’Œé¦™è•‰ä½œç‚ºåƒæ•¸)ï¼ŒBå»å‘¼å«é¦™è•‰.å‰çš®()ï¼Œæœ€å¾ŒBæŠŠé¦™è•‰åƒæ‰(B.åƒ(é¦™è•‰))ã€‚ æ€è€ƒé‚è¼¯æ ¹æ“šé¡åˆ¥ç”¢ç”Ÿç‰©ä»¶ï¼Œä¹Ÿå°±æ˜¯å…ˆå®šç¾©é¡åˆ¥(äººçš„æ¦‚å¿µ)ï¼Œåœ¨ä»¥äººç‚ºåŸºç¤ç”¢ç”ŸAã€Bå…©ç‰©ä»¶ï¼Œå®šç¾©å®Œé¡åˆ¥åŠç‰©ä»¶ä¹‹å¾Œï¼Œå†ä¾†åŸ·è¡Œæ“ä½œæ–¹æ³•ï¼Œå¦‚å‘¼å«Aã€Bçš„ç‰©ä»¶å±¬æ€§æˆ–æ–¹æ³•ä¾†é€²è¡Œäº’å‹• é¡åˆ¥(class)ä¸€å€‹æŠ½è±¡æ¦‚å¿µï¼Œå®šç¾©ä¸€ä»¶äº‹ç‰©çš„æŠ½è±¡ç‰¹é»ï¼ŒåŒ…å«äº‹ç‰©çš„å±¬æ€§å’Œæ“ä½œè¡Œç‚ºï¼Œç„¡å¯¦é«”(Instance)æ¦‚å¿µã€‚ ç‰©ä»¶(Object)ç‰©ä»¶æ˜¯é¡åˆ¥çš„å¯¦ä¾‹ï¼Œä¹Ÿçœ‹çš„åˆ°ã€æ‘¸çš„åˆ°ï¼Œå±¬æ–¼å‹•æ…‹ï¼Œç‹€æ…‹æœƒéš¨æ™‚æ”¹è®Šï¼Œä½†æ¶æ§‹èˆ‡è¡Œç‚ºä¸æœƒæ”¹è®Šã€‚ æ¡ˆä¾‹: ç¥¨å‹™ç³»çµ±æœ‰ä¸€å¼µç¥¨ä½œç‚ºä¸€ç‰©ä»¶ï¼Œå…¶ä¸­ç¥¨çš„å±¬æ€§å°±åŒ…å«ç›¸é—œçš„ç¥¨å‹™è³‡è¨Šï¼Œå¦‚ç¥¨ç¨®ã€åƒ¹æ ¼ã€æ‰‹çºŒè²»ç­‰ã€‚å¦å¤–ç¥¨çš„æ–¹æ³•æŒ‡çš„æ˜¯å¦‚ä½•æ“ä½œé€™å¼µç¥¨(ç‰©ä»¶)ï¼Œå¦‚è³¼ç¥¨ã€é€€ç¥¨ç­‰ç­‰ã€‚ ä¾†çœ‹ä¾‹å­: ä¸€èˆ¬å¯«æ³•12345678910111213//// ticketçš„å±¬æ€§let ticket_price = 100;let ticket_type = &quot;student&quot;;const ticket_discount = 0.3;const ticket_fee = 30;// ticketçš„æ–¹æ³•Function get_ticket_price(price, type,discount,fee){ Return ticket_price * ticket_discount + ticket_fee }Function get_ticket_description(price,type,discount, fee){ console.log(â€œé€™å¼µç¥¨æ˜¯â€+type+â€ç¥¨ æœ‰â€+discount*10+â€çš„æŠ˜æ‰£è·Ÿâ€+fee+â€çš„â¼¿çºŒè²»â€)} é€²éšå¯«æ³•(å°‡ç‰©ä»¶é€²è¡Œæ‰“åŒ…)123456789101112131415//// ticketçš„å±¬æ€§var ticket = { price = 100, type = &quot;student&quot;, discount = 0.3, fee = 30}// ticketçš„æ–¹æ³•Function get_ticket_price(ticket){ Return ticket.price * ticket.discount + ticket.fee }Function get_ticket_description(ticket){ console.log(â€œé€™å¼µç¥¨æ˜¯â€+ticket.type+â€ç¥¨ æœ‰â€+ticket.discount*10+â€çš„æŠ˜æ‰£è·Ÿâ€+ticket.fee+â€çš„â¼¿çºŒè²»â€)} ç‰©ä»¶å°å‘å¯«æ³•é–‹å§‹è‘—æ‰‹å¯¦ä½œä¹‹å‰ï¼Œéœ€å…ˆç¢ºå®šå¹¾ä»¶äº‹: ç‰©ä»¶æœ‰å“ªäº›å±¬æ€§ ç‰©ä»¶æœ‰å“ªäº›å¯â½¤â½…æ³• å¦‚ä½•ã€Œç”¢â½£ã€é€™å€‹ç‰©ä»¶ç¢ºå®šå®Œæˆå¾Œæˆ‘å€‘æœƒå…ˆå®šç¾©â€é¡åˆ¥â€ï¼Œå†æ ¹æ“šé¡åˆ¥ç”¢ç”Ÿç‰©ä»¶ã€‚12345678// é¡åˆ¥é–‹é ­é€šå¸¸éƒ½æœƒè¨­å¤§å¯« var Ticket = function(åˆå§‹å€¼){ this.å±¬æ€§ = åˆå§‹å€¼, this.æ–¹æ³• = function(){ // ç•¶ä¸­å¯ç”¨this.å±¬æ€§æˆ–this.æ–¹æ³• .... }} ç‰©ä»¶å°å‘ç¯„ä¾‹* 1234567891011121314 var Ticket = function(init_price, init_discount){ this.price = init_price this.type = â€œstudentâ€ this.discount = init_discount this.fee = 30 // ticketçš„æ–¹æ³• this.get_price = function(){ return this.price * this.discount + this.fee; } this.get_description = function(){ console.log(&quot;é€™å¼µç¥¨æ˜¯&quot;+this.type+&quot;ç¥¨ æœ‰&quot; + this.discount*10 + &quot;æŠ˜æ‰£å…±&quot; + this.get_price() +&quot;å…ƒ&quot;); }} ä¸Šè¿°ç¯„ä¾‹ä¸­ï¼Œclassé¡åˆ¥ç‚ºTicketï¼Œå‚³å…¥å…©å€‹åˆå§‹åŒ–åƒæ•¸(ç¥¨åƒ¹ã€æŠ˜æ‰£)ï¼Œå†åšç‰©ä»¶å±¬æ€§çš„åˆå§‹åŒ–è¨­å®šã€‚get_priceã€get_descriptionåˆ†åˆ¥åšç‚ºå–å¾—ç¥¨åƒ¹åŠè©³ç´°è³‡è¨Šçš„æ–¹æ³•ã€‚å…¶ä¸­ï¼Œthisæ˜¯åƒç…§ç‰©ä»¶æœ¬é«”çš„è³‡è¨Šã€‚ å®šç¾©å¥½é¡åˆ¥åŠç‰©ä»¶ä¹‹å¾Œï¼Œå°±å¯ä»¥é–‹å§‹ç”¢ç”Ÿç‰©ä»¶ã€‚ ç”¢ç”Ÿç‰©ä»¶12345// å‚³å…¥ç¥¨åƒ¹ã€æŠ˜æ‰£var myTick = new Ticket(500,0.7)console.log(myTick.price); // 500console.log(myTick.type); // studentconsole.log(myTick.get_price()); // 380 å¥½è™•:å¦‚æœé€™ç‰©ä»¶æ˜¯å…¶ä»–é–‹ç™¼è€…å»ºç«‹çš„ï¼Œæˆ‘å€‘ä¸é ˆç®¡ç‰©ä»¶å…§è¤‡é›œçš„é‚è¼¯ï¼Œåªéœ€å‚³éœ€è¦çš„åƒæ•¸çµ¦ç‰©ä»¶å³å¯ç²å¾—æƒ³è¦çš„çµæœï¼Œé€™æ¨£çš„æ–¹æ³•ç¨±ä½œå°è£,ç¨‹å¼ç¢¼è¼ƒç›´è§€ï¼Œä¸”å®¹æ˜“ç†è§£ã€‚ ç‰©ä»¶å°å‘æœ‰å¹¾å€‹é‡è¦çš„ç‰¹æ€§: å°è£ ç¹¼æ‰¿ å¤šå‹é€™ç¯‡åªæœ‰å…ˆç­†è¨˜å°è£åŠç¹¼æ‰¿çš„éƒ¨åˆ†å°è£(Encapsulation)å°‡ç‰©ä»¶å±¬æ€§åŠè¤‡é›œçš„æ“ä½œé‚è¼¯åŒ…è¦†åœ¨classå…§ï¼Œä¹Ÿå°±æ˜¯å°‡ç‰©ä»¶å…§éƒ¨è³‡æ–™éš±è—èµ·ä¾†ã€‚æŒ‰ç…§å‰é¢çš„ç¥¨å‹™çš„ä¾‹å­ï¼Œæˆ‘å€‘åªéœ€å‚³å…¥ç‰¹å®šçš„å€¼ï¼Œå³å¯å–å¾—ç¥¨åƒ¹ï¼Œä¸é ˆäº†è§£ç¥¨åƒ¹å¦‚ä½•åšè¨ˆç®—ã€‚ åŸå‹ç¹¼æ‰¿(Inheritance)é›–ç„¶æœ‰äº†ç‰©ä»¶ä¹‹å¾Œè®Šå¾—ç°¡å–®æ˜“ç”¨ï¼Œä½†æ˜¯ä»Šå¤©æœ‰å¤šå€‹ç‰©ä»¶è¦é€éå‡½æ•¸æ“ä½œæ–¹æ³•æ™‚ï¼Œå‡½æ•¸æ˜¯ç¨ç«‹å­˜åœ¨æ–¼å„å€‹ç‰©ä»¶ï¼Œå½¼æ­¤ç„¡æ³•å…±ç”¨ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œä»Šå¤©ä»Šå¤©æœ‰ä¸‰å€‹äºº(ç‰©ä»¶)è¦äº’ç›¸æ‰“æ‹›å‘¼ï¼ŒåŸ·è¡Œsayhello()é€™å€‹functionï¼Œæœƒèªªå‡ºhello,æŸæŸæŸâ€¦ï¼Œè‹¥è¦æŠŠsayhello()çµ±ä¸€æ”¹ç‚ºHi,æŸæŸæŸâ€¦çš„è©±ï¼Œè¦æ¯å€‹ç‰©ä»¶åšä¿®æ”¹æœƒè®Šå¾—ç›¸ç•¶è€—æ™‚ã€‚è‹¥è¦è§£æ±ºå‡½æ•¸ç„¡æ³•å…±ç”¨çš„å•é¡Œï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨prototype(åŸå‹)ï¼Œé”æˆçµ±ä¸€ç®¡ç†å‡½æ•¸çš„ç›®çš„ï¼Œä¾†çœ‹å€‹ä¾‹å­: 12345678910var Ticket = function(åˆå§‹å€¼){ this.å±¬æ€§ = åˆå§‹å€¼ this.æ–¹æ³•....}// åŸå‹ç¹¼æ‰¿Ticket.prototype.æ–¹æ³• = function(){ this.å±¬æ€§ this.æ–¹æ³•....} å°‡æŸäº›è¦å‘¼å«çš„æ–¹æ³•æ”¾é€²prototypeè£¡çš„æ±è¥¿ä¸æœƒè¢«è¤‡è£½é€²ç‰©ä»¶ï¼Œç‰©ä»¶æœƒæœ‰åƒè€ƒé»é€£åˆ°prototypeï¼Œæ‰¾ä¸åˆ°èª¿ç”¨çš„å±¬æ€§æˆ–æ–¹æ³•æ™‚æœƒå¾€ä¸Šæ‰¾ã€‚ä¾†çœ‹ä¸‹é¢çš„åœ–ç¤º:ä¸Šåœ–ä¸­çš„Prototypeç¨ç«‹å­˜åœ¨å¤–é¢ï¼Œå‡è¨­ç”¢ç”ŸAã€Bã€Cä¸‰å€‹ç‰©ä»¶æ™‚ï¼Œä¸¦ä¸æœƒæœ‰åŸå‹çš„functionï¼Œè‹¥æƒ³åœ¨å…¶ä¸­ä¸€å€‹ç‰©ä»¶å‘¼å«functionæ™‚ï¼Œç™¼ç¾è©²ç‰©ä»¶æ²’æœ‰è¢«å‘¼å«çš„functionï¼Œä¾¿æœƒå¾€ä¸Šæ‰¾ï¼Œæ‰¾è©²ç‰©ä»¶çš„prototypeï¼Œå°±æ‰¾åˆ°å‘¼å«çš„functionã€‚&lt;æ³¨æ„&gt;åœ¨prototypeå…§ä¸€æ¨£å¯ä»¥ä½¿ç”¨this.å±¬æ€§æˆ–this.æ–¹æ³•ã€‚ ç¹¼æ‰¿-åœ¨é¡åˆ¥ä¹‹é–“çš„å»¶çºŒåœ¨javascriptå…§æ‰€æŒ‡çš„ç¹¼æ‰¿æ˜¯æŒ‡é¡åˆ¥ä¹‹é–“çš„ç¹¼æ‰¿ï¼Œç¨‹å¼ç¢¼å¯¦ä½œç¹¼æ‰¿çš„æ­¥é©Ÿ: å»ºç«‹æ™‚å‘¼å«é¡åˆ¥: åˆå§‹åŒ–æ¯é¡åˆ¥å±¬æ€§ ç‚ºå­é¡åˆ¥æ–°å¢ç¹¼æ‰¿prototype: è®“å­é¡åˆ¥å¯ä½¿ç”¨æ¯é¡åˆ¥çš„æ–¹æ³• å°‡å»ºæ§‹å‡½æ•¸æŒ‡å‘è‡ªå·±: å°‡ç‰©ä»¶å»ºæ§‹çš„å‡½æ•¸æŒ‡å‘æœ€åº•å±¤é¡åˆ¥ å»ºç«‹æ™‚å‘¼å«é¡åˆ¥: Parent.call(this,å…¶ä»–å¼•æ•¸)12345678var Creature = function(...){ this.attr = ...}var Dog = function(...){ Creature.call(this, ....) this.attr = ...} ç‚ºå­é¡åˆ¥æ–°å¢ç¹¼æ‰¿prototype: Child.prototype = Object.create(Parent.prototype)1Dog.prototype = Object.create(Creature.prototype) ä¸Šè¿°çš„Object.create()æ‰€ä»£è¡¨çš„æ˜¯å»ºç«‹ä¸€å€‹ç©ºç‰©ä»¶(Dog.prototype)ï¼Œä½†æ˜¯å°‡è©²ç‰©ä»¶çš„ä¸Šæ¸¸é€£æ¥åˆ°çµ¦å®šçš„Prototypeã€‚ å°‡å»ºæ§‹å‡½æ•¸æŒ‡å‘è‡ªå·±1Child.prototye.constructor = Child.constructor éœ€è¦åŸ·è¡Œé€™å€‹æ­¥é©Ÿçš„åŸå› æ˜¯ï¼Œä»Šå¤©åœ¨å®šç¾©é¡åˆ¥(class)æ™‚ï¼Œéƒ½æœƒå®šç¾©ä¸€å€‹æ–°çš„functionï¼Œè‹¥åªæœ‰å»ºç«‹ä¸€å€‹ç©ºç‰©ä»¶(Object.create.create)ï¼Œfuntionæœƒå¾€ä¸Šæ¸¸å°‹æ‰¾constructorï¼Œä¹Ÿå°±æ˜¯å®šç¾©æ‰€ç”¢ç”Ÿçš„functionï¼Œæ‰¾ä¸åˆ°æ™‚æœƒç¹¼çºŒå¾€ä¸Šæ¸¸æ‰¾ï¼Œä»¥ä¸‹åœ–ç‚ºä¾‹ï¼Œæœ€çµ‚è®Šæˆæ‰¾ç”Ÿç‰©çš„prototypeä¾†åˆå§‹åŒ–ç‰©ä»¶ã€‚æ‰€ä»¥å°‡å»ºæ§‹å‡½æ•¸æŒ‡å‘è‡ªå·±æ™‚å°±æœƒè®Šæˆç‹—ç”¢ç”Ÿçš„å‡½æ•¸(å»ºæ§‹å­)ç­‰æ–¼è‡ªå·±çš„ç”¢ç”Ÿå‡½æ•¸ï¼Œé¿å…å¾€ä¸Šæ¸¸å›æº¯åˆ°ç”Ÿç‰©çš„ç”¢ç”Ÿå‡½æ•¸ 1Dog.prototye.constructor = Dog.constructor Codepenç¯„ä¾‹:Worker","link":"2019/07/14/OOP/OOP/"},{"title":"[Vue.js] Basic","text":"ä»€éº¼æ˜¯Vue?Vue æ˜¯ä¸€å€‹å‰ç«¯æ¡†æ¶(framework)ï¼Œä»–çš„å‡ºç¾ç›®çš„æ˜¯ç‚ºäº†æ›´æœ‰çµ„ç¹”æ€§ä¸”ç°¡åŒ–Webé–‹ç™¼ã€‚åœ¨é€™ä¹‹å‰å…¶å¯¦æœ‰å…¶ä»–çš„æ¡†æ¶ï¼Œå¦‚Googleæ‰€æ”¯æŒçš„Angularï¼Œæˆ–æ˜¯Facebookæ‰€é–‹ç™¼çš„Reactæ¡†æ¶ï¼Œä¸éVueåœ¨ç¤¾ç¾¤çš„æ´»çµ¡ç¨‹åº¦ä¸éœæ–¼å‰é¢å…©è€…ï¼Œæ˜¯æœ‰æ½›åŠ›çš„ä¸€å¥—frameworkã€‚æ¨¡æ¿èªæ³•æ˜¯ Vue çš„ä¸»è¦ç‰¹è‰²ï¼ŒåŒæ™‚æœ‰é›™å‘æ•¸æ“šç¶å®šçš„åŠŸèƒ½ï¼Œæ¡ç”¨MVVMçš„çµæ§‹ã€‚ ç‚ºä½•é¸Vue?ä¸»è¦åŸå› æ˜¯ç°¡å–®å¥½ä¸Šæ‰‹ï¼ŒæœƒåŸºæœ¬çš„htmlã€cssã€JavaScriptå°±å¯ä»¥é€²è¡Œå­¸ç¿’ï¼Œå†ä¾†æ˜¯Vueéœ€è¼‰å…¥çš„æª”æ¡ˆå°ï¼Œä½¿ç”¨ Virtual DOMåŠ å¿«è¼‰å…¥é€Ÿåº¦ï¼Œç¶²ç«™è¼‰å…¥ä¸é ˆèŠ±å¤ªå¤šæ™‚é–“ï¼Œã€‚ Vueä¸»è¦åˆ†æˆä¸‰éƒ¨åˆ†çµ„æˆ Vue æ¨¡æ¿ Vue å¯¦ä¾‹ Vue çµ„ä»¶ æ¨¡æ¿:v-ifã€v-showã€v-forâ€¦. å¯¦ä¾‹:dataã€methodsã€computed å…ƒä»¶:Vueæœ‰å…ƒä»¶çš„æ¦‚å¿µï¼Œå°‡ç¶²é ä¸Šçš„å€å¡Šæ‹†æˆä¸€å€‹å€‹çš„å…ƒä»¶(æˆ–å«çµ„ä»¶)ï¼Œæœ€å¾Œå°‡é€™äº›å…ƒä»¶çµ„åˆæˆä¸€å€‹ç¶²é ï¼Œå°±å¥½æ¯”æ‹¼æ‹¼åœ–ä¸€èˆ¬ã€‚ å€‹åˆ¥è©³ç´°å…§å®¹æœƒè¨˜éŒ„åœ¨ä¸‹ç¯‡ æ¨¡æ¿(Template)èªæ³•Vue.js ä½¿ç”¨åŸºæ–¼HTMLçš„æ¨¡æ¿èªæ³•ï¼Œå…è¨±é–‹ç™¼è€…ä½¿ç”¨è²æ˜å¼å°‡DOMç¶å®šVueå¯¦ä¾‹çš„æ•¸æ“šã€‚Vue å°‡æ¨¡æ¿ç·¨è­¯æˆè™›æ“¬DOMï¼Œå†æ¸²æŸ“å‡½æ•¸ï¼ŒVue èƒ½å¤ æ™ºèƒ½åœ°è¨ˆç®—å‡ºæœ€å°‘éœ€è¦é‡æ–°æ¸²æŸ“å¤šå°‘çµ„ä»¶ï¼Œä¸¦æŠŠDOM æ“ä½œæ¬¡æ•¸æ¸›åˆ°æœ€å°‘ã€‚ é›™å‘ç¶å®šé›™å‘æ˜¯æŒ‡ï¼šHTMLæ¨™ç±¤æ•¸æ“šç¶å®šåˆ°Vueç‰©ä»¶ï¼Œå¦å¤–åæ–¹å‘æ•¸æ“šä¹Ÿæ˜¯ç¶å®šçš„ã€‚Vueç‰©ä»¶çš„æ”¹è®Šæœƒç›´æ¥å½±éŸ¿åˆ°HTMLçš„æ¨™ç±¤çš„è®ŠåŒ–ï¼Œè€Œä¸”æ¨™ç±¤çš„è®ŠåŒ–ä¹Ÿæœƒåéä¾†å½±éŸ¿Vueç‰©ä»¶å…§å±¬æ€§çš„è®ŠåŒ–ï¼Œæ”¹è®Šæ˜¯å³æ™‚æ€§çš„ã€‚ MVVM ç”±Model,View,ViewModel ä¸‰éƒ¨åˆ†æ§‹æˆ Model å±¤ä»£è¡¨è³‡æ–™æ¨¡å‹ï¼ŒModelä¸­å®šç¾©è³‡æ–™ä¿®æ”¹å’Œæ“ä½œé‚è¼¯ï¼Œç°¡å–®ä¾†èªªï¼Œæˆ‘å€‘ç²å–åˆ°çš„è³‡æ–™æ˜¯ä¸€å€‹JavaScript çš„ç‰©ä»¶ï¼Œé€éDirectivesæŒ‡ä»¤å°DOMé€²è¡Œå°è£ã€‚ Viewä»£è¡¨UIçµ„ä»¶ï¼Œç•¶è³‡æ–™ç™¼ç”Ÿæ”¹è®Šæ™‚ï¼Œå°DOMé€²è¡Œç›£è½(DOM Listener)æ“ä½œï¼Œå¾è€Œå›å»ä¿®æ”¹Modelçš„è³‡æ–™ã€‚ ViewModelæ˜¯ä¸€å€‹åŒæ­¥View å’ŒModelçš„ç‰©ä»¶ï¼Œå¯ä»¥å°‡è³‡æ–™æ¨¡å‹è½‰åŒ–æˆUIä»‹é¢ã€‚ View å’ŒModel ä¹‹é–“ä¸¦æ²’æœ‰ç›´æ¥çš„è¯ç¹«ï¼Œè€Œæ˜¯é€šéViewModelåšé€£çµï¼ŒModel å’ŒViewModel å½¼æ­¤æ˜¯é›™å‘äº’å‹•ï¼ŒåŒæ­¥å·¥ä½œå®Œå…¨æ˜¯è‡ªå‹•ï¼Œ å› æ­¤View è³‡æ–™çš„è®ŠåŒ–æœƒåŒæ­¥åˆ°Modelä¸­ï¼Œè€ŒModelè³‡æ–™çš„è®ŠåŒ–ä¹Ÿæœƒç«‹å³åæ‡‰åˆ°View ä¸Šã€‚ Virtual DOMå› ç‚ºæ¯æ¬¡æ“ä½œDOMçš„æ™‚å€™ï¼Œé é¢éƒ½å¿…é ˆè¦è¼‰å…¥ä¸€æ¬¡ï¼Œä½¿ç”¨è€…æ‰èƒ½çœ‹åˆ°æœ€æ–°çš„é é¢æ•ˆæœï¼Œä½†ç•¶æœ‰å¤§é‡çš„ DOM ç¯€é»éœ€è¦æ›¿æ›æˆ–æ›´æ–°çš„æ™‚å€™ï¼Œé€™æ™‚ç¶²ç«™è¼‰å…¥æ•ˆèƒ½çš„å·®è·å°±æœƒè¶Šä¾†è¶Šæ˜é¡¯ã€‚ Virtual DOMé€éä»¥ JavaScript ç‰©ä»¶æ¨¡æ“¬ç‰¹å®šçš„ DOM treeçµæ§‹ï¼Œä»–æœƒè‡ªå‹•åœ°å»å¹«ä½ è™•ç†é€™äº›ç‘£ç¢çš„äº‹ï¼Œå†ä¾†ä»–æœƒå»è¨ˆç®—ä¸Šä¸€æ¬¡ Virtual DOM è·Ÿé€™ä¸€æ¬¡çš„å·®ç•°ï¼Œå…©è€…é€²è¡Œæ¯”è¼ƒï¼Œæœ€å¾ŒæŠŠå·®ç•°çš„éƒ¨åˆ†è™•ç†å¾Œè¼¸å‡ºåˆ°é é¢çš„DOMä¸Šã€‚ Vue æ¡ç”¨çš„æ˜¯å®£å‘Šå¼(è²æ˜å¼)çš„æ¸²æŸ“ã€‚ å¦‚: 1234567891011// å»ºç«‹ä¸€å€‹vueç‰©ä»¶ (å…§éƒ¨æ¡JSONæ ¼å¼) const app = new Vue({ el: &quot;#app&quot;, // Vue ç‰©ä»¶çš„æ›è¼‰é» // data ç‚ºå­˜å–çš„è³‡æ–™ data: { // å¯è‡ªè¡Œå®šç¾©å±¬æ€§åç¨± message:&quot;hello&quot;, error: &quot;error&quot;}}); Vueçµ„ä»¶ ä¸€å€‹çµ„ä»¶ç”±ä¸‰å€‹éƒ¨åˆ†çµ„æˆ: html css js ä¸‰è€…é€é webpack é€²è¡Œæ‰“åŒ…ï¼Œç·¨è­¯æˆå°æ‡‰çš„æª”æ¡ˆã€‚ å®‰è£Vue: é€éCDN é€énpm é€šéVue-cliè…³æ‰‹æ¶ é€éCDNå¾å®˜æ–¹è¼‰å…¥CDNåˆ°&lt;script&gt;æ¨™ç±¤ã€‚ é€énpm$ npm install vue é€éè…³æ‰‹æ¶Vue-cliæ–¹æ³•åœ¨cmdåˆ‡æ›åˆ°ç›®æ¨™ç›®éŒ„ï¼Œè¼¸å…¥ npm install -g vue-cli(3.xå‰ç‰ˆæœ¬)ä¸‹è¼‰å®˜æ–¹ç‰ˆæœ¬ vue init webpackåŸ·è¡Œnpm run devè©³ç´°æŸ¥é–±é€™ç¯‡æ•™å­¸ å…¶ä»–æ•™å­¸æ–‡ Vue CLIVue CLI æ˜¯ä¸€å€‹åŸºæ–¼Vue.js é€²è¡Œå¿«é€Ÿé–‹ç™¼çš„å®Œæ•´ç³»çµ±ï¼Œå¥½è™•: æ–¹ä¾¿å‰µå»ºé …ç›® éƒ¨ç½²æ–¹ä¾¿ åŠŸèƒ½è±å¯Œ ç¨‹å¼ç¢¼ä¿®æ”¹å®Œç•¢å¾ŒåŠæ™‚æ›´æ–°ï¼Œç›´æ¥é è¦½æ•ˆæœï¼Œä¸é ˆæ‰‹å‹•æ›´æ–° å¯å–®å…ƒæ¸¬è©¦ å®‰è£æ“ä½œå®˜æ–¹å¯«çš„å¾ˆæ˜ç¢ºï¼Œå”¯ä¸€è¦æ³¨æ„çš„æ˜¯ï¼Œnpm install -g @vue/clæ˜¯å®‰è£Vue3.0ä¹‹å¾Œçš„ç‰ˆæœ¬ å‰µå»ºä¸€å€‹é …ç›® vue createé¸æ“‡defaultä½¿ç”¨å®˜æ–¹è¨­å®šçš„æ¨¡æ¿ ä½¿ç”¨åœ–å½¢åŒ–ç•Œé¢(UI) å¯¦ä½œ: åœ¨ç›®æ¨™è³‡æ–™å¤¾åŸ·è¡Œå‘½ä»¤åˆ—vue create qsyjï¼Œå»ºä¸€åç¨±ç‚ºqsyjçš„å°ˆæ¡ˆã€‚ åˆ°å°ˆæ¡ˆè³‡æ–™å¤¾æ‰¾index.htmlã€main.jså…©å€‹æª”æ¡ˆã€‚ index.htmlæª”å…§&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;ç‚ºæ›è¼‰é» main.jsæª”å…§ åˆ†åˆ¥å°å…¥å…©çµ„ä»¶ç”±ä¸Šåœ–èªªæ˜Appçµ„ä»¶å¾App.vueæª”å°å…¥ï¼Œä¸¦å»ºä¸€åç‚ºVueçš„æ–°ç‰©ä»¶ï¼Œæ›è¼‰åœ¨ #appä¸Šï¼Œå°æ‡‰è‡³index.htmlæª”çš„appæ›è¼‰é»ã€‚ App.vueå°ˆæ¡ˆçš„çµ„ä»¶ï¼Œçµ„ä»¶ç”±ä¸‰éƒ¨åˆ†çµ„æˆ: template: html script: JavaScript style: CSS çµ„ä»¶åŸºæœ¬æ“ä½œæ­¥é©Ÿ: å°å…¥çµ„ä»¶ è¨»å†Šçµ„ä»¶ ä½¿ç”¨çµ„ä»¶ å°ˆæ¡ˆè³‡æ–™å¤¾åº•ä¸‹æ–‡ä»¶èªªæ˜ src: æ”¾ç½®çµ„ä»¶&amp;æ•¸æ“šæ–‡ä»¶ assets: æ”¾ç½®éœæ…‹æ–‡ä»¶ component: æ”¾ç½®çµ„ä»¶å¥½çš„é–‹ç™¼æ–¹å¼: å…ˆåœ¨componentä¸‹å»ºç«‹æ–°çš„è³‡æ–™å¤¾ï¼Œå†æ–°å¢å°æ‡‰çµ„ä»¶ã€‚ ç§»å‹•ç«¯å­—é«”å¤§å°çš„è§£æ±ºæ–¹æ¡ˆ:é€éremä¾ç…§ç•«é¢èª¿æ•´æ ¹å…ƒç´ å­—é«”å¤§å°ï¼Œå¦‚æ ¹å…ƒç´ å¤§å°ç‚º16pxï¼Œ1rem = 16pxï¼Œ2rem = 32pxâ€¦.. Vue Routerå®˜æ–¹çš„è·¯ç”±ç®¡ç†å™¨ï¼Œå®‰è£æ–¹å¼åƒè€ƒå®˜æ–¹ã€‚Vue Routerå®˜æ–¹æ–‡ä»¶(zh)Vue Routerå®˜æ–¹æ–‡ä»¶(en) å¥½ç”¨çš„UI library for Vue: Vant","link":"2019/07/14/Vue/Vue/"},{"title":"[Vue.js] Lifecycle Hooks","text":"Vueç”Ÿå‘½é€±æœŸ æ¯å€‹ Vue å¯¦é«”è¢«å‰µå»ºä¹‹å‰ï¼Œæœƒç¶“éä¸€ç³»åˆ—åˆå§‹åŒ–çš„éç¨‹ï¼ŒåŒæ™‚æœƒå‘¼å«é€™äº›ç”Ÿå‘½é€±æœŸçš„æ›é‰¤(hook)ï¼Œæˆ‘å€‘å¯ä»¥åœ¨é€™äº›æ›é‰¤ä¸Šåšé¡å¤–çš„è™•ç† æµç¨‹å»ºç«‹Vueç‰©ä»¶ -&gt; åˆå§‹åŒ–Vueè³‡æ–™ -&gt; ç·¨è­¯æ¨¡æ¿ -&gt; æ›è¼‰DOM -&gt; æ›´æ–°æ•¸æ“š -&gt; æ¸²æŸ“æ•¸æ“š(mounted) -&gt; å¸è¼‰æ•¸æ“šã€‚åœ–ç‰‡æº: å®˜æ–¹æ–‡ä»¶èªªæ˜(ç´…æ¡†è¡¨é‰¤å­å‡½æ•¸): ç´°ç¯€ new Vue(): åœ¨main.jsæª”æœ‰new Vue()é€™æ®µcodeï¼Œå³å»ºç«‹Vueçš„å¯¦ä¾‹ã€‚ Init Event &amp; Lifecycle: Vueå…§éƒ¨åˆå§‹åŒ–äº‹ä»¶ã€‚ beforeCreate: åœ¨å¯¦ä¾‹åˆå§‹åŒ–ä¹‹å¾Œï¼Œæ•¸æ“šè§€æ¸¬(data) å’Œevent/watcher äº‹ä»¶é…ç½®ä¹‹å‰è¢«èª¿ç”¨ã€‚ Init injecttions&amp;reactivity: åˆå§‹åŒ–dataã€method created:æ­¤æ™‚ç™¼èµ·ajaxè«‹æ±‚ï¼Œè³‡æ–™ $data å·²å¯å–å¾—ï¼Œä½† $el å±¬æ€§é‚„æœªè¢«å»ºç«‹ å…ˆåˆ¤æ–·æ˜¯å¦æœ‰elé¸é …ï¼Œå†åˆ¤æ–·æ˜¯å¦æœ‰templateé¸é …ï¼Œæ¥è‘—æº–å‚™ç”Ÿæˆhtmlã€‚ beforeMount: æ­¤æ™‚å°šæœªç”Ÿæˆhtmlåˆ°é é¢ä¸Š(é‚„çœ‹ä¸åˆ°é é¢æ•ˆæœ) Create vm.$el: æ­¤éšæ®µåšæ›¿æ›æ“ä½œï¼Œå°‡æ¸²æŸ“å¥½çš„htmlæ›¿æ›elå±¬æ€§ï¼Œä¹Ÿå°±æ˜¯DOMçš„æ›¿æ›æ“ä½œ Mounted: æ­¤æ™‚å®Œæˆæ›è¼‰ï¼Œå³$el è¢«å»ºç«‹ï¼ŒåªæœƒåŸ·è¡Œä¸€æ¬¡ å¾ŒçºŒæ›è¼‰é»æœƒæ™‚æ™‚ç›£æ§æ•¸æ“šè®ŠåŒ–ï¼Œè‹¥ç›£æ¸¬åˆ°æ•¸æ“šè®ŠåŒ–ï¼Œå°±æœƒå»æ›´æ–°DOMï¼Œåšç›£è½æ“ä½œï¼Œç•¶ä¸­æœƒåŸ·è¡Œå…©å€‹é‰¤å­å‡½æ•¸ã€‚ beforeUpdateï¼šåœ¨æ›´æ–°DOMä¹‹å‰ï¼Œè³‡æ–™è®ŠåŒ–æ™‚è¢«å‘¼å«ï¼Œé é¢æ­¤æ™‚å°šæ”¹è®Šï¼Œé€™è£¡é©åˆåœ¨æ›´æ–°ä¹‹å‰è¨ªå•ç¾æœ‰çš„DOMï¼Œå¦‚æ‰‹å‹•ç§»é™¤å·²æ·»åŠ çš„äº‹ä»¶ç›£è½å™¨ã€‚ activatedï¼šå¦‚æœæœ‰è¨­å®š keep-aliveï¼Œé€™å€‹hookæœƒè¢«å‘¼å« deactivatedï¼šåœç”¨ keep-aliveæ™‚è¢«å‘¼å«ã€‚ updated:æ›´æ–°æ•¸æ“šå®Œæˆ beforeDestroyï¼šåœ¨éŠ·æ¯€ä¹‹å‰ï¼Œèª¿ç”¨æ­¤å‡½æ•¸ï¼Œä½†æ­¤æ™‚å°šæœªéŠ·æ¯€ï¼Œå¯¦é«”é‚„å¯ä½¿ç”¨ã€‚ destroyedï¼šå¯¦é«”éŠ·æ¯€ï¼Œæ‰€æœ‰ç¶å®šã€ç›£è½äº‹ä»¶è¢«ç§»é™¤ã€‚ Noteæ‰€æœ‰çš„ç”Ÿå‘½é€±æœŸé‰¤å­è‡ªå‹•ç¶å®šthisä¸Šä¸‹æ–‡åˆ°å¯¦ä¾‹ä¸­ï¼Œå› æ­¤ä½ å¯ä»¥è¨ªå•æ•¸æ“šï¼Œå°å±¬æ€§å’Œæ–¹æ³•é€²è¡Œé‹ç®—ã€‚é€™ä»£è¡¨ä¸èƒ½ä½¿ç”¨ç®­é ­å‡½æ•¸ä¾†å®šç¾©ä¸€å€‹ç”Ÿå‘½é€±æœŸæ–¹æ³• (ä¾‹å¦‚created: () =&gt; this.fetchTodos())","link":"2019/07/17/Vue/Vue_lifeCycle/"},{"title":"[OS] ä½œæ¥­ç³»çµ±ç­†è¨˜-é›»è…¦ç³»çµ±æ¶æ§‹","text":"å‰è¨€æœ¬ç¯‡ç”¨æ–¼ç´€éŒ„é€™å­¸æœŸä¿®ä½œæ¥­ç³»çµ±çš„ç­†è¨˜ï¼Œæœƒå…ˆå¾åŸºæœ¬æ¦‚å¿µé–‹å§‹ã€‚ ä»€éº¼æ˜¯ä½œæ¥­ç³»çµ±?å¯ä»¥å¾å…©å€‹é¢å‘ä¾†è¨è«– ç³»çµ±ç‚ºè³‡æºåˆ†é…è€…(Resource Allocator) å¦‚ä½•æœ‰æ•ˆåˆ©ç”¨è³‡æº(CPUã€Memory) å¦‚ä½•è§£æ±ºè³‡æºåˆ©ç”¨çš„è¡çªç›£æ§User Programçš„é‹è¡ŒUserç«¯å¯èƒ½æœƒæœ‰ä¸€äº›ä¸ç•¶è¡Œç‚ºçš„æ“ä½œï¼Œå¦‚: ä¸å°å¿ƒåˆªé™¤ç³»çµ±æª”ï¼Œæ­¤æ™‚å°±éœ€è¦ä½œæ¥­ç³»çµ±ä¾†æ›¿æˆ‘å€‘æŠŠé—œï¼Œä¾‹å¦‚é€éç®¡ç†ä½¿ç”¨æ¬Šé™ä¾†æ±ºå®šæ˜¯å¦æœ‰æ¬ŠåšæŸå€‹é‡è¦æª”æ¡ˆçš„è®€å¯«ï¼Œç”šè‡³åˆªé™¤ã€‚ä½¿ç”¨è€…å¯ä»¥çœ‹ä½œé›»è…¦ä½¿ç”¨è€…(User)èˆ‡é›»è…¦ç¡¬é«”(Hardware)ä¹‹é–“çš„æºé€šæ©‹æ¨‘ï¼Œä¸¦æä¾›ä¸€å€‹è®“User Programæ˜“æ–¼åŸ·è¡Œçš„ç’°å¢ƒ ä½œæ¥­ç³»çµ±åšä»€éº¼ä¸»è¦åŠŸèƒ½åˆ†ç‚ºä¸‹åˆ—ä¸‰é …: è³‡æºçš„ç®¡ç† å·¥ä½œçš„ç®¡ç† è®“ä½¿ç”¨è€…ä½¿ç”¨æ–¹ä¾¿ é›»è…¦ç³»çµ±å¤§è‡´ä¸Šå¯åˆ†ç‚ºå››å€‹å–®å…ƒ ç¡¬é«”(hardware) ä½œæ¥­ç³»çµ±(OS) æ‡‰ç”¨ç¨‹å¼(application program) ä½¿ç”¨è€…(user) æ¯å€‹device controllerçš†æœ‰è‡ªå·±çš„local bufferé‚„æœ‰registersã€‚ register: ç”¨ä¾†å„²å­˜æŒ‡ä»¤ã€è®Šæ•¸çš„å€¼ local buffer: ç”¨æ–¼æš«å­˜è³‡æ–™ï¼Œå‚³é€è‡³Memoryé€²è¡Œè®€å– ç³»çµ±å…§é‹è¡Œçš„å·¥ä½œåˆ†å…©ç¨® I/O Bound Job éœ€è¦å¤§é‡çš„I/Oé‹ä½œæ™‚é–“ï¼Œå°æ–¼CPUè¨ˆç®—æ™‚é–“çš„éœ€æ±‚é‡è¼ƒå°‘ã€‚ æ•ˆèƒ½å¥½å£æ˜¯å–æ±ºæ–¼I/O Deviceçš„é€Ÿåº¦ CPU Bound Job éœ€è¦å¤§é‡çš„CPUè¨ˆç®—çš„é‹ä½œæ™‚é–“ï¼Œå°æ–¼I/Oçš„éœ€æ±‚é‡è¼ƒå°‘ã€‚ æ•ˆèƒ½å¥½å£æ˜¯å–æ±ºæ–¼CPUçš„é€Ÿåº¦ é›»è…¦ç³»çµ±çš„æ¶æ§‹ç¨®é¡Single-Processor Systemsä¸€å°é›»è…¦åªæœ‰å–®ä¸€é¡†CPU Multiprocessor Systemsä¸€å°é›»è…¦æœ‰å¤šé¡†CPUå¯ä»¥è™•ç†åŸ·è¡Œçš„ç¨‹å¼(Process)ï¼Œåˆä½œparallel systems(å¹³è¡Œç³»çµ±) or tightly coupled systems(ç·Šå¯†è€¦åˆç³»çµ±) ç‰¹é» å…±äº«ç›¸åŒçš„è¨˜æ†¶é«”ç©ºé–“ã€I/O Deviceã€Bus å¤šå€‹CPUä¹‹é–“çš„æºé€š(æŒ‡Dataäº¤æ›)ï¼Œå¤§éƒ¨ä»½æ˜¯æ¡Share MemoryæŠ€è¡“ å„ªé» ç©©å®šåº¦é«˜ è™•ç†æ•ˆç‡è¼ƒä½³ ç¨®é¡Multiprocessor Systemsåˆ†å…©ç¨®ç¨®é¡: Symmetric Multiprocessing: å°ç¨±å¼å¤šå…ƒè™•ç† Asymmetric Multiprocessing: éå°ç¨±å¼å¤šå…ƒè™•ç† Symmetric Multiprocessingæ¯å€‹Processoréƒ½æœ‰ç›¸åŒçš„å·¥ä½œ(åŠŸèƒ½)ï¼Œç•¶æŸä¸€å€‹Processorå£äº†ï¼Œè©²Processorä¸Šæœªå®Œæˆçš„å·¥ä½œå¯ä»¥è½‰ç§»åˆ°å…¶å®ƒçš„Processorç¹¼çºŒåŸ·è¡Œã€‚å¥½è™•: ç³»çµ±ä¸æœƒæ•´å€‹Crash Asymmetric Multiprocessingæ¯å€‹(æˆ–æŸç¾¤) Processor å„è‡ªè² è²¬ä¸åŒçš„å·¥ä½œ(åŠŸèƒ½)ï¼Œå…¶ä¸­æœ‰ä¸€å€‹Processorè² è²¬æ§åˆ¶ã€å”èª¿åŠåˆ†é…Processåˆ°å…¶å®ƒçš„Processorså»é‹ä½œï¼Œé€™å€‹è² è²¬æŒ‡æ®çš„Processorç¨±ä½œMasterã€‚Asymmetricé¡ä¼¼Master/Slaveï¼Œé™¤äº†MasterProcessorå¤–ï¼Œå…¶é¤˜çš„Processorsç¨±ç‚ºSlave Processorã€‚ è£œå……Bootstrap programç•¶é›»è…¦é–‹æ©Ÿæ™‚ï¼Œé›»è…¦é¡¯ç¤ºè¼‰å…¥è³‡è¨Šçš„ç•«é¢ï¼Œæ­¤æ™‚æ˜¯æ­£åœ¨æª¢æŸ¥ç’°å¢ƒè³‡æºï¼ŒBootstrap programä¸¦éæ”¾ç½®åœ¨ç¡¬ç¢Ÿï¼Œè€Œæ˜¯ç‡’éŒ„åœ¨Biosä¸Šã€‚ ä»€éº¼æ˜¯Bios?Refå¾æŒ‰ä¸‹é›»æºé–‹é—œé–‹å§‹ï¼Œåˆ°å¯ä»¥é–‹å§‹æ“ä½œé›»è…¦ç‚ºæ­¢ï¼Œé€™ä¸­é–“é›»è…¦è‡ªå‹•åŸ·è¡Œä¸€é€£ä¸²çš„å‹•ä½œ é–‹æ©Ÿå¤§è‡´åˆ†ç‚ºäº”å€‹éç¨‹éšæ®µï¼Œæ¯å€‹éšæ®µå¾ªåºæ¼¸é€²ï¼Œå¿…éœ€å®Œæˆé€™äº›ç¨‹åºï¼Œé›»è…¦æ‰èƒ½æ­£å¸¸é‹ä½œã€‚äº”å€‹éšæ®µå¦‚ä¸‹ : åˆå§‹éšæ®µï¼ˆInitial Phaseï¼‰ é–‹æ©Ÿè¼‰å…¥éšæ®µï¼ˆBoot Loader Phaseï¼‰ æ ¸å¿ƒè¼‰å…¥éšæ®µï¼ˆKernel Load Phaseï¼‰ æ ¸å¿ƒåˆå§‹åŒ–éšæ®µï¼ˆKernel Initiation Phaseï¼‰ ç™»éŒ„éšæ®µï¼ˆLogon Phaseï¼‰ BIOS ç‚ºåˆå§‹éšæ®µéç¨‹çš„åŸ·è¡Œè€… BIOS çš„å…¨ç¨±ç‚º â€œ Basic Input/Output System â€œï¼Œå¾å­—ç¾©ä¸Šä¾†è§£é‡‹å°±æ˜¯ : åŸºæœ¬çš„è¼¸å…¥åŠè¼¸å‡ºç³»çµ±ã€‚ä¹Ÿå°±æ˜¯èªªé€™å€‹å¾®ç³»çµ±æ§åˆ¶è‘—é›»è…¦çš„åŸºæœ¬è¼¸å‡ºåŠè¼¸å…¥è£ç½®ã€‚é–‹æ©Ÿæ™‚ç¬¬ä¸€å€‹å•Ÿå‹•çš„ç¨‹åºå°±æ˜¯ BIOSï¼Œå¿…é ˆå…ˆè·‘å®Œ BIOS é€™å€‹ç¨‹åºï¼Œé›»è…¦æ‰èƒ½ç¹¼çºŒé–‹æ©Ÿè¼‰å…¥éšæ®µçš„å¾ŒçºŒå‹•ä½œã€‚ åœ¨é›»è…¦çš„ä¸»æ©Ÿæ¿ä¸Šéƒ½æœƒæœ‰ BIOS æ™¶ç‰‡ï¼Œè€Œä¸Šé¢æåˆ°çš„BIOSå°±æ˜¯å¯«åœ¨é€™å€‹æ™¶ç‰‡ä¸­çš„ç¨‹å¼ã€‚ ç¨‹å¼(Program)æŒ‡çš„æ˜¯ä¸€æ®µéœæ…‹ä¸”å¯ä»¥è¢«åŸ·è¡Œçš„æŒ‡ä»¤é›†ï¼Œç°¡å–®ä¾†èªªå°±æ˜¯ä¸€å€‹æª”æ¡ˆ(file)å•¦ã€‚ Process(ï¨ˆç¨‹)æ­£åœ¨åŸ·ï¨ˆä¸­çš„ç¨‹å¼(Program)ï¼Œä¹Ÿå°±æ˜¯æ­£åœ¨åŸ·è¡Œï¼Œå·²ç¶“è¼‰å…¥åˆ°è¨˜æ†¶é«”åŸ·è¡Œçš„ç¨‹å¼ç¢¼ã€‚ Interrupt(ä¸­æ–·)CPUæ”¶åˆ°ä¾†è‡ªç¡¬é«”æˆ–è»Ÿé«”ç™¼å‡ºçš„è¨Šè™Ÿ(æˆ–ç¨±äº‹ä»¶; event)ï¼Œé€²è¡Œç›¸å°æ‡‰çš„è™•ç†ã€‚ä¸Šåœ–å¯ä»¥ç™¼ç¾å¹³æ™‚CPUä¸»è¦åœ¨è™•ç†ä½¿ç”¨è€…ç«¯çš„ç¨‹å¼ï¼Œç•¶I/O Deviceç™¼å‡ºè¨Šè™Ÿï¼Œè¦æ±‚CPUæš«æ™‚ä¸­æ–·ä¾†è™•ç†é€™å€‹è¨Šè™Ÿæ™‚ï¼Œå°±æœƒç™¼ç”Ÿä¸­æ–·(Interrupt)ã€‚ è»Ÿé«”çš„ä¸­æ–·åˆä½œtrap å„ªé»ï¼šç›¸å°æ–¼å¿™ç¢Œç­‰å¾…(busy waiting)ã€è¼ªè©¢(polling)æœ‰æ›´å¥½çš„æ•ˆç‡ï¼Œå› ç‚ºä¸éœ€è¦é¡å¤–çš„è³‡æºå»ç¢ºèªæ˜¯å¦æœ‰äº‹ä»¶è¦è™•ç†ï¼Œä½¿ç”¨ä¸­æ–·å¯ä»¥å°ˆå¿ƒæ–¼æ­£åœ¨è™•ç†çš„äº‹ä»¶ï¼Œä¸éœ€è¦æ™‚ä¹Ÿå¯ä»¥é€²å…¥ä¼‘çœ ç‹€æ…‹ç¯€çœè³‡æºï¼Œäº¦å¯å¯¦ç¾åˆ†æ™‚å¤šå·¥ã€‚ Interrupt çš„è™•ç†æµç¨‹Setps æš«åœç›®å‰process ä¹‹åŸ·è¡Œã€‚ ä¿å­˜æ­¤process ç•¶æ™‚åŸ·è¡Œç‹€æ³ã€‚ OS æœƒæ ¹æ“šInterrupt ID æŸ¥å°‹Interrupt vectorã€‚ å–å¾—ISRï¼ˆInterrupt Service Routineï¼‰çš„èµ·å§‹ä½å€ã€‚ ISR åŸ·è¡Œã€‚ ISR åŸ·è¡Œå®Œæˆï¼Œå›åˆ°åŸå…ˆä¸­æ–·å‰çš„åŸ·è¡Œã€‚ ä½œæ¥­ç³»çµ±çš„é–‹æ©Ÿéç¨‹æŒ‰ä¸‹é–‹é—œ(power on) -&gt; Program Counter(ç¨‹å¼è¨ˆæ•¸å™¨å‘½ä»¤CPU runèµ·ä¾†) -&gt; Bootloader(è¼‰å…¥Kernelï¼Œåšåˆå§‹å‹•ä½œ) -&gt; Disk -&gt; Main Memory è¨˜æ†¶é«”çš„å„²å­˜å–®å…ƒæ¯”è¼ƒå»£æ³›ä¾†åˆ†çš„è©±ä¸»è¦åˆ† Register(æš«å­˜å™¨)ï¼šç”¨ä¾†æš«æ™‚å­˜æ”¾è³‡æ–™ã€æŒ‡ä»¤çš„åœ°æ–¹ Cache(å¿«å–)ï¼šå°‡CPUé‹ç®—çš„éƒ¨ä»½çµæœå…ˆæ”¾ç½®æ–¼å¿«å–è¨˜æ†¶é«”è£¡ï¼Œå¾…CPUè¦ç¹¼çºŒé‹ç®—æ™‚ï¼Œèƒ½å¤ å¿«é€Ÿåœ°è®€å– Main Memory(ä¸»è¨˜æ†¶é«”): CPUåŸ·è¡Œç¨‹å¼æ™‚æš«å­˜è³‡æ–™çš„åœ°æ–¹ï¼Œæœƒè®€å–ã€å¯«å…¥è¨˜æ†¶é«”ï¼ŒMain Memoryå¤§å°æœƒå½±éŸ¿CPUè™•ç†çš„é€Ÿåº¦ Disk(ç¡¬ç¢Ÿ)Ref Registerã€Cacheä½æ–¼CPUå…§éƒ¨é€²è¡Œç®¡ç† æ›´ç´°éƒ¨çš„è¨è«–çœ‹é€™ç¯‡ ProcessåŒæ™‚åŸ·è¡Œçš„æ–¹å¼ Concurrent(ä¸¦è¡Œ) åœ¨å–®ä¸€æ™‚é–“é»åªæœ‰ä¸€å€‹Processåœ¨åŸ·è¡Œ!! æ‰€å¼·èª¿çš„æ˜¯ä¸€æ®µåŸ·è¡Œæ™‚é–“å…§ï¼Œæœ‰å¤šProcessåŒæ™‚åŸ·è¡Œï¼Œè€Œéå–®ä¸€æ™‚é–“é»ã€‚ å–®ä¸€é¡†CPUå³å¯åšåˆ°ã€‚ ç¯„ä¾‹: Multiprogramming System Parallel(å¹³è¡Œ) åœ¨å–®ä¸€æ™‚é–“é»æœ‰å¾ˆå¤šçš„Processåœ¨åŸ·è¡Œ!! éœ€å¤šé¡†CPUæ–¹å¯åšåˆ°ã€‚ ç¯„ä¾‹:Multiprocessing System, Distributed System åƒè€ƒ é™³å£«æ°-ä½œæ¥­ç³»çµ±(Operating Systems) (Operating Systems)","link":"2020/03/19/OS/%5BOS%5D%20%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1%E7%AD%86%E8%A8%98-%E7%B3%BB%E7%B5%B1%E6%9E%B6%E6%A7%8B/"},{"title":"[Vue.js] Props - çˆ¶å­çµ„ä»¶é–“æºé€š","text":"å‰è¨€åœ¨ Vueä¸­ï¼Œæ¯å€‹çµ„ä»¶éƒ½æœ‰å–®ç¨ä½œç”¨åŸŸï¼Œæ˜¯å„è‡ªç¨ç«‹çš„ï¼Œæˆ‘å€‘å¯ä»¥é€šéprop ç”±çˆ¶çµ„ä»¶å‘å­çµ„ä»¶å‚³éæ•¸æ“šï¼Œåœ¨çµ„ä»¶ä¸Šè¨»å†Šçš„ä¸€äº›è‡ªå®šç¾©å±¬æ€§ã€‚ç•¶ä¸€å€‹å€¼å‚³éçµ¦ä¸€å€‹propå±¬æ€§çš„æ™‚å€™ï¼Œå®ƒå°±è®Šæˆäº†é‚£å€‹çµ„ä»¶å¯¦ä¾‹çš„ä¸€å€‹å±¬æ€§ã€‚Ref ç›®çš„: æ‹†åˆ†å€‹åˆ¥çš„åŠŸèƒ½ï¼Œä¸¦é”åˆ°è¤‡ç”¨æ•ˆæœ é¿å…å…§éƒ¨å…ƒä»¶æ”¹è®Šå¤–éƒ¨å…ƒä»¶ è³‡æ–™æ›´é›†ä¸­ï¼Œç®¡ç†ä¸Šæ›´ä¾¿åˆ© åŸºç¤ç¯„ä¾‹:Parent12345678910111213141516&lt;template&gt; &lt;div class=&quot;Parent&quot;&gt; &lt;child msg='parent here'&gt;&lt;/child&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Child from '@/components/Child';export default { components: { Child, }, name: 'app',};&lt;/script&gt; Child12345678910111213&lt;template&gt; &lt;div class=&quot;Child&quot;&gt; &lt;span&gt;Message: { {msg} }&lt;/span&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default { props: { msg: 'child here' },};&lt;/script&gt; camelCase vs. kebab-case å‘½åä½¿ç”¨HTML ä¸å€åˆ†å¤§å°å¯«ï¼Œè€Œ JavaScript æ˜¯åš´æ ¼å€åˆ†å¤§å°å¯«çš„ï¼Œä½¿ç”¨ HTML æ¨¡ç‰ˆæ™‚ï¼Œå±¬æ€§åç¨±å¿…é ˆä½¿ç”¨ä»¥dashåˆ†éš”çš„kebab-caseå‘½åï¼Œå¦‚ç¯„ä¾‹msg-parentçš„å±¬æ€§åç¨±ã€‚12345&lt;template&gt; &lt;div class=&quot;Parent&quot;&gt; &lt;child msg-parent='parent here'&gt;&lt;/child&gt; &lt;/div&gt;&lt;/template&gt; è‹¥æ˜¯ä½¿ç”¨JavaScriptä¸­çš„å­—ä¸²æ¨¡ç‰ˆï¼Œå‰‡ä½¿ç”¨camelCaseå¯«æ³•ï¼Œåƒè€ƒæ­¤ç¯‡æ–‡ç« ã€‚12345Vue.component('child', {// åœ¨ JavaScript ä¸­ä½¿ç”¨ camelCaseprops: ['myMessage'],template: '&lt;span&gt;{ { myMessage } }&lt;/span&gt;'}) éœæ…‹ã€å‹•æ…‹å‚³éå…©è€…çš„å·®ç•°åœ¨æ–¼è™•ç†å‚³éè³‡æ–™å‹åˆ¥ï¼Œå¦‚æœæ²’æœ‰ä½¿ç”¨å‹•æ…‹ï¼Œé‚£å°±æœƒå…¨éƒ¨è³‡æ–™å‹åˆ¥è¦–ç‚ºstringï¼Œè€Œå‹•æ…‹ä½¿ç”¨v-bindé€²è¡Œå±¬æ€§ç¶å®šï¼ˆç°¡å¯«ç‚º:ï¼‰ï¼Œåšå‹•æ…‹è³¦å€¼ï¼Œå°‡ä¾†æœƒèˆ‡ Vue Instance çµåˆï¼Œè§£ææ¨¡ç‰ˆæœƒç•¶æˆ JavaScript è¡¨é”å¼åšè¨ˆç®—ã€‚12345678910// éœæ…‹&lt;post title=&quot;My journey with Vue&quot;&gt;&lt;/post&gt;// å‹•æ…‹&lt;post v-bind:title=&quot;post.title&quot;&gt;&lt;/post&gt;Vue.component('post', { props: ['title'], template: '&lt;h3&gt;{ { title } }&lt;/h3&gt;'}) çˆ¶å­çµ„ä»¶æºé€šåŸå‰‡åœ–ç‰‡ä¾†æºå–®é …æ•¸æ“šæµpropsæ˜¯å–®é …å‚³éè³‡æ–™çš„ï¼Œåªæœƒå¾çˆ¶å±¤å‚³è‡³å­å±¤ï¼Œä¸¦ä¸”Propçš„å€¼æœƒéš¨çˆ¶å±¤æ›´å‹•è¨­å®šè€Œæ”¹è®Šï¼Œé¿å…å­çµ„ä»¶ç„¡æ„ä¿®æ”¹äº†çˆ¶çµ„ä»¶è³‡æ–™ã€‚$emitè‹¥å­çµ„ä»¶è¦åœ¨è³‡æ–™ç•°å‹•æ™‚å‚³çµ¦çˆ¶çµ„ä»¶åªèƒ½é€šéè‡ªå®šç¾©äº‹ä»¶: ä½¿ç”¨$emit(&quot;çˆ¶çµ„ä»¶è¦æ¥æ”¶çš„åƒæ•¸&quot;,è¦ç™¼é€çš„æ•¸æ“š)Prop é©—è­‰å¯ä»¥ç‚ºpropså‚³éçš„è³‡æ–™æŒ‡å®šå‹åˆ¥ã€‚1234567891011121314151617181920212223242526272829303132333435export default { name: &quot;child&quot;, data() { return{ } }, // props: ['title', 'age'], props: { // æŒ‡å®šå°æ‡‰å¾—é¡å‹ title: String, age: Number, nick: String, nickName: { // è¨­å®šé è¨­å€¼ è‹¥çˆ¶çµ„ä»¶ç„¡å‚³éå€¼æ™‚å³æ¡ç”¨é è¨­å€¼ type: String, default: &quot;å¤©ç±Ÿæ­Œæ‰‹&quot; }, parent: { type: String, require: true }, friends: { // è‹¥é è¨­å€¼ç‚ºé™£åˆ—æˆ–ç‰©ä»¶ï¼Œå¿…é ˆå›å‚³ä¸€å€‹functionï¼Œ type: Array, default: function() { return [&quot;Frank&quot;, &quot;Tonny&quot;, &quot;Jack&quot;]; } } }, methods: { sendTarget() { // target ç‚ºè‡ªå®šç¾©äº‹ä»¶ this.$emit(&quot;target&quot;, &quot;æµè¡Œæ­Œæ‰‹&quot;); } } } è¨ªå•å­çµ„ä»¶å¯¦ä¾‹æˆ–å­å…ƒç´ é€šérefç‰¹æ€§ç‚ºé€™å€‹å­çµ„ä»¶è³¦äºˆä¸€å€‹IDå¼•ç”¨ï¼Œæœ‰çš„æ™‚å€™ä½ ä»å¯èƒ½éœ€è¦åœ¨JavaScriptè£¡ç›´æ¥è¨ªå•ä¸€å€‹å­çµ„ä»¶ï¼Œç›´æ¥åšDOMæ“ä½œã€‚å®šç¾©é€™å€‹refçš„çµ„ä»¶è£¡ï¼Œå¯ä»¥ä½¿ç”¨1this.$refs.usernameInput","link":"2019/07/20/Vue/Vue_props/"},{"title":"[OS] ä½œæ¥­ç³»çµ±ç­†è¨˜-Processé–“çš„æºé€š","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 18 å‰è¨€ä¸Šç¯‡ç­†è¨˜éProcessçš„ç‹€æ…‹åŠç®¡ç†ï¼Œæœ¬ç¯‡ç­†è¨˜Processé–“çš„æºé€š Processé–“çš„æºé€šç¾ä»£ä½œæ¥­ç³»çµ±ä¸­ï¼Œé€šå¸¸ä¸æœƒåªæœ‰ä¸€å€‹Processå­˜åœ¨æ–¼ä½œæ¥­ç³»çµ±å…§ï¼Œé€šå¸¸æœ‰å¥½å¹¾å€‹ProcessesåŒæ™‚å­˜åœ¨ä¸¦åŒæ™‚åŸ·è¡Œã€‚é€™äº›åŸ·è¡Œçš„Processå¯ä»¥åˆ†æˆå…©å¤§é¡ independent process(ç¨ç«‹è¡Œç¨‹)ï¼š è©²Processç„¡æ³•å½±éŸ¿å…¶å®ƒProcessçš„åŸ·è¡Œï¼ŒåŒæ™‚å®ƒä¹Ÿä¸å—å…¶ä»–Processå½±éŸ¿ï¼Œç¨ç«‹çš„Processä¹‹é–“ä¸æœƒæœ‰ä»»ä½•å…±äº«è³‡æ–™ã€‚ cooperating process(åˆä½œè¡Œç¨‹)ï¼šè©²Processèƒ½å¤ å½±éŸ¿å…¶å®ƒProcessï¼Œæˆ–æ˜¯å—å…¶å®ƒProcesså½±éŸ¿ï¼Œæ•…Processä¹‹é–“æœƒæœ‰å…±äº«çš„è³‡æ–™ï¼Œéœ€è¦æœ‰é€²è¡Œè³‡è¨Šäº¤æ›çš„ç®¡é“ ç°¡å–®åšå€‹æ•´ç†ï¼š independent process cooperating process Processä¹‹é–“ä¸æœƒæœ‰ä»»ä½•å…±äº«çš„è³‡æ–™ Processä¹‹é–“æœƒæœ‰éƒ¨åˆ†å…±äº«çš„è³‡æ–™ Processé–“çš„æºé€šéœ€é€éIPC(interprocess communication) ï¼ŒIPCæœ‰å…©ç¨®æ¨¡å¼è¨­è¨ˆ: Share Memory Message Passing å¯ä»¥ç”¨ç”Ÿç”¢è€…(Producer)è·Ÿæ¶ˆè²»è€…(Consumer)é–“çš„é—œä¿‚ä¾†è§£é‡‹é€™å…©ç¨®æ¨¡å¼ï¼ŒProduceræœƒç”¢ç”Ÿè³‡æ–™æ”¾åœ¨æœ‰é™æˆ–æ˜¯ç„¡é™çš„bufferä¸­ç­‰Consumerä¾†æ¶ˆè²»ã€‚ Processåœ¨å‚³è¼¸è³‡æ–™æ™‚ï¼Œbufferæœ‰ä¸‰ç¨®å‹æ…‹: zero capacityï¼šä¸€å®šè¦æ”¶å®Œä¹‹å¾Œæ‰èƒ½å†é€ï¼Œæ²’æœ‰åœ°æ–¹çµ¦è³‡æ–™æ’éšŠã€‚ bounded capacityï¼šæœ‰é™åº¦çš„ç©ºé–“çµ¦è³‡æ–™æ’éšŠï¼Œè‹¥æ˜¯æ»¿äº†å°±å¿…é ˆè¦ç­‰ã€‚ unbounded capacityï¼šç„¡é™çš„ç©ºé–“çµ¦è³‡æ–™ï¼Œç™¼é€è€…å¯ä»¥ä¸€ç›´é€è³‡æ–™ã€‚ Share Memory (å…±äº«è¨˜æ†¶é«”)Processä¹‹é–“å…±äº«ä¸€éƒ¨åˆ†çš„è¨˜æ†¶é«”(å…±äº«è®Šæ•¸;Shared Variables)ï¼Œé€éå­˜å–è¨˜æ†¶é«”é”åˆ°å½¼æ­¤æºé€šã€äº¤æ›è³‡è¨Šçš„ç›®çš„ã€‚shared memoryæ˜¯ç”¨readè·Ÿwriteè³‡æ–™ä¾†å®Œæˆè³‡è¨Šäº¤æ› ä¹Ÿå¯ä»¥é€™éº¼èªª:produceræœƒæŠŠè³‡æ–™æ”¾é€²bufferå…§(write)ï¼Œè€Œconsumeræœƒå»åŒä¸€å€‹bufferæŠŠè³‡æ–™å–å‡ºä¾†(read) Message Passing (è¨Šæ¯å‚³é)Processé–“æœƒå»ºç«‹é€£æ¥é€šé“(Communication Link)ä¾†æºé€šï¼Œéå€ŸåŠ©å…±äº«è®Šæ•¸éç¨‹æœƒæ˜¯ï¼š å»ºç«‹Communication Link äº’å‚³è¨Šæ¯ (Message) å‚³è¼¸å®Œç•¢ï¼Œä¸­æ–·é€£æ¥é€šé“ (release link) å»ºç«‹é€£æ¥é€šé“æ™‚ï¼Œæœƒåˆ†åšå‚³é€(send)æ–¹èˆ‡æ¥æ”¶(receive)æ–¹ï¼Œè€Œé€šè¨Š(Communication)çš„æ–¹å¼ä¹Ÿåˆ†æˆå…©ç¨®: ç›´æ¥å‚³è¨Šæ¯(Direct) é–“æ¥å‚³é(Indirect) Direct Indirect å»ºç«‹linkç”¨sendè·Ÿreceiveä¾†å‚³é€è¨Šæ¯ è¨Šæ¯æ˜¯å¾ mailbox è£¡ç›´æ¥æ¥æ”¶(åªèƒ½å…±äº«mailboxè³‡æ–™) ç‚ºè‡ªå‹•å»ºç«‹ æ¯å€‹mailboxéƒ½æœ‰å€‹ç¨ç‰¹çš„ID ä¸€å€‹Linkå‰›å¥½é€£æ¥ä¸€å°Process ä¸€å°processä¹‹é–“ï¼Œå¯èƒ½å­˜åœ¨å¤šæ¢Link æ¯å€‹è¡Œç¨‹å¿…é ˆè¦æ˜ç¢ºåœ°å‘½å è¦å»ºç«‹é€£çµï¼Œåªèƒ½æ˜¯è¡Œç¨‹å…±äº«éƒµç®± é–“æ¥å‚³éçš„éç¨‹ä¸­ï¼Œé€šè¨Šçš„åŒæ­¥éå¸¸é‡è¦ï¼Œåˆ†ä½œå…©ç¨®å½¢å¼ï¼š blocking Blocking sendï¼šè¨Šæ¯å‚³éå‡ºå»ï¼ŒProcessè¢«Blocké˜»æ“‹ï¼Œç›´åˆ°å°æ–¹è¨Šæ¯æ”¶åˆ°æ‰å¯å†å‚³é€ã€‚ Blocking receiveï¼šä¸åšä»»ä½•å‹•ä½œï¼Œç›´åˆ°è¨Šæ¯é€ä¾†ï¼Œå†å›å‚³æ”¶åˆ°çš„è³‡è¨Šã€‚ non-blocking Non-blocking sendï¼šä¸ç®¡å°æ–¹æœ‰ç„¡æ”¶åˆ°è¨Šæ¯ï¼ŒæŒçºŒç™¼é€è¨Šæ¯çµ¦å°æ–¹ã€‚ Non-blocking receiveï¼šæ¥æ”¶è€…åªæ¥æ”¶æœ‰æ•ˆè¨Šæ¯ï¼Œæˆ–æ˜¯æ²’æœ‰è¨Šæ¯ã€‚ å°‡å…©è€…çš„æ¯”è¼ƒåšå€‹æ•´ç†ï¼š Share Memory Message Passing æºé€šæ–¹å¼ å…±äº«ä¸€éƒ¨åˆ†çš„è¨˜æ†¶é«”(é€éå…±äº«è®Šæ•¸å­˜å–è³‡æ–™) Process ä¹‹é–“å»ºç«‹Communication Link å…±äº«æ€§ å…±äº«è®Šæ•¸æ‰€æœ‰processçš†å¯å­˜å– processé–“æœ‰å°ˆå±¬çš„Linkï¼Œä¸æœƒéš¨æ„è¢«å…¶ä»–Processå…±ç”¨ å¤šå€‹Processé–“ï¼Œå¦‚ä½•ç¢ºå®šæ˜¯å“ªå€‹Processæ¥æ”¶åˆ°è¨Šæ¯ï¼Ÿ è¦å®šåœ¨æŸä¸€æ™‚é–“å…§ï¼Œåªæœ‰ä¸€å€‹Processå¯ä»¥æ¥æ”¶è¨Šæ¯ã€‚ ç”±ç³»çµ±æ±ºå®šï¼Œæ˜¯å“ªå€‹Processæ¥æ”¶ï¼Œå†å›å‚³è¨Šæ¯å‘ŠçŸ¥æ˜¯èª°æ”¶åˆ°ã€‚ å»¶ä¼¸é–±è®€ è¡Œç¨‹é–“çš„æºé€š","link":"2020/06/07/OS/%5BOS%5D%20%E4%BD%9C%E6%A5%AD%E7%B3%BB%E7%B5%B1%E7%AD%86%E8%A8%98-Process%E9%96%93%E7%9A%84%E6%BA%9D%E9%80%9A/"},{"title":"[AWS] Global Infrastructure","text":"å‰è¨€å‰ä¸€ç¯‡åˆæ­¥ç†è§£AWSçš„æ¶æ§‹åŠå¸‚å ´ä¹‹å¾Œï¼Œæ¥è‘—æ¢è¨AWSåœ¨å…¨åœ‹ä½ˆå»ºçš„åŸºç¤å»ºè¨­å§ï¼ ConceptRegion &amp; Available Zone &amp; Edge LocationAWSçš„åŸºç¤è¨­æ–½æ˜¯ä»¥å€åŸŸ(Region)èˆ‡å¯ç”¨å€åŸŸ(Available Zone)ç‚ºä¸­å¿ƒä¾†å»ºç½®ã€‚ å€åŸŸ(Region)åœ°çƒä¸Šæœ‰å¤šå€‹å¯ç”¨å€åŸŸçš„å¯¦é«”ä½ç½®ï¼Œå¤šå€‹Regionä¹‹é–“ç”±å¤šæ¢æµ·çºœä½ˆå»ºæˆä¸€å€‹å…¨çƒç¶²ã€‚æ¡ˆä¾‹: é¸æ“‡å®¢æˆ¶çš„å®¢ç¾¤ç¯€é»é è¿‘çš„å€åŸŸï¼Œé™ä½å»¶é² å¯ç”¨å€åŸŸ(Available Zone; ç°¡ç¨±AZ): ç”±ä¸€æˆ–å¤šå€‹åˆ†æ•£çš„è³‡æ–™ä¸­å¿ƒ(Data Center)æ‰€çµ„æˆï¼Œè€Œæ¯å€‹AZå°±æ˜¯ä¸€å€‹å¯ç¨ç«‹é‹ä½œçš„è³‡æ–™ä¸­å¿ƒ(å¯è¦–ç‚ºä¸€å€‹building)ï¼Œæ”¾ç½®æ–¼ä¸åŒçš„ç¨ç«‹æ©Ÿæ§‹ã€‚ ç«¯é»(Edge Location)ç‚ºAWSæœå‹™è£¡é¢çš„æœ€å°¾ç«¯ã€‚å®ƒå¯ä»¥èˆ‡å¯ç”¨å€åŸŸ(AZ)äº’å‹•ï¼Œå°æ‰€éœ€è³‡æ–™é€²è¡Œå¿«å–ï¼ŒåŠ é€Ÿè³‡æ–™å…§å®¹çš„è®€å–å’Œä½¿ç”¨ï¼ŒåŒæ™‚ä¹Ÿæ˜¯AWS CloudFronté€™å€‹æœå‹™å¯é‹ä½œçš„æœ€å°å–®ä½ï¼Œç›®å‰åˆ†ä½ˆåœ¨42å€‹åœ‹å®¶/åœ°å€ã€84 å€‹åŸå¸‚å…± 216 å€‹é€£æ¥é»ã€‚ å¹¾å€‹é‡é»AWS çš„Global Infrastructureæœ‰å¹¾å€‹ç‰¹é»: æä¾›è¼ƒé«˜çš„ç©©å®šæ€§ç›®å‰æœ‰å·²æ¨å‡º22å€‹å€åŸŸ, 69å€‹å¯ç”¨å€åŸŸåŠ200å¤šå€‹ç¯€é»ã€‚ç”±æ–¼æ¯å€‹Regionéƒ½æ˜¯å„è‡ªç¨ç«‹ï¼Œæœ‰åŠ©æ–¼æå‡ä¼ºæœå™¨çš„ç©©å®šæ€§åŠå®¹éŒ¯åŠ›ã€‚ è¨ˆåƒ¹å·®ç•°ä¸åŒå€åŸŸæ‰€æä¾›çš„æœå‹™åƒ¹æ ¼æœƒæœ‰äº›å¾®å·®ç•°ï¼Œæ•…é¸æ“‡å€åŸŸæ™‚ï¼Œé€šå¸¸éƒ½æ˜¯çœ‹åœ¨å“ªè£¡èƒ½æä¾›æœ€å¿«çš„æœå‹™æˆ–æ˜¯æŒ‘é¸æœ€ä¾¿å®œçš„å€åŸŸ é«˜å¯ç”¨æ€§(High Availability; ç°¡ç¨±: HA)ä¸€å€‹å€åŸŸ(Region)å¯èƒ½åŒ…å«å¤šå€‹AZï¼Œè€Œå¤šå€‹AZæä¾›ç•°åœ°åŒæ­¥å‚™ä»½ï¼Œé”åˆ°é«˜å¯ç”¨æ€§ï¼ŒåŒæ™‚ä¹Ÿæœ‰è¼ƒä½çš„å»¶é²æ€§åœ–ç‰‡æºä»¥ä¸Šåœ–ç‚ºä¾‹ï¼šä¸Šåœ–ç¯„ä¾‹æ˜¯AWS RDS(é—œè¯å¼è³‡æ–™åº«æœå‹™)é€²è¡Œç•°åœ°å‚™ä»½ï¼Œä¸»è¦è³‡æ–™åº«å¯¦é«”(Instance)æœƒè·¨AZï¼ŒåŒæ­¥å‚™ä»½åˆ°å…¶ä»–AZé€²è¡Œå¾…å‘½(Stanby)ï¼Œé”åˆ°è³‡æ–™å‚™æ´çš„ä½œç”¨ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸åŒçš„ç­‰ç´šçš„åŸºç¤è¨­æ–½(Infra)å‰‡æœƒå½±éŸ¿ç”¨æˆ¶çš„èŠ±è²»ä»¥åŠå°è©²å€åŸŸçš„æœå‹™å“è³ª(quality)ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æœå‹™å‰å‹™å¿…æ…é¸å€åŸŸï¼Œæ¸›å°‘ä¸å¿…è¦çš„å•é¡Œã€‚","link":"2020/03/03/aws/%5BAWS%5D%20Global%20Infrastructure/"},{"title":"[Vue.js] æ¨¡ç‰ˆèªæ³•","text":"å‰è¨€ç­†è¨˜ä¸€ä¸‹Vueçš„æ¨¡æ¿èªæ³• æ¨¡æ¿èªæ³•Mustache: { {variable} } åªèƒ½ç”¨æ–¼å–®è¡Œèªå¥ e.g. if-elseï¼Œä¸”é›™å¤§æ‹¬è™Ÿæœƒå°‡æ•¸æ“šè§£æç‚ºä¸€èˆ¬æ–‡å­— ç”±æ–¼Hexoè§£æâ€é›™å¤§æ‹¬è™Ÿâ€æœƒç™¼ç”ŸéŒ¯èª¤ï¼Œæ‰€ä»¥æ–‡ç« æ¶‰åŠâ€é›™å¤§æ‹¬è™Ÿâ€éƒ½æœƒä»¥{ {} }è¡¨ç¤º æŒ‡ä»¤ç›£è½DOMäº‹ä»¶ï¼Œä¸¦æ”¹è®Š dataå…§çš„è³‡æ–™ï¼Œè‹¥å‚³å…¥å¤šå€‹åƒæ•¸æ™‚ï¼Œäº‹ä»¶åç¨±éœ€åŠ ä¸Š $ é™£åˆ—æ›´æ–°appendã€unshiftï¼Œæ³¨æ„é™£åˆ—æ˜¯è¿”å›åŸé™£åˆ—ï¼Œæˆ–æ˜¯æ–°é™£åˆ—ã€‚ è‹¥æ”¹è®ŠåŸé™£åˆ—ï¼Œå¯ä½¿é é¢æ›´æ–°ã€‚ è‹¥ä¸æ”¹è®ŠåŸé™£åˆ—ï¼Œå»ºä¸€æ–°é™£åˆ—ï¼Œå‰‡ç„¡æ³•ä½¿é é¢åˆ·æ–°ã€‚ methods:è¡¨ç¤ºèª¿ç”¨å‡½æ•¸ï¼Œå‘¼å«å‡½å¼éœ€æ·»åŠ  â€œ()â€ computed:è¨ˆç®—å±¬æ€§ï¼Œäº¦å¯å‘¼å«å‡½æ•¸ï¼Œä½†ä¸é ˆæ·»åŠ  â€œ()â€ watch:è¨ˆç®—å±¬æ€§ vs æ–¹æ³•å±¬æ€§çš„ç›¸é—œå…§å®¹ä¸æŒçºŒè®Šå‹•æ™‚ï¼Œå»ºè­°ä½¿ç”¨computedï¼Œåªåœ¨ç›¸é—œéŸ¿æ‡‰å¼ä¾è³´ç™¼ç”Ÿæ”¹è®Šæ™‚å®ƒå€‘æ‰æœƒé‡æ–°æ±‚å€¼ï¼Œåªè¦å±¬æ€§çš„ç›¸é—œå…§å®¹é‚„æ²’æœ‰ç™¼ç”Ÿæ”¹è®Šï¼Œå¤šæ¬¡è¨ªå•è¨ˆç®—å±¬æ€§æœƒç«‹å³è¿”å›ä¹‹å‰çš„è¨ˆç®—çµæœï¼Œè€Œä¸å¿…å†æ¬¡åŸ·è¡Œå‡½æ•¸ã€‚ è¡¨å–®è¼¸å…¥ç¶å®šv-model é€²è¡Œé›™å‘æ•¸æ“šç¶å®šï¼Œè¼¸å…¥å…§å®¹çš„åŒæ™‚ï¼ŒåŒæ­¥å°‡æ•¸æ“šæ›´æ–°åˆ°é é¢ä¸Šï¼Œé‡è¦ä¿®é£¾ç¬¦:.lazy.number.trim è³‡æ–™æ¸²æŸ“ v-textã€v-htmlã€{ {} }é€éæ¨¡æ¿èªæ³•ç›´æ¥å°‡æŒ‡ä»¤å¯«åœ¨htmlä¸­ { {} } ä½¿ç”¨{}å°‡æ›è¼‰çš„ç‰©ä»¶å…§å®¹é¡¯ç¤ºå‡ºä¾†123&lt;div id=&quot;app&quot;&gt; { { message } } &lt;/div&gt; 123456var app = new Vue({ el: '#app', data: { message: 'Hello Vue!' }}) v-textæ›´æ–°å…ƒç´ çš„textContent123&lt;div id=&quot;app&quot;&gt; &lt;p v-text=&quot;title&quot;&gt;&lt;/p&gt;&lt;/div&gt; 123456var app = new Vue({ el: '#app', data: { title: &quot;&lt;h1&gt;æ¨¡æ¿æŒ‡ä»¤&lt;/h1&gt;&quot;, }})// &lt;h1&gt;æ¨¡æ¿æŒ‡ä»¤&lt;/h1&gt; v-htmlæ›´æ–°å…ƒç´ çš„innerHTMLæ–‡å­—å…§å®¹æœƒå¥—ç”¨htmlæ¨™ç±¤çš„ç‰¹æ€§ 123&lt;div id=&quot;app&quot;&gt; &lt;p v-text=&quot;title&quot;&gt;&lt;/p&gt;&lt;/div&gt; 123456var app = new Vue({ el: '#app', data: { title: &quot;&lt;h1&gt;æ¨¡æ¿æŒ‡ä»¤&lt;/h1&gt;&quot;, }})// æ¨¡æ¿æŒ‡ä»¤ æ§åˆ¶é¡¯ç¤ºã€éš±è— v-if ã€ v-showå·®åˆ¥:è‹¥ä¸é¡¯ç¤ºçš„è©±v-if å‰‡ä¸é€²è¡Œæ¸²æŸ“v-show å…ƒç´ å§‹çµ‚æœƒè¢«æ¸²æŸ“ä¸¦ä¿ç•™åœ¨DOMä¸­ã€‚v-showåªæ˜¯ç°¡å–®åœ°åˆ‡æ›å…ƒç´ çš„CSSå±¬æ€§displayã€‚ 123&lt;p class=&quot;show&quot; v-if=&quot;isShow&quot;&gt;æ¨¡çµ„çš„é¡¯ç¤ºã€éš±è—&lt;/p&gt;&lt;p class=&quot;show&quot; v-show=&quot;isShow&quot;&gt;æ¨¡çµ„çš„é¡¯ç¤ºã€éš±è—&lt;/p&gt; 123456var app = new Vue({ el: '#app', data: { isShow: false, }}) æ¸²æŸ“å¾ªç’°åˆ—è¡¨ v-forä¼¼for.. in çš„JSæ–¹æ³•ï¼Œå¯ç”¨æ–¼é™£åˆ—æˆ–ç‰©ä»¶ï¼Œè‰¯å¥½çš„ç¿’æ…£æ˜¯æ·»åŠ keyå±¬æ€§ï¼Œkeyçš„ä½œç”¨ä¸»è¦æ˜¯ç‚ºäº†é«˜æ•ˆçš„æ›´æ–°è™›æ“¬DOMï¼Œå› ç‚ºæ˜¯æ ¹æ“škeyå€¼å»åˆ¤æ–·æŸå€‹å€¼æ˜¯å¦ä¿®æ”¹,å¦‚æœä¿®æ”¹,å‰‡é‡æ–°æ¸²æŸ“é€™ä¸€é …,å¦å‰‡é‡è¤‡ä½¿ç”¨ä¹‹å‰çš„å…ƒç´ ; 12345&lt;ul&gt; &lt;li v-for=&quot;item in arr&quot;&gt; { { item } }&lt;!--èª¿ç”¨item--&gt; &lt;/li&gt;&lt;/ul&gt; 123456var app = new Vue({ el: '#app', data: { arr: [&quot;1ã€html&quot;, &quot;2ã€CSS&quot;, &quot;3ã€JavaScript&quot;], }}) äº‹ä»¶ç¶å®šv-onäº‹ä»¶ç¶å®š v-on:eventï¼Œæ­é…methodæ–¹æ³•ï¼Œevent è¡¨ç¤ºé»æ“Šå¾Œæ‰€è§¸ç™¼çš„äº‹ä»¶å¯ç”¨ç°¡å¯«: @ ä»£æ›¿ v-on: 123&lt;div class=&quot;show&quot; v-on:click=&quot;speak&quot;&gt;&lt;/div&gt;&lt;!-- èˆ‡ä¸Šæ–¹ç›¸åŒ --&gt;&lt;div class=&quot;show&quot; @click=&quot;speak&quot;&gt;&lt;/div&gt; 12345678var app = new Vue({ el: '#app', methods: { // æ–¹æ³• speak: function() { alert(&quot;hello&quot;); } }}) å±¬æ€§ç¶å®šv-bindv-bind: ç¶å®šç¶å®šçš„ç›®æ¨™ç‚ºæ¨™ç±¤å±¬æ€§ï¼Œç‚ºä¸€ç‰©ä»¶ï¼Œå¾€å¾Œåªéœ€è¦ä¿®æ”¹è®Šæ•¸çš„å€¼å³å¯ï¼Œ&lt;æ¨™ç±¤ v-bind:å±¬æ€§å=&quot;è¦ç»‘å®šVueç‰©ä»¶çš„dataå…§çš„å±¬æ€§å&quot;&gt;&lt;/æ¨™ç±¤&gt;ç”±æ–¼v-bindä½¿ç”¨éå¸¸é »ç¹ï¼Œæ‰€ä»¥Vueæä¾›äº†ç°¡å–®çš„å¯«æ³•ï¼Œç°¡å¯«: : ä»£æ›¿v-bind: 12345&lt;img src=&quot;angry_25.jpg&quot; v-bind:src=&quot;imgName&quot; alt=&quot;&quot; style=&quot;width: 200px; height: 200px;&quot;/&gt;&lt;!--å…©è€…ç›¸åŒ--&gt;&lt;img src=&quot;angry_25.jpg&quot; :src=&quot;imgName&quot; alt=&quot;&quot; style=&quot;width: 200px; height: 200px;&quot;/&gt; 123456var app = new Vue({ el: '#app', data: { imgName: &quot;angry_18.jpg&quot;, // åœ–ç‰‡åç¨± }}) æ¨£å¼ç¶å®šv-bindVueå°ˆé–€åŠ å¼·äº†classå’Œstyleçš„å±¬æ€§çš„ç¶å®šã€‚å¯ä»¥æœ‰è¤‡é›œçš„ç‰©ä»¶ç¶å®šã€é™£åˆ—ç¶å®šæ¨£å¼ã€‚ 123456&lt;div class=&quot;view&quot; v-bind:class=&quot;{active:isActive}&quot;&gt;{ {message1} } &lt;/div&gt; &lt;!-- &lt;div class=&quot;view&quot;&gt; æ¨£å¼ç¶å®š &lt;/div&gt; --&gt; 123456789// isActiveç‚ºçœŸï¼Œ å³ æ·»åŠ classåç¨±çµ¦è©²div// isActiveç‚ºå‡ï¼Œä¸ æ·»åŠ classåç¨±çµ¦è©²divvar app = new Vue({ el: '#app', data: { message1: 'æ¨£å¼ç¶å®š', isActive:false }}) é›™å‘æ•¸æ“šç¶å®š v-modelä¸Šé¢çš„ä¾‹å­åŸºæœ¬éƒ½æ˜¯å–®å‘çš„jsç‰©ä»¶å‘HTMLé€²è¡Œç¶å®šï¼ŒVueæä¾›äº†ä¸€å€‹æ–°çš„æŒ‡ä»¤ï¼šv-modelé€²è¡Œé›™å‘æ•¸æ“šçš„ç¶å®šã€‚ 1234&lt;div id=&quot;app&quot;&gt; &lt;input type=&quot;text&quot; v-model=&quot;title&quot;&gt; &lt;p&gt;{ {title} }&lt;/p&gt; &lt;/div&gt; 1234567// é›™å‘æ•¸æ“šç¶å®šconst app = new Vue({ el: &quot;#app&quot;, data: { title: &quot;Vueå…¥é–€&quot; }}); åŸç†:è¼¸å…¥æ¡†input(v-model)å…§ç™¼ç”Ÿæ”¹è®Šï¼ŒæœƒåŒæ™‚å»æ”¹è®Š titleå±¬æ€§ Vueçµ„ä»¶ä¸­é‡è¦é¸é …dataæ•¸æ“šä»£è¡¨vueç‰©ä»¶çš„æ•¸æ“šï¼Œå‰µå»ºçš„Vueç‰©ä»¶ä¸­çš„dataå±¬æ€§å°±æ˜¯ç”¨ä¾†ç¶å®šæ•¸æ“šåˆ°HTMLçš„ï¼ŒVueæ¡†æ¶æœƒè‡ªå‹•ç›£è¦–dataè£¡é¢çš„æ•¸æ“šè®ŠåŒ–ï¼Œè‡ªå‹•æ›´æ–°æ•¸æ“šåˆ°HTMLæ¨™ç±¤ä¸Šå»ã€‚ 123&lt;div id=&quot;app&quot;&gt; { { message } }&lt;/div&gt; 123456var app = new Vue({ el: '#app', data: { // dataæ•¸æ“šé¸é … message: 'Hello Vue!' } }) methodsæ–¹æ³•ä»£è¡¨vueç‰©ä»¶çš„æ–¹æ³•ï¼Œä¸éè¦æ³¨æ„çš„æ˜¯é€™å€‹æ–¹æ³•è‡ªå‹•ç¶å®šthis 12345&lt;div id=&quot;app&quot;&gt; &lt;div class=&quot;test&quot; @click=&quot;run&quot;&gt;&lt;/div&gt; &lt;div class=&quot;test&quot; @click=&quot;speak&quot;&gt;&lt;/div&gt;&lt;/div&gt; 123456789101112131415var app = new Vue({ el: '#app', methods: { // æ–¹æ³•é¸é … run: function() { alert(&quot;button1&quot;); }, speak: function() { alert(&quot;button2&quot;); }, add: function() { // è¨ªå•data(æ•¸æ“šé¸é …)ä¸­çš„å…§å®¹ this.i++; console.log(this.i); } }) computedè¨ˆç®—å±¬æ€§è¨ˆç®—å±¬æ€§ï¼Œå±¬æ€§å¯ä»¥æ˜¯ä¸€å€‹æ–¹æ³•åœ¨è¨ˆç®—å±¬æ€§ä¸­å®šç¾©çš„å‡½æ•¸è£¡é¢å¯ä»¥ç›´æ¥ä½¿ç”¨thisã€‚æ³¨æ„:æ¡ç”¨returnå›å‚³å€¼åˆ°{ {expression} }ä¸­ 12345&lt;div id=&quot;app&quot;&gt; &lt;div class=&quot;test&quot; @click=&quot;add&quot;&gt; { { strFn } } &lt;/div&gt;&lt;/div&gt; 12345678910111213computed: { // è¨ˆç®—å±¬æ€§(æ–¹æ³•) strFn: function() { if (this.i &lt;= 5) { return &quot;å¤šé»å¹¾æ¬¡&quot;; } else if (this.i &lt;= 10) { return &quot;å†å¤šé»å¹¾æ¬¡&quot;; } else if (this.i &lt;= 15) { return &quot;å†æ¯”ä¹‹å‰å¤šé»å¹¾æ¬¡&quot;; } else if (this.i &lt;= 20) { return &quot;ç›®å‰é»å¾ˆå¤šæ¬¡&quot;; }} watchç›£è½é¸é …è¨­å®šç‰©ä»¶çš„ç›£è½æ–¹æ³•ï¼Œç”¨æ–¼ç›£è½æ•¸æ“šè®ŠåŒ–ï¼Œé‡å°dataå…§çš„å±¬æ€§é€²è¡Œç›£è½ï¼Œä¸éä¸é©åˆç”¨æ–¼è¤‡é›œçš„è¨ˆç®—é‚è¼¯ã€‚ 12345&lt;div id=&quot;app&quot;&gt; &lt;div class=&quot;test&quot; @click=&quot;add&quot;&gt; { { strFn } } &lt;/div&gt;&lt;/div&gt; 123456789101112131415161718const app = new Vue({ el: &quot;#app&quot;, data: { i:0 },methods: { // æ–¹æ³•é¸é … add: function() { // è¨ªå•data(æ•¸æ“šé¸é …)ä¸­çš„å…§å®¹ this.i++; console.log(this.i); }, watch: { // ç›£è½å±¬æ€§ // é‡å°dataå…§çš„å±¬æ€§é€²è¡Œç›£è½ // å‚³å…¥å…©å€‹åƒæ•¸ï¼Œåˆ†åˆ¥ç‚ºæ–°çš„å€¼å’ŒèˆŠçš„å€¼ i: function(newValue, oldValue) { console.log(newValue, oldValue); } }});","link":"2019/07/16/Vue/Vue_templateSyntax/"},{"title":"[AWS] åˆæ¢AWS","text":"å‰è¨€è¿‘å¹¾å¹´é›²ç«¯ä¾›æ‡‰å•†å¤§é‡æŠ•è³‡é›²ç«¯åŸºç¤å»ºè¨­åŠé›²ç«¯è¨ˆç®—ï¼Œç‚ºäº†è§£æ±ºå®¢æˆ¶çš„ç—›é»ï¼Œä¸æ–·åœ°æ¨å‡ºæ›´å¤šæ›´å®Œå–„çš„æœå‹™ï¼Œéš¨è‘—é›²ç«¯æœå‹™åœ¨å¸‚å ´çš„æ¥å—åº¦åŠæ™®éåº¦æå‡ï¼Œè¶Šä¾†è¶Šå¤šä¼æ¥­å°‡è‡ªå®¶æœå‹™ä¸Šé›²ï¼Œä¹˜è‘—é€™è‚¡æ½®æµä¾†å¤šäº†è§£ä¸€ä¸‹é›²ç«¯æœå‹™! Cloud Computingé›²ç«¯é‹ç®—å¼é€éç¶²è·¯é€£ç·šé€²è¡Œåˆ©ç”¨ç¶²è·¯è³‡æºï¼Œåšå„å¼çš„è³‡æºé‹ç®—ï¼Œæˆ‘å€‘å¯ä»¥é€éç§Ÿç”¨çš„æ–¹å¼å…±äº«è»Ÿç¡¬é«”ï¼Œä¸¦åœ¨ä¸åŒçµ‚ç«¯è¨­å‚™åŠè£ç½®ä¸Šäº«æœ‰é€™äº›æœå‹™ã€‚ ä¼æ¥­æˆ–æ˜¯ä¸€èˆ¬å¤§çœ¾å¯ä¾æ“šè‡ªèº«éœ€æ±‚ï¼Œå‘é›²ç«¯æœå‹™çš„ä¾›æ‡‰å•†è³¼è²·èƒ½å¤ æ»¿è¶³ä»–å€‘éœ€æ±‚çš„æœå‹™ï¼Œä¸é ˆå¾é ­é–‹å§‹æ¡è³¼ç¡¬é«”è¨­å‚™,é…ç½®ç¶²è·¯åŠæ¶è¨­ç’°å¢ƒç­‰ï¼Œè³¼è²·æœå‹™å¾Œå¯ç«‹å³äº«æœ‰ç›®æ¨™è³‡æºã€‚ å¦ä¸€æ–¹é¢ä¾†èªªï¼Œç”¨æˆ¶å…¶å¯¦å¯ä»¥ä¸éœ€è¦äº†è§£è¤‡é›œçš„é›²è¨ˆç®—æ‰€éœ€çš„åŸºç¤è¨­æ–½ï¼Œç”šè‡³ä¸éœ€è¦æœ‰æ·±åšçš„å°ˆæ¥­çŸ¥è­˜ï¼Œå¤§å¹…é™ä½ç”¨æˆ¶çš„ä½¿ç”¨é–€æª»ï¼ŒåŒæ™‚æå‡ç”¨æˆ¶çš„ç‡Ÿé‹æ•ˆç‡ï¼Œå¦å¤–ï¼Œé›²æœå‹™æœ‰å€‹â€ç”¨å¤šå°‘, ä»˜å¤šå°‘â€çš„ç‰¹æ€§ï¼Œè§£æ±ºå‚³çµ±ç”¨æˆ¶å› ä½¿ç”¨æ•ˆç‡ä¸ä½³è€Œé€ æˆè³‡æºæµªè²»çš„å•é¡Œã€‚ æŒ‡æ¨™ä¾›æ‡‰å•†ç›®å‰é›²æœå‹™ä¾›æ‡‰å•†å‰ä¸‰å¤§å½±éŸ¿åŠ›çš„åˆ†åˆ¥æ˜¯: Amazon(AWS), Microsoft(Azure), Google(GCP)ï¼Œé€™ä¸‰å®¶å¤§å» ä½”é›²ç«¯å¸‚å ´æ¥µå¤§çš„æ¯”ä¾‹ã€‚ä¾†çœ‹ä¸‹åœ–2019çš„èª¿æŸ¥å ±å‘Šå¯çªºçŸ¥ä¸€äºŒã€‚Ref é›²æœå‹™æ¶æ§‹ç¨®é¡ IaaS: åŸºç¤æ¶æ§‹å³æœå‹™ PaaS: å¹³å°å³æœå‹™ SaaS: è»Ÿé«”å³æœå‹™ IaaSé›²ç«¯æœå‹™ä¾›æ‡‰å•†æä¾›çš„æœå‹™(å¦‚AWS, GCP)åŒ…å«ç¶²è·¯å»ºç½®, Serveræ¡è³¼ç­‰ç¡¬é«”è¨­æ–½ï¼Œæˆ–æ˜¯é‹ç”¨è™›æ“¬åŒ–çš„æŠ€è¡“ï¼Œå…¬å¸åªéœ€å°ˆæ³¨åœ¨ç¡¬é«”è¨­å‚™å¤–çš„é …ç›®å³å¯ï¼Œå¦‚ä½œæ¥­ç³»çµ± , æ‡‰ç”¨ç¨‹å¼ç­‰ç­‰ã€‚ å‚³çµ±å…¬å¸ä½œæ³•å¯èƒ½æœƒæ˜¯å…§éƒ¨è‡ªå»ºæ©Ÿæˆ¿ï¼Œä½†ä¼´éš¨è€Œä¾†çš„ç¶­è­·å•é¡Œï¼Œå¤§å¹…æé«˜ä¼æ¥­æˆæœ¬ï¼ŒåŠ ä¸Šé›²ç«¯è™›æ“¬æŠ€è¡“é€æ¼¸è“¬å‹ƒç™¼å±•ï¼Œé–‹å§‹æ¨å‹•é€™é¡æœå‹™ï¼Œè§£æ±ºå…¬å¸åœ¨åŸºç¤å»ºè¨­æ–¹é¢æ‰€é‡åˆ°çš„å›°é›£é»ã€‚ å„ªé» éˆæ´»åº¦é«˜ä¸”å¯ä»¥æ“´å±• å¯å¤šäººä½¿ç”¨ å„ªåŒ–è³‡æºçš„åˆ©ç”¨ç‡ ç¯„ä¾‹æœå‹™: EC2ç‚ºAWSæä¾›äº†è™›æ“¬æœå‹™å™¨ï¼ŒEC2çš„ç”¨æˆ¶ä¸éœ€æ“æœ‰å¯¦é«”æœå‹™å™¨ã€‚ PaaSPaaSæœå‹™é€šå¸¸æœƒåŒ…å«IaaSçš„ç¯„åœï¼Œä¹Ÿå°±æ˜¯é™¤äº†åŸºç¤æ¶æ§‹æœå‹™å™¨ï¼Œå„²å­˜å’Œç¶²è·¯å¤–ï¼Œé‚„å°‡ä½œæ¥­ç³»çµ±, é–‹ç™¼ç’°å¢ƒäº¤ç”±å» å•†ç®¡ç†ï¼Œä¼æ¥­å¯ä»¥å°ˆæ³¨åœ¨Applicationçš„é–‹ç™¼èˆ‡éƒ¨ç½²ã€‚ å„ªé» éˆæ´»åº¦é«˜ä¸”å¯ä»¥æ“´å±• å¯å¤šäººä½¿ç”¨ ç„¡éœ€å…·å‚™å»£æ³›çš„ç³»çµ±ç®¡ç†çŸ¥è­˜å³å¯è¼•é¬†é‹è¡Œ ç¯„ä¾‹æœå‹™: Elastic Beanstalk SaaSSaaSæœå‹™å‰‡æ˜¯é€£åŒApplicationéƒ½å¹«ä½ ç®¡ç†å¥½ï¼Œç”¨æˆ¶å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ é›²æœå‹™çš„é¡å‹èˆ‡å‚³çµ±ç›¸æ¯”å¯çœ‹ä¸‹åœ–åœ–ç‰‡æº ä¸Šé¢çš„æ¯”è¼ƒåœ–å¯ä»¥æ¦‚ç•¥çŸ¥é“å‚³çµ±çš„æœ¬åœ°éƒ¨ç½²(On-Premises)æ¡ç”¨è™›æ“¬åŒ–æŠ€è¡“çš„ç®¡ç†å·¥å…·ï¼Œè»Ÿç¡¬é«”çš„ç®¡ç†,ç¶­è­·éƒ½æ˜¯ä¼æ¥­è‡ªå·±åšã€‚ å¦‚æœä»¥åˆ†å±¤çš„è§’åº¦ä¾†çœ‹ï¼Œé‡‘å­—å¡”æœ€åº•å±¤ç‚ºIaaSå¾€ä¸Šä¾åºç‚ºPaaS, SaaS åœ–ç‰‡æº é€™ç¯‡æ–‡ç« æœ‰æ›´è©³ç´°çš„ä»‹ç´¹ã€‚ AWSæˆæœ¬å®šåƒ¹AWSçš„è²»ç”¨è¨ˆç®—å¯ä»¥ç°¡å–®ç”¨ä¸€å¥è©±ç¸½çµ: â€œç”¨å¤šå°‘ç®—å¤šå°‘â€è¨ˆç®—çš„ç¨®é¡å¤§ç•¥åˆ†å¹¾é¡: ä½¿ç”¨æ™‚é–“ ä½¿ç”¨å–®ä½ å ç”¨çš„è³‡æº ä½¿ç”¨æ–¹å¼ ä»¥EC2ç‚ºä¾‹:åœ–ç‰‡æºå¦‚æœæ˜¯æœ‰é•·æœŸç©©å®šçš„éœ€æ±‚ï¼Œç›¸è¼ƒæ–¼On Demandï¼Œå¯ä»¥é¸æ“‡RI(Reserved Instance)æˆ–æ˜¯Spotæ–¹æ¡ˆï¼Œäº«æœ‰æ›´å¥½çš„æŠ˜æ‰£ã€‚ å®˜æ–¹èªè­‰è€ƒè©¦ç‚ºäº†æ¨å»£è‡ªå®¶æœå‹™ï¼ŒAWSå®˜æ–¹æ¨å‡ºä¸€ç³»åˆ—çš„è€ƒè­‰åˆ¶åº¦ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥ä½œç‚ºå°æœå‹™äº†è§£ç¨‹åº¦çš„åƒè€ƒä¾æ“šã€‚ å…è²»è©¦ç”¨å¸³è™ŸAWSæ¨å‡ºç‚ºæœŸä¸€å¹´çš„å…è²»å¸³è™Ÿ(è¨»å†Šé€£çµé»æˆ‘)ï¼Œæƒ³ç©ç©çœ‹AWSæœå‹™çš„è©±ç”±æ­¤è¨»å†Šã€‚ è²»ç”¨è¨ˆç®—å®˜æ–¹å¾ˆè²¼å¿ƒçš„æä¾›å…©ç¨®è¨ˆç®—æ©Ÿï¼Œè®“ç”¨æˆ¶å¯ä»¥å¿«é€Ÿè¨ˆç®—è²»ç”¨ æ¯æœˆæˆæœ¬ç°¡æ˜“è¨ˆç®—å™¨å¯è®“ç”¨æˆ¶ä¼°è¨ˆå–®ä¸€æˆ–å¤šå€‹æœå‹™çš„åƒ¹æ ¼ï¼Œå¦å¤–ä¹Ÿæä¾›ä½¿ç”¨ç¯„æœ¬ä¾†ä¼°ç®—å®Œæ•´æœå‹™åƒ¹æ ¼ã€‚ TCO è¨ˆç®—å™¨é ä¼°ä½¿ç”¨ AWSæ‰€ç¯€çœçš„è²»ç”¨ï¼Œä¸¦æä¾›æ¯”è¼ƒå¾Œçš„è©³ç´°å ±å‘Šï¼Œå±¬æ–¼å…¨é¢æ€§çš„ã€‚ åƒé–±Overview of Amazon Web Services","link":"2020/03/02/aws/%5BAWS%5D%20%E5%88%9D%E6%8E%A2AWS/"},{"title":"[AWS] åˆè­˜AWSä¸­çš„VPC","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 13 å‰è¨€æœ¬æ–‡åšç‚ºæœ‰é—œVPCçš„é–±è®€ç­†è¨˜ ä½•è¬‚VPCVPCå…¨åæ˜¯Virtual Private Cloudï¼Œæ˜¯ä¸€å€‹å»ºç«‹åœ¨é›²ç«¯ä¸Šçš„å°é–‰å€åŸŸç¶²è·¯ï¼Œä¸€èˆ¬ä¾†èªªï¼ŒåŸºæ–¼å®‰å…¨è€ƒé‡ï¼Œå…¬å¸éƒ½æœƒæœ‰è‡ªå·±çš„ä¸€å¥—å…§éƒ¨ç¶²è·¯ç’°å¢ƒï¼Œå°å¤–ç¶²è·¯æœƒæœ‰ä¸€å°é˜²ç«ç‰†ä¿è­·ï¼Œé¿å…å¤–éƒ¨éš¨æ„é€£é€²ä¾†ï¼Œåœ¨é˜²ç«ç‰†å…§å°±åƒæ˜¯ä¸€å€‹VPCã€‚æƒ³åƒä¸€ç¨®æƒ…æ³ï¼Œè‹¥æœ‰å…¬å¸å…§éƒ¨çš„è³‡æ–™åº«é–‹æ”¾è®“å¤–éƒ¨é€²è¡Œé€£ç·šï¼Œåªè¦æœ‰æ­£ç¢ºçš„å¸³è™Ÿå¯†ç¢¼ï¼Œèª°éƒ½å¯ä»¥é€£é€²ä¾†ï¼Œé‚£å°‡æ˜¯éå¸¸å±éšªçš„äº‹æƒ…ã€‚è‹¥æ˜¯å³ä½¿å¸³è™Ÿå¯†ç¢¼æ­£ç¢ºï¼Œä½†åªæœ‰æŸå¹¾å°æ©Ÿå™¨å¯ä»¥é€£é€²ä¾†ï¼Œå®‰å…¨æ€§ç›¸å°æé«˜ï¼Œå¾Œè€…å³æ˜¯VPCçš„ä¸»è¦åŠŸèƒ½ã€‚VPCä¸­å¯ä»¥é¸æ“‡è‡ªå·±çš„ IP åœ°å€ç¯„åœã€å»ºç«‹å­ç¶²è·¯(subnet)ã€é…ç½®è·¯ç”±è¡¨(Route Table)å’Œç¶²è·¯é–˜é“(Internet Gateway)ï¼Œä»¥åŠé¸æ“‡å…¬æœ‰å’Œç§æœ‰ç¶²è·¯ æ¯å€‹Regionçš„ç¶²è·¯äº’ç›¸ç¨ç«‹ï¼ŒåŒä¸€å€‹Regionå¯åŒæ™‚å»ºç«‹å¤šå€‹VPCï¼ŒVPCé–“å½¼æ­¤ç¨ç«‹ä¸å¹²æ“¾ã€‚ Amazon VPC åŒ…å«å“ªäº›éƒ¨åˆ†ï¼ŸElastic IP(EIP):å³å›ºå®šIPï¼Œä»¥AWS EC2ä¾†èªªï¼Œé è¨­æ˜¯ä½¿ç”¨è®Šå‹•çš„IPï¼Œæ¯æ¬¡é‡å•ŸEC2æ™‚éƒ½æœƒè³¦äºˆæ–°çš„IPï¼Œè‹¥è¦è®“EC2ç¶å®šä¸€çµ„å›ºå®šIPï¼Œå°±å¯ä»¥åœ¨EC2çš„ç®¡ç†ä»‹é¢ä¸­é…ç™¼ä¸€çµ„EIPçµ¦ä»–ã€‚ éœ€æ³¨æ„çš„é‡é»ï¼šElastic IPåœ¨æ¯å€‹Regionå‰›é–‹å§‹åªæœƒçµ¦5å€‹é¡åº¦ï¼Œç”¨å®Œéœ€å¦å¤–ç”³è«‹ã€‚ Subnet(å­ç¶²è·¯):Subnetå°±æ˜¯åœ¨VPCçš„ç¶²æ®µä¸‹ï¼Œå†ç´°åˆ†ä¸åŒçš„å­ç¶²æ®µã€‚Subnetå¯å€åˆ†ç‚ºPublicã€Privateå’ŒVpn-Onlyä¸‰ç¨®ï¼Œä»¥å…¬å¸å…§éƒ¨ç¶²è·¯ä¾†çœ‹ï¼Œæœƒåˆ‡æˆä¸åŒçš„å­ç¶²æ®µã€‚Public: ç›´æ¥å°å¤–æœå‹™ï¼Œæ“æœ‰Elastic IP(EIP)ï¼Œé€é Internet Gatewayå¯ç›´æ¥è¨ªå•InternetPrivate: ç§æœ‰çš„å­ç¶²æ®µï¼Œè©²ç¶²æ®µåªèƒ½èˆ‡å…§éƒ¨ç¶²è·¯æºé€šï¼Œç„¡æ³•ç›´æ¥è¨ªå• InternetVPN-Onlyï¼šåªå…è¨±ç‰¹å®šçš„VPNé€£æ¥ Subnetéœ€æ³¨æ„çš„å¹¾å€‹é‡é»ï¼š æ¯å€‹subnetçš„CIDR Blockä¸èƒ½é‡è¤‡ï¼Œä¹Ÿä¸èƒ½å¤§æ–¼VPC ä¸€èˆ¬ä¾†èªªï¼Œsubneté™¤äº†åˆ‡é–‹CIDRå¤–ï¼Œé‚„æœƒå€åˆ†ä¸åŒçš„AZ(å¯ç”¨å€åŸŸ)ï¼Œé¿å…å–®ä¸€å€‹å€åŸŸå…§æ©Ÿæˆ¿å¤±æ•ˆçš„å•é¡Œ Route Table(è·¯ç”±è¡¨):ä¸€èˆ¬ç¶²è·¯å°åŒ…åœ¨å‚³é€æ™‚ï¼Œèµ·é»åˆ°çµ‚é»ä½ç½®çš„å‚³è¼¸è·¯å¾‘ç”±Routerä¾†æ±ºå®šï¼Œè€ŒRoute Tableå¯æ±ºå®šå¾€ç‰¹å®šç¶²æ®µ(Destination)çš„å°åŒ…å¦‚ä½•å‚³é€(Target) å¸¸è¦‹Targeté¡å‹ï¼š local NAT Portal internet gateway(ç°¡ç¨±igw) virtual gateway(ç°¡ç¨±vgw)å¯ç”¨åœ¨é€£æ¥ä¼æ¥­å…§éƒ¨çš„VPN å¹¾å€‹æ³¨æ„çš„é‡é» æ¯å€‹ subnet åªèƒ½æŒ‡å®šé›¶æˆ–ä¸€å¼µ route table å¯ä»¥è¨­å…¶ä¸­ä¸€å¼µroute tableç‚ºé è¨­å€¼ï¼›è®“æœªæŒ‡å®šçš„subnetéƒ½åƒç…§å®ƒ Internet Gateway:è®“VPCèˆ‡å¤–éƒ¨ç¶²éš›ç¶²è·¯æºé€šçš„é€šé“ï¼ŒRoute Tableæœƒå°‡å°åŒ…å¾€ Gatewayé€ï¼Œå³å¯å°å¤–é€²è¡Œæºé€šã€‚ NATå…¨åç‚ºNetwork Address Translationï¼Œä¸»è¦çš„åŠŸèƒ½æ˜¯é€£çµå…§éƒ¨èˆ‡å¤–éƒ¨çš„ç¶²è·¯ï¼Œå¦‚å€åŸŸç¶²è·¯å…§çš„æœå‹™å™¨ï¼Œåªå…è¨±å…§å°å¤–çš„é€£ç·šï¼Œä½†ä¸å…è¨±å¤–å°å…§çš„é€£ç·šï¼Œçš†é€éåŒä¸€å€‹å°å¤–IPä¾†é€²è¡Œå°å¤–éƒ¨çš„æºé€šã€‚ æ³¨æ„çš„é‡é»: åœ¨Public subnetå»ºç«‹ä¸€å€‹NAT Gateway NAT Gatewayéœ€æŒ‡å®šä¸€çµ„EIPï¼Œå»ºç«‹å¤–éƒ¨é€£ç·š Endpoint(ç«¯é»)åœ¨Private subnetå…§ï¼Œé€£æ¥AWSæŸäº›Serviceæ™‚ e.g. S3ï¼Œå¯é€éå»ºç½®Endpointä¾†ä¸²æ¥ã€‚ VPCéœ€æ³¨æ„çš„å¹¾å€‹é‡é»ï¼š VPCåœ¨è¨­å®šä¹‹å¾Œä¸èƒ½æ”¹ï¼Œè¦æ”¹åªèƒ½é‡å»º æ¯å€‹å€åŸŸçš„æ¯å€‹AWSå¸³æˆ¶æœ€å¤š5å€‹VPCï¼Œè¦æ›´å¤šçš„è©±éœ€è¦è·ŸAWSç™¼ticket VPC çš„subnetå¯ä»¥å¾æœ€å°/28åˆ°æœ€å¤§/16ï¼Œå³æœ€å°‘å¯ä»¥é–‹14å€‹IP addressesçš„VPCï¼Œä»¥åŠæœ€å¤§65534å€‹IP addressesçš„VPCã€‚ æ¯å€‹VPCå¯æ“æœ‰200 subnets æ¯å€‹VPCéƒ½æ˜¯ç¨ç«‹ç’°å¢ƒï¼Œå¯é€éNATä¾†é€£æ¥ä¸åŒVPC VPCçš„è¨ˆè²»ï¼šå¦‚æœæ˜¯å»ºç«‹ã€ä½¿ç”¨VPCæœ¬èº«çš„è©±ä¸æ”¶å…¶ä»–è²»ç”¨ã€‚ä½†VPCå…§åŒ…å«å…¶ä»–AWSæœå‹™çš„è©±ï¼Œå¦‚ï¼šEC2ï¼Œå‰‡æœƒæ”¶å–å…¶ä»–Servicesçš„ä½¿ç”¨è²»ï¼Œä¾ç…§é€™äº›è³‡æºå…¬ä½ˆçš„è²»ç‡è¨ˆç®—ï¼Œå¯èƒ½é‚„éœ€æ”¯ä»˜è³‡æ–™å‚³è¼¸è²»ç”¨ã€‚ ç¯„ä¾‹è¨è«–æœ€å¾Œä»¥å®˜æ–¹æ–‡ä»¶çš„ç¯„ä¾‹ä¾†åšè¨è«–ã€‚åœ–ç‰‡å–è‡ªå®˜æ–¹æ–‡ä»¶ä¸Šåœ–ç‚ºå®˜æ–¹çµ¦çš„é è¨­VPCæ¶æ§‹åœ–ï¼Œå¯å¾AWS Consoleé€²è¡Œé»æ“Šé è¨­çš„æ¶æ§‹æœƒæ˜¯ï¼š é è¨­VPCæœƒç™¼çš„CIDRç‚º172.31.0.0/16 é è¨­æ›¿æ¯ä¸€å€‹AZåˆ†é…ä¸€å€‹/20çš„Subnet: 172.31.0.0/20ã€172.31.16.0/20 å…©å€‹Subnetå…§å„æœ‰ä¸€å°EC2 instanceï¼Œå³172.31.0.5ã€172.31.16.5 EC2 instanceæœƒè‡ªå‹•è¢«åˆ†é…ä¸€çµ„å¤–éƒ¨IPï¼Œå³åœ–ç‰‡ä¸­çš„Public IP: 203.0.113.17ã€203.0.113.23ï¼Œåªè¦é‡æ–°é–‹æ©Ÿï¼Œæœƒè‡ªå‹•é‡æ–°åˆ†é…æ–°çš„IPã€‚ é€éInternet Gatewayå»ºç«‹å°å¤–ç¶²çš„é€£ç·šï¼Œå³igw-id å…©å€‹Subnetéƒ½æœƒéµå¾ªMain route tableå»ºç«‹çš„è·¯å¾‘ï¼Œåªè¦æ”¶ä»¶è€…IPæ˜¯172.31.0.0/16çš„ç¶²æ®µï¼Œç¶²è·¯å°åŒ…å°±æœƒå¾€å…§ç¶²é€ï¼›å…¶é¤˜å°åŒ…(0.0.0.0/0è¡¨ä»»æ„é€£ç·š)ï¼Œå°±å¾€Internet Gatewayç™¼é€ã€‚ åƒè€ƒæ–‡ä»¶ Official Docs AWS å…§ VPC èˆ‡ Subnet è¦åŠƒã€ç†è§£","link":"2020/04/28/aws/%5BAWS%5D%20%E5%88%9D%E8%AD%98AWS%E4%B8%AD%E7%9A%84VPC/"},{"title":"[AWS] ç”¨AWS Elastic Beanstalk éƒ¨ç½²ä½ çš„ç¬¬ä¸€å€‹Djangoæ‡‰ç”¨","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 05 å‰è¨€æœ¬ç¯‡è‘—é‡åœ¨å¦‚ä½•ä½¿ç”¨AWS Elastic Beanstalkä½ˆå»ºä½ çš„Djangoå°ˆæ¡ˆï¼Œç›¸è¼ƒæ–¼EC2ï¼ŒElastic Beanstalkè®“é–‹ç™¼è€…æ›´èƒ½å°ˆæ³¨åœ¨æ’°å¯«ç¨‹å¼ä¸Šï¼Œä¸éœ€èŠ±è²»é¡å¤–æ™‚é–“å»ºç½®ç’°å¢ƒã€‚ å‰ç½®ä½œæ¥­ AWS Free Tier(ä¸€å¹´æœŸçš„å…è²»å¸³è™Ÿ) Python 3.6 pip virtualenv awsebcli Hands On Labæœ¬åœ°å»ºç½®Djangoå°ˆæ¡ˆå»ºç«‹åç‚ºeb_djangoçš„å°ˆæ¡ˆè³‡æ–™å¤¾123mkdir eb_djangocd eb_django åœ¨è©²è³‡æ–™å¤¾ä¸‹å»ºç«‹è™›æ“¬ç’°å¢ƒï¼Œeb-virtå¯æ›¿æ›æˆè‡ªå·±è¦çš„åç¨±ã€‚ 1virtualenv eb-virt é–‹å•Ÿè™›æ“¬ç’°å¢ƒ 1source eb-virt/bin/activate ä¸‹è¼‰ä¸¦å»ºç«‹djangoå°ˆæ¡ˆ1pip install django==2.1.1 é€™é‚Šå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒAWSå®˜æ–¹æ–‡ä»¶æœ‰æåˆ°ç‰ˆæœ¬ç›¸å®¹çš„å•é¡Œ: For Django version compatibility with Python, see What Python version can I use with Django? Django 2.2 is incompatible with the Elastic Beanstalk Python 3.6 platform. The latest compatible version is Django 2.1. å› ç‚ºå¹³å°ä¸Šçš„Python3.6ä»¥ä¸Šç‰ˆæœ¬èˆ‡Django2.2ä¸ç›¸å®¹ï¼Œæ‰€ä»¥Djanogoç‰ˆæœ¬è¦æŒ‡å®šåœ¨2.1.1(ç¾åœ¨Djangoå®˜æ–¹éƒ½å·²ç¶“å‡ºåˆ°3.0äº†â€¦) å»ºç«‹djangoå°ˆæ¡ˆ 1django-admin startproject ebdjango ç¾åœ¨çš„å°ˆæ¡ˆæ¡ˆç›®éŒ„çµæ§‹æœƒæ˜¯ 123456789101112eb_django/ | - eb-virt | | -- bin | | -- include | | -- lib | - ebdjango |-- ebdjango | |-- __init__.py | |-- settings.py | |-- urls.py | `-- wsgi.py `-- manage.py åŸ·è¡ŒDjangoå°ˆæ¡ˆ 123cd ebdjangopython manage.py runserver é‹è¡Œå¾Œæœƒçœ‹åˆ°Starting development server at http://127.0.0.1:8000/çš„è¨Šæ¯ï¼Œè¨ªå•http://127.0.0.1:8000/ç¶²é å¾Œå°±æœƒçœ‹åˆ°djangoé è¨­ç•«é¢ ä¿å­˜ç›¸ä¾å¥—ä»¶ä¿å­˜ç›¸ä¾å¥—ä»¶çš„è³‡è¨Šåœ¨requirements.txtï¼Œä¹‹å¾ŒElastic Beanstalkæœƒä¾ç…§requirements.txté€™å€‹æª”æ¡ˆå…§å®¹ä¾†åˆ¤æ–·åŸ·è¡Œæ‚¨æ‡‰ç”¨ç¨‹å¼çš„EC2 Instanceæ‡‰è©²éœ€å®‰è£å“ªäº›å¥—ä»¶ã€‚ 1pip freeze &gt; requirements.txt æŸ¥çœ‹å…§å®¹ 1cat requirements.txt é…ç½®.ebextensions ç›®éŒ„å»ºç«‹ .ebextensions çš„ç›®éŒ„ 1mkdir .ebextensions ç¢ºèªå°ˆæ¡ˆç›®éŒ„çµæ§‹ 1ls -a é–‹å•Ÿç›®éŒ„ 1open .ebextensions/ åœ¨.ebextensionsç›®éŒ„ä¸‹å»ºç«‹é…ç½®çš„æª”æ¡ˆdjango.config 1touch django.config å¯«å…¥ä¸‹æ–¹æŒ‡ä»¤ 123option_settings: aws:elasticbeanstalk:container:python: WSGIPath: ebdjango/wsgi.py WSGIPath è¨­å®šæœƒæŒ‡å®š Elastic Beanstalk ç”¨æ–¼å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼çš„ WSGI æŒ‡ä»¤ä½ç½®ã€‚ é›¢é–‹è™›æ“¬ç’°å¢ƒ 1deactivate ä»¥è³‡è¨Šå®‰å…¨ä¾†èªªï¼Œé€™é‚Šæˆ‘æœƒæ¯”è¼ƒå»ºè­°ç”¨IAMå»ºç«‹ä¸€å€‹Userä¾†é€²è¡Œæœå‹™çš„å»ºç½®ï¼Œç›¡é‡ä¸ä½¿ç”¨Root Accountç›´æ¥ä½¿ç”¨CLIæ“ä½œæœå‹™ï¼Œä½¿ç”¨IAMå»ºç«‹Userï¼Œä¸¦çµ¦äºˆUserç›¸å°æ‡‰çš„ä½¿ç”¨æ¬Šé™èˆ‡ç‰¹å®šçš„AWSæœå‹™ï¼Œå¦‚æœåŠ ä¸ŠMFAçš„å¤šé‡èªè­‰æ©Ÿåˆ¶ï¼Œå®‰å…¨æ€§æœƒæ›´é«˜ï¼Œä¸éæœ¬ç¯‡åªå…ˆåšåˆ°ç”¨IAMå»ºç«‹ä¸€å€‹æ“æœ‰ç‰¹å®šæœå‹™çš„Userã€‚ IAMIAMæ˜¯AWSæä¾›æ¬Šé™æ§ç®¡çš„ä¸€é …æœå‹™ï¼Œä½ å¯ä»¥é€éIAMä¾†å‰µå»ºUserï¼ŒæŒ‡æ´¾ç‰¹å®šæ¬Šé™æˆ–æœå‹™è³‡æºçµ¦è©²åUserã€‚ç•¶ç„¶ï¼Œä»–ä¹Ÿå¯ä»¥ä»¥ç¾¤çµ„çš„æ–¹å¼åšé›†é«”çš„æ¬Šé™ç®¡ç†ï¼Œä¸éä¸åœ¨æœ¬ç¯‡è¨è«–ç¯„åœï¼Œåªéœ€è¦çŸ¥é“å®ƒå¯ä»¥å¹«åŠ©æˆ‘å€‘åšæ¬Šé™ç®¡ç†ã€‚ å»ºç«‹Userå…ˆç™»å…¥è¨»å†Šå¥½çš„AWSå…è²»å¸³è™Ÿï¼Œé»æ“Šå³ä¸Šè§’çš„å€‹äººå¸³è™Ÿï¼Œæœƒå‡ºç¾ä¸‹æ‹‰é¸å–®ï¼Œé¸æ“‡My Security Credentialï¼Œ é€²å…¥é é¢å¾Œé»é¸å·¦æ–¹é¸å–®çš„Usersï¼Œå³æ–¹çš„ç•«é¢æœ‰å€‹Add UseræŒ‰éˆ•é€²å…¥Add Userç•«é¢é€™å€‹é é¢ä¸»è¦æ˜¯è¨­å®šUseråç¨±ã€AWSçš„æ“ä½œæ–¹å¼ï¼Œæœ¬ç¯‡æ˜¯å…©å€‹éƒ½é¸ï¼Œè€ŒAWS Management Console accessï¼Œæ–¹ä¾¿æˆ‘å€‘ä¹‹å¾Œå¯ä»¥å¾AWSçš„ç®¡ç†ä»‹é¢æŸ¥çœ‹å°ˆæ¡ˆæƒ…æ³ï¼Œä½ å¯ä»¥è‡ªè¨‚å¯†ç¢¼ï¼Œæˆ–æ˜¯è‡ªå‹•ç”¢ç”Ÿã€‚ é…ç½®Useræ¬Šé™Elastic Beanstalkæœƒä½¿ç”¨åˆ°EC2ã€S3ç­‰æœå‹™ï¼Œæ‰€ä»¥æˆ‘å€‘ä¹Ÿè¦åŒæ™‚çµ¦äºˆé€™äº›æœå‹™çš„æ¬Šé™æ”¿ç­–çµ¦å»ºç«‹çš„Userï¼Œåˆ†åˆ¥åœ¨æœå°‹æ¬„æ‰¾AWSElasticBeanstalkFullAccessã€AmazonEC2FullAccessã€AmazonS3FullAccessä¸‰é …æœå‹™çš„æ‰€æœ‰æ¬Šé™ã€‚å¾ŒçºŒå¾—Add tagså¯å¿½ç•¥ã€‚ Reviewç¢ºèªä¸Šè¿°å‹¾é¸çš„æ¬Šé™éƒ½è¢«åˆ—åœ¨ä¸Šé¢å¾Œå°±å¯ä»¥å»ºUserå›‰è¨˜å¾—å°‡Keyä¿ç•™åœ¨æœ¬åœ°å“¦ï¼å¦å¤–ï¼Œä¸‹è¼‰å®Œçš„.csvè£¡æœ‰é™„IAMå¸³è™Ÿç™»å…¥çš„é€£çµï¼Œé»æ“Šå¾Œè¼¸å…¥å‰›å‰›è‡ªè¨‚çš„å¯†ç¢¼å³å¯ä»¥IAMçš„å½¢å¼é€²è¡Œç™»å…¥ï¼Œç™»å…¥æ™‚æœƒå†è¦æ±‚ä½ æ›´æ”¹ä¸€çµ„æ–°å¯†ç¢¼ã€‚ ebcliæ¥ä¸‹ä¾†æˆ‘å€‘è¦é€éElastic Beanstalkæä¾›çš„CLIä¾†å»ºç½®ç’°å¢ƒ ç¢ºèªå°ˆæ¡ˆç›®éŒ„çš„çµæ§‹1234567891011~/ebdjango/|-- .ebextensions| `-- django.config|-- ebdjango| |-- __init__.py| |-- settings.py| |-- urls.py| `-- wsgi.py|-- db.sqlite3|-- manage.py`-- requirements.txt ä¸‹è¼‰ebcli1pip install awsebcli AWS ebcliç™»å…¥1aws configure åŸ·è¡Œä¸Šæ–¹æŒ‡ä»¤å¾Œæœƒè¦æ±‚è¼¸å…¥AWS Access Key IDå’ŒAWS Secret Access Keyï¼Œå°‡å‰›æ‰è¼‰ä¸‹ä¾†çš„æª”æ¡ˆï¼Œè£¡é¢æœ‰é€™å…©è€…çš„è³‡è¨Šï¼Œç¢ºå®šä¸€ä¸‹å…©è€…æ˜¯å¦æ­£ç¢ºè¼¸å…¥ï¼ åˆå§‹åŒ–EB CLI å„²å­˜åº«é€éä¸‹æ–¹æŒ‡ä»¤åˆå§‹åŒ–EB CLIå„²å­˜åº«ã€‚ 1eb init -p python-3.6 django-project çµ‚ç«¯æ©Ÿæœƒæç¤ºApplication django-project has been created.å»ºç«‹æˆåŠŸçš„è¨Šæ¯ï¼Œæ¥è‘—æŸ¥çœ‹ç•¶å‰æª”æ¡ˆçµæ§‹è®ŠåŒ– å»ºç«‹éƒ¨ç½²ç’°å¢ƒ1eb create django-env æŸ¥çœ‹éƒ¨ç½²ç’°å¢ƒ1eb status è¤‡è£½CNAMEçš„è¨Šæ¯ï¼Œå®ƒä»£è¡¨ä½ çš„ç¶²åŸŸä½ç½®ã€‚ é…ç½®domainå°‡å‰›å‰›è¤‡è£½çš„ç¶²å€è²¼åˆ°Djangoå°ˆæ¡ˆä¸­çš„settings.pyæª”å…§ 1ALLOWED_HOSTS = ['django-env.eba-mjgjyqkj.us-west-2.elasticbeanstalk.com', '127.0.0.1:8000'] å¾Œé¢åŠ ä¸Š127.0.0.1:8000çš„åŸå› æ˜¯å¯¦éš›é–‹ç™¼æ™‚ï¼Œéƒ½æ˜¯å…ˆåœ¨æœ¬åœ°æ¸¬è©¦ï¼Œç¢ºå®šæ²’å•é¡Œä¹‹å¾Œï¼Œåœ¨pushåˆ°repositoryä¸Šï¼ŒæœªåŠ ä¸Š'127.0.0.1:8000'çš„è©±ï¼Œæœ¬åœ°æ˜¯ç„¡æ³•é€²è¡Œè¨ªå•çš„å“¦ã€‚ éƒ¨ç½²1eb deploy çœ‹åˆ°Environment update completed successfullyè¡¨ç¤ºéƒ¨ç½²æˆåŠŸï¼ é–‹å•Ÿç€è¦½ç•«é¢1eb open é…ç½®å„²å­˜éœæ…‹æª”æ¡ˆå¦‚æœè¦å„²å­˜éœæ…‹æª”æ¡ˆï¼Œåªè¦åœ¨settings.pyä¸­å¢åŠ ä¸‹æ–¹ç¨‹å¼ç¢¼ 1STATIC_ROOT = 'static' å¾Œå°ç®¡ç†çš„ç•«é¢1python manage.py collectstatic é—œæ‰Elastic Beanstalkå¦‚æœæš«æ™‚ä¸éœ€è¦ä½¿ç”¨é€™å€‹å°ˆæ¡ˆçš„è©±ï¼Œè¨˜å¾—é—œæ‰ï¼Œä¸ç„¶é‚„æ˜¯æœƒä¸€ç›´ä½¿ç”¨AWSçš„è³‡æºï¼Œé€™äº›æ¶ˆè€—çš„è³‡æºé‚„æ˜¯è¦ç®—éŒ¢çš„XDæ‰€ä»¥å‹™å¿…è¨˜å¾—é—œæ‰ 1eb terminate django-env ä½¿ç”¨eb terminateçµ‚æ­¢Elastic Beanstalkç’°å¢ƒï¼Œä¸éä¸Šé¢çš„æŒ‡ä»¤åªæœ‰çµ‚æ­¢ç’°å¢ƒåŠæ–¼å…¶ä¸­åŸ·è¡Œçš„æ‰€æœ‰AWSè³‡æºï¼Œä½†å®ƒä¸æœƒåˆªé™¤æ‡‰ç”¨ç¨‹å¼ï¼Œæ‰€ä»¥éš¨æ™‚èƒ½å¤ å†æ¬¡åŸ·è¡Œeb createï¼Œä»¥åŒä¸€çµ„æ…‹(config)å»ºç«‹æ›´å¤šçš„ç’°å¢ƒã€‚ ç§»é™¤å°ˆæ¡ˆè³‡æ–™å¤¾å’Œè™›æ“¬ç’°å¢ƒå¦‚æœä¸å†éœ€è¦æ­¤æ‡‰ç”¨ç¨‹å¼ï¼ŒåŸ·è¡Œä¸‹æŒ‡ä»¤ç§»é™¤å°ˆæ¡ˆè³‡æ–™å¤¾å’Œè™›æ“¬ç’°å¢ƒã€‚ 12rm -rf ~/eb-virtrm -rf ~/ebdjango å»ºç«‹è‡ªå‹•åŒ–ä½ˆç½²(Continuous Deployment; CD) é€™å€‹æ˜¯å¦å¤–è£œå……çš„ï¼Œå¦‚æœè¦è·‘CDæµç¨‹çš„è©±è¨˜å¾—å›åˆ°Root Accountå°‡CodePipelineFullAccessï¼Œè³¦äºˆçµ¦Userï¼Œä¸ç„¶Useræ˜¯æ²’æœ‰æ¬Šé™ä½¿ç”¨é€™é …æœå‹™çš„å–”XDï¼Œæˆ–æ˜¯ç›´æ¥å¾Root Account ä¾†åšCodePipelineè¨­å®š(æ‡¶äººæ³•) å‰›æ‰éƒ¨ç½²å¥½Djangoç¨‹å¼ä¹‹å¾Œï¼Œæ¥è‘—æˆ‘å€‘å¯ä»¥åˆ©ç”¨AWSçš„CodePipelineä¾†å¹«æˆ‘å€‘åšè‡ªå‹•åŒ–éƒ¨ç½²ã€‚æˆ‘å€‘å°‡å‰›å‰›æœ¬åœ°å»ºç½®å¥½çš„Djangoå°ˆæ¡ˆpushè‡³Githubä¸Š å»ºRepositoryåˆ°è‡ªå·±çš„Githubä¸Šå»ºç«‹æ–°çš„Repository CodePipelineå»ºç½®å¥½å°ˆæ¡ˆçš„Repositoryå¾Œè‡³CodePipelineä¸»é é¢é»é¸Create pipeline è¨­å®šè¨­å®šPipeline nameå¾Œç›´æ¥é»é¸Next Add source stageé¸æ“‡GithubåŠå‰›å‰›å»ºç«‹çš„Repository Add deploy stage Reviewè¨­å®šå®Œæˆå¾Œæœƒè‡³Reviewé é¢ï¼Œé»æ“ŠCreate å»ºç½®å®Œæˆä¹‹å¾Œåªè¦æ¯æ¬¡ç¨‹å¼ç¢¼æ”¹å‹•ï¼Œpushåˆ°Githubä¸Šå°±æœƒè‡ªå‹•éƒ¨ç½²åˆ°Elastc Beanstalkã€‚ åƒé–±Official Doc","link":"2020/03/15/aws/%5BAWS%5D%20%E7%94%A8AWS%20Elastic%20Beanstalk%20%E9%83%A8%E7%BD%B2%E4%BD%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E5%80%8BDjango%E6%87%89%E7%94%A8/"},{"title":"[AWS] ç”¨SSHé€£æ¥EC2","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 07 å‰è¨€æœ¬ç¯‡æ–‡ç« ç´€éŒ„å¦‚ä½•é–‹å•ŸAWSçš„EC2ï¼Œæ¡ç”¨SSHçš„æ–¹å¼é€£æ¥ï¼Œä¸¦åœ¨Ubuntuçš„ä½œæ¥­ç³»çµ±ç’°å¢ƒä¸‹æ¶è¨­Apache Serverã€‚ é›»è…¦é…å‚™ï¼šMac AWSå…è²»å¸³è™Ÿ(ä¸€å¹´æœŸ) æ­¥é©Ÿé€²å…¥AWS Management Consoleé»é¸EC2 å»ºç«‹Instance é¸æ“‡AMIä»¥ubuntuç‚ºä¾‹ï¼š é¸æ“‡Instance Typetab3ã€4ã€5å¯ä»¥å…ˆç•¥éï¼Œåˆ°6.Configure Security Groupé…ç½®Security Group Add Rule ä¸‹æ‹‰é¸å–®é¸æ“‡HTTP Review and Launch å»ºç«‹Key Pairé»æ“ŠReview and Launchæœƒé€²å…¥è¨­å®šKey Piarçš„ç•«é¢ï¼Œå¦‚æœæ˜¯åˆæ¬¡å»ºInstanceï¼Œé¸å–®å…§ç„¡æ³•é¸æ“‡existing key pairï¼Œé»é¸Create a new key pair è¨­å®š&amp;ä¸‹è¼‰Key Pairå¯æ›¿è‡ªå·±çš„Key Pairå‘½åï¼Œå‘½åå®Œæˆå¾Œé»æ“ŠDownload Key Pairå°‡æª”æ¡ˆä¸‹è¼‰è‡³æœ¬åœ°å¾Œå†é»é¸Launch Instance å»ºç½®æˆåŠŸï¼ æŸ¥çœ‹å»ºç«‹çš„Instanceå›åˆ°EC2çš„ä¸»ç•«é¢ï¼Œé»é¸å·¦æ–¹çš„Instancesæ¬„ä½ã€‚é€²å…¥Instanceçš„ç®¡ç†ä»‹é¢å¾Œå³å¯çœ‹åˆ°å‰›å‰›é–‹è¨­çš„Instanceï¼Œé»æ“Šè©²Instanceå†é»æ“Šä¸Šæ–¹çš„Connect é€£æ¥Instance æ›´æ”¹æª”æ¡ˆæ¬Šé™å‰›æ‰downloadä¸‹ä¾†çš„Key Pairæœƒä¸‹è¼‰è‡³æœ¬åœ°ï¼Œå¯å°‡.pemçš„æª”æ¡ˆæ”¾ç½®åœ¨è‡ªå·±çš„å°ˆæ¡ˆè³‡æ–™å¤¾ã€‚é–‹å•Ÿçµ‚ç«¯æ©Ÿï¼Œå°‡è·¯å¾‘åˆ‡æ›è‡³è©²å°ˆæ¡ˆè³‡æ–™å¤¾ä¸‹ï¼Œè¼¸å…¥ä¸‹é¢çš„æŒ‡ä»¤ï¼Œæ›´æ”¹æª”æ¡ˆæ¬Šé™ç‚ºRead by owner: 1chmod 400 ä½ çš„key_pair SSHé€£æ¥è¤‡è£½exampleçµ¦çš„æŒ‡ä»¤é€²è¡ŒSSHé€£æ¥ 1ssh -i &quot;yourpem.pem&quot; ubuntu@yourinstance.compute-1.amazonaws.com æˆåŠŸé€£æ¥! å®‰è£Apache Serveråˆ†æ¬¡åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤ï¼Œå®‰è£Apache 123sudo apt-get updatesudo apt-get install apache2sudo apt-get install libapache2-mod-wsgi è¨ªå•ç¶²ç«™å›åˆ°Instancesç®¡ç†ä»‹é¢ï¼Œé»é¸è©²Instanceæœƒçœ‹åˆ°Public DNS (IPv4)ï¼Œè¤‡è£½ç¶²å€å¾Œå³å¯è¨ªå• è¨ªå•é è¨­çš„ç•«é¢ å®Œæˆä¸Šè¿°æ‰€æœ‰æ­¥é©Ÿå°±å®Œæˆç’°å¢ƒçš„æ¶è¨­å›‰ï¼","link":"2020/03/25/aws/%5BAWS%5D%20%E7%94%A8SSH%E9%80%A3%E6%8E%A5EC2/"},{"title":"[AWS] ç”¨ ssh-agent forwarding ç™»å…¥ EC2 instance","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 17 å‰è¨€åœ¨å¯¦ç¿’åšçš„å°ˆæ¡ˆä¸­ï¼Œè¦ç”¨Terraformæ’°å¯«.tfè…³æœ¬å»ºç½®VPCï¼Œå…·é«”çš„æ¶æ§‹é¡ä¼¼ä¸‹æ–¹çš„åœ–ï¼Œå¯¦ä½œçš„éç¨‹ä¸­å› ç‚ºè¦ç”¨sshé€£EC2 Instancesï¼Œè—‰æ­¤æ©Ÿæœƒç­†è¨˜ä¸€ä¸‹ç”¨sshé€£æ©Ÿå™¨çš„æ­£ç¢ºåšæ³•ï¼Œé¿å…çŠ¯ç›¸åŒéŒ¯èª¤ã€‚å¦å¤–ï¼Œæœ¬ç¯‡çš„åšæ³•é©ç”¨æ–¼Linux/MacOSï¼ŒWindowsä½œæ³•å¯åƒè€ƒæœ¬æ–‡æœ€å¾Œé™„ä¸Šçš„åƒè€ƒé€£çµã€‚ æƒ…å¢ƒå‡è¨­ä»Šå¤©è¦å»ºä¸€å€‹VPCç’°å¢ƒï¼Œåœ¨æ­¤ç’°å¢ƒä¸‹æœ‰å…©å°EC2 Instancesï¼Œä½æ–¼Public subnetå…§çš„EC2å¯ä»¥ä¾›å¤–éƒ¨é€²è¡Œé€£ç·šï¼Œè€ŒPrivate subnetå…§çš„EC2åªèƒ½é€éPublic subnetå…§çš„EC2ä¾†é€£ç·šï¼ŒPublic subnetä¸‹çš„EC2ç¨±ä¹‹ç‚ºã€Œè·³æ¿æ©Ÿã€(bastion)ï¼Œå¯çœ‹ä¸‹åœ–èªªæ˜Resourceè¦å¯¦ä½œsshé€£å…¥bastionå†é€£åˆ°Private EC2ï¼Œä¹‹å‰çš„ä½œæ³•éƒ½æ˜¯:private key å‚³å…¥ bastionï¼Œå†æŠŠbastionå…§çš„private keyç”¨ ssh -i private key çš„æ–¹å¼ç™»å…¥ Private EC2ã€‚ ä¸éâ€¦ ssh çš„ Private key æ˜¯éå¸¸æ©Ÿå¯†çš„è³‡è¨Šï¼Œæ‡‰åªä¿ç•™åœ¨æœ¬åœ°é›»è…¦ï¼Œä¸æ‡‰æ”¾åœ¨ bastion ä¸»æ©Ÿå…§ä½¿ç”¨ã€‚ æ›´å®‰å…¨çš„åšæ³•æ˜¯: ä½¿ç”¨ ssh-agent åšforwardingåƒè€ƒæœ¬ç¯‡æ–‡ç« ä¸­å¼·èª¿çš„é‡é»: You should enable SSH agent forwarding with caution. When you set up agent forwarding, a socket file is created on the forwarding host, which is the mechanism by which the key can be forwarded to your destination. Another user on the system with the ability to modify files could potentially use this key to authenticate as you. å¾ã€Œæœ¬åœ°ç«¯ã€çš„ Private key åœ¨ bastion é€²è¡Œ forwardingï¼Œåœ¨ bastion ä½¿ç”¨ ssh private key çš„æ™‚å€™å°±ä¸éœ€è¦å†ä½¿ç”¨ -i ä¾†æŒ‡å®šé€£æ¥çš„ keyã€‚ ssh-agentssh-agentæ˜¯ä¸€å€‹è®“ä½ ä¸æŠŠPrivate keyä¸Šå‚³åˆ°ä¼ºæœå™¨ä¸Šï¼Œå°±å¯ä»¥å®Œæˆé ç«¯ç™»å…¥çš„å·¥å…·ï¼Œä½¿æˆ‘å€‘å¯åœ¨å¤šå€‹ä¼ºæœå™¨ä¹‹é–“ä¾†å»è‡ªå¦‚ã€‚ é–‹å•Ÿssh-agent1eval $(ssh-agent -s) åŸ·è¡Œä¸Šè¿°æŒ‡ä»¤æœƒå›å‚³Agent pid *** æ·»åŠ Private keyå°‡key pair åŠ å…¥keychain 1ssh-add myKeyPair.pem æŸ¥çœ‹å·²å­˜å„²çš„Private key1ssh-add -L åŸ·è¡Œä¸Šè¿°æŒ‡ä»¤æœƒé¡¯ç¤ºPrivate keyè½‰æˆ public keyçš„è³‡è¨Š é ç«¯ç™»å…¥ä»¥å‰çš„ç™»å…¥æ–¹å¼éƒ½æ¡ssh -i *.pemçš„æ–¹å¼ 1ssh -i &quot;myKeyPair.pem&quot; ami@ec2publicDNS æ”¹æˆä¸‹æ–¹çš„æ–¹å¼é€£ 1ssh â€“A user@&lt;bastion-IP-address or DNS-entry&gt; bastion-IP-addressæ˜¯æ”¾Public Subnetçš„Instance IPä¸Šåœ–ç¯„ä¾‹ä¾†èªªï¼Œå°±æ˜¯åœ¨çµ‚ç«¯æ©ŸåŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤é€£åˆ°bastionã€‚ 1ssh -A ubuntu@ec2-3-235-159-222.compute-1.amazonaws.com æˆåŠŸé€£å…¥bastionçš„ç•«é¢ é€£å…¥Private Instance1ssh ami@Private IP ä»¥æˆ‘çš„æ¸¬è©¦çš„Private EC2 Instanceç‚ºä¾‹ 1ssh ubuntu@10.0.2.171 æˆåŠŸé€£å…¥Private EC2 Instanceçš„ç•«é¢ åƒé–± Securely Connect to Linux Instances Running in a Private Amazon VPC AWS å»ºè­°ç”¨ ssh-agent forwarding ç™»å…¥ä½ çš„ EC2 instance","link":"2020/05/25/aws/%5BAWS%5D%20%E7%94%A8%20ssh-agent%20forwarding%20%E7%99%BB%E5%85%A5%20EC2%20instance/"},{"title":"[AWS] AWSome Day Online Conference","text":"å‰è¨€AWSome Dayæ˜¯ç”±å®˜æ–¹æ‰€èˆ‰è¾¦AWS Cloudçš„å…è²»åŸ¹è¨“èª²ç¨‹ï¼Œä»Šå¹´å› ç‚ºç–«æƒ…çš„é—œä¿‚ä¸åŒä»¥å¾€ï¼Œæ¡ç”¨Online Conferenceçš„æ–¹å¼ï¼Œèª²ç¨‹ä¸­æœƒæœ‰å°ˆæ¥­è¬›å¸«å°‡æœƒæ·±å…¥æ·ºå‡ºåœ°ä»¥å¯¦ä½œç¤ºç¯„å¸¶å¤§å®¶äº†è§£AWSçš„æ ¸å¿ƒæœå‹™ã€‚ èª²ç¨‹å®‰æ’å…¶ä¸­èª²ç¨‹è¬›è§£å…§å®¹æœƒåŒ…æ‹¬: é‹ç®—(Compute) å„²å­˜(Storage) è³‡æ–™åº«(Database) ç¶²è·¯(Networking) AWS è³‡å®‰ã€èº«ä»½åŠè¨ªå•ç®¡ç†(Security) AWS è³‡æ–™åº«(Database) å¤§æ•¸æ“šå’Œæ©Ÿå™¨å­¸ç¿’(Big Data &amp; Machine Learning) AWS æ“´å±•åŠç®¡ç†å·¥å…· èª²ç¨‹å‰é¢æœƒæåŠAWSçš„æ­·å²ã€ç›Šè™•é‚„æœ‰æ¦‚ç•¥èªªä¸€ä¸‹æ¶æ§‹ä¸Šé¢çš„åœ–ç‰‡å¯ä»¥çœ‹åˆ°å·¦é‚Šæ˜¯å‚³çµ±å¯èƒ½åœ¨åœ°ç«¯æœƒä½¿ç”¨çš„å·¥å…·æˆ–æœå‹™ï¼ŒAWSä¹Ÿæœ‰æä¾›ç›¸å°æ‡‰åŠŸèƒ½çš„é›²æœå‹™ã€‚ä»¥Securityä¾†èªªï¼Œå…¬å¸çš„é˜²ç«ç‰†(Firewalls) å°æ‡‰åˆ°AWSçš„æœå‹™å«åšSecurity Groupï¼Œæ¬Šé™ç®¡ç†(Administraors)çš„éƒ¨åˆ†å‰‡æ˜¯ä½¿ç”¨AWS IAM å¦å¤–è£œå……ä¸€ä¸‹AWSå¸¸è¦‹æœå‹™ AWS Route53: AWSçš„DNSæœå‹™ã€‚ AWS Cloudfront: æ˜¯AWS Edge locationä¸Šçš„ä¸€å€‹æœå‹™ï¼Œé¡ä¼¼CDNï¼ŒåŠ é€Ÿç¶²è·¯äº¤ä»˜çš„å…§å®¹ã€‚ AWSçš„å…¨çƒåŸºç¤å»ºè¨­(AWS Global Infrastructure)å¯ä»¥åƒè€ƒæˆ‘ä¹‹å‰å¯«éçš„ä¸€ç¯‡ AWS æ ¸å¿ƒæœå‹™æ¥è‘—æ˜¯è¨è«–AWSå¹¾å€‹æ¯”è¼ƒé‡è¦ä¸”å¸¸è¦‹çš„æ ¸å¿ƒæœå‹™ è¨ˆç®—æ–¹é¢EC2é›²ç«¯ä¸Šçš„è™›æ“¬æ©Ÿ(Virtual Machine)ï¼Œå‰µå»ºEC2å¯ä»¥å®¢è£½åŒ–ä¸åŒçš„è¦æ ¼ï¼Œä¾‹å¦‚é¸æ“‡AMI(çœ‹è¦å“ªç¨®ä½œæ¥­ç³»çµ±)ã€è¦æ ¼(CPUã€Memoryã€Storage)ã€é…ç½®ç¶²è·¯(IP address, security groupsã€key pair)ç­‰ï¼Œæ“ä½œæµç¨‹å¯åƒè€ƒæˆ‘ä¹‹å‰å¯«çš„[AWS] ç”¨SSHé€£æ¥EC2EC2å…¶ä¸­ä¸€å€‹å¥½è™•æ˜¯è‡ªå‹•æ“´å±•ï¼Œå¯ä»¥ä¾éœ€æ±‚åšScale In/Scale Outï¼Œä¹Ÿå°±æ˜¯æœƒä¾ç…§æ‰€éœ€æµé‡èª¿æ•´EC2çš„å¤šå¯¡ï¼Œåšæœ‰æ•ˆçš„è³‡æºåˆ©ç”¨ã€‚EC2çš„è¨ˆè²»æ–¹å¼æœ‰å¾ˆå¤šç¨® AWS Serverless ServiceServerlessç‚ºç„¡ä¼ºæœå™¨çš„æœå‹™ Lambdaæ¡ç”¨Event Triggerï¼Œä¾æ“šcodeçš„å…§å®¹å»åŸ·è¡Œï¼ŒæœªåŸ·è¡Œå³showdownï¼ŒAWSæ¨å‡ºLambdaä¸¦éç”¨ä¾†å–ä»£EC2ï¼ŒLambdaä¹Ÿæœ‰å…¶é™åˆ¶ï¼ŒEC2é‚„æ˜¯æœ‰è‡ªå·±çš„å¸‚å ´ã€‚å„ªé»ï¼š çœå»ç®¡ç†Serverçš„æˆæœ¬ åªæœ‰è¢«triggeræ‰æœƒè¨ˆè²»æµç¨‹ç¯„ä¾‹ VPCæ¯å€‹Regionéƒ½æœ‰é è¨­çš„VPCApp Serveræ··åˆé›²æ¶æ§‹ DBå¾AWS Gatewayä¾†é€£æ¥å®¢æˆ¶çš„ç¶²è·¯ AWS çš„å„²å­˜æœå‹™S3å„²å­˜ç©ºé–“ç„¡ä¸Šé™è€ä¹…æ€§é«˜ï¼Œé ä¼°æ˜¯99.999999999%object storageçš„å½¢å¼å„²å­˜ï¼Œå¯å„²å­˜å¤šç¨®ä¸åŒå½¢å¼çš„è³‡æ–™ï¼Œå¦‚ï¼š Application file Media çµæ§‹Bucketé¡ä¼¼folderobjecté¡ä¼¼æª”æ¡ˆS3å±¬æ–¼è¨—ç®¡çš„æœå‹™ï¼Œä¸éœ€è¦èŠ±å¿ƒæ€åœ¨ç¶­è­·ä¸Šï¼Œå¦‚:æ•…éšœ åŸå› æ”¾åœ¨Regionä¸­è·¨AZï¼Œéœ€è¦è©²Regionçš„æ‰€æœ‰AZéƒ½æ•…éšœæ‰å¯èƒ½æœƒä½¿è³‡æ–™éºå¤± =&gt; ä¿å­˜ä¸‰å€‹ä»¥ä¸Šçš„å‚™ä»½Regionå…§æœ‰å¤šå€‹Region AZ å®‰å…¨æ€§è¨­ç½®Bucket policyï¼Œä¾†åšæ¬Šé™æ§ç®¡ã€‚ Versioningä¿ç•™ç´€éŒ„ï¼Œé è¨­æ˜¯é—œé–‰çš„(å› ç‚ºè¦å¦å¤–å„²å­˜ä½¿ç”¨ç´€éŒ„ï¼Œé€ æˆé¡å¤–è²»ç”¨) S3 ç­‰ç´šè¿åˆä¸åŒå±¬æ€§çš„è³‡æ–™åˆ†ä¸åŒçš„ç­‰ç´š(Class)ï¼Œä¸»è¦ä¸‹æ–¹ä¸‰è€…è€ƒé‡é»:performanceã€Accessibility LifeCycle Policyç¯€çœç®¡ç†æ™‚é–“ã€æœ‰æ•ˆæ§åˆ¶æˆæœ¬ Bucket Nameå¿…é ˆæ˜¯Global Uniqueï¼Œ Demoé¸lifecycle EBS(Elastic Block Store)å„²å­˜ä½œæ¥­ç³»çµ±ã€æ‡‰ç”¨ç¨‹å¼é¡ä¼¼æœ¬åœ°çš„ç¡¬ç¢Ÿï¼Œå†—é¤˜(redundant)å‚™ä»½æ˜¯åœ¨ä¸€å€‹AZ EBSèˆ‡EC2å…©è€…çš„lifecycleå¯ä»¥åˆ†é–‹ï¼Œçœ‹å€‹äººè¨­å®šã€‚å¥½æ¯”æŠŠé›»è…¦ç¡¬ç¢Ÿæ‹”ä¸‹ä¾†ï¼Œè£åœ¨åˆ¥å°é›»è…¦ä¸Š AWSè³‡å®‰ç›¸é—œçš„å®‰å…¨åˆè¦: AWS Artifact å…±åŒè²¬ä»»æ¨¡å‹(Shared Responsibility Model)AWSèˆ‡å®¢æˆ¶ä¹‹é–“çš„è²¬ä»»æ­¸å±¬ï¼Œæœƒä¾é¸æ“‡çš„æœå‹™ä¸åŒï¼Œæ‰¿æ“”çš„è²¬ä»»ç•Œç·š(åœ–ç‰‡ä¸­çš„è™›ç·š)æœƒè·Ÿè‘—æ”¹è®Šï¼Œå¦‚EC2ï¼Œä½¿ç”¨è€…è¦è² è²¬çš„åœ°æ–¹å°±å¤šä¸€äº›ã€‚é€™å€‹æ¨¡å‹æ˜¯ç›¸ç•¶é‡è¦çš„ï¼Œé€™æœƒé—œä¿‚åˆ°å•é¡Œç™¼ç”Ÿæ™‚ï¼Œåˆ¤æ–·è²¬ä»»æ­¸å±¬å¾ˆé‡è¦çš„ä¾æ“šï¼Œè€Œé€™åœ¨AWS Certificateä¹Ÿæ˜¯å¹¾ä¹å¿…è€ƒï¼Œæ¬Šé‡å æ¯”è¼ƒå¤šçš„é‡é»è€ƒé¡Œã€‚ ç¯„ä¾‹æ¨¡å‹ SSL å‚³é€è³‡æ–™ IAMé©—è­‰ Cloudtrail: ç›£æ§APIä½¿ç”¨çš„æƒ…å½¢ Multi-Tier Security Groups(å¤šå±¤çš„Security Groups)å…©ç¨®SGï¼Œæ±ºå®šServerè¦æ¡å“ªç¨®æ–¹å¼é€£æ¥ HTTP Bastion Host: ä¿—ç¨±è·³æ¿æ©Ÿ IAMä¸»è¦åšèªè­‰èˆ‡æˆæ¬Šèªè­‰æ–¹å¼ï¼š Console CLI SDK API Userå€‹åˆ¥ä½¿ç”¨è€… Groupå¯ä»¥å°‡æ“æœ‰ç›¸åŒæ¬Šé™çš„User Policies æ¡JSONæ ¼å¼ ç”¨æ–¼assignçµ¦Usersã€Groupsæˆ–Roles ç”¨æ–¼assignçµ¦Roles RolesRoleè£¡é¢æ”¾çš„æ˜¯AWSçš„è³‡æºï¼Œå¯ä»¥attachä¸åŒçš„policyIAM Roleæœƒç™¼æœ‰æ™‚æ•ˆæ€§çš„Tokenï¼ŒS3 Service Userã€Groupåšé©—è­‰(ä½ æ˜¯èª°)ï¼ŒPoliciesåšæˆæ¬Š(ä½ å¯ä»¥åšä»€éº¼) Best Practice Delete AWS root account access keys Activate multi-factor authentication (MFA):é›™é‡èªè­‰ï¼Œå¦‚ç¶å®šå…¶ä»–çš„è»Ÿé«”ï¼Œè¼¸å…¥é©—è­‰ç¢¼ã€‚ Only give IAM users permissions they need:å³æœ€å°æ¬Šé™åŸå‰‡ =&gt; principle of least privilege Use roles for applications å®˜æ–¹æä¾›çš„IAMæœ€ä½³å¯¦è¸ è¾¨èªæ˜¯root accounté‚„æ˜¯IAM Userç™»å…¥æ–¹å¼æ˜¯å¦ç”¨AcoountID AWS Databaseæœå‹™RDS(Relational Database Service)ç‚ºä½•è¦ä½¿ç”¨RDS?RDSæ˜¯è¨—ç®¡çš„æœå‹™ è‡ªå‹•å‚™ä»½(Multi AZã€å¯è·¨Region) ç©©å®šæ€§é«˜(è·¨AZ åšå‚™ä»½)RDSæœƒç¶å®šVPCDynamoDBAWS NoSQLçš„è³‡æ–™åº«AuroraAWS åŸºæ–¼è‡ªå·±çš„å¹³å°ä¸Šé–‹ç™¼çš„ï¼Œå¯èˆ‡MySQLã€PostgreSQLå…©ç¨®DB HAæ¶æ§‹: è·¨AZåšreplica Aurora ServerlessAuroraæ–°æ¨å‡ºçš„ç„¡ä¼ºæœå™¨æœå‹™ AWS è·¨å…¥AIé ˜åŸŸ Amazon Go ç„¡äººæ©Ÿ æ¨è–¦ç³»çµ± ç‰©æµ æ™ºæ…§éŸ³ç®± Amazon Fraud Detector : åµæ¸¬è©é¨™å•é¡Œ AIçš„é›£é¡Œ å¤§é‡çš„è³‡æ–™ è¨“ç·´æ¨¡å‹ï¼šè¦ç”¨å“ªç¨®æ¼”ç®—æ³•ï¼Ÿå¦‚ä½•å»tune trainning model è©•ä¼°é æ¸¬çµæœSageMakerMLçš„è¨—ç®¡å¹³å°Prepareã€Buildã€Train &amp; Tune ã€Deploy &amp; Manage AWS æ“´å±•/ç®¡ç†å·¥å…·Use Case ELB(é™„è¼‰å‡è¡¡å™¨)å¯ç”¨æ–¼å¤šå€‹ç›®æ¨™ (ä¾‹å¦‚ Amazon EC2 instanceã€IP Address) ä¹‹é–“è‡ªå‹•åˆ†é…å‚³å…¥çš„æ‡‰ç”¨ç¨‹å¼æµé‡ï¼Œè€Œå®¢æˆ¶(Client)ç«¯èˆ‡ELBæºé€šæ™‚ï¼Œæœƒé€éDNSã€‚å¦å¤–åœ¨å‰µå»ºELBæ™‚ï¼Œå¯åœ¨å–®ä¸€æˆ–è·¨AZï¼Œè™•ç†æ‡‰ç”¨ç¨‹å¼çš„æµé‡ã€‚ å¯ä½œå¥åº·åµæ¸¬(ç¢ºä¿è³‡æ–™æ´¾é€çµ¦éæ•…éšœçš„EC2) åˆ†æ•£æµé‡ Auto Scaling è‡ªå‹•èª¿æ•´EC2çš„å®¹é‡ é€éCloudWatchä¾†åˆ¤å®šEC2è¦Scale Inæˆ–scale Out(ç›£æ§CPUä½¿ç”¨é‡) é€éSchedulingï¼Œäº‹å…ˆè¦åŠƒ(Scheduled Event) AWS CloudWatchæ¶æ§‹ ELB+Auto Scaling+CloudWatchçš„çµ„åˆ AWS Trusted Advisoræä¾›æœ€ä½³å¯¦è¸çš„å»ºè­°ï¼Œå¯ä»¥çœ‹åˆ°çš„æœå‹™å¤šå¯¡æœƒè·ŸSupport Plane levelæœ‰é—œ Cost optimization Security Fault tolerance Performance improvement. ä»¥ä¸Šåœ–ç‰‡å¤šæ•¸å–è‡ªæ–¼å®˜æ–¹æŠ•å½±ç‰‡","link":"2020/04/29/aws/%5BAWS%5DAWSome%20Day/"},{"title":"[AWS] å‚™ä»½ MySQL è³‡æ–™è‡³ AWS S3 Bucket","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 20 å‰è¨€ç¾å¯¦ç”Ÿæ´»ä¸­çš„ç³»çµ±ï¼Œç‚ºäº†é¿å…è³‡æ–™éºå¤±ï¼Œç³»çµ±å¹³æ™‚éƒ½è©²å‚™ä»½è³‡æ–™åº«çš„è³‡æ–™ã€‚ç•¶ç³»çµ±ç™¼ç”Ÿå•é¡Œæ™‚ï¼Œèƒ½åœ¨æœ€å¿«çš„æ™‚é–“é»é‚„åŸåŸå§‹è³‡æ–™ã€‚æœ¬ç¯‡æ–‡ç« ç´€éŒ„å¦‚ä½•å°‡æ—¢æœ‰çš„MySQLè³‡æ–™åº«å…§è³‡æ–™ï¼Œè—‰ç”± Crontab æŒ‡ä»¤å®šæœŸå‚™ä»½è‡³ AWS S3 å‰ç½®ä½œæ¥­ æ—¢æœ‰çš„MySQLè³‡æ–™åº«ï¼Œè£¡é¢æœ‰å¤šå¼µè³‡æ–™è¡¨ OS: Ubuntu 18.04 MySQL 5.7+ AWS å¸³è™Ÿ ä¸‹è¼‰ AWS Cli tools æµç¨‹æœ¬æ–‡æœƒä¾ç…§ä¸‹æ–¹æµç¨‹å¯¦ä½œå‚™ä»½: ä»€éº¼æ˜¯ S3 Bucket å»ºç«‹S3 Bucket å»ºç«‹ IAM User ä¾ç…§æ”¿ç­– è³¦äºˆ IAM User æ¬Šé™ æ’°å¯«å‚™ä»½ç”¨çš„ shell script åˆ¶å®š Cron job å®šæœŸä»»å‹™æ’ç¨‹ ä»€éº¼æ˜¯ AWS S3S3 æ˜¯ AWS æä¾›çš„å„²å­˜æœå‹™ï¼Œç”¨æ–¼å­˜æ”¾å’Œæ“·å–ä»»æ„æ•¸é‡çš„è³‡æ–™ï¼Œè³‡æ–™æœƒä»¥ç‰©ä»¶çš„å½¢å¼é€²è¡Œå„²å­˜ï¼ŒèŠ±è²»çš„æˆæœ¬ä½å»‰ï¼Œæ‰€ä»¥å‚™ä»½è‡³S3æ˜¯ä¸éŒ¯çš„é¸æ“‡ã€‚ å»ºç«‹S3 Bucketé€²å…¥å·²ç¶“å‰µå»ºå¥½çš„ AWS å¸³è™Ÿï¼Œé¸æ“‡ S3 æœå‹™ï¼Œé»æ“ŠCreate bucketï¼Œæ¥è‘—è¼¸å…¥è‡ªè¨‚çš„ bucket åç¨±ï¼Œä¸‹æ–¹é¸å–®é¸æ“‡æƒ³è¦å­˜æ”¾çš„Regionè¼¸å…¥å®Œç•¢å¾Œé»æ“ŠCreate bucket å»ºç«‹ IAM Userè¼¸å…¥User Name ä¸”è‡ªè¨‚å¯†ç¢¼æ–°å»ºpolicyè²¼ä¸Šä¸‹æ–¹çš„JSONæ ¼å¼è³‡æ–™ï¼Œä¸¦å°‡è³‡æ–™å…§çš„mysqlsourcebackupæ›¿æ›æˆè‡ªå·±å‰µå»ºS3 Bucket æ‰€å–çš„åç¨±ï¼Œä¿®æ”¹å®Œç•¢å¾Œé»æ“ŠReview Policy 123456789101112131415161718192021222324252627282930{&quot;Version&quot;: &quot;2012-10-17&quot;,&quot;Statement&quot;: [ { &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [&quot;s3:ListAllMyBuckets&quot;], &quot;Resource&quot;: &quot;arn:aws:s3:::*&quot;},{ &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;s3:ListBucket&quot;, &quot;s3:GetBucketLocation&quot; ], &quot;Resource&quot;: &quot;arn:aws:s3:::mysqlsourcebackup&quot;},{ &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: [ &quot;s3:PutObject&quot;, &quot;s3:GetObject&quot;, &quot;s3:DeleteObject&quot; ], &quot;Resource&quot;: &quot;arn:aws:s3:::mysqlsourcebackup/*&quot;}]} æ¥è‘—æ›¿è‡ªå·±å‰µå»ºçš„policyå–åå¾Œï¼Œé»æ“ŠCreate Policyå›åˆ°å‰›å‰›å‰µå»ºUserçš„ä»‹é¢ï¼Œæœå°‹æ–°å‰µå»ºçš„policyåç¨±é€²è¡Œå‹¾é¸ï¼Œå°±å¯ä»¥ç¹¼çºŒåŸ·è¡Œä¸€æ­¥åˆ°å‰µå»ºå®Œæˆã€‚ä¸‹è¼‰å€‹äººé‡‘é‘°ç½®å€‹äººé›»è…¦ï¼Œé‡‘é‘°ç‚ºæ©Ÿå¯†è³‡è¨Šï¼Œå‹™å¿…å¥½å¥½ä¿ç®¡ï¼ä¹Ÿå¯ä»¥å¯„ä¿¡è‡³å€‹äººä¿¡ç®± æ’°å¯«å‚™ä»½ç”¨çš„ shell scriptå»ºç«‹runbackup.sh1sudo vim runbackup.sh å¡«å…¥ä¸‹æ–¹ç¨‹å¼ç¢¼ï¼Œä¸¦ä¿®æ”¹=å¾Œæ–¹çš„å€¼ï¼š your_access_keyã€your_secret_key: ç‚ºå‰›æ‰å‰µå»ºå¸³è™Ÿæ™‚ä¸‹è¼‰çš„é‡‘é‘°è³‡è¨Š s3_region: S3 bucket æ‰€åœ¨ä¹‹å€åŸŸ S3_BUCKET: S3 bucket åç¨± å…¶é¤˜ç‚ºMySQLç›¸é—œè³‡è¨Š: host_name(e.g. localhost)ã€MYSQL_PORT(e.g. 3306) 123456789101112131415#!/bin/bash## å¡«å…¥ AWS User Credential çš„è³‡è¨ŠAWS_ACCESS_KEY_ID=your_access_key \\AWS_SECRET_ACCESS_KEY=your_secret_key \\## å¡«å…¥ S3 è³‡è¨ŠAWS_DEFAULT_REGION=s3_region \\S3_BUCKET=your_buket_name \\## å¡«å…¥MySQLè³‡è¨ŠMYSQL_HOST=host_name \\MYSQL_PORT=db_port \\MYSQL_USER=db_user \\MYSQL_PASS=db_password \\MYSQL_DB=db_name \\## åŸ·è¡Œ backup.shbash -x backup.sh ä¿®æ”¹å®Œç•¢å¾ŒæŒ‰ä¸‹ESC+:wq!å„²å­˜é—œé–‰ã€‚ å»ºç«‹backup.sh1sudo vim backup.sh å¯«å…¥ä¸‹æ–¹ç¨‹å¼ç¢¼ 1234567891011121314151617#!/bin/bashcd /tmpfile=$(date +%A%d%B%Y).sqlmysqldump \\ --host ${MYSQL_HOST} \\ --port ${MYSQL_PORT} \\ -u ${MYSQL_USER} \\ --password=&quot;${MYSQL_PASS}&quot; \\ ${MYSQL_DB} &gt; ${file}if [ &quot;${?}&quot; -eq 0 ]; then gzip ${file} aws s3 cp ${file}.gz s3://${S3_BUCKET} rm ${file}.gzelse echo &quot;Error backing up mysql&quot; exit 255fi ä¿®æ”¹å®Œç•¢å¾ŒæŒ‰ä¸‹ESC+:wq!å„²å­˜é—œé–‰ã€‚ æ¸¬è©¦è…³æœ¬1bash -x runbackup.sh åŸ·è¡Œä¸Šè¿°æŒ‡ä»¤åŸ·è¡Œrunbackup.shé€™æ”¯è…³æœ¬ï¼Œåˆ° S3 Bucket çš„ç®¡ç†ä»‹é¢æŸ¥çœ‹æœ‰æ²’æœ‰ä¸Šå‚³æˆåŠŸï¼ åˆ¶å®š Cron job å®šæœŸä»»å‹™æ’ç¨‹ä¸‹è¼‰1sudo apt update &amp; sudo apt install cron ç¢ºä¿æœ‰åœ¨èƒŒæ™¯åŸ·è¡Œ 1sudo systemctl enable cron æˆåŠŸçš„è©±æœƒæç¤ºè·Ÿä¸‹æ–¹ç›¸åŒçš„è¨Šæ¯ 123OutputSynchronizing state of cron.service with SysV service script with /lib/systemd/systemd-sysv-install.Executing: /lib/systemd/systemd-sysv-install enable cron ç·¨è¼¯ crontab1crontab -e åŸ·è¡Œä¸Šæ–¹æŒ‡ä»¤ï¼Œæœƒè·³å‡ºä¸‹æ–¹çš„æç¤ºè³‡è¨Š 12345678910Outputno crontab for sammy - using an empty oneSelect an editor. To change later, run 'select-editor'. 1. /bin/nano &lt;---- easiest 2. /usr/bin/vim.basic 3. /usr/bin/vim.tiny 4. /bin/edChoose 1-4 [1]: å€‹äººç¿’æ…£ç”¨Vimï¼Œæ•…è¼¸å…¥2ï¼Œå¯ä¾å€‹äººç¿’æ…£è‡ªç”±é¸æ“‡ï¼Œé¸æ“‡å¥½ä¹‹å¾Œå°±æœƒé€²å…¥æ–°å»ºç«‹çš„ crontabåœ¨ä¸‹æ–¹æ–°å¢æ’ç¨‹æ™‚é–“ï¼Œä»¥åŠè¦åŸ·è¡Œçš„æŒ‡ä»¤ï¼Œå‡è¨­æ˜¯ æ¯å¤©å‡Œæ™¨12:00 é€²è¡Œæ’ç¨‹ä»»å‹™ï¼ŒåŸ·è¡Œrunbackup.shé€™æ”¯æª”æ¡ˆï¼Œå°±å¯ä»¥å¯«æˆä¸‹æ–¹çš„æŒ‡ä»¤ï¼š 10 0 * * * root bash -x /home/coupon/runbackup.sh ä¿®æ”¹å®Œç•¢å¾ŒæŒ‰ä¸‹ESC+:wq!å„²å­˜é—œé–‰ã€‚ è£œå…… bash -x /home/coupon/runbackup.sh ç‚ºè¦åŸ·è¡Œçš„æª”æ¡ˆï¼Œè¦ç¢ºèªæª”æ¡ˆçš„æ‰€åœ¨ä½ç½®æ˜¯æ­£ç¢ºçš„ï¼ Crontab æ™‚é–“çµæ§‹ æ¬„ä½ å…è¨±ç¯„åœ minute 0-59 hour 0-23 day_of_month 1-31 month 1-12 or JAN-DEC day_of_week 0-6 or SUN-SAT crontab åŸ·è¡Œè¦å‰‡å¦‚ä¸‹:1minute hour day_of_month month day_of_week command_to_run æ›´å¤šç´°ç¯€åƒè€ƒDigital Ocean Communityæ‰€æ’°å¯«çš„æ–‡ç« ï¼Œé‚„è »æ¸…æ¥šçš„ï¼","link":"2020/09/30/aws/%E5%82%99%E4%BB%BD%20MySQL%20%E8%B3%87%E6%96%99%E8%87%B3%20AWS%20S3%20Bucket/"},{"title":"[AWS] æˆ‘æ”¶åˆ°AWSå¯„ä¾†å…è²»å¸³è™Ÿçš„å¸³å–®","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 14 å‰è¨€æœ¬ç¯‡ç‚ºå€‹äººç¶“é©—åˆ†äº«ï¼Œæœƒå¯«ä¸‹é€™ç¯‡çš„åŸå› æ˜¯æˆ‘åœ¨AWSè¨»å†ŠFree Tierå¸³è™Ÿå¾Œï¼Œåœ¨ä½¿ç”¨éç¨‹ä¸­æ„å¤–æ”¶åˆ°90ç¾é‡‘çš„å¸³å–®ï¼Œå…§å®¹å°‡æ¶µè“‹æˆ‘ç‚ºä½•æœƒæ”¶åˆ°å¸³å–®åˆ°æˆåŠŸå…¨é¡é€€æ¬¾ï¼Œçµ¦æœ‰é‡åˆ°ç›¸åŒå•é¡Œçš„äººä¸€å€‹åƒè€ƒã€‚ èµ·å› æœ‰å¤©æ”¶åˆ°ä¾†è‡ªAWSçš„å¸³æ¬¾é€šçŸ¥ä¿¡ï¼Œä¿¡ä¸­é¡¯ç¤ºç¸½é‡‘é¡ç‚º90ç¾é‡‘ï¼Œå‰›é–‹å§‹æ”¶åˆ°ä¿¡é‚„ç–‘æƒ‘ç‚ºä½•è¢«æ”¶é€™éº¼é«˜çš„è²»ç”¨(2700å°å¹£å°æˆ‘ä¾†èªªè² æ“”ä¸å°å•Šâ€¦..) å¿ƒæƒ³å®Œäº†â€¦æœˆåˆå°±è¦é¢è‡¨åƒåœŸï¼Œå¯æ†å“ªã€‚åœ–ç‰‡æºä»”ç´°æƒ³æƒ³ï¼Œç•¶åˆä¹Ÿæ˜¯è¾¦ç†å…è²»å¸³è™Ÿï¼Œæ€æœƒçªç„¶è¢«æ”¶è²»äº†å‘¢ï¼Ÿè€Œä¸”ä¸€ç›´ä»¥ç‚ºæˆ‘æ‡‰è©²æœ‰æŠŠæ²’ç”¨çš„æœå‹™é—œæ‰(ï¼Ÿ)æ‰“é–‹å¸³å–®æ˜ç´°ç™¼ç¾ä¸å¾—äº†â€¦â€¦ Database Migration Serviceé€™é …æœå‹™æ”¶äº†æˆ‘75ç¾é‡‘ï¼Ÿï¼Ÿï¼Ÿ è¨˜å¾—ä¹‹å‰ç©çš„æ™‚å€™æ˜æ˜æœ‰é—œæ‰ï¼Œç´°çœ‹æœå‹™å•Ÿç”¨çš„å€åŸŸæ‰ç™¼ç¾ï¼Œå¤©é˜¿â€¦åŸä¾†é–‹åœ¨Oregonçš„æœå‹™è¢«æˆ‘æ¼æ‰äº†â€¦è€Œä¸”æˆ‘é‚„é–‹Multi-AZ(å‚»çœ¼è²“å’ª)ï¼Œçœ‹å®Œå¸³å–®å¾Œå°±ç«‹åˆ»å…ˆæŠŠå¸³è™Ÿé—œé–‰ï¼Œé¿å…å†è¢«æ”¶è²»ã€‚ä¸Šç¶²æœä¸€ä¸‹æ˜¯å¦æœ‰äººè·Ÿæˆ‘é‡åˆ°ç›¸åŒå•é¡Œï¼Œçœ‹åˆ°Quoraä¸Šæœ‰ä¸å°‘äººé‡åˆ°é€™ç¨®æƒ…æ³ï¼ŒåŸä¾†æˆ‘ä¸å­¤å–®(?)çœ‹åˆ°æœ‰äººæ”¶åˆ°åƒå…ƒçš„å¸³å–®é “æ™‚è¦ºå¾—æˆ‘åªæ˜¯å°éŒ¢å˜›ï½è€Œä¸”ä¹Ÿæœ‰æˆåŠŸæ’¤éŠ·è²»ç”¨ï¼Œçœ‹èµ·ä¾†æˆ‘æ‡‰è©²ä¹Ÿæœ‰æ©Ÿæœƒï¼Œæ‰€ä»¥å°±ç™¼Issueçµ¦AWS Supportå›‰ï¼ å¦‚ä½•ç™¼issue?é€²å…¥Support Centerç™»å…¥AWSå¸³è™Ÿå¾Œï¼Œå³ä¸Šè§’æœ‰å€‹Supportä¸‹æ‹‰é¸å–®ï¼Œé»æ“ŠSupport Centerï¼Œé¸æ“‡Account and billing support -&gt; Billing -&gt; Charge Inquiry å»ºç«‹ä¸¦å¡«å¯«Caseæè¿°ä¸€ä¸‹è‡ªå·±è¢«æ”¶è²»çš„æƒ…æ³ï¼Œä¸‹æ–¹å¯ä»¥ä¸Šå‚³æª”æ¡ˆï¼Œå»ºè­°æŠŠæ”¶åˆ°çš„å¸³å–®é™„ä¸Šå»ï¼ŒSupportå¯ä»¥æ¯”è¼ƒå¿«é‡å°å•é¡Œå»è§£æ±ºå¡«å¯«å®Œæˆä¹‹å¾Œå°±å¯ä»¥é»æ“Šæœ€ä¸‹æ–¹çš„Submité€²è¡Œæäº¤ï¼ Supportå›æ‡‰çœ‹å®ŒAWS Supportå›ä¿¡å…§å®¹æ‰äº†è§£ç”¢ç”Ÿè²»ç”¨çš„åŸå› æ˜¯æˆ‘ä½¿ç”¨éå…è²»å¸³è™Ÿæ‰€æ¶µè“‹çš„æœå‹™ç¯„åœï¼Œæ‰è¢«æ”¶å–è²»ç”¨ã€‚ç•¶æ™‚å¿ƒæƒ³â€¦æ€éº¼æ²’æœ‰ä¸€å€‹æ©Ÿåˆ¶æ˜¯æé†’ä½¿ç”¨è€…é€™æ˜¯éå…è²»çš„æœå‹™ç¯„åœï¼Œæ”¶åˆ°å¸³å–®å¾Œè©¢å•æ‰çŸ¥é“â€¦å¥½å•¦ï¼Œä¸€éƒ¨åˆ†åŸå› å¯èƒ½æ˜¯æˆ‘åœ¨ä½¿ç”¨æ¯å€‹æœå‹™å‰æ²’æœ‰ç‰¹åˆ¥å»æŸ¥è©²æœå‹™æ˜¯å¦åœ¨å…è²»ç¯„åœå…§ï¼Œä¸éå¦‚æœèƒ½å¤šä¸€å€‹è­¦ç¤ºæ©Ÿåˆ¶æœƒä¸æœƒæ›´å¥½å‘¢ï¼Ÿä¸ç”¨æ¯æ¬¡éƒ½å»æŸ¥ã€‚é»æˆ‘çœ‹AWSå…è²»æ–¹æ¡ˆå¾ŒçºŒç…§AWS Supportçµ¦çš„æŒ‡ç¤ºå®Œæˆå¾Œï¼Œé¦¬ä¸Šæ”¶åˆ°å¥½æ¶ˆæ¯é™¤äº†åŸæœ¬è¢«æ”¶90ç¾é‡‘çš„è²»ç”¨å…¨é¡æ’¤éŠ·ï¼Œé€£äº”æœˆä»½ç›®å‰æ‰€ç”¢ç”Ÿçš„è²»ç”¨ä¹Ÿéƒ½è¢«å…é™¤äº†ï¼æ•´å€‹æµç¨‹ä¸‰å¤©å…§æå®šï¼æŸ¥çœ‹å¸³å–®ï¼ŒæˆåŠŸå…¨é¡é€€æ¬¾ï¼Œæˆ‘ä¸å¿…æœˆåˆåƒåœŸäº†ï¼å¦å¤–AWS Supporté‚„æœ‰æé†’å¯ä»¥é–‹å•Ÿè²»ç”¨è­¦ç¤ºçš„åŠŸèƒ½(æˆ‘ç¾åœ¨æ‰çŸ¥é“åŸä¾†æœ‰é€™åŠŸèƒ½)ï¼Œä¸€é–‹å§‹é‚„æŠ±æ€¨èªªæ€éº¼å¯ä»¥ç„¡é è­¦æ”¶æˆ‘éŒ¢ï¼ŒAWSå¤ªå¯æƒ¡äº†ï¼ä¸éAWSå›è¦†ç®—é‚„ä¸éŒ¯ï¼Œæ•´å€‹è™•ç†æµç¨‹é€Ÿåº¦å¾ˆå¿«ï¼Œå€¼å¾—è®šç¾ä¸€ä¸‹ï¼(æ©â€¦.çœŸé¦™) è²»ç”¨æŸ¥çœ‹å¦‚æœè¦æŸ¥çœ‹å¸³æˆ¶ç•¶å‰ç”¢ç”Ÿçš„è²»ç”¨å¯è‡³My Billing Dashboardé¸æ“‡å·¦æ–¹çš„Cost Explorerå¯ä»¥æŸ¥çœ‹æ¯å¤©æˆ–æ¯æœˆä½¿ç”¨æœå‹™æƒ…å½¢æˆ–æ˜¯åˆ°Billsä¹Ÿå¯ä»¥æŸ¥çœ‹å¸³å–®æ˜ç´° é€éå¸³å–®è­¦ç¤ºä¾†ç›£æ§è‡ªè¨‚çš„é ä¼°è²»ç”¨æ ¹æ“šAWS Supportçš„æŒ‡ç¤ºï¼Œå¯ä»¥åˆ©ç”¨CloudWatché€™é …æœå‹™ä¾†ç›£æ§AWSæœå‹™ç”¢ç”Ÿçš„è²»ç”¨ï¼Œå•Ÿç”¨å¸³å–®æé†’ï¼Œä¸¦å¯„ä¿¡é€šçŸ¥ï¼å®˜æ–¹æ•™å­¸ é–‹å•Ÿå¸³å–®æé†’è‹¥è¦å»ºç«‹é ä¼°è²»ç”¨è­¦ç¤ºï¼Œå¿…é ˆå…ˆå•Ÿç”¨å¸³å–®æé†’æ‰“é–‹Billingçš„é é¢ï¼Œé»æ“Šå·¦æ–¹é¸é …Preferenceså‹¾é¸Receive Billing Alerts.ç•¶ç„¶ä½ è¦å‹¾é¸å…¶ä»–çš„ä¹Ÿå¯ä»¥ï¼Œé¸å¥½å¾Œé»Saveã€‚ å»ºç«‹å¸³å–®è­¦ç¤ºé–‹å•ŸCloudWatché¸æ“‡å·¦æ–¹åˆ—è¡¨ä¸­çš„Alarmï¼Œä¸¦é»æ“ŠCreate Alarmé¸æ“‡Select metric -&gt; All metrics tab -&gt; Billing -&gt; Total Estimated Charge -&gt; USDå®Œæˆä¸Šè¿°æ­¥é©Ÿé»é¸Nextï¼Œé¸æ“‡Staticæ¥è‘—çœ‹ä½ æƒ³é¸æ“‡å“ªå€‹æ¢ä»¶ï¼Œè¨­å®šå®Œä½ è¦çš„æ¢ä»¶å¾ŒæŒ‰Nextå†ä¾†æ˜¯é¸æ“‡In alarm -&gt; Create new topic -&gt; å¡«å¯«topic nameã€Email endpoints -&gt; é»æ“ŠCreate topicå®ƒæœƒçµåˆAWS SNSçš„ç™¼ä¿¡æœå‹™ï¼Œæ‰€ä»¥è¦åˆ°å‰›æ‰è‡ªå·±å¡«å¯«çš„ä¿¡ç®±å»æ”¶ä¿¡ï¼Œé»æ“Šç¢ºèªä¿¡ä¸­ç”¨ä¾†é–‹é€šæœå‹™çš„é€£çµï¼Œå†å›åˆ°å‰›å‰›Alarmçš„ç•«é¢ï¼Œé»æ“ŠNextã€‚å¡«å¯«Alarm Nameå¾Œé»é»æ“ŠNextæœƒé€²å…¥Preview and createçš„é é¢ç¢ºèªç„¡èª¤å¾Œé»Create alarmå³å¯å®Œæˆè¨­å®šï¼ç•¶Statusé¡¯ç¤ºç¶ è‰²å°±OKå›‰ï¼ å¾Œè¨˜æœ‰é€™æ¬¡çš„ç¶“é©—å¾Œï¼Œåœ¨ç©é›²æœå‹™æ™‚éƒ½ç‰¹åˆ¥æ³¨æ„ä¸€ä¸‹ç›¸é—œçš„æ¢æ¬¾ï¼Œé‚„æœ‰åˆ©ç”¨ä¸€äº›è­¦ç¤ºåŠŸèƒ½ä¾†é¿å…æ„å¤–è¢«æ”¶å–å¤§é‡è²»ç”¨ï¼Œå¦‚æœçœŸçš„ä¸å¹¸æ”¶åˆ°å¤§ç­†å¸³å–®ï¼Œåªè¦ç™¼Issueçµ¦Supportï¼Œæè¿°ä¸€ä¸‹èª¤ç”¨çš„æƒ…å½¢(ä»–å€‘æœƒæŸ¥çœ‹å¸³è™Ÿä½¿ç”¨æœå‹™çš„æƒ…å½¢æ˜¯å¦ç¬¦åˆä½ çš„æè¿°)ï¼ŒåŸºæœ¬ä¸Šæœ‰å¾ˆé«˜çš„æ©Ÿç‡èƒ½æ”¶åˆ°å…¨é¡é€€æ¬¾ï¼","link":"2020/05/09/aws/%E6%88%91%E6%94%B6%E5%88%B0AWS%E5%85%8D%E8%B2%BB%E5%B8%B3%E8%99%9F%E7%9A%84%E5%B8%B3%E5%96%AE/"},{"title":"[è¨ˆæ¦‚] ç·¨è­¯å™¨(Compiler)èˆ‡ç›´è­¯å™¨(Interpreter)","text":"å‰è¨€ç›®å‰æ¥è§¸éC++ ã€ Pythonã€JavaScriptï¼Œé›–ç„¶çŸ¥é“ä»–å€‘å±¬æ–¼å“ªç¨®ç‰¹æ€§çš„ç¨‹å¼èªè¨€ï¼Œä½†ä¸€ç›´æ²’æœ‰å¥½å¥½äº†è§£ç·¨è­¯å™¨ã€ç›´è­¯å™¨ å…©è€…å·®ç•°ï¼Œè—‰æ­¤æ©ŸæœƒæŸ¥è³‡æ–™ç­†è¨˜ä¸€ä¸‹ã€‚ ç·¨è­¯ç·¨è­¯æ„æ€æŒ‡ç¨‹å¼åŸå§‹ç¢¼æœƒç¶“ç·¨è­¯å™¨(compiler) è½‰æ›æˆç›®çš„ç¢¼(object code) å¾Œï¼Œå†ç·¨è­¯æˆè¨ˆç®—æ©Ÿæ‰€çœ‹çš„æ‡‚çš„æ©Ÿå™¨ç¢¼(machine language)ï¼Œæœ€å¾Œå†åŸ·è¡Œã€‚ä½¿ç”¨ç·¨è­¯å™¨çš„èªè¨€ç¨±ç‚ºç·¨è­¯å¼èªè¨€ï¼Œå¤šåŠæ˜¯éœæ…‹å‹èªè¨€(static language) éœæ…‹èªè¨€çš„ç‰¹é»: æœƒäº‹å…ˆå®šç¾©çš„å‹åˆ¥ï¼Œåšå‹åˆ¥æª¢æŸ¥ã€‚ è‘—åä¾‹å­ C C++ ç›´è­¯ç›´è­¯æ„æ€æŒ‡åŸå§‹çš„ç¨‹å¼ç¢¼åªè¦ç¶“éç›´è­¯å™¨(Interpreter) å³å¯è½‰æ›æˆå¯åŸ·è¡Œç¢¼ï¼Œå› ç‚ºå®ƒå€‘ä¸éœ€ç¶“ç”±ç·¨è­¯å™¨ï¼Œåœ¨åŸ·è¡Œæ™‚æ‰æœƒå°‡åŸå§‹ç¢¼ç›´è­¯æˆåŸ·è¡Œç¢¼ã€‚ç›´è­¯å¼èªè¨€å¥½è™•åœ¨é–‹ç™¼ä¸Šå…·æœ‰è¼ƒå½ˆæ€§éˆæ´»çš„å‹åˆ¥è™•ç†(ä¸éœ€äº‹å…ˆå®šç¾©è³‡æ–™å‹åˆ¥)ï¼Œå› ç‚ºå¯ä»¥ç«‹åˆ»çœ‹åˆ°æŒ‡ä»¤çš„åŸ·è¡Œçµæœï¼Œæœ‰éŒ¯èª¤å¯è¿…é€Ÿä¿®æ­£ã€‚ ä½¿ç”¨ç›´è­¯å™¨æ™‚ï¼Œæ‰€ä½¿ç”¨çš„ç¨‹å¼èªè¨€å°±åƒè®Šæˆä¸€å€‹æœƒå’Œä½ äº’å‹•çš„ç’°å¢ƒï¼Œæ¯ç•¶è¼¸å…¥ä¸€è¡Œç¨‹å¼ï¼Œç›´è­¯å™¨æœƒå³æ™‚åŸ·è¡Œè©²è¡Œç¨‹å¼å‘½ä»¤ï¼Œé€šå¸¸åˆè¢«ç¨±ä½œè…³æœ¬èªè¨€ã€‚ è‘—åä¾‹å­ JavaScript Python Ruby PHP å…©è€…å·®ç•°åŸ·è¡Œé€Ÿåº¦å¤§éƒ¨åˆ†åœ¨ç›¸åŒçš„é‚è¼¯ä¸‹æ¯”è¼ƒå…©è€…åŸ·è¡Œé€Ÿåº¦ï¼Œä½¿ç”¨ç·¨è­¯èªè¨€çš„é€Ÿåº¦æœƒæ¯”ä½¿ç”¨ç›´è­¯èªè¨€ä¾†å¾—å¿«ï¼ŒåŸå› åœ¨ç·¨è­¯èªè¨€å·²ç¶“å…ˆé å…ˆç·¨è­¯éäº†ï¼Œå› æ­¤åœ¨åŸ·è¡ŒæœŸé–“ç›¸è¼ƒæ–¼ç›´è­¯èªè¨€å°‘äº†ä¸€è¡Œä¸€è¡ŒåŸ·è¡Œç¨‹å¼ç¢¼çš„æ™‚é–“ã€‚ é–‹ç™¼é€Ÿåº¦ç·¨è­¯èªè¨€çš„ç¨‹å¼é–‹ç™¼ã€é™¤éŒ¯é€Ÿåº¦æœƒè¼ƒç·¨è­¯èªè¨€ä¾†çš„æ…¢ï¼Œå› ç‚ºç·¨è­¯èªè¨€ç„¡æ³•åƒç›´è­¯èªè¨€ä¸€æ¨£ï¼Œåœ¨é–‹ç™¼å®Œä¸€æ®µç¨‹å¼ç¢¼å°±å¯ä»¥é¦¬ä¸ŠåŸ·è¡Œä¸¦ä¸”é™¤éŒ¯ï¼Œä¸”ç›´è­¯èªè¨€ä¹Ÿçµ¦äºˆè»Ÿé«”é–‹ç™¼è€…æ›´æœ‰å½ˆæ€§ä»¥åŠå¿«é€Ÿçš„é–‹ç™¼æµç¨‹ã€‚ ç¨ç«‹åŸ·è¡Œèˆ‡å¦ç·¨è­¯å¼èªè¨€ç”¢ç”Ÿçš„ç¨‹å¼å¹¾ä¹éƒ½å¯ç¨ç«‹åŸ·è¡Œï¼Œå› ç‚ºå®ƒå€‘éƒ½æ˜¯ç”±Compileré€²è¡Œå‹åˆ¥ï¼èªæ„ç­‰æª¢æŸ¥ï¼Œä»¥åŠç¶“éé€£çµå™¨çš„è™•ç†ï¼Œç¨‹å¼ç¢¼å¹¾ä¹å¯ä»¥ç›´æ¥å­˜å–ç³»çµ±æœå‹™(system service)ã€‚ ç›´è­¯å¼èªè¨€å‰‡æ˜¯å¿…é ˆä¾è³´ä¸€å€‹åŸ·è¡Œç’°å¢ƒ(execution context)ï¼Œå¦‚PHPã€Pythonç­‰è…³æœ¬èªè¨€ä¸éœ€è¦å„å¹³å°çš„ç·¨è­¯å™¨ï¼Œä½†æ˜¯éœ€è¦å…ˆå®‰è£åœ¨å„å€‹å¹³å°ä¸Šçš„é‹è¡Œç’°å¢ƒä»¥åŠç›¸æ‡‰çš„packageæ‰èƒ½ä¿è­‰ç¨‹å¼è·¨å¹³å°ç‰¹æ€§ ä¹Ÿå°±æ˜¯èªª æƒ³æŠŠå¯«å¥½çš„ç¨‹å¼æ”¾åˆ°å¦å¤–ä¸€å°æ©Ÿå™¨ä¸Šè·‘ï¼Œ åªè¦å°‡ç·¨è­¯å™¨ç·¨è­¯å‡ºä¾†çš„å¯åŸ·è¡Œæª”(.exx)ï¼Œæ‹¿åˆ°æ–°æ©Ÿå™¨ä¸Šä¾¿å¯ä»¥åŸ·è¡Œï¼Œ è€Œç›´è­¯å™¨å‰‡å¿…é ˆè¦æ±‚æ–°æ©Ÿå™¨ä¸Šï¼Œå¿…é ˆè¦æœ‰è·Ÿå¦ä¸€å°æ©Ÿå™¨ä¸Šç›¸åŒçš„ç›´è­¯å™¨ï¼Œ æ‰èƒ½çµ„è­¯åŸ·è¡Œä½ çš„ç¨‹å¼ï¼ ä¾†æºæ–‡ç« [Programming] ç·¨è­¯ vs ç›´è­¯","link":"2019/07/01/%E8%A8%88%E6%A6%82/%5B%E8%A8%88%E6%A6%82%5D%20%E7%B7%A8%E8%AD%AF%E5%99%A8(Compiler)%E8%88%87%E7%9B%B4%E8%AD%AF%E5%99%A8(Interpreter)/"},{"title":"[Kubernetes] Kubernetes åŸºç¤(ã„§) æ¶æ§‹åŠå…ƒä»¶","text":"å‰è¨€ Kubernetes æ˜¯ä¸€å€‹ç”¨æ–¼ç®¡ç†å¤šå€‹å®¹å™¨çš„å¤§å‹ç®¡ç†å¹³å°ï¼ŒåŸå…ˆæ˜¯ Google å…§éƒ¨è‡ªè¡Œç ”ç™¼çš„ç³»çµ±ï¼Œå¾Œä¾†é–‹æºå‡ºä¾†ï¼Œè®“ä¸–ç•Œå„åœ°çš„é–‹ç™¼è€…éƒ½èƒ½åŠ å…¥é–‹ç™¼ã€å„ªåŒ–çš„è¡Œåˆ—ï¼Œè¿‘æœŸå·¥ä½œä¸Šé–‹å§‹æ¥è§¸ Kubernetesï¼Œè—‰æ­¤è¨˜éŒ„ä¸€ä¸‹å­¸ç¿’åˆ°çš„çŸ¥è­˜ã€‚ å¸¸è¦‹çš„å®¹å™¨éƒ¨ç½²æ¨¡å‹ (Deploying Model)ä»¥ä¸‹åˆ—èˆ‰å¹¾å€‹å¸¸è¦‹çš„å®¹å™¨éƒ¨ç½²æ¨¡å‹ï¼š å–®ä¸€ç¯€é»éƒ¨ç½²ä¸€å€‹å®¹å™¨ (Single Container/Single Node) å–®ä¸€ç¯€é»éƒ¨ç½²å¤šå€‹å®¹å™¨ (Multiple Container/Single Node) å¤šç¯€é»éƒ¨ç½²å¤šå€‹å®¹å™¨ (Multiple Container/Multiple Node) =&gt; Kubernetes ä¸»è¦è§£æ±ºçš„å•é¡Œ åœ¨å–®ä¸€ç¯€é»ä¸Šçš„å®¹å™¨éƒ¨ç½²ï¼Œå¯ä»¥ç”¨ Docker ä¾†å¯¦ä½œï¼Œè—‰ç”±æ’°å¯« Dockerfile ä»¥åŠ docker-compose ä¾†å®Œæˆã€‚ ä½†æ˜¯é‡åˆ°å¤šç¯€é»çš„å®¹å™¨éƒ¨ç½²å•é¡Œæ™‚ï¼Œè€ƒæ…®çš„äº‹æƒ…å°±è®Šå¾—å¾ˆå¤š(å¦‚ï¼šè·¨ç¯€é»çš„ç¶²è·¯æºé€š)ï¼Œæ¶æ§‹è¨­è¨ˆè·Ÿå¯¦ä½œä¸Šæœƒè®Šçš„è¤‡é›œä¸”å›°é›£ã€‚ å…¶å¯¦ Docker æœ‰æ¨å‡º Docker Swarm é€™æ¨£çš„æ–¹æ¡ˆä¾†è§£æ±ºå¤šç¯€é»çš„å®¹å™¨éƒ¨ç½²å•é¡Œï¼Œä½†éæœ¬æ–‡è¨˜éŒ„çš„é‡é»ï¼Œè€Œ Kubernetes çš„èª•ç”Ÿä¹Ÿæ˜¯ç‚ºäº†è§£æ±ºå¤šç¯€é»éƒ¨ç½²å¤šå€‹å®¹å™¨çš„å•é¡Œï¼Œä¾†äº†è§£ä¸€ä¸‹ Kubernetes çš„æ¶æ§‹ä»¥åŠå¿…é ˆçŸ¥é“çš„å…ƒä»¶å§ï¼ Kubernetes Cluster ArchitectureKubernetes Cluster æ˜¯ç”±ä¸€å€‹ä¸»è¦ç¯€é»(Master Node) èˆ‡å¤šå€‹ Worker Node æ‰€æ§‹æˆçš„å¢é›†æ¶æ§‹ï¼ŒCluster æ¶æ§‹ä¸»è¦ç”±ä¸‹è¿°å…©å¤§é …æ‰€æ§‹æˆï¼š Control Plane(æ§åˆ¶å¹³é¢)ï¼šä¹Ÿå°±æ˜¯ä¸»è¦ç¯€é»(Master Node)ï¼Œæ‰®æ¼” Kubernetes å¤§è…¦çš„è§’è‰² Node (ç¯€é»; åˆä½œ Worker Node)ï¼šå¯éƒ¨ç½²æ–¼è™›æ“¬æ©Ÿ or å¯¦éš›çš„ Server ä¸Šï¼Œç”šè‡³èƒ½å°‡ worker æ”¾ç½®æ–¼ container è£¡é¢(è—‰ç”± container in container çš„æŠ€è¡“)ã€‚ Master Node (ä¸»è¦ç¯€é»)Kubernetes é‹ä½œçš„æŒ‡æ®ä¸­å¿ƒï¼Œå¯è² è²¬ç®¡ç†å…¶ä»– Woker Nodeã€‚ä¸€å€‹ Master Node ä¸­æœ‰å››å€‹çµ„ä»¶ï¼šAPI Serverã€Etcdã€Schedulerã€Controllerã€‚ Control Plane (æ§åˆ¶å¹³é¢)Control Plane è£¡æœ‰ä¸åŒçš„æ‡‰ç”¨ç¨‹å¼ï¼Œé€™å››å€‹è§’è‰²çµ„åˆæˆ Kubernetes æœ€é‡è¦çš„å¤§è…¦åŠŸèƒ½ï¼Œè² è²¬ç®¡æ§æ•´å€‹ Kubernetes å¢é›†(Cluster)ï¼Œå››å€‹è§’è‰²åˆ†åˆ¥æ˜¯ï¼š API Server Scheduler Controller Etcd Kubernetes å¯ä»¥åœ¨ä¸åŒçš„ç¯€é»(Node)ä¾†é‹è¡Œå®¹å™¨ï¼ŒWorker Node å¯ä»¥éƒ¨ç½²åœ¨è™›æ“¬æ©Ÿã€å¯¦éš›çš„ Server ç”šè‡³æ˜¯å®¹å™¨(Container)ä¸Š(å°‡ Container éƒ¨ç½²åœ¨ Container ä¸Š)ã€‚ å¤šå€‹ worker nodes çµ„æˆ Data Plane Worker Node ä¸Šæœ‰çš„å…ƒä»¶ kubeletï¼šåŸºæ–¼ PodSpec ä¾†é‹ä½œï¼Œç”¨æ–¼æè¿° Pod çš„ç‰©ä»¶ã€‚ kube-proxyï¼šé›†ç¾¤ä¸­æ¯å€‹ç¯€é»ä¸Šé‹è¡Œçš„ç¶²è·¯ä»£ç†(Agent)ç¨‹å¼ï¼Œè² è²¬èˆ‡ Control Plane çš„ API Server æºé€š Container Runtimeï¼šæ”¯æ´å¤šå€‹å®¹å™¨çš„é‹è¡Œç’°å¢ƒï¼Œåªè¦ç¬¦åˆ Kubernetes CRI æ¨™æº–ï¼Œéƒ½èƒ½ä»‹æ¥é€²è¡Œå¯¦ä½œ Worker Nodes èˆ‡ Control Plane ä¹‹é–“å¯è—‰ç”±å®‰è£åœ¨ Worker Node ä¸Šçš„ ä»£ç†ç¨‹å¼(Agent) èˆ‡ Control Plane è£¡çš„ API Server é€²è¡Œæºé€šï¼ŒåŒæ­¥ç›®å‰ Cluster å…§æœ€æ–°çš„ç‹€æ³ã€‚ æ•´å€‹ Control Plane + æ‰€æœ‰çš„ Worker nodes (æˆ–ä½œ Data Plane) = Kubernetes Cluster Control Plane å¦‚åŒ Kubernetes çš„å¤§è…¦ï¼ŒData Plane å¦‚åŒèº«é«”çš„å››è‚¢ï¼Œæ’èµ·æ•´å€‹ Kubernetes Cluster å¦å¤–ï¼Œä½¿ç”¨è€…ç«¯è¦èˆ‡ Kubernetes Cluster äº’å‹•ï¼Œä¸€èˆ¬æœ‰ä¸‰ç¨®æ–¹å¼: API: ç¿’æ…£æ’°å¯«ç¨‹å¼çš„é–‹ç™¼è€…å¯è—‰ç”± API çš„æ–¹å¼èˆ‡ Kubernetes æºé€š CLI (Command Line Interface)ï¼šKubernetes æä¾›ä¸€ç³»åˆ—çš„å·¥å…·åˆ—æŒ‡ä»¤ä¾†æºé€šï¼Œé€™ä¹Ÿæ˜¯æœ€å¸¸è¦‹çš„æ–¹å¼ UI (ä½¿ç”¨è€…ä»‹é¢)ï¼šç¶²é çš„æ–¹å¼æ“ä½œ Kubernetes åŠ å…¥ä½¿ç”¨è€…å¾Œçš„æ•´å€‹ Kubernetes æ¶æ§‹åœ–ï¼š æ¥è‘—æ¢è¨ Control Plane è£¡çš„å››å€‹é‡è¦è§’è‰²: API ServerAPI Server æ˜¯ç®¡ç† API çš„ä¼ºæœå™¨ï¼Œå³ Control Plane çš„å‰ç«¯ï¼Œå‰è¿°æåˆ°ä¸‰ç¨®èˆ‡ Kubernetes äº’å‹•çš„æ–¹å¼ï¼Œæ‰€æœ‰çš„è«‹æ±‚éƒ½æ˜¯é€é API Server ç¬¬ä¸€å€‹è™•ç†ï¼Œç”±ä¸Šæ–¹çš„æ¶æ§‹åœ–å¯ä»¥çœ‹å‡ºï¼š æ¯å€‹ Node å½¼æ­¤é–“çš„æºé€šéƒ½å¿…é ˆè¦é€é api server ä»£ç‚ºè½‰ä»‹ã€‚ æ›è¨€ä¹‹ï¼Œè‹¥ API Server ç„¡æ³•æ­£å¸¸é‹ä½œï¼Œä½¿ç”¨è€…ä½¿ç”¨çš„æ‰€æœ‰å·¥å…·éƒ½ç„¡æ³•å° Kubernetes å…§éƒ¨çš„è³‡æºé€²è¡Œå­˜å– Etcdä»¥ key-value ç‚ºå„²å­˜å½¢å¼çš„è³‡æ–™åº«ï¼Œå„²å­˜ Kubernetes Cluster çš„æ‰€æœ‰è³‡æºä»¥åŠç‹€æ…‹ï¼Œå› ç‚ºæ˜¯å„²å­˜è³‡æ–™çš„åœ°æ–¹ï¼Œæ•…ç›¸å°æ‡‰çš„è³‡æ–™å‚™ä»½ã€ç½é›£é‚„åŸç­‰æªæ–½ç›¸ç•¶é‡è¦ Scheduleræ›¿ API Server å¾ container è£¡é¢å°‹æ‰¾åˆé©çš„ç¯€é»ä¾†éƒ¨ç½²ï¼Œå°‡è³‡è¨Šå›å‚³çµ¦ API Server Scheduler å¦‚ä½•é‹ä½œï¼Ÿ å‡è¨­æœ‰å¤šå€‹å€™é¸ç¯€é»ï¼ŒScheduler å¾ API Server æ”¶åˆ° Container è³‡è¨Šæ™‚ï¼Œå°‡ Container ç›¸é—œè³‡è¨Šé€²è¡Œéæ¿¾(filtering)ï¼Œæ ¹æ“šéœ€æ±‚(e.g. æœ€ä½çš„ CPU æ•¸é‡)æ·˜æ±°ä¸é©åˆçš„ç¯€é»ï¼Œç¬¬ä¸€æ¬¡éæ¿¾å¾Œç•™ä¸‹ç¬¦åˆæ¢ä»¶çš„ç¯€é»ã€‚ æ¥è‘— Scheduler æ ¹æ“šç‰¹å®šçš„ç®—æ³•å°å‰©ä¸‹çš„ç¯€é»é€²è¡ŒåŠ æ¬Šï¼Œæœ€å¾Œé¸å‡ºåŠ æ¬Šåˆ†æ•¸æœ€é«˜çš„ç¯€é»ï¼Œå†é€é Scheduler å›å‚³çµ¦ API Serverã€‚ Controlleræ•´å€‹ Control Plane çš„æ§åˆ¶ä¸­å¿ƒï¼Œæ˜¯ä¸€å€‹æŒçºŒæ–¼èƒŒæ™¯åŸ·è¡Œçš„æ‡‰ç”¨ç¨‹å¼ï¼Œç›£è½ Cluster å…§çš„å„ç¨®äº‹ä»¶å’Œç‹€æ…‹ï¼Œæ ¹æ“šäº‹ä»¶ç«‹å³åæ‡‰ï¼Œåšå‡ºå°æ‡‰çš„è™•ç†ï¼Œé€šé API Server å°‡çµæœå›å‚³å‡ºå»ã€‚ ç›®å‰ Controller åˆ†å››ç¨®: Node: ç®¡ç†ç¯€é» Replication Endpoints Service Account å››ç¨® Controller å­˜æ”¾æ–¼åŒå€‹åŸ·è¡Œæª”å…§ ç¯€é»(Worker Node)ä½œç‚º Kubernetes çš„ç¡¬é«”æœ€å°å–®ä½ï¼Œæ¯å€‹ç¯€é»ä¸Šéƒ½æœƒé‹è¡Œä»£ç†ç¨‹å¼ç”¨æ–¼è·Ÿ API Server æºé€šï¼Œä»£ç†ç¨‹å¼åˆ†ä¸‰é¡ï¼š Kubelet Kube-proxy Container-runtime Kubeletè·Ÿ API Server é€²è¡Œæºé€šçš„æ‡‰ç”¨ç¨‹å¼ï¼ŒåŒæ™‚ç¢ºä¿ç¯€é»ä¸Š container çš„é‹è¡Œç‹€æ…‹ã€‚å°‘äº†å®ƒï¼Œè©²ç¯€é»å°±ç„¡æ³•è¢« Kubernetes ç®¡ç†ï¼Œé€²è¡Œç›£æ§ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šKubelet åªæœƒç®¡ç†è·Ÿ Kubernetes æœ‰é—œçš„ containerï¼Œä¹Ÿå°±æ˜¯ç”± Kubernetes å»ºç«‹çš„ containerã€‚å…¶é¤˜åƒæ˜¯é€é docker command å»ºç«‹çš„ container ç­‰ç­‰ä¸€è“‹ä¸ç®¡ Kube-proxyæä¾›åŸºæœ¬çš„ç¶²è·¯åŠŸèƒ½çµ¦é‹è¡Œä¸­çš„ containerï¼Œåœ¨ Node ä¸Šæ‰®æ¼”å‚³éè³‡è¨Šçš„è§’è‰²ã€‚ Container Runtimeè² è²¬å®¹å™¨åŸ·è¡Œçš„ç¨‹å¼ Kubernetes çš„æ¨™æº–åŒ–ä»‹é¢Kubernetes æ˜¯å€‹é–‹æºè»Ÿé«”ï¼Œå…¶æ¶æ§‹ä¹Ÿæ¥µç‚ºè¤‡é›œï¼Œç‚ºäº†èƒ½æœ‰æ•ˆéŠœæ¥å„å¼å„æ¨£çš„è§£æ±ºæ–¹æ¡ˆï¼Œæä¾›ä¸åŒçš„ä»‹é¢æ¨™æº–ï¼Œå…¼å®¹ä¸åŒçš„ container å¯¦ä½œï¼Œåªè¦æ˜¯ç¬¦åˆæ¨™æº–çš„è§£æ±ºæ–¹æ¡ˆï¼Œå°±èƒ½éŠœæ¥åˆ° Kubernetes ä¸Šã€‚çµæ§‹å¦‚ä¸‹åœ–: ä»¥ä¸‹åˆ—å‡ºæœ€å¸¸è¦‹çš„æ¨™æº–: CRI (Container Runtime Interface) CNI (Container Network Interface) CSI (Container Storage Interface) Device Plugin (è·Ÿç¡¬é«”æœ‰é—œï¼Œä¸åœ¨æ–‡è¨è«–ç¯„åœ) Container Runtime Interface (CRI)Kubernetes æ”¯æ´é‹ç®—è³‡æºçš„æ¨™æº–åŒ–ä»‹é¢ã€‚ä»¥ Kubelet ç‚ºä¾‹ï¼šä¸Šåœ–æ‰€ç¤ºï¼ŒKubelet é€é CRI èˆ‡ Container Runtime æºé€šï¼Œå¾Œé¢çš„ Implement Methods è¡¨ç¤ºæ¯å€‹ Container Runtime å¯¦ä½œæ–¹æ³•çš†ä¸ç›¸åŒï¼Œè€Œæœ€çµ‚æœƒç”¢ç”Ÿ Containerï¼Œé€™äº›å»ºç«‹å¥½çš„ container çš†æ˜¯åŸºæ–¼ OCI (Open Container Initiative) çš„æ¨™æº–ã€‚ Kubelet æœ¬èº«é€é CRI å»å‘¼å« Container Runtimeï¼Œè€Œ Container Runtime å¯ä»¥çœ‹ä½œæ˜¯é¡å¤–çš„ä¸€å€‹æ‡‰ç”¨ç¨‹å¼ï¼Œæ¥æ”¶å¾ Kubelet ç™¼é€å‡ºä¾†çš„è«‹æ±‚ï¼Œè² è²¬å»ºç«‹ã€ç®¡ç†é‹è¡Œä¸­çš„ container(ç¬¦åˆ Container Runtime Interface;CRI)ã€‚ Container Network Interface (CNI)Kubernetes ç®¡ç†å¤šå€‹ç¯€é»çš„å®¹å™¨å¹³å°ï¼Œç¯€é»ä¹‹é–“è©²å¦‚ä½•æºé€šï¼ŸKubernetes æä¾›æ”¯æ´ç¶²è·¯æ¶æ§‹çš„æ¨™æº–åŒ–ä»‹é¢ï¼Œç¢ºä¿ containers èƒ½å¤ é †åˆ©çš„åœ¨è·¨ç¯€é»é€²è¡Œæºé€šï¼Œç‚ºæ‰€æœ‰çš„ containers æä¾›åŸºæœ¬çš„ç¶²è·¯èƒ½åŠ›ã€‚ CNI å¯ä»¥åšçš„äº‹æƒ…å¾ˆå¤šï¼Œæœ¬æ–‡åˆ—èˆ‰å¸¸è¦‹çš„: Container é–“çš„ç¶²è·¯é€£æ¥ Container to Container Container to WAN WAN to Container In-Cluster communication (è·¨ç¯€é»æºé€š) IP ä½ç½®çš„é…ç™¼/ç§»é™¤ å›ºå®š IP æµ®å‹• IP æ¥çºŒä¸Šé¢å¾— Kubelet æµç¨‹ï¼Œç•¶ Kubelet é€é CRI å‘¼å« Container Runtime å•Ÿç”¨ containerï¼ŒcontaineræˆåŠŸå•Ÿç”¨å¾Œï¼ŒContainer Runtime æœƒå°‡ Container è³‡è¨Šå¸¶å…¥ CNIï¼Œæ•… CNI æ˜¯ä»¥ Container ç‚ºå–®ä½é€²è¡Œè™•ç†(å•Ÿç”¨ Container æ™‚ï¼ŒCNIä¹Ÿæœƒè¢«è·Ÿè‘—å‘¼å«ä¸€æ¬¡;ç§»é™¤Containeræ™‚äº¦åŒ)ã€‚ Container Storage Interface (CSI)Kubernetes æä¾›æ”¯æ´å„²å­˜æ–¹é¢çš„æ¨™æº–åŒ–ä»‹é¢ï¼Œå¯è®“ä½¿ç”¨è€…å¯ä»¥æ›´å®¹æ˜“åœ°å°‡å„å¼å„æ¨£çš„å„²å­˜è¨­å‚™(e.g. æª”æ¡ˆç³»çµ±)æ•´åˆé€² Kubernetes ä¸­ã€‚ ç›®å‰ Kubernetes æä¾›å…©ç¨®æ–¹å¼é€²è¡Œå„²å­˜: In-tree configuration (æ—©æœŸ) CSI configuration Kubernetes çš„é‹ç®—è³‡æºå‰è¿°æåˆ° Kubernetes çš„æ¶æ§‹ä»¥åŠæ¨™æº–åŒ–ä»‹é¢ï¼Œæ¥è‘—è¨è«–çš„æ˜¯ Kubernetes é‹ç®—è³‡æºï¼Œåœ¨ Kubernetes è£¡ï¼Œé‹ç®—å–®å…ƒå¯åˆ†ç‚ºå…©å¤§é¡ï¼š Pod Pod Controller Pod æœ€å°çš„é‹ç®—å–®å…ƒï¼Œä¸€å€‹ Pod å³ä¸€å€‹æ‡‰ç”¨ç¨‹å¼ Pod è£¡é¢å¯æ“æœ‰ ä¸€å€‹æˆ–å¤šå€‹ containers (ä½†ä¸€èˆ¬ä¾†èªªä¸€å€‹ Pod æœ€å¥½åªæœ‰ä¸€å€‹ container) åŒå€‹ Pod è£¡çš„æ‰€æœ‰ containers å½¼æ­¤å…±äº«è³‡æº: ç¶²è·¯ã€å„²å­˜ã€IPC(Inter Process Communication; é€é shard memory çš„æ–¹å¼åœ¨ä¸åŒæ‡‰ç”¨ç¨‹å¼ä¹‹é–“é€²è¡Œæºé€š) Pod ControlleråŸºæ–¼ Pod å»æ§‹ç¯‰ä¸åŒçš„ä½¿ç”¨é‚è¼¯ï¼Œç”¨æ–¼å„å¼æƒ…å¢ƒã€‚ åŠ å…¥ Pod ä¹‹å¾Œï¼ŒKublet å»ºç«‹è³‡æºçš„æµç¨‹ ä¸Šåœ–çš„æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š Client ç«¯å°‡æ’°å¯«å¥½çš„æª”æ¡ˆé€éæŒ‡ä»¤æˆ–æ˜¯ä½¿ç”¨ä»‹é¢ç™¼å‡ºè«‹æ±‚ï¼Œå‘Šè¨´ API Serverï¼š å¹«æˆ‘ å»ºç«‹ä¸€å€‹ Pod ï¼Œä»¥åŠ Pod çš„ç›¸é—œè³‡è¨Šã€‚ æ¥è‘— API Server, Scheduler, Controller ç›¸äº’åˆä½œå¾Œå¾—åˆ°ä¸€å€‹åˆé©çš„ç¯€é»(Node)ä¾†éƒ¨ç½²é€™å€‹ Podï¼Œä¸¦å°‡ Pod è³‡è¨Š(e.g. åç¨±ã€container æ•¸é‡) é€è‡³è©²ç¯€é»ä¸Šçš„ Kubeletã€‚ æ¥è‘— Kubelet å°‡è§£ææ”¶åˆ°çš„è³‡è¨Šï¼Œé€é CRI å°‡ container è³‡è¨Šé€çµ¦ Container Runtimeï¼ŒContainer Runtime æ”¶åˆ° Pod å…§çš„è³‡è¨Š(ä¸€å€‹ or å¤šå€‹ Container)ï¼Œæœ€å¾Œå†ä¾ç…§ä¸åŒçš„å¯¦ä½œæ–¹å¼å»ºç«‹å‡ºå°æ‡‰çš„ containerã€‚ ä¸Šåœ–ä»¥ Container Runtime ç‚ºç•ŒåŠƒåˆ†çš„è©±ï¼ŒContainer Runtime å¾€å¾Œå³ Container(æœ‰å¯èƒ½æ˜¯ dockerï¼Œæˆ–æ˜¯å…¶ä»–é¡å‹çš„ Container)ï¼Œè€ŒContainer Runtime ç¶“ç”± CRI ä¸€è·¯å¾€å‰æ¨è‡³ API Srever éƒ½æ˜¯ ä»¥ Pod ç‚ºå–®ä½ é€²è¡Œæºé€šã€‚ Pod æœ¬èº«æ˜¯ä¸€å€‹æŠ½è±¡æ¦‚å¿µï¼Œç”±ä¸€å€‹ or å¤šå€‹ Container æ‰€çµ„æˆï¼ŒKubernetes è®“é€™äº› Containers åœ¨ Pod ä¸­ä»¥ä¸‹å…±äº«è³‡æº: Network Storage IPC NetworkPod å…§ containers å…±äº«çš„ç¶²è·¯åŒ…å« IP, port ç­‰ï¼Œæ•…è¦æ³¨æ„åŒä¸€å€‹ Pod è£¡é¢éƒ¨ç½²ä¸åŒçš„ Webserver åœ¨å¤šå€‹ container æ™‚ï¼Œ port è™Ÿè¦è¨˜å¾—åˆ‡é–‹ Storageå¯å…±ç”¨ç›¸åŒçš„æª”æ¡ˆç³»çµ±(å¯é¸) IPC (Inter Process Communication)é€é shard memory çš„æ–¹å¼å…±äº«è³‡æº Pod æ¦‚å¿µåœ– å¦‚åŒå‰é¢æ‰€æåˆ°ï¼ŒPod æœ¬èº«æ˜¯ä¸€å€‹æŠ½è±¡æ¦‚å¿µï¼Œæ¯å€‹ Pod å€ŸåŠ© CNI æ“æœ‰å°å¤–çš„å­˜å–èƒ½åŠ›(å¦‚åœ–ç‰‡ä¸­ Network Interface æ‰€ç¤º)ï¼Œå¤§éƒ¨åˆ†çš„æƒ…æ³ CNI æœƒå”åŠ©æº–å‚™ä¸€å¼µç¶²å¡åˆ†é… IPï¼Œï¼ŒPod å…§çš„æ‰€æœ‰ container å°å¤–IPç‚º 10.244.1.2(å…±äº« Network)ï¼Œè€Œ container ä¹‹é–“ç”¨ 127.0.0.1 é€²è¡Œæºé€šã€‚ å¦å¤–ï¼ŒStorge çš„å…±äº«å¦‚åœ–ç‰‡æ‰€ç¤ºçš„ volumeï¼Œä¸åŒçš„ container å„²å­˜çš„è³‡æ–™é›–ç„¶æ›åœ¨ä¸åŒè·¯å¾‘ï¼Œä½†å„²å­˜ä¾†æºç›¸åŒã€‚ Pod è£¡çš„ container ç‹€æ…‹Pod è£¡çš„ container æ“æœ‰è‡ªå·±çš„ç‹€æ…‹ï¼Œå¦‚ï¼š Running: é‹è¡Œä¸­ Terminated: çµæŸï¼Œå¯èƒ½çš„çµæœç‚ºæˆåŠŸ(ä»»å‹™é †åˆ©çµæŸ)æˆ–å¤±æ•—(container crash)ã€‚ Waiting: Container ä»è™•æ–¼ç­‰å¾…çš„ç‹€æ…‹(e.g. ç­‰å¾… Image ä¸‹è¼‰) Pod æœ¬èº«çš„ç‹€æ…‹Pod æœ¬èº«ä¹Ÿæœ‰ç‹€æ…‹æè¿°ï¼Œæœƒå’Œ Container æœ‰é—œä¿‚(å› ç‚º Pod æ˜¯ä¸€å€‹æŠ½è±¡å±¤ï¼Œè€Œ Kubernetes éƒ½æ˜¯çœ‹ Podï¼Œä½†å¯¦éš›é‹è¡Œçš„æ˜¯ Container)ã€‚ å¯¦éš›éƒ¨ç½² container åˆ° Pod ä¸Šæ™‚ï¼Œèƒ½å¤ æ­£ç¢ºè¾¨è­˜ Pod ç‹€æ…‹æœ‰åŠ©æ–¼ç†è§£å•é¡Œï¼ŒPod åˆ†ä»¥ä¸‹å¹¾ç¨®ç‹€æ…‹: Pending Running Succeeded Failed Unknown Pendingåªè¦ã„§å€‹ container å°šæœªå»ºç«‹èµ·ä¾†ï¼Œæ•´å€‹ Pod å°±æœƒè™•æ–¼ Pending ç‹€æ…‹ï¼Œæœªèƒ½æˆåŠŸé‹è¡Œå¯èƒ½çš„åŸå› æ˜¯ï¼š container æ²’æœ‰ CNIï¼Œæ²’æœ‰ CNIï¼Œcontainer å°±æ²’æœ‰è¾¦æ³•æ­£å¸¸é‹ä½œã€‚ Runningåªè¦ã„§å€‹ container æ­£å¸¸é‹ä½œï¼Œæ•´å€‹ Pod å°±æœƒé¡¯ç¤º Runningã€‚ SucceededPod è£¡æ‰€æœ‰çš„ container éƒ½æ­£å¸¸çµæŸï¼Œå°±ç¨±æ•´å€‹ Pod æˆåŠŸçµæŸ Failedåä¹‹ï¼ŒPod è£¡åªè¦æœ‰ä¸€å€‹ container éæ­£å¸¸çµæŸï¼Œæ•´å€‹ Pod æœƒå‘ˆç¾ Failed ç‹€æ…‹ Unknownæ‰£é™¤å‰é¢çš„å››ç¨®ç‹€æ…‹ï¼Œå‰©ä¸‹çš„æ­¸åœ¨ Unknown Pod çš„é‡å•Ÿæ”¿ç­–(Restart Policy)Pod æä¾›å¹¾é …é‡å•Ÿæ”¿ç­–ï¼Œè·Ÿ docker æ¦‚å¿µé¡ä¼¼ï¼Œæœ‰ä½¿ç”¨é docker çš„äººå°é€™äº›é‡å•Ÿæ”¿ç­–è‚¯å®šä¸é™Œç”Ÿï¼Œè¨­å®šæ”¿ç­–æ±ºå®šè¦ä¸è¦é‡å•Ÿ container: Never: æ°¸ä¸é‡å•Ÿ Always: ç¸½æ˜¯é‡å•Ÿ OnFailureï¼šå¤±æ•—æ‰é‡å•Ÿ Pod çš„æ’ç¨‹ç­–ç•¥ (Schedule Strategy)Pod æä¾›ç›¸é—œå±¬æ€§æ±ºå®šå¦‚ä½•éƒ¨ç½²ã€‚ Node Affinity: å¸Œæœ›è®“ Pod é è¿‘ç¯€é» Label: ç”¨æ–¼è¾¨è­˜ Pod é…ç½®åœ¨å“ªäº›ç¯€é»ä¸Š(e.g. æ··åˆå¼çš„ Cluster æ¶æ§‹) Affinity Anti-Affinity Node Taints: å¸Œæœ›è®“ Pod é é›¢ç¯€é» æ³¨æ„:é è¨­æƒ…æ³ä¸‹ï¼ŒControl Plane çš„ç¯€é»ä¸å…è¨±éƒ¨ç½²ä»»ä½• Pod(No Schedule)ï¼Œé¿å…ä¸€èˆ¬åœ¨ä½¿ç”¨çš„ container èˆ‡ Control Plane çš„ç¯€é»çˆ­å¥ªè³‡æº ç¸½çµå¯«åˆ°é€™é‚Šå¤§è‡´å¯ä»¥äº†è§£ Kubernetes çš„åŸºç¤æ¶æ§‹ã€æ‰€éœ€çš„å…ƒä»¶ï¼Œä»¥åŠæ¯å€‹å…ƒä»¶åœ¨ Kubernetes æ‰€æ‰®æ¼”çš„è§’è‰²ï¼Œä¸‹ç¯‡æ–‡ç« ç´€éŒ„å¦‚ä½•åœ¨ Kubernetes ä¸Šæ“ä½œ Pod å…ƒä»¶","link":"2021/09/07/DevOps/K8s/%5BKubernetes%5D%20Kubernetes%20%E5%9F%BA%E7%A4%8E(%E3%84%A7)%20%E6%9E%B6%E6%A7%8B%E5%8F%8A%E5%85%83%E4%BB%B6/"},{"title":"[Kubernetes] Kubernetes åŸºç¤(äºŒ) Pod æ“ä½œ","text":"å‰è¨€ å»¶çºŒä¸Šä¸€ç¯‡[Kubernetes] Kubernetes åŸºç¤(ã„§) æ¶æ§‹åŠå…ƒä»¶è¨è«– Kubernetes çš„æ¶æ§‹èˆ‡å…ƒä»¶å¾Œï¼Œæ¥è‘—ä¾†æ¢è¨å¦‚ä½•æ“ä½œ Kubernetes çš„ Pod å…ƒä»¶å§ï¼ ä»¥ä¸‹ç°¡ç¨± Kubernetes ç‚º K8sã€‚ åœ¨æ­£å¼æ“ä½œå‰ï¼Œå…ˆèªè­˜ä¸€ä¸‹ä»€éº¼æ˜¯ kubectl Kubectlkubectl æ˜¯ Kubernetes çš„å‘½ä»¤åˆ—å·¥å…·(Command Line tool)ï¼Œé€éæŒ‡ä»¤çš„æ–¹å¼ä¾†ç®¡ç†æ•´å€‹ Kubernetes Clusterï¼Œå¦‚ï¼šå–å¾— Cluster å„ç¨®ä¸åŒè³‡æºè³‡è¨Š, é…ç½®é‹è¡Œè³‡æºç­‰ï¼Œä½¿ç”¨ Kubectl å‰è¦å…ˆäº†è§£å¹¾å€‹å¸¸ç”¨çš„åƒæ•¸: Namespace Completion å‘½åç©ºé–“ (Namespace)é€éå‘½åç©ºé–“åœ¨ Cluster å…§å°‡ä¸åŒè³‡æº(Container, storage, Network ç­‰)å€åˆ†é–‹ä¾† è‡ªå‹•è£œå…¨ (Completion)Kubernetes æä¾›è‡ªå‹•è£œå…¨ bash æŒ‡ä»¤çš„åŠŸèƒ½ï¼Œé€é Tab éµå¹«åŠ©æˆ‘å€‘åœ¨ä½¿ç”¨ Kubectl æŒ‡ä»¤æ™‚ï¼Œå¿«é€Ÿåœ°æŠŠæŒ‡ä»¤è£œå®Œï¼ŒåŸ·è¡Œä¸‹è¿°æŒ‡ä»¤å°±èƒ½å•Ÿç”¨é€™é …åŠŸèƒ½ 1source &lt;(kubectl completion bash) è®€å– Kubernetes è³‡æºçš„ç›¸é—œæŒ‡ä»¤ - Getè®€å–æŸå€‹ NameSpace ä¸‹çš„æ‰€æœ‰ Pods è³‡è¨Š1kubectl -n &lt;NameSpace&gt; get pods è®€å–æŸå€‹ NameSpace ä¸‹ç‰¹å®šçš„ Pods è³‡è¨Š1kubectl -n &lt;NameSpace&gt; get pods &lt;PodName&gt; è‹¥æƒ³çœ‹æ›´è©³ç´°çš„è³‡è¨Š(e.g. NODE, IP..)ï¼Œå¯ä»¥åœ¨æŒ‡ä»¤å¾Œæ–¹åŠ ä¸Šåƒæ•¸ -o=wide 1kubectl -n &lt;NameSpace&gt; get pods &lt;PodName&gt; -o=wide ä¹Ÿå¯æ”¹ä»¥ yaml çš„å½¢å¼æè¿° container ï¼Œåƒæ•¸æ”¹ç‚º -o=yaml or JSON å½¢å¼: -o=json Kubernetes æœ‰æä¾› json path åšè¼ƒç‚ºè¤‡é›œçš„è¼¸å‡ºæ–¹å¼ï¼Œå¦‚ -0=jsonpath='...' ç›£è½ Pod - Watchç›£è½ container çš„è®Šå‹•ï¼Œåœ¨éƒ¨ç½²çš„æ™‚å€™ï¼Œå¯é€é watch çš„æ–¹å¼å»çœ‹æŸäº› container çš„è®ŠåŒ–æ˜¯å¦å¦‚é æœŸã€‚åœ¨æŒ‡ä»¤è£¡åŠ ä¸Šåƒæ•¸ -w å³å¯ 1kubectl -n &lt;NameSpace&gt; get pods &lt;PodName&gt; -w è®€å– Kubernetes è³‡æºçš„ç›¸é—œæŒ‡ä»¤ - Describeç”¨æ›´ä¸Šå±¤çš„è§’åº¦å»çœ‹å¾…è³‡æºï¼Œå°‡å¤šå€‹äº‹ä»¶ã€è³‡æºçš„è³‡è¨Šæ•´åˆåœ¨ä¸€èµ·ï¼Œçµ±ä¸€å›å‚³çµ¦ä½¿ç”¨è€…ï¼Œåœ¨ debug æ™‚æŒºå¥½ç”¨çš„æŒ‡ä»¤ 1kubectl -n &lt;NameSpace&gt; describe pods &lt;PodName&gt; Kubeconfig çš„ç®¡ç†Kubeconfig åŒ…å«å„å¼å„æ¨£çš„è³‡è¨Š e.g. Cluster(ä¸€å€‹ or å¤šå€‹), userï¼Œå¯è—‰ç”± kubectl ä¾†å¹«åŠ©æˆ‘å€‘ç®¡ç†é€™äº›è³‡è¨Šï¼Œkubectl æ˜¯ä¸€æ”¯ç”¨ä¾†èˆ‡ k8s å¢é›†æºé€šçš„äºŒé€²ä½ (binary) å·¥å…·ã€‚ æˆ‘å€‘å¯ä»¥é‹ç”¨ kubectl ä¾†ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒKubeconfig æœ‰å€‹é‡è¦æ¦‚å¿µ: Context Contextä»¥æ€æ¨£çš„èº«ä»½(user)ã€åŸºæ–¼é è¨­çš„ Namespaces å»å­˜å–ç‰¹å®šçš„ Clusterè³‡è¨Šï¼Œæ˜¯ Kubeconfig çš„æœ€å°å–®å…ƒï¼Œæ•…æ“ä½œ Kubeconfig æ™‚éƒ½æ˜¯ä»¥ Context ä½œç‚ºæœ€å°åŸä»¶å»æ“ä½œã€‚ Kubeconfig ç¯„ä¾‹æ ¼å¼ä¸»è¦åˆ†ä¸‰å¤§é¡åˆ¥: Cluster, Context, User 123456789101112131415161718apiVersion: v1 # è©²å…ƒä»¶çš„ç‰ˆæœ¬è™ŸKind: # è©²å…ƒä»¶å±¬æ€§ e.g. Pod, Deployment, Service, Namespace, ReplicationControllerclusters: # æè¿°å¤šå€‹ clusters- cluster: certificate-authority-data: # æè¿° Certificate çš„è³‡è¨Š server: # ç´€éŒ„é€£æ¥çš„ Cluster çš„ä½ç½® name: # Cluster åç¨± contexts:- context: # æŠŠ user å’Œ cluster è³‡è¨Šæ•´åˆè‡³ context cluster: namespace: # user: #users:- name: # æ­¤è™•å®šç¾© user åç¨± user: client-certificate: # user ç›¸é—œçš„ credential client-key: # user ç›¸é—œçš„ credential Kubeconfig ç›¸é—œæŒ‡ä»¤éƒ¨ç½² Service åˆ° K8s Cluster æ™‚ï¼Œå¯æŠŠç›¸é—œéƒ¨ç½²è³‡æºç­‰è³‡è¨Šå…ˆå®šç¾©æ–¼ yaml ä¸Šï¼Œå†é€é kubectl çš„æŒ‡ä»¤å»ºç«‹æ‰€éœ€è³‡æº å° Pod æ“ä½œ (Imperative Management; å‘½ä»¤å¼ç®¡ç†)é€šéé€™ç¨®æ–¹æ³•å‘Šè¨´Kubernetes APIä½ è¦å‰µå»ºï¼Œæ›¿æ›æˆ–åˆªé™¤çš„å…§å®¹ å»ºç«‹&amp;æŸ¥çœ‹ Podè¦åœ¨ K8s ä¸Šéƒ¨ç½²ä¸€é …è³‡æºåˆ° Pod ä¸Šï¼Œå¯ä»¥å°äº‹å…ˆå®šç¾©å¥½çš„ yaml æª”æ¡ˆåŸ·è¡Œ kubectl çš„æŒ‡ä»¤ï¼Œyaml æª”ç…§ä¸‹æ–¹ç¯„ä¾‹ï¼Œéƒ¨ç½²ä¸€å€‹ Nginx æœå‹™åˆ° Pod ä¸Š:pod.yaml 1234567891011121314151617apiVersion: v1kind: Pod # æŒ‡å®šç‚º Podmetadata: name: myapp-pod-nginx-demo labels: app: myapp-pod-nginx-demo # å®šç¾©å¥½ Label ç”¨æ–¼è¾¨èªspec: containers: - name: myapp-pod-nginx-demo # è‡ªè¨‚çš„å®¹å™¨åç¨± image: nginx # container æŒ‡å®šçš„ Image resources: # çµ¦å®šç´¢å–è³‡æºçš„ä¸Šé™ limits: cpu: 200m memory: 200Mi requests: cpu: 100m memory: 64Mi æ­é… kubectl create æŒ‡ä»¤åŠ ä¸Šåƒæ•¸ -fï¼Œå¾Œé¢æ¥å®šç¾©å¥½çš„æª”æ¡ˆéƒ¨ç½²è³‡æº: 1kubectl create -f pod.yaml å¦‚æœè¦æŸ¥çœ‹ Pod ç‹€æ…‹ï¼Œå¯ä»¥ä¸‹ get pod æŒ‡ä»¤ï¼Œå¾Œé¢æ¥å‰›å‰›ä»¶å¥½çš„ Pod åç¨± 1kubectl get pod myapp-pod-nginx-demo output 12NAME READY STATUS RESTARTS AGEmyapp-pod-nginx-demo 1/1 Running 0 1m æƒ³çœ‹æ›´ç´°éƒ¨çš„è³‡è¨Š(name space, Node, Label, Containersç­‰ç­‰)å¯ä»¥ç”¨ describe pod çš„æŒ‡ä»¤ 1kubectl describe pod myapp-pod-nginx-demo åˆªé™¤ Podè‹¥ä¸éœ€è¦é€™å€‹ Pod äº†ï¼Œè¦å°‡å…¶ç§»é™¤å¯ä¸‹ delete podï¼Œæˆ–æ˜¯ delete -f æ¥å®šç¾©å¥½çš„ yaml æª” 123kubectl delete pod myapp-pod-nginx-demo# orkubectl delete -f pod.yaml ç·¨è¼¯ Podé€é edit pod é‡å°ç•¶å‰é‹ä½œä¸­çš„è³‡æºé€²è¡Œæ›´æ–°/æ›¿æ›ï¼Œä¸éœ€é‡æ–°éƒ¨ç½² 1kubectl edit pod myapp-pod-nginx-demo é›–ç„¶ä¸Šé¢å®šç¾©å¥½çš„ pod.yaml å¾ˆç°¡çŸ­ï¼Œä½†å¯¦éš›éƒ¨ç½²åˆ°ç³»çµ±æ™‚ï¼Œ K8s çš„ API Server æœƒè‡ªå‹•è£œä¸Šå…¶ä»–è³‡è¨Šï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ç³»çµ±é è¨­å€¼ e.g. DNS è¨­å®šã€é‡å•Ÿæ”¿ç­– å° Pod æ“ä½œ (Declarative Management; è²æ˜å¼ç®¡ç†)æ ¹æ“šé…ç½®æ–‡ä»¶è£¡é¢åˆ—å‡ºçš„å†…å®¹é€²è¡Œè³‡æºéƒ¨ç½²ã€ä¿®æ”¹åŠåˆªé™¤ç­‰æ“ä½œï¼Œè®“ K8s å¹«ä½ ç¶­è­·è³‡æºç‹€æ…‹ï¼Œæ¦‚å¿µæ¯”è¼ƒåå‘æ˜¯å‘Šè¨´ Kubernetes å¸Œæœ›æ“æœ‰çš„è³‡æºåŠç‹€æ…‹ï¼Œç¢ºèªè³‡æºæ‡‰è©²è¦é•·ä»€éº¼æ¨£å­ï¼Œç›¸è¼ƒæ–¼ create å–®ç´”æ˜¯å‰µé€ çš„æ¦‚å¿µã€‚ æ•…æ ¹æ“šè³‡æºç‹€æ…‹ç”¢ç”Ÿå…©å€‹å°æ‡‰çš„å‹•è©: apply, diff kubectl applyèªæ³• 1kubectl apply -f &lt;file&gt; or 1kubectl apply -f &lt;folder&gt; é€é apply æŒ‡ä»¤æ ¹æ“šå·²ç¶“å®šç¾©å¥½çš„ä¸€å€‹ or å¤šå€‹ yaml æª”ï¼Œä¹Ÿå¯é‡å°è³‡æ–™å¤¾ç”¨éè¿´çš„æ–¹å¼ï¼ŒæŠŠè³‡æ–™å¤¾å…§çš„æ‰€æœ‰ yaml æª”é€åˆ° Kubernetes è£¡é¢ï¼Œå‘Šè¨´ Kubernetes ç¢ºä¿ yaml æè¿°çš„ç‹€æ…‹èˆ‡ Kubernetes è£¡é¢å®Œå…¨ä¸€è‡´ã€‚ kubectl diffdiff æŒ‡ä»¤æ˜¯åœ¨ apply æª”æ¡ˆæ™‚ï¼Œè·Ÿç›®å‰ Kubernetes æª”æ¡ˆæè¿°çš„ç‹€æ…‹æœ‰å“ªäº›å·®ç•°ï¼Œä¿®æ”¹å“ªäº›åœ°æ–¹ï¼Ÿæœ‰å“ªäº›è®ŠåŒ–ï¼Ÿ Work Flowæ¥è‘—çœ‹å¼µåœ–ç†è§£ apply çš„æµç¨‹ï¼š åœ–ç‰‡ä¸ŠåŠéƒ¨åˆ†: å·¦é‚Šçš„ Config yaml ç‚ºå®šç¾© K8s è³‡æºçš„ yaml æª”ï¼Œæè¿° A ~ E ç­‰å¤šé …è³‡æºï¼Œæ¥è‘—é€é apply æŒ‡ä»¤å¯«åˆ° K8s è£¡ï¼ŒK8s æœƒæ ¹æ“š yaml æª”æè¿°çš„å…§å®¹åŠé è¨­å€¼å»ºç«‹å°æ‡‰çš„è³‡æºï¼Œå…¶ä¸­æŸå€‹æ¬„ä½æœƒç”¨æ–¼è¨˜éŒ„åŸå§‹çš„æª”æ¡ˆå…§å®¹(ç”¨ç´…è‰²çš„Fæ¨™ç¤º)ï¼Œå‰©é¤˜çš„éƒ¨åˆ†(å¦‚ G ~ K)å‰‡æ˜¯ K8s æ ¹æ“šæœ¬èº«çš„é è¨­å€¼è‡ªå‹•å»ºç«‹è³‡æºã€‚ åœ–ç‰‡ä¸‹åŠéƒ¨åˆ†: è‹¥å°åŸå§‹å®šç¾©çš„ Config yaml å…§å®¹ä½œä¿®æ”¹(å¦‚åœ–ä¸­æ©˜è‰²çš„ B ~ C)ï¼Œç¶“ç¬¬äºŒæ¬¡ apply å¾Œï¼ŒK8s æœƒæ ¹æ“šç´€éŒ„åœ¨Fæ¬„ä½çš„ç‰©ä»¶ï¼Œå°‡ä¿®æ”¹å¾Œçš„ç‰©ä»¶èˆ‡åŸå§‹å­˜åœ¨K8sè£¡çš„ç‰©ä»¶é€²è¡Œæ¯”å°ã€‚ å¦‚æ­¤ä¸€ä¾†ï¼Œä½¿ç”¨é€™è®Šå¾—æ–¹ä¾¿è¨±å¤šï¼Œä¸éœ€è¦å–å¾—å®Œæ•´çš„ yaml æª”å…§å®¹(åŒ…å«K8s é è¨­è‡ªå‹•å»ºç«‹å¥½çš„è³‡æº)ï¼Œå³å¯é‡å°è®Šå‹•çš„æª”æ¡ˆå…§å®¹æ›´æ–° K8s è£¡çš„è³‡æºï¼Œå¯¦å‹™ä¸Šéƒ½æ¡æ­¤æ³•æ›´æ–° K8s è³‡æºï¼Œæ•… apply èˆ‡ create çš„å«æ„ä¸åŒã€‚ kubectl create è¡¨å‰µé€ è³‡æºï¼Œè€Œ kubectl apply å‰‡æ˜¯ç¶­è­·è³‡æºç‹€æ…‹ï¼Œå¸Œæœ›ç‹€æ…‹æ˜¯ä¸€è‡´çš„ã€‚ ç¯„ä¾‹å°‡å‰é¢ create çš„ Nginx ç¯„ä¾‹æ”¹ç”¨ apply ä¾†åŸ·è¡Œ 1kubectl apply -f pod.yaml output 1pod/myapp-pod-nginx-demo created æŠŠ image æ”¹ç‚º httpd ï¼Œå°‡éƒ¨ç½²çš„æœå‹™æ”¹ç‚º Apache Server 1234567891011121314151617apiVersion: v1kind: Pod # æŒ‡å®šç‚º Podmetadata: name: myapp-pod-nginx-demo labels: app: myapp-pod-nginx-demo # å®šç¾©å¥½ Label ç”¨æ–¼è¾¨èªspec: containers: - name: myapp-pod-nginx-demo image: httpd # å¾ nginx æ”¹ç‚º httpd resources: # çµ¦å®šç´¢å–è³‡æºçš„ä¸Šé™ limits: cpu: 200m memory: 200Mi requests: cpu: 100m memory: 64Mi åœ¨ apply ä¹‹å‰ï¼Œå¯ä»¥å…ˆé€é diff æŒ‡ä»¤ä¾†è§€å¯Ÿè³‡æºè®ŠåŒ– 1kubectl diff -f pod.yaml æˆ–æ˜¯é€é get æŒ‡ä»¤åŠ ä¸Šåƒæ•¸ -o yaml ä»¥ yaml å½¢å¼åˆ—å‡ºæª”æ¡ˆå…§å®¹ 1kubectl get -f pod.yaml -o yaml è§€å¯Ÿä¸€ä¸‹ metadata è£¡çš„ annotations å€å¡Šï¼Œå¯ç™¼ç¾æœ‰å€‹æ¬„ä½åç¨±: kubectl.kubernetes.io/last-applied-configurationï¼Œæ­¤æ¬„ä½ç”¨æ–¼è¨˜éŒ„å…ˆå‰çš„ä½¿ç”¨æª”æ¡ˆå…§å®¹ 1234metadata: annotations: kubectl.kubernetes.io/last-applied-configuration: | {&quot;apiVersion&quot;:&quot;v1&quot;,&quot;kind&quot;:&quot;Pod&quot;,&quot;metadata&quot;:{&quot;annotations&quot;:{},&quot;labels&quot;:{&quot;app&quot;:&quot;myapp-pod-nginx-demo&quot;},&quot;name&quot;:&quot;myapp-pod-nginx-demo&quot;,&quot;namespace&quot;:&quot;xxxx&quot;},&quot;spec&quot;:{&quot;containers&quot;:[{&quot;image&quot;:&quot;nginx&quot;,&quot;name&quot;:&quot;myapp-pod-nginx-demo&quot;,&quot;resources&quot;:{&quot;limits&quot;:{&quot;cpu&quot;:&quot;200m&quot;,&quot;memory&quot;:&quot;200Mi&quot;},&quot;requests&quot;:{&quot;cpu&quot;:&quot;100m&quot;,&quot;memory&quot;:&quot;64Mi&quot;}}}]}} é‡æ–° apply ä¸€æ¬¡ 1kubectl apply -f pod.yaml output 1pod/myapp-pod-nginx-demo configured æ¥è‘—ç”¨ get å†æ¬¡æª¢æŸ¥annotations å€å¡Šçš„ kubectl.kubernetes.io/last-applied-configuration æ¬„ä½: 1234metadata: annotations: kubectl.kubernetes.io/last-applied-configuration: | {&quot;apiVersion&quot;:&quot;v1&quot;,&quot;kind&quot;:&quot;Pod&quot;,&quot;metadata&quot;:{&quot;annotations&quot;:{},&quot;labels&quot;:{&quot;app&quot;:&quot;myapp-pod-nginx-demo&quot;},&quot;name&quot;:&quot;myapp-pod-nginx-demo&quot;,&quot;namespace&quot;:&quot;xxxx&quot;},&quot;spec&quot;:{&quot;containers&quot;:[{&quot;image&quot;:&quot;httpd&quot;,&quot;name&quot;:&quot;myapp-pod-nginx-demo&quot;,&quot;resources&quot;:{&quot;limits&quot;:{&quot;cpu&quot;:&quot;200m&quot;,&quot;memory&quot;:&quot;200Mi&quot;},&quot;requests&quot;:{&quot;cpu&quot;:&quot;100m&quot;,&quot;memory&quot;:&quot;64Mi&quot;}}}]}} ç¢ºèª image è³‡è¨Šå¾ nginx æ›´æ–°ç‚º httpdã€‚ ç•¶ç„¶ä¹Ÿå¯ä»¥é€é describe çš„æ–¹å¼ä¾†æŸ¥çœ‹è©² Pod ç•¶å‰é‹è¡Œçš„ image æ˜¯å“ªå€‹ 1kubectl describe pod myapp-pod-nginx-demo ç¶“éä¸Šè¿°å¹¾å€‹ç¯„ä¾‹å¯¦ä½œå¾Œï¼Œå¤§éƒ¨åˆ†çš„æƒ…æ³ä¸‹éƒ½æœƒè—‰ç”± apply çš„æ–¹å¼ä¾†ç¶­è­·æè¿° K8s è³‡æºçš„æª”æ¡ˆã€‚å¦å¤–åˆ—å‡ºä½¿ç”¨è²æ˜å¼ç®¡ç†çš„å„ªåŠ£å„ª: ç›´æ¥å°ç‰©ä»¶ä½œä¿®æ”¹ï¼Œæ˜“æ–¼ç®¡ç†è³‡æºè®ŠåŒ–(å¯æ­é… git åšç‰ˆæ§) æ”¯æ´æ•´å€‹è³‡æ–™å¤¾ åŠ£:åœ¨é–‹ç™¼ç’°å¢ƒè¼ƒç‚ºç¼ºä¹å½ˆæ€§(ä¸¦éæ‰€æœ‰ç’°å¢ƒéƒ½èƒ½æ‹¿åˆ°æœ€åˆçš„ yaml æª”æ¡ˆåš apply) ç¸½çµè²æ˜å¼ç®¡ç†é€éæª”æ¡ˆçš„æ–¹å¼ç¶­è­·è³‡æº(ä¸‹è¼‰ã€æ›´æ–°è³‡æº)ï¼Œæœ‰æ•ˆæ­é…ç‰ˆæ§è¿½è¹¤æ¯æ¬¡ä¿®æ”¹çš„ç´€éŒ„ï¼Œèƒ½æ›´æœ‰ç³»çµ±åœ°é™¤éŒ¯ã€è¿½è¹¤åŠéƒ¨ç½²ã€‚ æ›´å¤šç´°ç¯€å¯æŸ¥é–±æ–‡ä»¶1 or æ–‡ä»¶2ï¼Œå†æ ¹æ“šè‡ªèº«éœ€æ±‚é€²è¡Œèª¿æ•´ Pod Controller (Workload Controller)Pod åº•ä¸‹æ“æœ‰å¤šç¨®é¡å‹çš„ Controllerï¼Œæ¯ç¨® Controller éƒ½æœ‰åˆé©çš„æ‡‰ç”¨å ´æ™¯: ReplicaSet: ç®¡ç†å¤šå€‹ Pod çš„å‰¯æœ¬ Deployment: æä¾›è²æ˜å¼çš„æ–¹æ³•ä¾†æ›´æ–° Pods Daemonset: ç¢ºä¿æ¯ä¸€å€‹ node ä¸Šéƒ½æœƒæœ‰ä¸€å€‹æŒ‡å®šçš„ Pod ä¾†é‹è¡Œç‰¹å®šçš„å·¥ä½œ StatefulSet: è™•ç†æœ‰ç‹€æ…‹ Container Job: åœ¨ç‰¹å®šæ™‚é–“å®Œæˆæ‰¹æ¬¡å·¥ä½œ CronJob: å®šæœŸæ’ç¨‹å·¥ä½œ ä¹‹å¾Œæœƒé‡å° Pod åº•ä¸‹ä¸åŒçš„ Controller åˆ†ç¯‡åšç´€éŒ„ï¼Œæœ¬ç¯‡åªæœ‰å…ˆå–®ç´”åˆ—å‡º Pod åº•ä¸‹ä¸åŒé¡å‹çš„ Controller ç¸½çµæœ¬ç¯‡è¨˜éŒ„å¦‚ä½•é€é Kubectl ä¾†å° Pod å…ƒä»¶é€²è¡Œå¸¸è¦‹çš„æ“ä½œï¼Œä¸¦æ¯”è¼ƒ å‘½ä»¤å¼ç®¡ç†èˆ‡è²æ˜å¼ç®¡ç† å…©è€…çš„å·®ç•°ï¼Œæœ€å¾Œé€éå¹¾å€‹ç¯„ä¾‹å¯¦éš›æ¼”ç·´ï¼Œä¸‹ä¸€ç¯‡æœƒé‡å° Pod åº•ä¸‹çš„ Controller - ReplicaSet åšè¨è«–ã€‚ Reference Workload Resources Kubernetes Documentation - Pod åœ¨ Minikube ä¸Šè·‘èµ·ä½ çš„ Docker Containers - Pod &amp; kubectl å¸¸ç”¨æŒ‡ä»¤","link":"2021/09/10/DevOps/K8s/%5BKubernetes%5D%20Kubernetes%20%E5%9F%BA%E7%A4%8E(%E4%BA%8C)%20Pod%20%E6%93%8D%E4%BD%9C/"},{"title":"[JavaScript] Event","text":"å‰è¨€é€™ç¯‡ç­†è¨˜é—œæ–¼Javascriptäº‹ä»¶æ“ä½œçš„è§€å¿µã€‚JavaScript æ˜¯ä¸€å€‹äº‹ä»¶é©…å‹• (Event-driven) çš„ç¨‹å¼èªè¨€ã€‚ ä»€éº¼æ˜¯äº‹ä»¶é©…å‹•?å°±æ˜¯ç•¶ç€è¦½å™¨è¼‰å…¥ç¶²é ï¼Œé–‹å§‹è®€å–æ–‡æª”(document)å¾Œï¼Œé›–ç„¶é¦¬ä¸Šæœƒè®€å– JSäº‹ä»¶ç›¸é—œçš„ç¨‹å¼ç¢¼ï¼Œä½†éœ€ç­‰åˆ°ã€Œäº‹ä»¶ã€è¢«è§¸ç™¼(æ»‘é¼ é»æ“Šã€æŒ‰ä¸‹éµç›¤)å¾Œï¼Œæ‰æœƒå†åŸ·è¡Œç›¸æ‡‰ç¨‹å¼ã€‚ Event Flow(äº‹ä»¶æµç¨‹)ä¸€å€‹äº‹ä»¶ç™¼ç”Ÿå¾Œï¼Œæœƒåœ¨å­å…ƒç´ å’Œçˆ¶å…ƒç´ ä¹‹é–“å‚³éã€‚å‚³éåˆ†æˆä¸‰éšæ®µã€‚æˆ‘å€‘å¯ä»¥è§€å¯Ÿä¸€ä¸‹ç¶²é å…ƒç´ æ¥æ”¶äº‹ä»¶çš„é †åºã€‚ ç¬¬ä¸€éšæ®µï¼šå¾æ ¹çµé»windowå‚³å°åˆ°ç›®æ¨™ç¯€é»ï¼ˆä¸Šå±¤å‚³åˆ°åº•å±¤ï¼‰ï¼Œç¨±ç‚ºâ€æ•ç²éšæ®µâ€ï¼ˆcapture phaseï¼‰ã€‚ç¬¬äºŒéšæ®µï¼šåœ¨ç›®æ¨™ç¯€é»ä¸Šè§¸ç™¼ï¼Œç¨±ç‚ºâ€ç›®æ¨™éšæ®µâ€ï¼ˆtarget phaseï¼‰ã€‚ç¬¬ä¸‰éšæ®µï¼šå¾ç›®æ¨™ç¯€é»å‚³å°å›windowç¯€é»(å¾åº•å±¤å‚³å›ä¸Šå±¤ï¼‰ï¼Œç¨±ç‚ºâ€å†’æ³¡éšæ®µâ€ï¼ˆbubbling phaseï¼‰ã€‚ addEventListener() äº‹ä»¶ç›£è½ç”¨æ–¼ç¶å®šäº‹ä»¶çš„ç›£è½å‡½æ•¸ï¼Œå¯ä»¥åˆ©ç”¨addEventListener()ä¾†é€²è¡ŒDOMçš„äº‹ä»¶æ“ä½œï¼Œ ç”¨æ–¼åœ¨ç•¶å‰ç¯€é»æˆ–å°è±¡ä¸Šé¢ã€‚ .addEventListener(type, listener[, useCapture]); é€™å€‹æ–¹æ³•ä¸­å¯å‚³å…¥3å€‹åƒæ•¸: typeï¼šäº‹ä»¶åç¨±ï¼Œæœ‰å€åˆ†å¤§å°å¯«ã€‚ listenerï¼šç›£è½å‡½æ•¸ã€‚äº‹ä»¶ç™¼ç”Ÿæ™‚ï¼Œæœƒå‘¼å«è©²ç›£è½å‡½æ•¸ã€‚ useCaptureï¼šBooleanå€¼ï¼Œtrue: äº‹ä»¶æ•ç² ; false: äº‹ä»¶å†’æ³¡ã€‚ Event Propagation(äº‹ä»¶å†’æ³¡)ç•¶ä¸€å€‹å…ƒç´ æ¥æ”¶åˆ°äº‹ä»¶å¾Œ,æœƒå°‡æ¥æ”¶åˆ°çš„äº‹ä»¶å¾€ä¸Šå‚³çµ¦çˆ¶å…ƒç´ ,ä¸€ç›´å‚³åˆ°é ‚ç«¯çš„æ ¹ç¯€é»(document)ã€‚ ä¾†çœ‹å€‹ä¾‹å­: ä»Šå¤©æœ‰3å€‹ä¸åŒé¡è‰²åŠå¤§å°çš„æ–¹æ ¼åˆ†åˆ¥ç‚ºç´…(view1)ã€è—(view2)ã€ç´«(view3)ï¼Œé»æ“Šview3(è¢«åŒ…åœ¨æœ€è£¡é¢)æ™‚ï¼Œview2å’Œview1å’Œdocumentä¹ŸæœƒåŒæ™‚è¢«è§¸ç™¼ã€‚ ç¤ºæ„åœ–: è§€å¯Ÿè§¸ç™¼çš„é †åºï¼Œå¯ä»¥ç™¼ç¾ç”±è§¸ç™¼äº‹ä»¶ç¯€é»ç”±å…§è€Œå¤–ï¼Œä¾†æ¯”è¼ƒä¸€ä¸‹ç›¸å°æ–¼å®ƒçš„ã€Œäº‹ä»¶æ•ç²ã€ã€‚ Event Capturing(äº‹ä»¶æ•ç²)ç›¸å°æ–¼ã€Œäº‹ä»¶å†’æ³¡ã€ï¼Œã€Œäº‹ä»¶æ•ç²ã€æ˜¯å¾æœ€å¤–å±¤ï¼Œä¸€å±¤ä¸€å±¤å…§æ–¹å‘å‚³éäº‹ä»¶ï¼Œå’Œã€Œäº‹ä»¶å†’æ³¡ã€ç›¸åã€‚å†ä½¿ç”¨ä¸€æ¬¡å‰›å‰›çš„åœ–ä½œç¯„ä¾‹XD å¯¦ä½œçš„è©±å¯ä»¥ç”¨ä¸‹æ–¹çš„ç¨‹å¼ç¢¼: 12345678910111213141516171819202122232425262728// HTML&lt;div id=&quot;view1&quot;&gt; &lt;div id=&quot;view2&quot;&gt; &lt;div id=&quot;view3&quot;&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;// JSoView1.addEventListener('click', function () { console.log('view1 --- äº‹ä»¶æ•ç²') }, true)oView2.addEventListener('click', function () { console.log('view2 --- äº‹ä»¶æ•ç²')}, true)oView3.addEventListener('click', function () { console.log('view3 --- äº‹ä»¶æ•ç²')}, true) // ---------------oView1.addEventListener('click', function () { console.log('view1 --- äº‹ä»¶å†’æ³¡')}, false)oView2.addEventListener('click', function () { console.log('view2 --- äº‹ä»¶å†’æ³¡')}, false)oView3.addEventListener('click', function () { console.log('view3 --- äº‹ä»¶å†’æ³¡')}, false) é»æ“Šview3ç²å¾—çš„çµæœæœƒæ˜¯ äº‹ä»¶å‚³éæµç¨‹äº‹ä»¶ä¸€é–‹å§‹å¾æ–‡æª”çš„æ ¹ç¯€é»æµå‘ç›®æ¨™å°è±¡(æ•ç²éšæ®µ)ï¼Œç„¶å¾Œåœ¨ç›®æ¨™å°å‘ä¸Šè¢«è§¸ç™¼(ç›®æ¨™éšæ®µ)ï¼Œä¹‹å¾Œå†å›åˆ°æ–‡æª”çš„æ ¹ç¯€é»ã€‚ å¦‚æœä»Šå¤©ä¸æƒ³è¦å°‡äº‹ä»¶å‚³éåˆ°æ‰€æœ‰çš„çˆ¶å…ƒç´ ç¯€é»ï¼Œé‚£è¦å¦‚ä½•é˜»æ­¢äº‹ä»¶å†’æ³¡å‘¢? ç¨‹å¼ç¢¼å¦‚ä¸‹: éIE: stopPropagation() ; IE: ev.cancelBubble = true;å…¼å®¹å¯«æ³•: ev.stopPropagation ? ev.stopPropagation() : ev.cancelBubble = true; æˆ‘å€‘å¯ä»¥åœ¨ç›£è½äº‹ä»¶çš„å‡½æ•¸å‚³å…¥ä¸€å€‹evåšåƒæ•¸ï¼Œä½œç‚ºäº‹ä»¶ä¾†æºã€‚å›åˆ°å‰›æ‰ä¾‹å­ï¼Œå‡è¨­åªæƒ³è¦è®“äº‹ä»¶å¾é ‚å±¤å‚³éåˆ°view2çš„è©±ï¼Œå¯ä»¥åœ¨view2çš„äº‹ä»¶ç›£è½è™•æ‰“ä¸Šä¸Šé¢é‚£æ®µç¨‹å¼ç¢¼ã€‚ç¯„ä¾‹å¦‚ä¸‹: 123456789101112131415161718192021222324252627282930// HTML&lt;div id=&quot;view1&quot;&gt; &lt;div id=&quot;view2&quot;&gt; &lt;div id=&quot;view3&quot;&gt; &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;// JSoView1.addEventListener('click', function () {console.log('view1 --- äº‹ä»¶æ•ç²')}, true)oView2.addEventListener('click', function (ev) { // é˜»æ­¢äº‹ä»¶å†’æ³¡ ev.stopPropagation ? ev.stopPropagation() : ev.cancelBubble = true; console.log('view2 --- äº‹ä»¶æ•ç²')}, true)oView3.addEventListener('click', function () { console.log('view3 --- äº‹ä»¶æ•ç²')}, true) //------------------------------oView1.addEventListener('click', function () { console.log('view1 --- äº‹ä»¶å†’æ³¡')}, false)oView2.addEventListener('click', function () { console.log('view2 --- äº‹ä»¶å†’æ³¡')}, false)oView3.addEventListener('click', function () { console.log('view3 --- äº‹ä»¶å†’æ³¡')}, false) æ‰€å¾—çµæœ äº‹ä»¶æ•ç²èˆ‡å†’æ³¡éƒ½åŒæ¨£é©ç”¨ã€‚ preventDefault å–æ¶ˆé è¨­è¡Œç‚ºå¯ä»¥å–æ¶ˆHTMLå…ƒç´ çš„é è¨­è¡Œç‚º ï¼Œå¦‚ &lt;a&gt; é€£çµï¼Œæˆ–è¡¨å–®submit ç­‰ç­‰ï¼Œ å¦‚æœæˆ‘å€‘éœ€è¦åœ¨é€™äº›å…ƒç´ ä¸Šç¶å®šäº‹ä»¶ï¼Œä½†åˆä¸æƒ³è¦è§¸ç™¼å®ƒçš„é è¨­è¡Œç‚ºï¼Œé‚£å–æ¶ˆå®ƒå€‘çš„é è¨­è¡Œç‚ºå°±æ˜¯å¾ˆé‡è¦çš„ä¸€ä»¶äº‹ã€‚ç¯„ä¾‹:æœ‰ä¸€å€‹é€šå¾€ yahooé€£çµ &lt;a&gt;: 12345678 &lt;a id=&quot;link&quot; href=&quot;https://tw.yahoo.com/&quot;&gt;Google&lt;/a&gt;````å‡è¨­é»æ“Šé€™å€‹ `&lt;a&gt;`æ™‚ï¼Œæˆ‘å¸Œæœ›ç€è¦½å™¨åŸ·è¡Œ `console.log('yahoo!')`; é‚£å¯ä»¥å…ˆè¨»å†Š click äº‹ä»¶```javascript var link = document.querySelector('#link'); link.addEventListener('click', function (e) { console.log('yahoo!'); }, false); çµæœæœƒç™¼ç¾ï¼Œå³ä¾¿æˆ‘å€‘ç‚ºäº†&lt;a&gt; å»è¨»å†Šäº† click äº‹ä»¶ï¼Œä½†æ˜¯ç•¶æˆ‘é»æ“Šé€™å€‹ link çš„æ™‚å€™ï¼Œç€è¦½å™¨ä¾ç„¶æœƒæŠŠæˆ‘å¸¶å» yahooçš„ç¶²é ã€‚ å¦‚æœé€™æ™‚å€™ï¼Œæˆ‘å¸Œæœ›åŸ·è¡Œçš„æ˜¯console.log('yahoo!'); è€Œä¸æ˜¯ç›´æ¥æŠŠæˆ‘å¸¶å» yahooçš„ç¶²ç«™ï¼Œé‚£éº¼å¯ä»¥æ€éº¼åšï¼Ÿ é€™æ™‚å€™å¯ä»¥åˆ©ç”¨ event ç‰©ä»¶æä¾›çš„ event.preventDefault() ï¼š 12345var link = document.querySelector('#link'); // åœ¨ evend function åŠ ä¸Š e.preventDefault(); link.addEventListener('click', function (e) { e.preventDefault(); console.log('yahoo!'); }, false); å†é»æ“Š link ä¸€æ¬¡ï¼Œä½ æœƒç™¼ç¾ç€è¦½å™¨é è¨­çš„è·³è½‰é é¢çš„è¡Œç‚ºä¸è¦‹äº†ï¼Œconsole.log('yahoo!'); ä¹Ÿå¯é †åˆ©åŸ·è¡Œã€‚ JavaScript çš„ addEventListener() è£¡ï¼Œæœ€å¾Œé¢åŠ ä¸Š return false ä¹Ÿæœƒæœ‰åŒæ¨£çš„æ•ˆæœã€‚åœ¨ jQuery çš„addEventListener() è£¡æœ€å¾ŒåŠ ä¸Š return false ä¾†å¾—åˆ°preventDefault() èˆ‡ stopPropagation() çš„æ•ˆæœæ˜¯æ²’å•é¡Œçš„ã€‚ äº‹ä»¶(event)å°è±¡:ç•¶ä¸€å€‹äº‹ä»¶ç™¼ç”Ÿæ™‚,å’Œç•¶å‰å°è±¡ç™¼ç”Ÿçš„ç›¸é—œä¿¡æ¯,éƒ½æœƒè‡¨æ™‚ä¿å­˜åœ¨é€™å€‹å°è±¡ä¸­ äº‹ä»¶æº:è§¸ç™¼è©²äº‹ä»¶çš„ä¾†æºç¯€é»ï¼Œä»¥ä¸‹ç‚ºå…¼å®¹ä¸åŒç€è¦½å™¨çš„å¯«æ³•: IE: srcElementå±¬æ€§firefox targetå±¬æ€§google/safari: srcElementã€targetéƒ½æœ‰ ä¾‹å­: 123456789101112// HTML&lt;input type=&quot;text&quot; placeholder=&quot;å¸³è™Ÿ&quot; id=&quot;user&quot;&gt;&lt;br /&gt; // JSvar oUser = $('user')oUser.onkeydown = function (ev) {// æŒ‰ä¸‹å“ªå€‹éµ? // äº‹ä»¶ä¾†æºev = event || ev // æŸ¥æ‰¾æŒ‰ä¸‹çš„éµå°æ‡‰çš„codeconsole.log(ev.keyCode); // Enterå°æ‡‰çš„codeæ˜¯13 ; tabæ˜¯9} ä½¿ç”¨keydownäº‹ä»¶ä¾†è§¸ç™¼ï¼Œæˆ‘å€‘å¯ä»¥å‚³å…¥evé€™å€‹åƒæ•¸åšäº‹ä»¶æºï¼Œæ ¹æ“šä½¿ç”¨è€…åœ¨éµç›¤ä¸Šè¼¸å…¥çš„éµæ‰€è¼¸å‡ºçš„æ•¸å€¼ï¼Œä¾†ç¢ºå®šä½¿ç”¨è€…æŒ‰ä¸‹å“ªå€‹éµï¼Œä¾‹å¦‚è¼¸å…¥enterï¼Œè¼¸å‡ºçš„æ•¸å€¼å°±æ˜¯13ï¼Œtabéµå‰‡æ˜¯9ã€‚ èˆ‰å€‹æ‡‰ç”¨: 123456789101112131415161718// HTML&lt;div id=&quot;test&quot;&gt;&lt;/div&gt; // JSvar oTest = $('test')oTest.onclick = function (ev) {// äº‹ä»¶å°è±¡ev = window.event || ev // äº‹ä»¶æº(æ»‘é¼ é»æ“Šä½ç½®)// æ»‘é¼ ç›¸å°æ–¼'ç€è¦½å™¨' é é¢çš„ä½ç½® -&gt; clientalert(ev.clientX); // æ°´å¹³æ–¹å‘(Xè»¸)alert(ev.clientY); // å‚ç›´æ–¹å‘// æ»‘é¼ ç›¸å°æ–¼'äº‹ä»¶æº'çš„ä½ç½® -&gt; offsetalert(ev.offsetX); // æ°´å¹³æ–¹å‘(Xè»¸)alert(ev.offsetY); // å‚ç›´æ–¹å‘} é»æ“Šä¸Šé¢çš„ç´«è‰²æ–¹å½¢å¯ä»¥å–å¾—æ»‘é¼ ç›¸å°æ–¼ç€è¦½å™¨ã€äº‹ä»¶æºçš„ä½ç½®ã€‚ å…ƒç´ ç¯€é»çš„äº‹ä»¶å±¬æ€§é™¤addEventListener()æ–¹æ³•å¤–ï¼Œå…ƒç´ ç¯€é»çš„äº‹ä»¶å±¬æ€§ï¼ŒåŒæ¨£å¯ä»¥æŒ‡å®šç›£è½å‡½æ•¸ã€‚ 123div.onclick = function (event) { console.log('è§¸ç™¼äº‹ä»¶');} â€œå…ƒç´ ç¯€é»çš„äº‹ä»¶å±¬æ€§â€çš„ç¼ºé»:åŒä¸€å€‹äº‹ä»¶åªèƒ½å®šç¾©ä¸€å€‹ç›£è½å‡½æ•¸ã€‚å¦‚æœå®šç¾©å…©æ¬¡onclickå±¬æ€§ï¼Œå¾Œä¸€æ¬¡å®šç¾©æœƒè¦†è“‹å‰ä¸€æ¬¡ã€‚ä½¿ç”¨é€™å€‹æ–¹æ³•æŒ‡å®šçš„ç›£è½å‡½æ•¸ï¼Œä¹Ÿæ˜¯åªæœƒåœ¨å†’æ³¡éšæ®µè§¸ç™¼EventTarget.addEventListeneræ˜¯æ¯”è¼ƒæ¨è–¦çš„æŒ‡å®šç›£è½å‡½æ•¸çš„æ–¹æ³•ï¼Œå„ªé»ï¼šåŒä¸€å€‹äº‹ä»¶å¯ä»¥æ·»åŠ å¤šå€‹ç›£è½å‡½æ•¸ã€‚èƒ½å¤ æŒ‡å®šåœ¨å“ªå€‹éšæ®µï¼ˆæ•ç²éšæ®µé‚„æ˜¯å†’æ³¡éšæ®µï¼‰è§¸ç™¼ç›£è½å‡½æ•¸ã€‚ this çš„æŒ‡å‘è‹¥æ˜¯æƒ³è¦å°ã€Œè§¸ç™¼äº‹ä»¶çš„å…ƒç´ ã€åšæŸäº›äº‹æ™‚ï¼Œå¯ä»¥ä½¿ç”¨thisæ–¹æ³•ä¾†é”æˆã€‚ 12345678910111213// HTML// &lt;button id=&quot;btn&quot;&gt;é»æ“Š&lt;/button&gt; // JSvar btn = document.getElementById('btn');btn.addEventListener( 'click', function (e) { console.log(this.id); // é»æ“ŠæŒ‰éˆ•ä»¥å¾Œè¼¸å‡ºbtn }, false);","link":"2019/07/23/Javascript/js_event/"},{"title":"[Kubernetes] Kubernetes åŸºç¤(äº”) Pod Controller - Daemonset, StatefulSet","text":"å‰è¨€ ä¸Šç¯‡è¨è«– Deployment åšæ»¾å‹•å¼éƒ¨ç½²ï¼Œæœ¬ç¯‡å‰‡æœƒæ¥è‘—æ¢è¨å¦å¤–å…©ç¨® Controller - Daemonset, StatefulSet ã€‚ Daemonset æ˜¯ä»€éº¼Daemonset ç”¨ä¾†ç¢ºä¿æ‰€æœ‰ç¬¦åˆè³‡æ ¼çš„ç¯€é»(e.g. ç¯€é»è¢«æ¨™ç¤ºç‚ºæœ‰æ±¡é»å°±ä¸å…·è³‡æ ¼)éƒ½æœ‰ä¸€ä»½é‹è¡Œçš„ Podï¼Œæ•…æ¯å€‹ç¯€é»ä¸Šçš„ Pod æ•¸é‡å°±åªæœ‰ä¸€ä»½ã€‚ æ¡ˆä¾‹ Cluster storage daemon CNI daemon Logs collection daemon Monitoring daemon æ¦‚å¿µåœ– å¾ä¸Šåœ–ä¾†ç†è§£ Daemonset çš„æ¦‚å¿µï¼Œåœ–ä¸­æœ‰ä¸‰å€‹ ç¬¦åˆè³‡æ ¼ çš„ç¯€é»ï¼ŒDaemonset ä¾¿æœƒåœ¨é€™ä¸‰å€‹ç¯€é»ä¸Šå„ç”¢ç”Ÿä¸€å€‹ Podï¼Œä»¥æ­¤é¡æ¨ï¼Œè‹¥æœ‰ç¬¬å››å€‹ç¯€é»ç”¢ç”Ÿæ™‚ï¼ŒDaemonset ä¹Ÿæœƒåœ¨é€™å€‹ç¯€é»ä¸Šç”¢ç”Ÿä¸€å€‹æ–°çš„ Podã€‚æ•…å³ä¾¿ç¯€é»æ•¸é‡ç„¡æ³•äº‹å…ˆä¼°è¨ˆï¼Œä½† Daemonset èƒ½æ ¹æ“šç•¶å‰çš„ç¯€é»æ•¸é‡å‹•æ…‹ç”¢ç”Ÿæ‰€éœ€çš„ Podã€‚ ç›¸è¼ƒæ–¼å‰é¢æåŠçš„ Deploymentï¼ŒDeployment é ˆå…ˆè¨­å®šè¦å¹¾å€‹å‰¯æœ¬ï¼Œç„¡æ³•äº‹å…ˆä¼°è¨ˆå¥½ç¯€é»ä¸Šæ•¸é‡ï¼ŒDeployment éƒ¨ç½²çš„ Pod åŒæ™‚ä¹Ÿç„¡æ³•ä¿è­‰èƒ½å‡å‹»åœ°æ•£è½åœ¨ä¸åŒç¯€é»ä¸Š(Deployment æ˜¯é€é scheduler filtering and scoring ä¾†é¸æ“‡åˆé©ç¯€é»åšéƒ¨ç½²)ï¼Œæ•…æœ‰å¯èƒ½å‡ºç¾å¤šå€‹ Pods éƒ¨ç½²æ–¼ç›¸åŒç¯€é»ä¸Šé¢ ç¯„ä¾‹daemonset.yml 1234567891011121314151617181920212223242526272829apiVersion: apps/v1kind: DaemonSetmetadata: labels: app: nginx name: test-dsspec: selector: matchLabels: app: nginx template: metadata: labels: app: nginx spec: tolerations: - key: node-role.kubernetes.io/master effect: NoSchedule containers: - name: nginx-server image: nginx imagePullPolicy: IfNotPresent resources: limits: cpu: 200m memory: 500Mi requests: cpu: 50m memory: 50Mi æ³¨æ„: yaml æª”è£¡ä¸éœ€æè¿° replica æ•¸é‡: K8s æœ¬èº«æœ‰ä¸€å¥—ç®—æ³•åµæ¸¬ç›®å‰æœ‰å¹¾å€‹ç¯€é»å¯éƒ¨ç½² Pod å¦‚æœéƒ¨ç½²çš„æ˜¯ master server ä¸”æ²’æœ‰æ‹”æ‰ Taints çš„è©±ï¼ŒDaemonset ä¸æœƒèµ·ä½œç”¨(å› ç‚º Daemonset ã„§æ¨£æ˜¯å»éƒ¨ç½² Podï¼Œæ‰€ä»¥ Taints çš„ Noschedule æœƒé˜»æ“‹éƒ¨ç½²)ã€‚ç•¶ç„¶ä¹Ÿå¯ä»¥è—‰ç”±è¨­å®šæ‹¿æ‰ Taintsï¼Œæˆ–æ˜¯è¨­å®š Daemonset å¯å®¹å¿(tolerate) Taintsï¼Œå¿½ç•¥ Noschedule éƒ¨ç½² Daemonsetå°‡ä¸Šè¿°ç¯„ä¾‹çš„ yaml æª”é€²è¡Œ apply 1kubectl apply -f daemonset.yml output: 1daemonset.apps/tets-ds created æ¥è‘—è§€å¯Ÿä¸€ä¸‹å•Ÿå‹•çš„ Pods è³‡è¨Šï¼Œå¯çŸ¥ Pod åˆ†åˆ¥éƒ¨ç½²åœ¨ä¸åŒç¯€é»ä¸Š 1kubectl get pods -o wide é€é kubectl tree ä¾†æŸ¥çœ‹ DaemonSet çµæ§‹é—œä¿‚ 123456NAMESPACE NAME READY REASON AGE stg DaemonSet/test-ds - 2m16sstg â”œâ”€ControllerRevision/test-ds-ffc67f7fb - 2m14sstg â”œâ”€Pod/test-ds-99hlm True 2m14sstg â”œâ”€Pod/test-ds-jfdvh True 2m13sstg â”œâ”€Pod/test-ds-pjf5t True 2m12s æ³¨æ„:ControllerRevision æ§ç®¡ç›¸é—œçš„ç‰ˆæœ¬è³‡è¨Š(å› ç‚ºä¸èƒ½ä½¿ç”¨ ReplicaSet ä¾†ç®¡ç†ï¼ŒReplicaSet æ˜¯ç¢ºä¿ä»»ä½•æ™‚é–“é»ç¶­æŒè‘—ç‰¹å®šçš„ Pod æ•¸é‡) StatefulSetStateful è¡¨æœ‰ç‹€æ…‹çš„æ„æ€ï¼Œæ•… StatefulSet æ˜¯ç”¨ä¾†å­˜æ”¾ æœ‰ç‹€æ…‹çš„ Pods çš„é›†åˆã€‚ ç›¸è¼ƒæ–¼å…ˆå‰ç”¨ Daemonset æˆ–æ˜¯ Deployment æ‰€éƒ¨ç½²çš„ Pod æœ¬èº«éƒ½æ˜¯ç„¡ç‹€æ…‹çš„ï¼Œæ„å‘³è‘—æ¯æ¬¡ Pod è¢«ç æ‰æ™‚ï¼Œé‡æ–°ç”¢ç”Ÿçš„ Pod éƒ½æ˜¯å…¨æ–°çš„ï¼Œç„¡ä»»ä½•ç‹€æ…‹è³‡è¨Šåœ¨è£¡é¢ï¼Œæ¯æ¬¡å¯èƒ½éƒ½è¦é€éé … DB çš„æœå‹™é¡å¤–å­˜å–ã€‚ æœ‰äº›æƒ…æ³ä¸‹æœƒå¸Œæœ› Pod æœ¬èº«æ˜¯æœ‰ç‹€æ…‹çš„ï¼ŒStateful çš„ Pod æœ¬èº«å¯ä»¥ä¸åœåœ°é‡å•Ÿï¼Œæ¯æ¬¡é‡å•Ÿéƒ½ä¸å½±éŸ¿åŠŸèƒ½é‹ä½œï¼Œç¢ºä¿ Pod éƒ½æ“æœ‰è‡ªå·±çš„ç¨ç«‹ç‹€æ…‹ Stable, unique network identifiers: å¦‚ç¨ç«‹çš„ DNS Name åšç¶²è·¯å­˜å– Stable, persistent storage Order, graceful deployment and scaling Ordered, automated rolling updates StatefulSet åœ¨ä½¿ç”¨ä¸Šæœ‰å€‹ç‰¹æ€§: æ¯å€‹ Pod çš„åç¨±å¾Œé¢éƒ½æœƒå¸¶ä¸€çµ„æœ‰çºŒæ€§çš„æµæ°´è™Ÿ(ä¸¦éå¦‚ deployment ä¸€æ¨£ï¼Œæ¡ hash æ–¹å¼ç”¢ç”Ÿäº‚ç¢¼): å¸¶æœ‰æµæ°´è™Ÿçš„ Pod åç¨±å¯ç”¨ä¾†è¾¨è­˜ Pod èº«ä»½(or ç‹€æ…‹)ï¼Œç®¡ç†å“¡èƒ½æ ¹æ“šé€™äº› Pod æœ‰å…ˆå¾Œè™•ç†çš„é †åºã€‚ éƒ¨ç½²æ–¹å¼æ¡ one-by-oneï¼Œä¾åºé€²è¡Œéƒ¨ç½² æ›´æ–°æ–¹å¼ä¹Ÿæ˜¯æ¡ one-by-oneï¼Œä»¥å€’éä¾†çš„é †åºå° Pod åšæ›´æ–° (å°æ¯” deployment çš„ rolling updateï¼Œäº‹å…ˆå»ºæ–°çš„ Pod å†ç æ‰èˆŠçš„) å¸¸è¦‹æ¡ˆä¾‹:ç•¶ StatefulSet çµåˆç¶²è·¯ã€å„²å­˜åŠŸèƒ½æ™‚ï¼Œå³ä½¿åŸæœ¬çš„ Pod è¢«ç æ‰ï¼Œè¢«é‡æ–°éƒ¨ç½²åœ¨ä¸åŒç¯€é»ä¸Šï¼Œä»ç„¶å¯è—‰ç”±ç›¸åŒçš„ DNS åä»¥åŠç›¸é—œ Storage è³‡æ–™å»å­˜å–ç›¸åŒåç¨±çš„ Pod ã€‚ ä»¥ç¶²è·¯ç‚ºä¾‹:æ¯å€‹ Pod éƒ½æœ‰å„è‡ªçš„ DNSï¼Œå¯æ ¹æ“šéœ€æ±‚è—‰ç”± DNS å­˜å–ä¸åŒçš„ Pod ä¸Šçš„æ‡‰ç”¨ç¨‹å¼ï¼Œæ¡ä¸€å°ä¸€çš„æ–¹å¼ï¼Œä¸€å€‹ DNS name å°åˆ°å›ºå®šçš„ Podã€‚å³ä½¿ Pod é‡å•Ÿè·‘åˆ°åˆ¥çš„ç¯€é»ä¸Šï¼Œå›ºå®šçš„ DNS ä»æœƒæŒ‡å‘é‡å•Ÿå¾Œçš„ Podã€‚ å„²å­˜åŠŸèƒ½ä¹Ÿæ˜¯ç›¸åŒçš„é“ç†ï¼Œæ¯å€‹å„²å­˜ç©ºé–“å°æ‡‰åˆ°å›ºå®šçš„ Podï¼Œç¢ºä¿ Pod èƒ½æ‹¿åˆ°ç›¸åŒçš„å„²å­˜ç©ºé–“ ç¯„ä¾‹statefulset.ymlæ³¨æ„: StatefulSet éœ€è¦è¡¨æ˜å¤šå°‘å€‹å‰¯æœ¬(Replica) 12345678910111213141516171819202122232425262728apiVersion: apps/v1kind: StatefulSetmetadata: labels: app: nginx name: test-stsspec: replicas: 2 serviceName: &quot;nginx&quot; selector: matchLabels: app: nginx template: metadata: labels: app: nginx spec: containers: - name: nginx-server image: nginx imagePullPolicy: IfNotPresent resources: limits: cpu: 100m memory: 100Mi requests: cpu: 50m memory: 50Mi å°‡ä¸Šè¿°ç¯„ä¾‹çš„ yaml æª”é€²è¡Œ apply 1kubectl apply -f statefulset.yml æ¥è‘—è§€å¯Ÿä¸€ä¸‹å•Ÿå‹•çš„ Pods æ™‚è³‡è¨Š 1kubectl get pods -o wide output 123NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATEStest-sts-0 1/1 Running 0 2m12s 10.xxx.xxx.xxx ip-xx-xxx-xxx-xxx.us-west-2.compute.internal &lt;none&gt; &lt;none&gt;test-sts-1 1/1 Running 0 2m7s 10.xxx.xxx.xx ip-xx-xxx-xxx-xxx.us-west-2.compute.internal &lt;none&gt; &lt;none&gt; æ ¹æ“šçµæœå¯çŸ¥è—‰ç”± statefulset å»ºç«‹å‡ºä¾†çš„ Pod åç¨±å¾Œé¢éƒ½æœ‰å¸¶æœ‰æµæ°´è™Ÿï¼Œç¯„ä¾‹ä¸­å®šç¾© replicas ç‚º 2ï¼Œå‰µé€ å…©å€‹å¸¶æœ‰ç·¨è™Ÿï¼Œä¸”è™Ÿç¢¼ç‚º 0 é–‹å§‹çš„ Pod åç¨± ä¹Ÿå¯ä»¥è—‰ç”± tree æŒ‡ä»¤åˆ—å‡º statefulset çµæ§‹ï¼Œäº†è§£ statefulset æ˜¯å¦‚ä½•ç®¡ç†çš„ 1kubectl tree sts test-sts output: 12345NAMESPACE NAME READY REASON AGEstg StatefulSet/test-sts - 33sstg â”œâ”€ControllerRevision/test-sts-7f9b576867 - 31sstg â”œâ”€Pod/test-sts-0 True 31sstg â””â”€Pod/test-sts-1 True 14s ç¸½çµDaemonset çš„ä½¿ç”¨æ™‚æ©Ÿ: å¸Œæœ›åœ¨æ¯å€‹ç¯€é»ä¸Šéƒ½åªè·‘ä¸€æ”¯æ‡‰ç”¨ç¨‹å¼ï¼Œä¸”æ˜¯è‡ªå‹•éš¨è‘—ç¯€é»æ•¸é‡å‹•æ…‹èª¿æ•´(ç”¢ç”Ÿæ–°ç¯€é»æ™‚ Pod è‡ªå‹•éƒ¨ç½² or ç¯€é»æ¸›å°‘æ™‚ï¼Œä¸»å‹•ç§»é™¤ Pod)ï¼Œç¢ºä¿æ¯å€‹ç¯€é»ä¸Šéƒ½æœ‰éƒ¨ç½²ä¸€æ”¯æ‡‰ç”¨ç¨‹å¼ statefulset çš„ä½¿ç”¨æ™‚æ©Ÿ:StatefulSet å› ç‚ºæ˜¯ç”¨ä¾†å­˜æ”¾ æœ‰ç‹€æ…‹çš„ Pods çš„é›†åˆï¼Œæ•…æ­é…ç¶²è·¯ã€å„²å­˜åŠŸèƒ½æ™‚æœƒæ›´æœ‰æ„ç¾©ï¼Œå…·é«”æ¡ˆä¾‹å¯åƒè€ƒ K8s å®˜æ–¹éƒ¨è½æ ¼æ›¾ç™¼å¸ƒ MongoDB çš„æ¡ˆä¾‹ï¼Œæ–‡ç« å…§å®¹å¤§æ¦‚æ˜¯æè¿°å¦‚ä½•é€é K8s çš„ StatefulSet ç”¢ç”Ÿå¤šå€‹å‰¯æœ¬çš„ MongoDBï¼Œèˆ‰ä¾‹ä¾†èªªæœ‰ä¸‰å€‹ Podsï¼Œä¸‰å€‹ Pods å­˜æ”¾ç›¸åŒè³‡æ–™ï¼Œå½¼æ­¤ç›¸äº’åŒæ­¥ï¼Œä½¿ç”¨è€…å¯ä»¥éš¨æ™‚å­˜å–ä»»ä½•ä¸€å€‹ï¼Œç¢ºä¿æ‹¿åˆ°çš„è³‡æ–™éƒ½æ˜¯ä¸€è‡´çš„ï¼Œæ›´å¤šç´°ç¯€å¯çœ‹å®˜ç¶²æ–‡ç« ã€‚ ä¸‹ä¸€ç¯‡å°‡æ¢è¨ K8s ä¸€æ¬¡æ€§çš„é‹ç®—å–®å…ƒ - Job/CronJob Reference Kubernetes Documentation - DaemonSet Kubernetes Documentation - StatefulSets","link":"2021/09/25/DevOps/K8s/%5BKubernetes%5D%20Kubernetes%20%E5%9F%BA%E7%A4%8E(%E4%BA%94)%20Pod%20Controller%20-%20Daemonset,%20StatefulSet/"},{"title":"Kubernetes åŸºç¤(å››) Pod Controller - Deployment","text":"å‰è¨€ ä¸Šç¯‡æ–‡ç«  - [Kubernetes] Kubernetes åŸºç¤(ä¸‰) Pod Controller - ReplicaSet æ¢è¨å¦‚ä½•é€é ReplicaSet ç®¡ç†å¤šå€‹ Pod å‰¯æœ¬ï¼Œç¢ºä¿ K8s åœ¨ä»»ä½•æ™‚é–“é»èƒ½ä¿æœ‰ç‰¹å®šæ•¸é‡çš„ Pod æ–¼ Cluster ä¸­é‹è¡Œã€‚ æœ¬æ–‡æ¥è‘—è¨è«– Pod çš„å¦ä¸€ç¨® Controller - Deployment ä»€éº¼æ˜¯ Deployment Controllerï¼Ÿç›¸è¼ƒæ–¼å…ˆå‰è¨è«– ReplicaSet ç”¨æ–¼ç®¡ç†å¤šå€‹ Pod å‰¯æœ¬ï¼ˆå¤šå€‹ç›¸åŒçš„ Podï¼‰ï¼ŒDeployment å‰‡æ˜¯åˆ©ç”¨ ReplicaSet ä¾†æ›´æ–° Pod çš„ç‰ˆæœ¬ã€‚ Deployment æä¾›æ›´å‹•ç‰ˆæœ¬çš„åŠŸèƒ½ï¼Œå¯ä»¥æ±ºå®šå‡ç´šç‚ºæ–°ç‰ˆæˆ–æ˜¯é€€å›èˆŠç‰ˆ(rollback)ï¼Œæ¦‚å¿µåƒæ˜¯å‘Šè¨´ K8s Cluster è¦ä»€éº¼ç‰ˆæœ¬çš„ Podï¼ŒDeployment è² è²¬è®Šæ›´ä¸”ç¶­æŒè©²ç‰ˆæœ¬çš„ Podï¼Œä¸€èˆ¬ç”¨æ–¼è™•ç†ç‰ˆæœ¬æ›´æ–°èˆ‡é™ç‰ˆçš„æµç¨‹ã€‚ å¯¦ä½œç¯„ä¾‹è·Ÿå‰å¹¾ç¯‡æ–‡ç« ä¸€æ¨£ç”¨ nginx æœå‹™ä½œç‚ºç¯„ä¾‹ï¼Œæ’°å¯«ä¸€å€‹ Deployment çš„ yaml æª”:deployment.yaml 1234567891011121314151617181920212223242526apiVersion: apps/v1kind: Deploymentmetadata: # å®šç¾© Deployment çš„åç¨± name: myapp-deployment-demo labels: app: myapp-deployment-demospec: # æè¿° ReplicaSet çš„è¦æ ¼ replicas: 3 selector: matchLabels: app: myapp-nginx-demo template: # å®šç¾© Pod çš„ Template metadata: labels: # å®šç¾© Pod åç¨± app: myapp-nginx-demo spec: containers: # å®šç¾© Pod è£¡çš„ container è³‡è¨Š - name: myapp-nginx-demo image: nginx resources: limits: cpu: 200m memory: 200Mi requests: cpu: 100m memory: 64Mi é€²è¡Œ apply 1kubectl apply -f deployment.yml ä¸‹ get æŒ‡ä»¤æŸ¥çœ‹ Pod ç‹€æ…‹ 1kubectl get deployments myapp-deployment-demo output 12NAME READY UP-TO-DATE AVAILABLE AGEmyapp-deployment-demo 3/3 3 3 2m8s Deployment å¦‚ä½•æ›´æ–°(Rollout Update)ï¼Ÿå‰é¢æœ‰æåˆ° Deployment æœ€ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯è² è²¬è®Šæ›´ã€ç¶­æŒ Pod çš„ç‰ˆæœ¬ï¼Œé‚£ Deployment æ˜¯å¦‚ä½•å° Pod åšæ›´æ–°çš„ï¼Ÿ Deployment æ›´æ–°çš„æµç¨‹åœ–ç‰‡æº å¾ä¸Šé¢çš„ gif åœ–ä¾†çœ‹ï¼ŒDeployment æœƒå…ˆå‰µé€ ä¸€å€‹ ReplicaSetï¼Œè£¡é¢æœ‰ä¸‰å€‹ Podï¼Œè‹¥æƒ³æŠŠ Pod è£¡çš„ Image ç”± nginx æ”¹æˆåˆ¥çš„ imageï¼Œå¦‚: httpdï¼Œæˆ–æ˜¯æƒ³æ›´æ–° image ç‰ˆæœ¬ï¼ŒåŸå§‹çš„ ReplicaSet åº•ä¸‹æœ‰å¤šå€‹ç›¸åŒç‰ˆæœ¬çš„ Podï¼Œç•¶ Deployment é€²è¡Œæ›´æ–°æ™‚æ¡å–çš„ç­–ç•¥æ˜¯ç›¡å¯èƒ½å®‰å…¨ï¼š å…ˆèµ·ä¸€å€‹æ–°ç‰ˆ ReplicaSet (å¦‚åœ–ä¸­çš„ ReplicaSet v2) ReplicaSet v2 æœƒå¾ªåºåœ°å‰µé€ æ–°çš„ Pod ç•¶æ–°çš„ Pod å•Ÿå‹•ï¼Œè®Šæˆ Runing çš„ç‹€æ…‹æ™‚ï¼ŒèˆŠç‰ˆå°æ‡‰çš„ Pod æ‰æœƒè¢«ç æ‰ï¼Œç…§é€™å€‹å¾ªç’°å»è¿­ä»£æ–°çš„ Pod Rollout Update çš„éç¨‹ä¸­æœ‰äº›æ˜¯æ–°ç‰ˆï¼Œæœ‰äº›æ˜¯èˆŠç‰ˆ èˆŠçš„ ReplicaSet (å¦‚åœ–ä¸­çš„ ReplicaSet v1) å¯ä»¥é¸æ“‡è¦ä¸è¦ä¿ç•™ã€‚ ä¿ç•™çš„å¥½è™•åœ¨æ–¼ï¼Œè‹¥æœ‰é€€ç‰ˆéœ€æ±‚ï¼Œå°‡å‰è¿°æ­¥é©Ÿåéä¾†ï¼Œå¾ªåºåœ°é™å›èˆŠç‰ˆ å¦‚ä½•è§€å¯Ÿ Rollout Update çš„è®ŠåŒ–ï¼Ÿkubectl æœ‰æä¾›ç›¸é—œæŒ‡ä»¤å¯ä»¥è§€å¯Ÿ Deployment çš„è®ŠåŒ–ã€‚èªæ³• 1kubectl rollout status deployment &lt;deployment_name&gt; åŸ·è¡Œ rollout status çš„æŒ‡ä»¤å‰ï¼Œå…ˆæŠŠ myapp-deployment-demo çš„ yaml æª”è£¡çš„ image å¾ nginx æ”¹ç‚º httpï¼Œæ¥è‘—é‡æ–° applyã€‚ å»ºè­°å…ˆé–‹å…©å€‹çµ‚ç«¯æ©Ÿçš„è¦–çª—ï¼Œä¸€å€‹åŸ·è¡Œ applyï¼Œä¸€å€‹åŸ·è¡Œ rollout statusï¼Œæ–¼ rollout status çš„çµ‚ç«¯æ©Ÿè¦–çª—è§€å¯Ÿè®ŠåŒ– apply 1kubectl apply -f deployment.yml rollout status 1kubectl rollout status deployment myapp-deployment-demo çœ‹åˆ°è¼¸å‡ºé¡ä¼¼ä¸‹æ–¹çµæœ: 12345678910Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 0 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 1 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 1 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 1 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 2 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 2 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 2 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 1 old replicas are pending termination...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 1 old replicas are pending termination...deployment &quot;myapp-deployment-demo&quot; successfully rolled out å¦‚ä½•é™ç‰ˆ(Roll Back)ï¼ŸåŸ·è¡Œ rollout undo çš„æŒ‡ä»¤å³å¯é™ç‰ˆ(Roll Back)å›å»ã€‚èªæ³• 1kubectl rollout undo deployment &lt;deployment_name&gt; å°‡å‰›å‰›çš„ Deployment ç¯„ä¾‹é™å›ä¸Šä¸€å€‹ç‰ˆæœ¬ 1kubectl rollout undo deployment myapp-deployment-demo è§€å¯Ÿ rollout status çš„è¼¸å‡ºçµæœ 123456789Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 1 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 1 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 1 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 2 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 2 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 2 out of 3 new replicas have been updated...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 1 old replicas are pending termination...Waiting for deployment &quot;myapp-deployment-demo&quot; rollout to finish: 1 old replicas are pending termination...deployment &quot;myapp-deployment-demo&quot; successfully rolled out ç¸½çµå‰é¢å¹¾å€‹ç¯„ä¾‹ä¸­ï¼Œå·²é€é kubectl apply æŒ‡ä»¤å»æ“ä½œ Deploymentï¼Œæ›´æ–°æœå‹™çš„ç‰ˆæœ¬ã€‚ å¤§éƒ¨åˆ†çš„æƒ…æ³ä¸‹éƒ½æœƒæ¡ç”¨ Deployment çš„æ–¹å¼é€²è¡Œéƒ¨ç½²ï¼Œå¯ä»¥æ»¾å‹•å¼åœ°æ›´æ–°ä¸åŒç’°å¢ƒè£¡çš„æœå‹™ï¼Œé¿å…æœå‹™å› ç‚ºéƒ¨ç½²çš„é—œä¿‚(ç­‰å¾…æ–°çš„ image ä¸‹è¼‰ç­‰ç­‰)è€Œçªç„¶ä¸­æ–·ã€‚ ä¸‹ç¯‡æ–‡ç« æœƒæ¥è‘—è¨è«– Pod åº•ä¸‹çš„ Controller - DaemonSet Reference Kubernetes Documentation - Deployment Kubernetes Deployment Performing a Rolling Update Kubernetes Rolling Update Configuration","link":"2021/09/18/DevOps/K8s/%5BKubernetes%5D%20Kubernetes%20%E5%9F%BA%E7%A4%8E(%E5%9B%9B)%20Pod%20Controller%20-%20Deployment/"},{"title":"[Kubernetes] Kubernetes åŸºç¤(å…­) Pod Controller - Job&#x2F;CronJob","text":"å‰è¨€ ä¸Šç¯‡è«‡åˆ° Daemonset, StatefulSet å…©ç¨® Pod controllerï¼Œæœ¬ç¯‡å°‡æœƒæ¢è¨ Kubernetes ä¸€æ¬¡æ€§çš„é‹ç®—å–®å…ƒ - Job/CronJob Job/CronJob çš„å‘½åè·Ÿå…ˆå‰å·²ç¶“ä¸åŒï¼Œå› ç‚ºæ˜¯ä¸€æ¬¡æ€§çš„é‹ç®—ï¼Œä»¥ Job ç‚ºåŸºæœ¬å–®å…ƒï¼Œå·²ç¶“æ²’æœ‰ä»»ä½• Set æ¦‚å¿µï¼Œåœ¨æ­£å¼è¨è«– Job/CronJob ä¹‹å‰ï¼Œå…ˆäº†è§£åˆ°æ‡‰ç”¨ç¨‹å¼çš„ç”Ÿå‘½é€±æœŸåˆ†å…©å¤§é¡ï¼š ä¸æœƒçµæŸ e.g. æŒçºŒé‹è¡Œçš„ Daemonå‰è¿°æåˆ°çš„ DeamonSet, StatefulSet, Deploymnet, ReplicaSet éƒ½å±¬æ–¼æ­¤é¡å‹ æœƒçµæŸçš„ e.g. ä¸€æ¬¡æ€§çš„ä»»å‹™ Job, CronJob éƒ½å±¬æ–¼æ­¤é¡ä¸€æ¬¡æ€§çš„é‹ç®—å–®å…ƒ Jobç”±æ–¼ K8s æœ€åŸºæœ¬çš„é‹ç®—å–®å…ƒæ˜¯ Podï¼Œæ•…ä»¥ Pod ä¾†æè¿° Jobã€‚ Job çš„å®šç¾©: æ–¼é€±æœŸå…§æœ‰å¤šå°‘æ•¸é‡çš„ Pods æˆåŠŸåœ°çµæŸä»»å‹™ï¼Œè·‘ Job æ™‚ï¼Œå¯æŒ‡å®š Job æ•¸é‡ã€åˆ†é…æ–¹å¼å¦‚: ä¸€æ¬¡è·‘ä¸€å€‹(one by one) æˆ–æ˜¯å¹³è¡Œåˆ†é…(parallelism) æµç¨‹: ä¸Šåœ–ç¯„ä¾‹æ˜¯ Job åœ¨åŸ·è¡Œçš„æµç¨‹ï¼Œæˆ‘å€‘å®šç¾©: completions ç‚º 2 parallelism ç‚º 1 ä¸Šè¿°è¨­å®šé æœŸ Pod æˆåŠŸçµæŸçš„æ•¸é‡ç‚º2ï¼ŒJob controller æœƒå…ˆå»ºç«‹ä¸€å€‹ Podï¼Œ å¾…é€™å€‹ Pod æˆåŠŸçµæŸä¹‹å¾Œï¼ŒJob controller æœƒåµæ¸¬åˆ°çµæœï¼Œæ¥è‘—å†å»ºç«‹ç¬¬äºŒå€‹ Pod åŸ·è¡Œ Jobï¼ŒçµæŸå¾Œ Job controller ä¹ŸæœƒçŸ¥é“çµæœï¼Œç•¶ Job æ”¶åˆ°æˆåŠŸçš„ Pod æ•¸é‡èˆ‡é æœŸçš„ç›¸åŒæ™‚ï¼Œä»£è¡¨ Job é †åˆ©æˆåŠŸçµæŸã€‚ æ›è€Œè¨€ä¹‹ï¼Œè‹¥å°‡ parallelism æ”¹ç‚º 2ï¼Œè¡¨åŒæ™‚å‰µé€ å…©å€‹ä¸åŒçš„ Pods å„è‡ªè™•ç†ï¼Œæœ€å¾Œæ”¶åˆ°æˆåŠŸçš„ Pod æ•¸é‡èˆ‡é æœŸçš„ç›¸åŒæ™‚ï¼Œä¹Ÿä»£è¡¨ Job é †åˆ©æˆåŠŸçµæŸã€‚ ç°¡å–®å°çµ one by one èˆ‡ parallelism å…©è€…: completions != 1, parallelism = 1-&gt; One by oneï¼Œ ç„¡å¹³è¡ŒåŒ–ï¼Œä¸€æ¬¡è·‘ä¸€å€‹ completions = N, parallelism = N-&gt; parallelismï¼Œæœ‰è¨­å®šå¹³è¡ŒåŒ–ï¼Œä¸€æ¬¡å…¨éƒ¨åŸ·è¡Œ ç›¸é—œè¨­å®šèªªæ˜: completions: é æœŸæˆåŠŸçš„ Pod æ•¸é‡ parallelism: é æœŸåŒæ™‚åŸ·è¡Œçš„ Pod æ•¸é‡ã€‚é è¨­ç‚º 1 backoffLimit: å˜—è©¦å¤±æ•—çš„æ¬¡æ•¸ã€‚è¶…éæŒ‡å®šæ¬¡æ•¸ï¼Œæ•´å€‹ Job å°±æœƒè¢«è¦–ç‚º failed activeDeadlineSeconds: å˜—è©¦å¤±æ•—çš„æ™‚é–“ã€‚è¶…éæŒ‡å®šçš„æ™‚é–“æ•´å€‹ Job å°±æœƒè¢«è¦–ç‚º failedï¼Œ Job æœƒæŠŠå‰µé€ å‡ºä¾†çš„ Pod éƒ½ç æ‰å›æ”¶ Job æœƒæŒçºŒç”¢ç”Ÿ Pod ç›´åˆ°é”åˆ°é æœŸçš„æˆåŠŸæ•¸é‡ï¼Œç‚ºäº†é¿å… Job ç„¡æ­¢ç›¡åœ°ç”¢ç”Ÿ Pod ä¾†é‡æ–°å˜—è©¦åŸ·è¡Œä»»å‹™ï¼Œæˆ‘å€‘å¯è—‰åƒæ•¸èª¿æ•´å° Job å®šç¾©æˆåŠŸæˆ–å¤±æ•—çš„æ¢ä»¶ã€‚ é€™é‚Šæœ‰å€‹æ³¨æ„çš„é»æ˜¯: Pod æ˜¯å¦ç‚º Deamon é‚„æ˜¯ Job/CronJob æ˜¯ç”± Container å»æ±ºå®šï¼Œæ•… Pod è£¡çš„ Container æ˜¯æ‡‰ç”¨ç¨‹å¼åŒ…æˆ container image æ™‚ï¼Œé å…ˆè¨­å®šå¥½è®“æ‡‰ç”¨ç¨‹å¼åŸ·è¡Œçš„ command æ˜¯æŒçºŒé‹è¡Œé‚„æ˜¯ä¸€æ¬¡ or æ‰¹æ¬¡æ€§çš„ä»»å‹™ï¼ŒKubernetes åªæ˜¯ä½¿ç”¨å…¶çµæœã€‚ ç¯„ä¾‹ç¯„ä¾‹æºè‡ªå®˜æ–¹ç¯„ä¾‹å¾®å¹…æ”¹å¯«job.yml 12345678910111213141516171819202122apiVersion: batch/v1kind: Jobmetadata: name: pispec: template: spec: containers: - name: pi image: perl command: [&quot;perl&quot;, &quot;-Mbignum=bpi&quot;, &quot;-wle&quot;, &quot;print bpi(2000)&quot;] resources: limits: cpu: 100m memory: 100Mi requests: cpu: 50m memory: 50Mi restartPolicy: Never backoffLimit: 4 completions: 5 activeDeadlineSeconds: 5 # Job è·‘è¶…é 5 ç§’è¦–ç‚ºå¤±æ•— ä¸Šè¿°ç¯„ä¾‹æ˜¯å®šç¾© Job åŸ·è¡Œä¸€å€‹ Perl èªè¨€çš„ä»»å‹™ï¼Œæ ¹æ“š completions è¨­å®šé æœŸæœƒå®Œæˆçš„ Pod æ•¸é‡ç‚º 5ï¼Œç”±æ–¼ yaml æª”ä¸­æœªè¨­å®š parallelism (å¹³è¡Œ)ï¼Œæ‰€ä»¥æ˜¯ä¸€æ¬¡è·‘ä¸€å€‹ Podï¼Œéœ€ç­‰ç¬¬ä¸€å€‹ Pod è·‘èµ·ä¾† -&gt; åŸ·è¡Œ -&gt; çµæŸ å›å ±çµ¦ Job controller å¾Œæ‰æœƒå†å¾€ä¸‹å»ºç«‹ç¬¬äºŒå€‹ Pod æ¥çºŒå¾Œé¢çš„ä»»å‹™ï¼Œç›´åˆ°ç¬¬ 5 å€‹ Pod çµæŸã€‚ å¯è—‰ç”± --watch ä¾†è§€å¯Ÿ Job å»ºç«‹ Pod çš„è®ŠåŒ– 1kubectl get jobs --watch output: 123456NAME COMPLETIONS DURATION AGEpi 1/5 2m8s 2m10spi 2/5 2m44s 2m46spi 3/5 3m40s 3m42spi 4/5 4m36s 4m38spi 5/5 5m37s 5m39s ä¹Ÿå¯é€é describe æŸ¥çœ‹ Job ç´°ç¯€ 1kubectl describe jobs.batch pi output: 123456789Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal SuccessfulCreate 5m37s job-controller Created pod: pi-q6vg8 Normal SuccessfulCreate 4m6s job-controller Created pod: pi-fgfpf Normal SuccessfulCreate 2m54s job-controller Created pod: pi-xsfp4 Normal SuccessfulCreate 119s job-controller Created pod: pi-m2vjz Normal SuccessfulCreate 62s job-controller Created pod: pi-hg6cj Normal Completed 1s job-controller Job completed å¾ describe è¼¸å‡ºçš„å…§å®¹å¯çŸ¥ç•¶äº”å€‹ Pod éƒ½æˆåŠŸçµæŸå¾Œï¼Œæœ€çµ‚çµæœç‚º Job completedã€‚ å†é€é tree æŒ‡ä»¤è§€å¯Ÿ Job çµæ§‹é—œä¿‚ 1234567NAMESPACE NAME READY REASON AGEstg Job/pi - 14mstg â”œâ”€Pod/pi-fgfpf False PodCompleted 13mstg â”œâ”€Pod/pi-hg6cj False PodCompleted 10mstg â”œâ”€Pod/pi-m2vjz False PodCompleted 11mstg â”œâ”€Pod/pi-q6vg8 False PodCompleted 14mstg â””â”€Pod/pi-xsfp4 False PodCompleted 12m åœ¨ Job è£¡ï¼ŒPod æ˜¯ä¸€å€‹æ‰¹æ¬¡æ€§çš„ä»»å‹™ï¼Œä»»å‹™è·‘å®Œå°±çµæŸï¼ŒçµæŸçš„ Pod ç‹€æ…‹éƒ½æœƒè¢«æ¨™è¨˜æˆ False æ¥è‘—çœ‹ä¸€ä¸‹ Job 1kubectl get jobs pi output: 12NAME COMPLETIONS DURATION AGEpi 5/5 5m37s 21m å®šç¾©å¥½çš„ 5 å€‹ Pod éƒ½æˆåŠŸå®Œæˆä»»å‹™ï¼ŒCOMPLETIONS é€™æ¬„å°±æœƒé¡¯ç¤º 5/5 CronJobç›¸è¼ƒæ–¼å‰è¿°æåˆ°çš„ Jobï¼ŒCronJob å…¶å¯¦å°±æ˜¯ Job åŠ ä¸Š schedule çš„æ¦‚å¿µï¼Œå¯ä»¥åœ¨æŸå€‹å›ºå®šæ™‚é–“é»å»åŸ·è¡Œ Jobï¼Œå¦‚ï¼šå¸Œæœ›æ¯å¤©(å›ºå®šæ™‚é–“é»)æ¸…ç†ç¯€é»ä¸Šä¸å¿…è¦çš„è³‡æ–™(å–®æ¬¡æ€§å·¥ä½œ)ï¼Œè€Œ schedule è¨­ç½®çš„è¦å‰‡è·Ÿ Linux çš„ crontab æ˜¯ä¸€æ¨¡ã„§æ¨£çš„æ–¹å¼(äº”å€‹ç¬¦è™Ÿå»æè¿°æ™‚é–“é») ç¯„ä¾‹123456789101112131415161718192021222324apiVersion: batch/v1kind: CronJobmetadata: name: pispec: schedule: '*/1 * * * *' # åŸ·è¡Œ Job çš„æ™‚é–“ jobTemplate: spec: template: spec: containers: - name: pi image: perl command: [&quot;perl&quot;, &quot;-Mbignum=bpi&quot;, &quot;-wle&quot;, &quot;print bpi(2000)&quot;] resources: limits: cpu: 100m memory: 100Mi requests: cpu: 50m memory: 50Mi restartPolicy: Never backoffLimit: 4 completions: 5 apply å®šç¾©å¥½çš„ cronjob æª”æ¡ˆ 1kubectl apply -f cronjob.yml é€é tree è§€å¯Ÿçµæ§‹: 1kubectl tree cronjob pi output 12345678910NAMESPACE NAME READY REASON AGEstg CronJob/pi - 3m37sstg â”œâ”€Job/pi-27320665 - 3m26sstg â”‚ â”œâ”€Pod/pi-27320665-c5pnf False PodCompleted 3m24sstg â”‚ â””â”€Pod/pi-27320665-l9pnh True 100sstg â”œâ”€Job/pi-27320666 - 2m25sstg â”‚ â”œâ”€Pod/pi-27320666-r6l6h False PodCompleted 2m23sstg â”‚ â””â”€Pod/pi-27320666-tksn2 True 42sstg â””â”€Job/pi-27320667 - 89sstg â””â”€Pod/pi-27320667-fhjqr True 88s ä»¥ CronJob çš„è§’åº¦ä¾†çœ‹ï¼ŒCronJob ç®¡ç† Jobï¼Œè€Œ Job ç®¡ç†åº•ä¸‹çš„ Podï¼Œç”±ä¸€å€‹å€‹æŠ½è±¡å±¤å¾€ä¸Šç–ŠåŠ ï¼Œæ¯ä¸€å±¤å°ˆæ³¨åœ¨è‡ªå·±çš„åŠŸèƒ½ã€‚ ç¸½çµJob/CronJob é©åˆç”¨åœ¨ä¸€æ¬¡æ€§çš„å·¥ä½œï¼Œè€Œ CronJob æä¾›äº†æ’ç¨‹çš„åŠŸèƒ½ï¼Œå¯ä»¥è®“ Job åœ¨æŸå€‹å›ºå®šæ™‚é–“é»åŸ·è¡Œï¼Œé€éé¡å¤–çš„åƒæ•¸è¨­å®šå¯æ»¿è¶³ä¸åŒéœ€æ±‚ï¼Œå¦‚: æ˜¯å¦è¦å¹³è¡ŒåŸ·è¡Œ Jobï¼Ÿæˆ–æ˜¯ Job ä¹‹é–“æœ‰ä¾è³´é—œä¿‚å¿…é ˆä¾åºé€²è¡Œï¼Œæˆ–é‡æ–°å˜—è©¦çš„æ¬¡æ•¸ç­‰ç­‰ï¼Œå¢åŠ ä½¿ç”¨ä¸Šçš„å½ˆæ€§ï¼ åƒè€ƒ Kubernetes - Job Kubernetes - CronJob","link":"2021/10/01/DevOps/K8s/%5BKubernetes%5D%20Kubernetes%20%E5%9F%BA%E7%A4%8E(%E5%85%AD)%20Pod%20Controller%20-%20Job_CronJob/"},{"title":"å¸¸ç”¨çš„VSCodeæ“´å……å¥—ä»¶","text":"å‰è¨€æœ¬ç¯‡ç­†è¨˜è‡ªå·±å¹³å¸¸æœƒä½¿ç”¨åˆ°çš„VSCodeæ“´å……å¥—ä»¶(Extensions)ã€‚è¦å¯«ç¨‹å¼ä¹‹å‰ï¼Œè‹¥æœ‰ä¸€å¥—å¥½å·¥å…·ï¼Œå¯ä»¥åŠ é€Ÿå¯«ç¨‹å¼çš„æ•ˆç‡ã€‚ Guides åœ¨ä½ çš„ç¨‹å¼é–‹é—œç¬¦è™Ÿï¼ˆä¾‹å¦‚å·¦å³å¤§æ‹¬è™Ÿï¼‰æ‹‰ä¸€æ¢ç·šï¼Œæ–¹ä¾¿ä½ è­˜åˆ¥ç¨‹å¼å€å¡Šï¼Œé¿å…éå¤šçš„æ‹¬è™Ÿæå¾—é–‹ç™¼è€…æ··æ·†ã€‚ Auto Close Tagé€™å€‹åŠŸèƒ½æœƒå¹«ä½ æŠŠå³æ‹¬è™Ÿæˆ–çµæŸæ¨™ç±¤è£œä¸Šã€‚å³ä½¿ VS Code æœ‰å…§å»ºåŸºæœ¬è£œå®ŒåŠŸèƒ½äº†ï¼Œä½†æ˜¯ä»–æ”¯æ´æ›´å¤šç¬¦è™Ÿå’Œè¨­å®šï¼Œä¾‹å¦‚æ‰“ &lt;/ çš„æ™‚å€™ä¹Ÿå¹«æˆ‘è£œä¸Š HTML çš„çµæŸæ¨™ç±¤ã€‚ Autoprefixerå¯ä»¥è‡ªå‹•å¹«ä½ æŠŠæ”¯æ´å…¶ä»–ç€è¦½å™¨çš„CSSæ¨£å¼è‡ªå‹•è£œé½Šï¼Œä¸ç”¨å¦å¤–å»æŸ¥æœ‰å“ªäº›ç€è¦½å™¨çš„èªæ³•éœ€è¦æ”¯æ´ã€‚ Bookmarkså¯ä»¥åœ¨ä½ çš„codæ¨™è¨»ä¸€å€‹æ›¸ç±¤ç¬¦è™Ÿåˆ°ä½ æŒ‡å®šçš„ä½å­ï¼Œ ä¹‹å¾Œå°±å¯ä»¥åœ¨VSCodeå³å´çš„scrollbar çœ‹åˆ°è—è‰²æç¤ºã€‚ Bracket Pair ColorizeræŠŠæ‹¬å¼§åŒ…çš„ä¸€å±¤åˆä¸€å±¤çš„æ™‚å€™ç”¨ä¸åŒé¡è‰²å€åˆ†é–‹ä¾†ï¼Œé¿å…æ··æ·†ï¼Œæ˜¯éå¸¸æ£’çš„å·¥å…·ã€‚ CSS Peeké€™æ˜¯æˆ‘éå¸¸å–œæ­¡æ“´å……å¥—ä»¶ï¼Œä»–æœ‰å¯ä»¥ç›´æ¥é¡¯ç¤ºå‡ºè©²å…ƒç´ æ¨™ç±¤çš„é¸æ“‡å™¨æ‰€è¨­å®šçš„CSSåšé¡¯ç¤ºï¼Œé‚„å¯ä»¥ç›´æ¥è·³åˆ°è©²æ–‡ä»¶åº•ä¸‹CSSä½ç½®ï¼Œé€™æ¨£å°±çœå»æ‰¾ä¾†æ‰¾å»çš„éº»ç…©ã€‚ filesizeVSCodeè¦–çª—çš„å³ä¸‹è§’æœƒé¡¯ç¤ºæª”æ¡ˆæ¡ˆç›®å‰å¤§å°ã€‚ Git HistoryGitæ˜¯éå¸¸é‡è¦çš„ç‰ˆæœ¬æ§ç®¡å·¥å…·ï¼Œæˆ‘å€‘å¯ä»¥é€éé€™å€‹åŠŸèƒ½æŸ¥çœ‹ Git ç´€éŒ„ä»¥åŠæª”æ¡ˆæ­·å²ï¼Œå¯ç›´æ¥é€£çµåˆ°è®Šæ›´çš„æª”æ¡ˆã€‚ Live Serveræœ‰äº†é€™å€‹å¥—ä»¶ï¼Œåªè¦ä¸€æŒ‰ä¸‹ä¿å­˜ï¼Œæˆ‘å€‘å°±å¯ä»¥åŒæ­¥æ›´æ–°ç€è¦½å™¨ä¸Šçš„ç•«é¢ï¼Œä¸ç”¨å†åˆ°ç€è¦½å™¨ä¸Šåˆ·æ–°é é¢ã€‚ Material Icon Themeä¸åŒçš„æª”æ¡ˆæœ‰ä¸åŒçš„åœ–æ¡ˆï¼Œä¸€çœ¼å°±å¯ä»¥è¾¨è­˜å‡ºæª”æ¡ˆé¡å‹ï¼Œçœ‹èµ·ä¾†ä¹Ÿæ¯”è¼ƒæ²’é‚£éº¼ä¹å‘³ã€‚ æœ‰äº›äººå¯èƒ½ä¹‹å‰æ˜¯ç”¨Sublimeçš„ç·¨è¼¯å™¨ï¼Œç¿’æ…£ä¸€äº›Sublimeä¸Šçš„æ“ä½œï¼ŒVSCodeæœ‰ä¸€äº›å¥—ä»¶æ˜¯å°‡Sublimeçš„åŠŸèƒ½éµç§»æ¤éä¾†ï¼Œå¯ä»¥å¿«é€Ÿé©æ‡‰ä¸åŒçš„ç·¨è¼¯å™¨ã€‚ Sublime Text Keymap and Settings ImporterSublime Text å¥½ç”¨çš„æ¸¸æ¨™åŠŸèƒ½æ¬éä¾† VS Codeï¼Œå¦‚:é¸å–æ•´è¡Œã€è¡Œåˆ—åˆä½µã€å¿«é€ŸæŒ‡å®šå¤šè¡Œæ¸¸æ¨™ç­‰ã€‚ Sublime CommandsæŠŠ Sublime Text çš„å¿«é€Ÿéµå°æ‡‰åˆ° VS Code çš„ç›¸å°åŠŸèƒ½ä¸Š","link":"2019/07/14/Tool/vscode/"},{"title":"[Github Action] æ•´åˆ AWS OIDC é€²è¡Œ CI&#x2F;CD å®‰å…¨å¼·åŒ–","text":"å‰è¨€ç›®å‰å…¬å¸çš„å°ˆæ¡ˆå¤§é‡ä½¿ç”¨ Github Action è·‘è‡ªå‹•åŒ– CI/CD çš„ pipelines å»éƒ¨ç½²æœå‹™åˆ° AWS ç’°å¢ƒï¼Œè¿‘æœŸå°‡åŸæœ¬ CI/CD pipelines ä¸Šèˆ‡ AWS service é©—è­‰çš„ workflows åšèª¿æ•´ï¼Œé©—è­‰æ–¹å¼å¾åŸæœ¬è—‰ç”± IAM User é€²è¡Œ assume role çš„æ–¹å¼æ”¹æˆé€é AWS ODIC çš„æ–¹å¼å®Œæˆ assume roleã€‚ ç›¸è¼ƒæ–¼ä»¥å‰çš„ä½œæ³•ï¼Œä½¿ç”¨ IAM user çš„ secrets é©—è­‰ï¼ŒOIDC çš„ä½œæ³•èƒ½å¹«åŠ©æˆ‘å€‘çœå»ç®¡ç†é‡‘é‘°çš„éº»ç…©ã€‚ æœ¬æ–‡æœƒ AWS ä½œç‚º cloud providerï¼Œè¨­å®šæ–¹æ³•ä¹Ÿæ˜¯ä»¥ AWS ç‚ºç¯„ä¾‹ï¼Œä»¥ä¸‹å…§å®¹å»ºè­°æœ‰ GitHub Action åŠ AWS IAM é€™å…©é …å…ˆå‚™çŸ¥è­˜æ¯”è¼ƒèƒ½ç†è§£ã€‚ OIDCOpenID Connect ä»¥ OAuth 2.0 ç‚ºåŸºç¤è¨­è¨ˆï¼Œè—‰ç”±ä¸€çµ„çŸ­æœŸçš„ token äº¤æ›ä½œç‚ºé©—è­‰æ–¹å¼ï¼Œç”¨æ–¼èªè­‰ä½¿ç”¨è€…ç™»å…¥ï¼ŒGitHub Actions æä¾› OIDC çš„é©—è­‰/æˆæ¬Šæ©Ÿåˆ¶ï¼Œèˆ‡å…¶ä»–ç¬¬ä¸‰æ–¹çš„é›²æœå‹™ä¾›æ‡‰å•† (å¦‚ï¼š AWS, Azure, Google Cloud Platform ç­‰) é€²è¡Œæ•´åˆï¼Œæä¾› CI/CD å·¥ä½œæµç¨‹ä¸Šæ›´ç°¡ä¾¿çš„è¨­è¨ˆã€‚ ä½¿ç”¨ OIDC å¥½è™•ä¸éœ€è¦æä¾› secretsä»¥å‰çš„ä½œæ³•éƒ½æ˜¯å¾ cloud service IAM ç”¢å‡ºé©—è­‰çš„ secretsï¼Œå°‡é€™äº› secret å­˜æ”¾åœ¨ GitHub secrets è£¡é¢ï¼Œåœ¨ workflow é€éè®Šæ•¸çš„æ–¹å¼å¸¶å…¥ã€‚ OIDC çš„ä½œæ³•å¯ä»¥çœå»é€™äº› secretï¼Œåªè¦ OIDC èˆ‡ Cloud provider ä¸Šçš„ä¿¡ä»»æ”¿ç­–è¨­å®šå¥½å³å¯ï¼Œä¸éœ€è¦é¡å¤–ç”¢ç”Ÿé©—è­‰çš„ secretsï¼Œä¹Ÿé¿å… secret å¯èƒ½å¤–æ´©çš„å•é¡Œã€‚ ç°¡åŒ–èº«ä»½é©—è­‰å’Œæˆæ¬Šç®¡ç†è©¦æƒ³å¦‚æœä»Šå¤©æœ‰å¤šå€‹ workflow éœ€è¦èˆ‡ä¸åŒ cloud service äº’å‹•ï¼Œè¦é™ç¸®æ¬Šé™çš„è©±å‹¢å¿…éœ€è¦ç”¢ç”Ÿæ“æœ‰ could service ç›¸æ‡‰æ¬Šé™çš„ secretï¼Œæœ€çµ‚é€™äº› secrets å¯èƒ½æœƒå››æ•£åœ¨ä¸åŒ repo è£¡ï¼Œç®¡ç† secrets æ•¸é‡ä¹Ÿæœƒéš¨éœ€æ±‚è¶Šä¾†è¶Šå¤šã€‚ OIDC å› ç‚ºä¸éœ€è¦ç”¢ç”Ÿé¡å¤–çš„ secrets é©—è­‰ï¼Œå°±ä¸ç”¨è€ƒæ…®ç®¡ç† secrets çš„å•é¡Œã€‚ çœå»è¼ªæ› secrets çš„å·¥ä½œå¤§éƒ¨åˆ†çš„çµ„ç¹”æ”¿ç­–æœƒè¦æ±‚ secret è¦å®šæœŸè¼ªæ›ï¼Œè¦æ›é€™éº¼å¤š secrets ä¹Ÿæ˜¯ç›¸ç•¶è€—æ™‚çš„äº‹æƒ…ã€‚ è€Œ OIDC å®Œå…¨ä¸å¿…è€ƒæ…® secrets è¼ªæ›ã€‚ æ¬Šé™æ§åˆ¶çš„ç¯„åœOIDC åœ¨ cloud provider ä¸Šçš„ä¿¡ä»»æ”¿ç­–è¨­å®šèƒ½å°‡æˆæ¬Šç¯„åœé™ç¸®åœ¨æŸå€‹ repository ç”šè‡³åˆ°æŸå€‹ brachã€‚ æµç¨‹ OIDC åœ¨ cloud ä¹‹é–“çš„äº¤æ›æµç¨‹ä¸Šåˆ†ç‚ºå¹¾å€‹æ­¥é©Ÿï¼š åœ¨ cloud provider ä¸Šå»ºç«‹ OIDC ä¿¡ä»»æ”¿ç­–ï¼Œè¨­å®š IAM Role èˆ‡ GitHub provider workflows é–“çš„å­˜å–æ”¿ç­–ï¼Œè®“ GitHub çš„ OIDC Provider ä¹‹å¾Œé€ä¾†çš„ token åšé©—è­‰ã€‚ æ¯æ¬¡ GitHub Action çš„ workflow è¢«è§¸ç™¼æ™‚ï¼ŒGitHub çš„ OIDC provider æœƒè‡ªå‹•ç”Ÿæˆä¸€çµ„ç¨ç«‹çš„ OIDC token (å³ JSON Web Token)ï¼Œä½œç‚º workflow çš„èº«ä»½é©—è­‰ï¼Œå°‡å…¶ç™¼é€è‡³ cloud providerã€‚ Cloud provider å°æ”¶åˆ°çš„ Token å…§å®¹èˆ‡ OIDC ä¿¡ä»»æ”¿ç­–çš„è¨­å®šé€²è¡Œé©—è­‰ ä¸€æ—¦é©—è­‰æˆåŠŸï¼ŒCloud provider æœƒæä¾› GitHub OIDC provider ä¸€çµ„æ•ˆæœŸçŸ­çš„ access tokenï¼Œä¸”åƒ…åœ¨é€™å€‹ workflow é‹è¡ŒæœŸé–“æœ‰æ•ˆã€‚ æ³¨æ„:GitHub Actions ä½¿ç”¨ OIDC ä½œç‚ºé©—è­‰ç®¡é“æ™‚ï¼Œå‹™å¿…ç¢ºèªå°æ¥çš„æœå‹™æä¾›å•†æ”¯æ´é€™é¡çš„é©—è­‰æ–¹å¼ã€‚ è¨­å®šæ–¹å¼è¦åœ¨ AWS ä¸Šè¨­å®š OIDC èˆ‡ GitHub Actions äº’å‹•ï¼Œæœƒéœ€è¦å…ˆåˆ° AWS console é é¢ï¼Œé¸æ“‡ IAM é€™é …æœå‹™ï¼Œä¸¦æ–¼å·¦æ–¹å°è¦½åˆ—æ‰¾åˆ° â€œIdentity providersâ€ã€‚ é»æ“Šå¾Œç•«é¢å³æ–¹æœ‰å€‹ â€œAdd providerâ€ æŒ‰éˆ•ï¼Œæ–°å¢æˆ‘å€‘è¦çš„ provider æ¥è‘—å‹¾é¸ â€œOpenID Connectâ€ ä¸¦æ–¼ â€œProvider URLâ€ è¼¸å…¥åŒ¡è¼¸å…¥é©—è­‰ç”¨çš„ OIDC URL åŠ Audience é€™å€‹è¨­å®šæ­¥é©Ÿè¦æ³¨æ„å…©å€‹åœ°æ–¹: Provider URL:å¦‚æœæ˜¯ä½¿ç”¨å®˜æ–¹ç¶­è­·çš„ GitHub serverï¼Œå¡«ï¼šhttps://token.actions.githubusercontent.comè‹¥ç‚ºçµ„ç¹”å…§éƒ¨è‡ªå·±æ¶è¨­çš„ï¼Œå‰‡å¡«å¯« OIDC connector çš„ endpointã€‚ Audience:æ¡ç”¨ AWS å®˜æ–¹çš„ actionï¼Œå¡« sts.amazonaws.com éƒ½å¡«å¥½å¾Œå³å¯æ–°å¢ providerï¼Œç•«é¢å¦‚ä¸‹ï¼š æ¥è‘—æˆ‘å€‘è¦å»ºç«‹ä¸€å€‹ for assume role ç”¨é€”çš„ IAM roleï¼Œé€™æ¨£ CI/CD workflow åŸ·è¡Œæ™‚æ‰èƒ½æœ‰æ¬Šé™èˆ‡ AWS ä¸Šçš„æœå‹™äº’å‹•ã€‚ ä¸€æ¨£åœ¨ IAM é é¢å·¦æ–¹å°è¦½åˆ—æ‰¾åˆ° Roles â†’ Create role â†’ Trusted entity type é¸ â€œWeb identityâ€ â†’ Identity provider é¸å‰›å‰›å»ºå¥½çš„ provider å¾Œé€²å…¥ä¸‹ä¸€é é¸æ“‡ç¶å®šçš„æ¬Šé™ã€‚ å°‡ role å¸Œæœ›æ“æœ‰æ¬Šé™çš„ç›¸é—œ Policies åœ¨æ­¤æ­¥é©Ÿè£¡é¢éƒ½åŠ é€²ä¾†ï¼Œä¾‹å¦‚æƒ³è¦æ“ä½œ S3ï¼Œæˆ‘å€‘å°±éœ€æœå°‹ S3 ç›¸é—œçš„ Policiesã€‚ æœ€å¾Œæ˜¯è¨‚å®š role çš„åç¨±ï¼Œä¸‹æ–¹ Federated è£¡æœƒè‡ªå‹•å¸¶å…¥ OIDC provider çš„ arnï¼Œç¢ºèªå¥½å¾Œå°±èƒ½æ–°å¢ for S3 æ¬Šé™çš„ roleã€‚ å»ºå¥½ä¹‹å¾Œå›åˆ°å‰›æ‰ role è£¡é¢ï¼Œç·¨è¼¯ trust policy (ä¿¡ä»»æ”¿ç­–)ã€‚ ä¸€é–‹å§‹å»ºç«‹å¥½çš„ role ä¸¦æ²’æœ‰é‡å° GitHub repository åšå­˜å–æ¬Šç¯„åœçš„è¨­å®šï¼Œæ‰€ä»¥è¦åœ¨ trust policy è£¡çš„ Condition å®šç¾©ç¯„åœã€‚ trust policy å®šç¾©ç¯„åœçš„æ–¹æ³•æœ‰è¨±å¤šç¨®ï¼Œä¹Ÿæ”¯æ´ wildcard (*) ç¬¦è™Ÿï¼Œç¯„åœå¯ä»¥é¸æ“‡ç‰¹å®šçš„ repo ã€æŸå€‹ repo ä¸‹çš„ branch ç­‰ï¼Œé€šç”¨æ ¼å¼å¦‚ä¸‹ï¼šrepo:&lt;orgName/repoName&gt;:environment:&lt;environmentName&gt; 1234567891011121314151617181920{ &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ { &quot;Effect&quot;: &quot;Allow&quot;, &quot;Principal&quot;: { &quot;Federated&quot;: &quot;arn:aws:iam::&lt;accountId&gt;:oidc-provider/token.actions.githubusercontent.com&quot; }, &quot;Action&quot;: &quot;sts:AssumeRoleWithWebIdentity&quot;, &quot;Condition&quot;: { &quot;StringEquals&quot;: { &quot;token.actions.githubusercontent.com:aud&quot;: &quot;sts.amazonaws.com&quot; }, &quot;StringLike&quot;: { &quot;token.actions.githubusercontent.com:sub&quot;: &quot;repo:&lt;orgName/repoName&gt;:environment:&lt;environmentName&gt;&quot; } } } ]} Note: aud æè¿°çš„æ˜¯å‰›å‰›åœ¨ id provider å¡«å…¥çš„å…§å®¹; sub å‰‡æ˜¯æŒ‡å®šé©—è­‰/æˆæ¬Šçš„ GitHub repoã€‚ StringEquals èˆ‡ StringLike å…©è€…åœ¨ä½¿ç”¨ä¸Šç¨æœ‰ä¸åŒï¼ŒStringEquals é©ç”¨æ–¼å®Œå…¨ç›¸ç¬¦çš„åç¨±ï¼Œä¾‹å¦‚å¸Œæœ›æŒ‡å®šæŸå€‹ repo ä¸‹çš„ main branchï¼Œè€Œ StringLike æ­é… wildcard å¯é¸å–æŸå€‹ç‰¹å®šç¯„åœï¼Œä¾‹å¦‚æŸå€‹ repo ä¸‹æ‰€æœ‰çš„ branchã€‚ sub è£¡æŒ‡å®šçš„ repo å¦‚æœæœ‰å¤šå€‹æ™‚ï¼Œæ”¹æˆ [ &quot;repo:&lt;orgName/repoName&gt;:environment:&lt;environmentName&gt;&quot;, &quot;repo:&lt;orgName/repoName&gt;:environment:&lt;environmentName&gt;&quot;, ...... ] çš„å¯«æ³•ã€‚ ç¯„ä¾‹ï¼šæŒ‡å®šå€‹äºº GitHub å¸³è™Ÿä¸‹ repo åç‚º gh-action-demo çš„æ‰€æœ‰ branchrepo:ChenTsungYu/gh-action-demo:* æœªä¾†åœ¨é€™å€‹ repo ä¸‹è§¸ç™¼ GitHub Action çš„ workflow æ™‚ï¼ŒOIDC provider ä¾¿æœ‰æ¬Šèˆ‡è¨­å®šå¥½çš„ IAM role äº’å‹•ï¼Œæ›´å¤šç¯„ä¾‹å¯åƒè€ƒå®˜æ–¹æ–‡ä»¶ - Example subject claims åœ¨ GitHub workflow åŠ å…¥æ¬Šé™æ–¼ OIDC é©—è­‰çš„ workflow è£¡å‹™å¿…è¦è¨­ç½®æ¬Šé™ 123permissions: id-token: write # This is required for requesting the JWT contents: read # This is required for actions/checkout ç¯„ä¾‹ï¼šåœ¨ç›®æ¨™è¦è§¸ç™¼ CI/CD çš„ GitHub repo ä¸‹å»ºç«‹ Action workflowï¼Œé€é Action assume åˆ°å‰é¢å»ºå¥½çš„ IAM role: github-actions-role-s3 ï¼ŒæŸ¥è©¢æ‰€æœ‰çš„ S3 bucketsã€‚ GitHub repo ä¸‹çš„è³‡æ–™å¤¾çµæ§‹ï¼š 123|-- .github| -- workflows| -- aws-oidc.yaml aws-oidc.yaml ä¾¿æ˜¯æˆ‘å€‘è¦è§¸ç™¼çš„ Action workflowã€‚ å°‡ä¸‹æ–¹ç¯„ä¾‹çš„ &lt;account ID&gt; æ›¿æ›æˆè‡ªå·±çš„ AWS account ID 123456789101112131415161718192021222324252627282930name: AWS OIDC connectoron: workflow_dispatch:# permissions settings for the token.permissions: id-token: write contents: readjobs: oidc-s3: runs-on: [ubuntu-latest] steps: - uses: actions/checkout@v3 - name: OIDC config of github-actions-role for aws credential uses: aws-actions/configure-aws-credentials@v1-node16 with: role-session-name: GithubActionsTerraform role-skip-session-tagging: true role-to-assume: arn:aws:iam::&lt;account ID&gt;:role/github-actions-role-s3 aws-region: ap-northeast-1 - name: check aws identity run: aws sts get-caller-identity # Check all buckets from AWS s3 - name: list s3 run: | aws s3 ls ä¸Šé¢çš„ workflow ç¯„ä¾‹åˆ†åˆ¥é€²è¡Œäº† AWS é©—è­‰ï¼Œassume åˆ°å»ºç«‹å¥½çš„ IAM role - github-actions-role-s3 ï¼ŒæŸ¥è©¢ account ä¸‹æ‰€æœ‰çš„ S3 bucketsã€‚ å°‡æ–°å¢çš„ workflow åŠ é€² git commit å¾Œæ¨ä¸Š GitHubï¼Œä¸¦æ–¼ repo çš„ Action åˆ†é é»é¸å‰›å‰›è‡ªè¨‚çš„ workflow - AWS OIDC connectorï¼Œæ‰¾åˆ°ç•«é¢å³æ–¹æŒ‰éˆ• â€œRun workflowâ€ è§¸ç™¼ workflow ç­‰ workflow è·‘å®Œçš„çµæœ é»é€²å» workflow å¯ä»¥çœ‹åˆ° job è£¡æ¯å€‹ step åŸ·è¡Œçµæœï¼Œåœ¨ list s3 é€™å€‹ step èƒ½èˆ‡ AWS S3 æ­£å¸¸äº’å‹•ï¼Œåˆ—å‡ºäº† AWS account ä¸‹æ‰€æœ‰çš„ S3 bucketsã€‚ ç¸½çµå‰é¢ä»‹ç´¹ OIDC è¨­ç½®çš„æ•´å€‹æµç¨‹ä¸­ï¼Œèˆ‡ AWS service ä¹‹é–“çš„äº’å‹•æ²’æœ‰ä¸€å€‹åœ°æ–¹éœ€è¦ç®¡ç†é©—è­‰ç”¨çš„ secretï¼ŒGitHub provider èˆ‡ AWS ä¹‹é–“äº’ç›¸å‚³é token é€²è¡Œé©—è­‰çš„éç¨‹éƒ½åœ¨èƒŒå¾Œé»˜é»˜é€²è¡Œï¼Œæˆ‘å€‘æ²’æœ‰å¦å¤–ç”¢ç”Ÿé¡å¤–çš„ secret ä¾†é©—è­‰ã€‚ å¦‚æ­¤ä¸€ä¾†ï¼Œå¾ŒçºŒæœ‰å…¶ä»–çš„ GitHub repos è¦ä½¿ç”¨ç›¸åŒ IAM role åŸ·è¡Œåˆ¥çš„ä»»å‹™æ™‚ï¼Œåªéœ€å°‡ role çš„ trust policy è¨­å®šåŠ ä¸ŠæŒ‡å®šçš„ repos å³å¯ï¼Œä¸åƒ…æ¸›å°‘ç®¡ç† secret çš„å·¥ä½œï¼ŒåŒæ™‚ä¹Ÿé¿å… secret å¯èƒ½å¤–æ´©çš„å•é¡Œã€‚ åƒè€ƒ Creating a role for web identity or OpenID Connect Federation (console) https://github.com/aws-actions/configure-aws-credentials#assuming-a-role https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/configuring-openid-connect-in-amazon-web-services#adding-the-identity-provider-to-aws","link":"2022/11/27/DevOps/CICD/GitHub%20Action%20OIDC/"},{"title":"[Kubernetes] Kubernetes åŸºç¤(ä¸‰) Pod Controller - ReplicaSet","text":"å‰è¨€ä¸Šç¯‡æ–‡ç«  - [Kubernetes] Kubernetes åŸºç¤(äºŒ) Pod æ“ä½œ è¨è«–å¦‚ä½•é€é kubectl æŒ‡ä»¤å° K8s åšä¸€ç³»åˆ—çš„æ“ä½œï¼Œæœ¬ç¯‡ä¸»è¦è¨˜éŒ„ Pod Controller ä¸­çš„ ReplicaSet ä»€éº¼æ˜¯ ReplicaSetï¼Ÿä¸Šç¯‡æ–‡ç« æœ‰æåˆ° Pod æ˜¯ K8s çš„æœ€å°é‹ç®—å–®å…ƒï¼Œè‹¥ä»Šæœ‰è² è¼‰å¹³è¡¡çš„éœ€æ±‚æ™‚ï¼Œæ˜¯ç„¡æ³•åªå–®é  Pod ä¾†é”æˆçš„ï¼Œå› ç‚ºä¸€å€‹ Pod å³ä¸€å€‹æ‡‰ç”¨ç¨‹å¼ï¼Œåªæœƒé‹è¡Œä¸€ä»½(æœ¬èº«ç„¡è¤‡è£½èƒ½åŠ›)ã€‚ æŸäº›æƒ…æ³ä¸‹æœƒéœ€è¦å¯ä»¥é‹è¡Œå¤šä»½æ‡‰ç”¨ç¨‹å¼ï¼Œåšè² è¼‰å¹³è¡¡ã€åˆ†æ•£æµé‡ï¼Œè€Œ ReplicaSet å¯ä»¥å¹«åŠ©æˆ‘å€‘é”æˆé€™ä»¶äº‹ã€‚ ReplicaSet å¹¾é …é‡é»ï¼š å‰¯æœ¬çš„æ¦‚å¿µã€ç®¡ç†ç›¸åŒçš„ Pod ç¢ºä¿å¯åœ¨ä»»ä½•æ™‚é–“é» Pod å¯ä»¥ä¿æœ‰æŒ‡å®šæ•¸é‡çš„å‰¯æœ¬ -&gt; æœƒäº‹å…ˆåœ¨ ReplicaSet è£¡å®šç¾©å¥½æ•¸é‡ï¼Œè¶…éå®šç¾©å¥½çš„æ•¸é‡å°±ç æ‰å¤šçš„ï¼Œåä¹‹å‰‡è£œå›ä¾†ã€‚ ç¢ºä¿ Pod æ˜¯å¯ç”¨çš„ã€å¯å­˜å–çš„ Pod å’Œ ReplicaSet æ˜¯ä¸åŒçš„è³‡æºï¼Œé€é selector å°‡å…©è€…ç¶ä¸€èµ· åœ¨å¯¦ä½œä¹‹å‰ï¼Œæˆ‘å€‘å¯å…ˆé€é kubectl api-resources æŒ‡ä»¤åˆ—å‡ºæ‰€æœ‰æ”¯æ´çš„ API è³‡æºï¼Œä»¥åŠè©²é …è³‡æºçš„ç¸®å¯«ï¼Œå¾ŒçºŒé‡å°ä¸åŒè³‡æºæ“ä½œæ™‚ï¼Œå¯ä»¥ç”¨ç¸®å¯«åšæ›¿æ›ã€‚ ç”±æ–¼æœ¬æ–‡é‡é»åœ¨è¨è«– ReplicaSet é€™é … API è³‡æºï¼Œå¯æ­é… grep åªæ“·å– ReplicaSet ç›¸é—œè³‡è¨Š 1kubectl api-resources | grep replicasets output 12AME SHORTNAMES APIVERSION NAMESPACED KINDreplicasets rs apps/v1 true ReplicaSet å¯¦ä½œåˆ—å‡º ReplicaSet1kubectl get rs &lt;ReplicaSet Name&gt; ç¯„ä¾‹replicasets.yml 12345678910111213141516171819apiVersion: apps/v1kind: ReplicaSetmetadata: # å®šç¾© ReplicaSet åç¨± name: myapp-rs-demo labels: app: myapp-rs-demospec: # æè¿° ReplicaSet è¦æ ¼ replicas: 3 selector: # æŒ‡å®šç›®æ¨™ Pod matchLabels: app: myapp-nginx-demo template: # å®šç¾© Pod çš„ Template metadata: labels: # å®šç¾© Pod åç¨± app: myapp-nginx-demo spec: containers: # å®šç¾© Pod è£¡çš„ container è³‡è¨Š - name: myapp-rs-demo image: nginx éœ€æ³¨æ„å¹¾å€‹ä¸Šæ–¹ç¯„ä¾‹ä¸­çš„æ¬„ä½: seletor: ReplicaSet é€é seletor è£¡å®šç¾©çš„ matchLabels èˆ‡ Pod çš„ labels å°æ‡‰ã€‚ä¸Šæ–¹ç¯„ä¾‹æ˜¯å°æ‡‰åˆ° app: myapp-nginx-demo é€™å€‹ Label ç¬¬ä¸€å±¤çš„ spec: ç”¨æ–¼æè¿° ReplicaSet ç¬¬äºŒå±¤çš„ spec: ç”¨æ–¼æè¿° Pod è£¡çš„ Container template: ç”¨æ–¼å®šç¾© Pod å°‡ä¸Šè¿°ç¯„ä¾‹é€²è¡Œ apply 1kubectl apply -f replicasets.yml get æŸ¥çœ‹å‰›å‰›å»ºç«‹çš„ ReplicaSet 1kubectl get rs myapp-rs-demo output 12NAME DESIRED CURRENT READY AGEmyapp-rs-demo 3 3 3 2m56s è¼¸å‡ºçµæœè£¡é¢ï¼ŒDESIRED è¡¨æœŸæœ›è·‘å¤šå°‘å€‹ Ready çš„ Pod; CURRENT è¡¨ç›®å‰è·‘å¤šå°‘å€‹ Pod; READY è¡¨ç›®å‰å¤šå°‘å€‹ Pod æ˜¯è™•æ–¼ Ready ç‹€æ…‹ã€‚ æˆåŠŸå»ºç«‹ ReplicaSet å¾Œçœ‹ä¸€ä¸‹ Pod è³‡è¨Šçœ‹æ˜¯ä¸æ˜¯æœ‰ä¸‰å€‹ Pod 1kubectl get pods -o wide è©¦è‘—ç æ‰å…¶ä¸­ä¸€å€‹ Pod 1kubectl delete pod &lt;Pod Name&gt; éä¸€æ®µæ™‚é–“å¾Œå†ä¸‹ get æŒ‡ä»¤æœƒç™¼ç¾ ReplicaSet å·²ç”Ÿå‡ºæ–°çš„ Podï¼Œä¸¦æŠŠæ•¸é‡æ§åˆ¶åœ¨ 3 å€‹ã€‚ è‹¥æŠŠ get æ”¹ç‚º describe åˆ—å‡º Pod ç´°éƒ¨è³‡è¨Šï¼š 1234567891011Labels: app=myapp-nginx-demoAnnotations: kubernetes.io/psp: eks.privilegedStatus: RunningIP: 10.132.110.154IPs: IP: 10.132.110.154ï½˜: ReplicaSet/myapp-rs-demoContainers: myapp-rs-demo: . . ç”±æ–¼ Pod æ˜¯ç”± ReplicaSet å»ç®¡ç†ï¼Œæ•…æœ‰ä¸€å€‹åç‚º Controlled By çš„æ¬„ä½ç”¨ä¾†è¨˜éŒ„å“ªå€‹ ReplicaSet ä¾†ç®¡ç†è³‡æºï¼Œé€é yaml çš„æ–¹å¼è¾¨è­˜è©² Pod æ˜¯å–®ç¨çš„ Pod é‚„æ˜¯ä¸Šé ­(ç¯„ä¾‹æ˜¯ReplicaSet)æœ‰å…¶ä»–å…ƒä»¶æ§åˆ¶ã€‚ æ¦‚å¿µåœ–ä¸Šåœ–è§£é‡‹ ReplicaSet çš„æ¦‚å¿µèˆ‡æµç¨‹ï¼ŒåŒ…å« Pod æ•¸é‡ï¼Œä»¥åŠ seletor å°æ‡‰çš„ Pod label ä¸€èˆ¬åœ¨å®šç¾© ReplicaSet çš„æ™‚å€™ï¼ŒPod çš„ label èˆ‡ seletor çš„ label éƒ½æœƒè¨­å®šä¸€æ¨£ ç¸½çµæœ€å¾Œç°¡çŸ­å®šç¾© ReplicaSet: ç¢ºä¿ç›¸åŒçš„ Pod åœ¨ä»»æ„æ™‚é–“å…§çš†æœƒæœ‰ç¬¦åˆç›®æ¨™çš„ Pod æ•¸é‡æ–¼ Cluster ä¸­é‹è¡Œ ç›¸è¼ƒæ–¼å¾Œé¢æœƒè«‡è«–åˆ°çš„ Daemonset ï¼ŒDaemonset æ˜¯ç¢ºä¿ç¯€é»æ•¸é‡è¦ä¸€è‡´ä¸”åªèƒ½æœ‰ä¸€å€‹ æœ¬ç¯‡æ–‡ç« è¨˜éŒ„äº†å¦‚ä½•é€é ReplicaSet ä¾†å»ºç«‹å¤šå€‹ Podï¼Œç”± ReplicaSet å¹«æˆ‘å€‘æ§åˆ¶å¥½ Pod æ•¸é‡ã€‚ ä¸‹ä¸€ç¯‡æœƒé‡å° Pod åº•ä¸‹çš„ Controller - Deployment åšè¨è«–ã€‚ Reference Introduction to Kubernetes ReplicaSet Kubernetes Documentation - ReplicaSet","link":"2021/09/14/DevOps/K8s/%5BKubernetes%5D%20Kubernetes%20%E5%9F%BA%E7%A4%8E(%E4%B8%89)%20Pod%20Controller%20-%20ReplicaSet/"},{"title":"[Docker] DockeråŒ–ä½ çš„Python Flask APP ä¸¦ä¸Šå‚³è‡³Docker Hub","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 12 å‰è¨€æœ¬ç¯‡å°‡é€éæ’°å¯«Dockerfileä¾†æ‰“åŒ…è‡ªå·±çš„ Docker Imageï¼Œç”¨æ–¼å»ºç½®Python Flask ç’°å¢ƒï¼Œä¸¦å°‡æ‰“åŒ…å¥½çš„Docker Imageä¸Šå‚³è‡³DockerHubã€‚ Hands on Labå»ºDockerfileã€requirements.txtå»ºç«‹Dockerfile 1touch Dockerfile åœ¨requirements.txtå¯«å…¥flaskï¼Œdocker runçš„æ™‚å€™æœƒä¸‹è¼‰flaské€™å€‹ç›¸ä¾å¥—ä»¶ 1echo &quot;flask&quot; &gt; requirements.txt æ’°å¯«DockerfileDockerfile é–‹é ­å¿…é ˆæ˜¯FROMæŒ‡å®šä¸€å€‹åº•å±¤æ˜ åƒæª”(image)Dockerfile 12345678910111213141516FROM python:alpine3.10 WORKDIR /app COPY . /app RUN pip3 install -r requirements.txt EXPOSE 5000 CMD python3 ./index.py #COPY requirements.txt /app/requirements.txt#ENTRYPOINT [&quot;python&quot;, &quot;./index.py&quot;]# æŒ‡ä»¤ï¼šdocker build -t tom861012/imagedemo:0.0.1.RELEASE . æ³¨æ„æœ€å¾Œé¢çš„&quot;.&quot;ç‚ºç•¶å‰ç›®éŒ„&quot;# FROM https://hub.docker.com/_/python# WORKDIR å·¥ä½œç›®éŒ„# COPY è¤‡è£½çš„ä½ç½®# RUN Build æ™‚æœƒåŸ·è¡Œçš„æŒ‡ä»¤ï¼Œä¸‹è¼‰ç›¸ä¾å¥—ä»¶# EXPOSE container å•Ÿå‹•æ™‚æœƒç›£è½çš„port# CMD åŸ·è¡Œ Container æ™‚çš„æŒ‡ä»¤ æ¥è‘—å»ºç«‹index.py 1234567from flask import Flaskhelloworld = Flask(__name__)@helloworld.route(&quot;/&quot;)def run(): return &quot;{\\&quot;message\\&quot;:\\&quot; Flask App Demo v1\\&quot;}&quot;if __name__ == &quot;__main__&quot;: helloworld.run(host=&quot;0.0.0.0&quot;, port=int(&quot;5000&quot;), debug=True) å»ºç«‹ä¸¦åŸ·è¡Œcontainerå¯«å…¥ä¸Šè¿°çš„Dockerfileå…§å®¹å¾Œï¼ŒåŸ·è¡Œ 1docker build -t tom861012/imagedemo:0.0.1.RELEASE . æ³¨æ„æœ€å¾Œé¢çš„.ç‚ºç•¶å‰ç›®éŒ„ï¼Œæ˜¯å‡è¨­Dockerfileåœ¨ç•¶å‰ç›®éŒ„ä¸‹ï¼Œå› æ­¤æœƒä»¥.çµå°¾ æ³¨æ„buildæŒ‡ä»¤ï¼Œ-tå¾Œé¢æ¥çš„æ˜¯repositoryåœ°å€ï¼Œå› ç‚ºä¹‹å¾Œè¦pushåˆ°è‡ªå·±Docker Hubçš„ä½ç½®ï¼Œè€Œæ¯å€‹ Repository çš„å‰ç¶´å­—éƒ½æœƒæ˜¯ç™»å…¥å¸³è™Ÿï¼Œæ‰€ä»¥ä¸Šè¿°ç¯„ä¾‹tom861012ç‚ºæˆ‘è‡ªå·±çš„å¸³è™Ÿ æˆåŠŸbuildä¸€å€‹Flask Appå¾Œæœƒçœ‹åˆ°é¡ä¼¼ä¸Šåœ–çš„å…§å®¹ï¼Œæ¥è‘—ç”¨å‰›buildå¥½çš„imageä»¥èƒŒæ™¯æ¨¡å¼ä¾†runä¸€å€‹containerèµ·ä¾†ã€‚ 1docker run -p 5000:5000 -d imagedemo:0.0.1.RELEASE çœ‹åˆ°è¿”å›çš„containerIDå¾Œå°±è¡¨ç¤ºæˆåŠŸå›‰ï¼é€²å…¥åˆ°http://0.0.0.0:5000/ æŸ¥çœ‹log1docker logs -f containerID æŸ¥çœ‹images1docker images åŸ·è¡Œä¸Šè¿°æŒ‡ä»¤å°±å¯ä»¥è§€å¯Ÿåˆ°æ–°å»ºç«‹å¾—tom861012/imagedemoé€™å€‹imageå›‰ æŸ¥çœ‹æ­·å²ç´€éŒ„1docker history containerID Buildå¥½çš„Imageæ¨åˆ°Docker Hubåœ¨pushä¹‹å‰å‹™å¿…è¦è¨˜å¾—å…ˆåšdocker loginçš„å‹•ä½œ 1docker push tom861012/imagedemo:0.0.1.RELEASE å†åˆ°è‡ªå·±çš„Docker Hubé é¢å»çœ‹ èªæ³•å›é¡§ FROM [Docker Image Name:TAG]æŒ‡å®šé€™å€‹æ˜ åƒæª”è¦ä»¥å“ªä¸€å€‹Imageç‚ºåŸºåº•ä¾†å»ºæ§‹ WORKDIR è¨­å®šå·¥ä½œç›®éŒ„ COPY è¤‡è£½æœ¬åœ°ç«¯çš„æª”æ¡ˆ/ç›®éŒ„åˆ°æ˜ åƒæª”çš„æŒ‡å®šä½ç½®ä¸­ RUN Build Image æ™‚æœƒåŸ·è¡Œçš„æŒ‡ä»¤ï¼Œä¸‹è¼‰ç›¸ä¾å¥—ä»¶ EXPOSE container å•Ÿå‹•æ™‚æœƒç›£è½çš„port CMD åŸ·è¡Œ Container æ™‚çš„æŒ‡ä»¤","link":"2020/04/26/DevOps/Docker/%5BDevOps%5D%20Docker%E5%8C%96%E4%BD%A0%E7%9A%84Python%20Flask%20APP%20%E4%B8%A6%E4%B8%8A%E5%82%B3%E8%87%B3Docker%20Hub/"},{"title":"[Docker] Dockerå…¥é–€","text":"åœ–ç‰‡æº å‰è¨€ã€Dockerã€é€™å€‹åè©è¿‘å¹¾å¹´è¨è«–ç†±åº¦éå¸¸é«˜ï¼Œè¨±å¤šå¤§å‹å…¬å¸éƒ½æŒçºŒåœ¨å°å…¥é€™æ¨£çš„æŠ€è¡“ï¼Œæ—¢ç„¶å°å…¥dockeræ˜¯è¶¨å‹¢ï¼Œé‚£ç¸½è©²ä¾†äº†è§£ä¸€ä¸‹ä»€éº¼æ˜¯dockerï¼Œå®ƒå¸¶ä¾†å“ªäº›æ­£é¢æ•ˆç›Šã€‚ ä¸Šåœ–ç‚ºDockerè¿‘äº”å¹´åœ¨Googleæœå°‹ä¸Šçš„è®ŠåŒ–ï¼Œæ•´é«”ä¾†èªªï¼Œå¹´å¹´éƒ½åœ¨æ”€å‡ã€‚ ä»€éº¼æ˜¯Docker?æˆ‘æ»¿å–œæ­¡ç¶²è·¯ä¸ŠæŸå€‹æ•™å­¸çš„ç™½è©±èªªæ³•: Docker is a tool that allows developers, sys-admins etc. to easily deploy their applications in a sandbox (called containers) to run on the host operating system i.e. Linux. Ref: A Docker Tutorial for Beginners ç°¡å–®ä¾†èªª: Dockeræ˜¯ä¸€ç¨®å·¥å…·ï¼Œå¯è®“é–‹ç™¼è€…ï¼Œç³»çµ±ç®¡ç†å“¡ç­‰è¼•é¬†åœ°åœ¨æ²™ç›’ï¼ˆç¨±ç‚ºå®¹å™¨ï¼‰ä¸­éƒ¨ç½²å…¶æ‡‰ç”¨ç¨‹åºï¼Œä»¥åœ¨ä¸»æ©Ÿæ“ä½œç³»çµ±å³Linuxä¸Šé‹è¡Œã€‚ ç‚ºä½•Dockeræœƒå‡ºç¾?Dockerçš„å‡ºç¾å¯ä»¥å…ˆå¾è™›æ“¬åŒ–æŠ€è¡“çš„æ­·å²é–‹å§‹è¿½æº¯ï¼Œç¶²è·¯èˆˆèµ·ï¼Œå»ºç«‹ç¶²ç«™æ‡‰ç”¨éœ€è¦ä¸€å°å¯¦é«”æ©Ÿå™¨(é€™åªæ˜¯å…¶ä¸­ä¸€å€‹ä¾‹å­)ï¼Œä¼æ¥­å¯èƒ½æœƒå»ºç½®è‡ªå®¶çš„å¯¦é«”ä¸»æ©Ÿï¼Œæˆ–å®šæœŸå‘ä¸»æ©Ÿå•†ç§Ÿè³ƒã€‚ ä½†æ˜¯â€¦â€¦å‚³çµ±çš„è™›æ“¬æ©Ÿå¸¶ä¾†å¹¾é …ç¼ºé»: ç¡¬é«”(æ©Ÿå™¨)çš„ç¶­è­·æˆæœ¬: å¯¦é«”æ©Ÿå™¨æ˜¯æœƒæŠ˜èˆŠçš„RRRï¼Œæœ‰æ™‚å€™é‚„è¦è€ƒé‡å¤©ç½å•é¡Œã€‚ å»ºç½®æ©Ÿå™¨ç¹è¤‡ ç¶­è­·äººå“¡éœ€è¦éš¨æ™‚å¾…å‘½ éš¨è‘—é›²ç«¯æŠ€è¡“ç™¼å±•èµ·ä¾†ï¼Œå¯¦é«”æ©Ÿå™¨é–‹å§‹èµ°å‘è™›æ“¬åŒ–ï¼Œè€Œè™›æ“¬åŒ–é€ æˆæ©Ÿæˆ¿çš„é©å‘½ï¼Œè®“æ©Ÿæˆ¿ç©ºé–“ã€é›»åŠ›èƒ½æ›´æœ‰æ•ˆçš„åˆ©ç”¨ï¼Œä»¥æ‡‰ä»˜ä¸æ–·æˆé•·çš„æ¥­å‹™éœ€æ±‚ã€‚å°æ–¼ä¼æ¥­ä¾†èªªï¼Œä¸æ–·è²·æ©Ÿå™¨å»ºç½®å°ˆå±¬æ‡‰ç”¨ç³»çµ±æ‰€èŠ±è²»çš„æˆæœ¬æ˜¯ä¸€ç­†ä¸å°çš„é–‹éŠ·ï¼Œè™›æ“¬åŒ–æŠ€è¡“æ˜¯æ¸›å°‘æˆæœ¬çš„ä¸€å€‹è§£æ–¹ã€‚ ä¸€èˆ¬æƒ…æ³ï¼Œé›²ç«¯æœå‹™æ˜¯ç”±å¯¦é«”ä¼ºæœå™¨(Host)ä¸Šçš„è™›æ“¬æ©Ÿ(VM)æ‰€æä¾›ã€‚é€™äº›æ‡‰ç”¨ç¨‹å¼ï¼Œæ˜¯åœ¨é–‹ç™¼è€…ç™¼ä½ˆå®Œæˆå¾Œï¼Œè½‰çµ¦è² è²¬ITç¶­é‹äººå“¡ï¼Œåœ¨VMä¸Šé‹è¡Œã€‚ åœ¨è»Ÿé«”é–‹ç™¼æµç¨‹è£¡é¢ï¼Œé–‹ç™¼æ¸¬è©¦æœƒéœ€è¦æŸäº›ç‰¹å®šç’°å¢ƒä¸Šé‹è¡Œï¼Œå‚³çµ±çš„åšæ³•æ˜¯åˆ©ç”¨è™›æ“¬åŒ–æŠ€è¡“å»ºç«‹ä¸€å€‹åŒ…å«ä½œæ¥­ç³»çµ±åœ¨å…§çš„ç¨ç«‹åŸ·è¡Œç’°å¢ƒ(è™›æ“¬æ©Ÿå™¨)ï¼Œä¾‹å¦‚VirtualBoxã€VMwareã€‚ é›–ç„¶VMè§£æ±ºå¯¦é«”æ©Ÿå™¨çš„å•é¡Œï¼ŒVMæœ¬èº«ä¹Ÿæœ‰ç¼ºé»: è€—è²»è¨±å¤šç³»çµ±è³‡æºï¼šæ¯å°è™›æ“¬æ©Ÿéƒ½éœ€è¦æœ‰è‡ªå·±çš„æ“ä½œç³»çµ±ï¼Œè™›æ“¬æ©Ÿä¸€æ—¦è¢«é–‹å•Ÿï¼Œé åˆ†é…çµ¦å®ƒçš„è³‡æºå°‡å…¨éƒ¨è¢«ä½”ç”¨ ä½”ç”¨ä¸å°‘ä¸»æ©Ÿç¡¬ç¢Ÿç©ºé–“ èŠ±è²»è¨±å¤šæ™‚é–“åœ¨å¤šå€‹å°ˆæ¡ˆä¹‹é–“è½‰æ› Container(å®¹å™¨)æ˜¯ä»€éº¼ï¼Ÿå®¹å™¨(container)æ˜¯ä¸€é …è™›æ“¬åŒ–æŠ€è¡“èˆ‡å‚³çµ±è™›æ“¬åŒ–(Virtual Machine)ç›¸åŒï¼Œä½†ä¸åŒæ–¼å‚³çµ±éœ€è¦å®‰è£ä½œæ¥­ç³»çµ±(OS)ï¼Œå®¹å™¨æŠ€è¡“æ¡å…±ç”¨OSçš„åšæ³•ï¼Œè™›æ“¬åŒ–å±¤ç´šå¾OSçš„è½‰ç‚ºæ‡‰ç”¨ç¨‹å¼ï¼Œè®“åŸæœ¬æ¶ˆè€—çš„è³‡æºå¤§å¹…é™ä½ï¼ŒåŒæ™‚ä¹ŸåŠ å¿«åŸ·è¡Œé€Ÿåº¦ã€‚ æ¯”è¼ƒContainer èˆ‡ VMåœ–ç‰‡æº ä½¿ç”¨Dockeræœƒå¸¶ä¾†å“ªäº›å¥½è™• æ›´æœ‰æ•ˆç‡çš„åˆ©ç”¨è³‡æº çµ±ä¸€ç’°å¢ƒ è¼•é‡ï¼šå®¹å™¨åˆ©ç”¨ä¸¦å…±äº«äº†ä¸»æ©ŸCPUï¼Œåœ¨ç³»çµ±è³‡æºæ–¹é¢æ¯”è™›æ“¬æ©Ÿæ›´åŠ æœ‰æ•ˆã€‚ å¯ç§»æ¤ï¼šå¯ä»¥åœ¨æœ¬åœ°æ§‹å»ºï¼Œéƒ¨ç½²åˆ°é›²ç«¯ä¸¦åœ¨ä»»ä½•åœ°æ–¹é‹è¡Œã€‚ æ¶æ§‹(Docker architecture)Dockeræ˜¯ä¸€å€‹Client-Serveræ¶æ§‹ ä½¿ç”¨Dockerå¿…æ‡‚ç›¸é—œçš„åè©è¦å­¸ç¿’Dockerå‰ï¼Œå¿…é ˆè¦å…ˆçŸ¥é“ä¸‹é¢ä¸‰å€‹åè© Image(æ˜ åƒæª”)Docker Imageæ˜¯ç”¨ä¾†å•Ÿå‹•å®¹å™¨(container)=&gt;å¯¦éš›åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼ç’°å¢ƒã€‚ç°¡å–®åˆ—é»æ•´ç†: ä¸€å€‹å”¯è®€çš„æª”æ¡ˆ ä½œç‚ºå»ºç«‹Containerçš„æ¨¡æ¿ ä¸åŒImageå¯å †ç–Š(å¦‚Ubuntu+Postgresql+Application) å¯ç”¨æ€§ï¼šDocker æä¾›äº†ä¸€å€‹ç°¡å–®çš„æ©Ÿåˆ¶ä¾†å»ºç«‹Imageæˆ–è€…æ›´æ–°ç¾æœ‰çš„Imageï¼Œä½¿ç”¨è€…ç”šè‡³å¯ä»¥ç›´æ¥å¾é ç«¯å„²åº«(Docker Hub)ä¸‹è¼‰ä¸€å€‹å·²ç¶“åšå¥½(åˆ¥äººæˆ–è‡ªå·±çš„)Imageä¾†ç›´æ¥ä½¿ç”¨ã€‚Image å¦‚ä½•å–å¾—? è‡ªå·±å¯«Dockerfile Docker Hub pullä¸‹ä¾† åˆ¥å°é›»è…¦ä¸Šè¼¸å‡ºDocker imageï¼Œimport(åŒ¯å…¥)è‡ªå·²çš„é›»è…¦ Containerå®¹å™¨æ˜¯å¾æ˜ åƒæª”å»ºç«‹çš„åŸ·è¡Œå¯¦ä¾‹ã€‚å®ƒå¯ä»¥è¢«å•Ÿå‹•ã€é–‹å§‹ã€åœæ­¢ã€åˆªé™¤ã€‚æ¯å€‹å®¹å™¨éƒ½æ˜¯ç›¸äº’éš”é›¢çš„ã€ä¿è­‰å®‰å…¨çš„å¹³å°ã€‚å¯ä»¥æŠŠå®¹å™¨çœ‹åšæ˜¯ä¸€å€‹ç°¡æ˜“ç‰ˆçš„ Linux ç’°å¢ƒï¼ˆåŒ…æ‹¬rootä½¿ç”¨è€…æ¬Šé™ã€ç¨‹å¼ç©ºé–“ã€ä½¿ç”¨è€…ç©ºé–“å’Œç¶²è·¯ç©ºé–“ç­‰ï¼‰å’Œåœ¨å…¶ä¸­åŸ·è¡Œçš„æ‡‰ç”¨ç¨‹å¼ã€‚ ç”¨ä¾†åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼ è®€å¯«æ¨¡å¼ (R\\W) å°‡è»Ÿé«”åŸ·è¡Œæ‰€éœ€çš„æ‰€æœ‰è³‡æºé€²è¡Œæ‰“åŒ… æ¯å€‹Containerç’°å¢ƒç¨ç«‹ï¼Œç›¸äº’ä¸å½±éŸ¿(å¦‚å…©å€‹ä¸åŒçš„containeré–‹åœ¨8000portä¸æœƒè¡çª) ä¸€å€‹Imageå¯å•Ÿå‹•å¤šå€‹ä¸åŒçš„container Registry Docker Registryç‚ºå­˜æ”¾Imagesçš„åœ°æ–¹Registryåˆ†ç‚ºå…©ç¨®å½¢å¼: å…¬é–‹(Public)å’Œç§æœ‰(Private) æœ€å¤§çš„å…¬é–‹Registryæ˜¯ Docker Hubï¼Œå­˜æ”¾äº†å¤§é‡çš„imagesè®“ä½¿ç”¨è€…pullä¸‹ä¾† ä½¿ç”¨è€…å¯ä»¥åœ¨æœ¬åœ°ç«¯å…§å»ºç«‹ä¸€å€‹ç§æœ‰ Registry Repository(å€‰åº«ï¼Œå„²å­˜åº«) vs Registry (å€‰åº«è¨»å†Šä¼ºæœå™¨)å…©è€…ç¨ç¨ä¸åŒï¼Œå¯¦éš›ä¸Šå€‰åº«è¨»å†Šä¼ºæœå™¨(Registry)ä¸Šå­˜æ”¾è‘—å¤šå€‹å€‰åº«(Repository)ï¼Œæ¯å€‹å€‰åº«ä¸­(Repository)åˆåŒ…å«äº†å¤šå€‹Imageï¼Œæ¯å€‹Imageæœ‰ä¸åŒçš„æ¨™ç±¤(tag)ç°¡å–®æ­¸ç´: Registryï¼šå„²å­˜imageçš„æœå‹™ï¼ŒDockeré è¨­Registry æ˜¯Docker Hub Repositoryï¼šæä¾›ä¸åŒç‰ˆæœ¬(tag)çš„ç›¸åŒæ‡‰ç”¨ç¨‹å¼æˆ–æœå‹™ docker repository ä¼ºæœå™¨ï¼Œåƒæ˜¯ GitHub ä¸€æ¨£ï¼ŒDocker Hub å°±æ˜¯ docker å®˜æ–¹æä¾›çš„ registry Dockerfileæ˜¯ç”¨ä¾†æè¿°imageçš„æ–‡ä»¶ã€‚ åƒè€ƒæ•™å­¸dockerå…¥é–€è§€å¿µDockerå®˜æ–¹æ–‡ä»¶What is a Container?Docker å…¥é–€æ·ºè«‡è™›æ“¬æ©Ÿ(VM)èˆ‡å®¹å™¨(Container)ä¹‹å·®ç•°","link":"2020/02/28/DevOps/Docker/%5BDevOps%5D%20Docker%E5%85%A5%E9%96%80/"},{"title":"[ELK] Elasticsearch Index ç®¡ç†èˆ‡æ•ˆèƒ½å„ªåŒ–æŠ€å·§","text":"å‰è¨€ä¸Šé€± åƒèˆ‡ä¿å“¥åœ¨è‡‰æ›¸ä¸Šç™¼èµ·çš„ç›´æ’­æ´»å‹• - Elasticsearch Index ç®¡ç†èˆ‡æ•ˆèƒ½å„ªåŒ–æŠ€å·§ï¼Œé‚€è«‹å–¬å”(Joe)ä¾†è·Ÿå¤§å®¶åˆ†äº«è‡ªå·±éå»åœ¨ç®¡ç† Elasticsearch çš„ç¶“é©—ã€‚ åŠå¹´å¤šå‰å› å·¥ä½œéœ€è¦ï¼Œé–‹å§‹æ¥è§¸ Elastic é€™å®¶å…¬å¸çš„ç”¢å“ï¼Œæœ€æœ‰åçš„è«éæ–¼æœå°‹å¼•æ“ - Elasticsearchï¼Œè‡ªå·±èŠ±ä¸å°‘æ™‚é–“æ‘¸ç´¢é€™é …è¤‡é›œçš„å¤§å‹åˆ†æ•£å¼ç³»çµ±ä¸Šï¼Œé€™éç¨‹ä¹Ÿå› å–¬å”æ–¼ä¸‰åå¤©éµäººè³½æ’°å¯«çš„å–¬å”å¸¶ä½ ä¸Šæ‰‹Elastic Stack ç³»åˆ—æ–‡ç« ä¸­ç²ç›Šè‰¯å¤š(è½èªªä¹‹å¾Œè¦å‡ºæ›¸ï¼Œé‚„ä¸è²·çˆ†ï¼)ï¼Œå‰›å¥½é€™æ¬¡å–¬å”æœ¬äººå—é‚€åˆ†äº«ï¼Œåƒè¼‰é›£é€¢çš„æ©Ÿæœƒæ€éº¼èƒ½éŒ¯éï¼ æœ¬æ–‡ä¸»è¦ç´€éŒ„å–¬å”åœ¨æœ¬æ¬¡åº§è«‡åˆ†äº«ä¸­æ‰€æåˆ°çš„å¯¦æˆ°æŠ€å·§åŠå€‹äººç¶“é©—åˆ†äº«ï¼Œé‚„æœ‰åŠ å…¥æˆ‘è‡ªå·±ä½¿ç”¨çš„å¿ƒå¾—ï¼Œä»¥ä¸‹è³‡æ–™ä¸»è¦å‡ºè‡ªå–¬å”ç°¡å ±ã€‚ Elasticsearch å¸¸è¦‹çš„æ‡‰ç”¨ä¸€èˆ¬æœƒæ¡ç”¨ Elasticsearch ä¸å¤–ä¹é‡åˆ°ä»¥ä¸‹å ´æ™¯: å…¨æ–‡æª¢ç´¢ã€è³‡æ–™æ¯”å° (Search Engine) æ•¸æ“šè§€æ¸¬ (Obseverability) -&gt; åå‘ç¶­é‹é¢ï¼ŒåŒ…å«: Log, Metrics, Open Tracing, Monitoring ç·šä¸Šåˆ†æè™•ç† (OLAP; Online Analytical Processing) è³‡å®‰è§£æ±ºæ–¹æ¡ˆ (SIEM; Security Information and Event Management) å¤§æ•¸æ“š (Big Data) éé—œè¯å¼è³‡æ–™åº« (NoSQL Database) å¸¸è¦‹å•é¡Œå–¬å”åœ¨æœ¬æ¬¡åˆ†äº«æ•´ç†å¹¾å€‹å¤§å®¶æœ€å¸¸é¢è‡¨çš„å•é¡Œ: ä¸Šè¿°å•é¡Œå¯å¾å…©å€‹å¤§é¢å‘ä¾†æ¢è¨ï¼š åŸºæ–¼ Java é–‹ç™¼çš„ Serviceï¼Œé‹è¡Œæ–¼ JVM ä¸Šï¼Œå°æ–¼è¨˜æ†¶é«”æœ‰æœ€åŸºæœ¬çš„è¦æ±‚ï¼Œå³ä¾¿æ˜¯å°å°ˆæ¡ˆè¦ä½¿ç”¨ï¼Œè¦é‹è¡Œä¸€å€‹ Elasticsearch Cluster ä»æœ‰å®ƒçš„æœ€ä½è¦æ±‚åœ¨ã€‚ è‹¥æ˜¯é‡åˆ°è³‡æ–™é‡å¤§çš„æƒ…æ³ä¸‹ï¼Œå„ªåŒ– Elasticsearch Index æœ‰åŠ©æ–¼æå‡è³‡æºåˆ©ç”¨ï¼Œé€™èˆ‡ Elasticsearch åº•å±¤é‹ä½œå’Œ Schema å¦‚ä½• Mapping æœ‰é—œï¼Œé€™ä¹Ÿæ˜¯æœ¬æ¬¡åˆ†äº«çš„é‡é»ã€‚ Index ç®¡ç†åˆ†å…©å¤§å¡Š Index å»ºç«‹ä¹‹å‰ è³‡æ–™é€²å…¥ Elasticsearh ä¹‹å¾Œ Index å»ºç«‹ä¹‹å‰ åœ¨è³‡æ–™é€²å…¥ Elasticsearh å»ºç«‹ Index ä¹‹å‰ï¼Œè³‡æ–™è©²è¢«å¦‚ä½•è™•ç†ï¼Ÿ å–¬å”åˆ†äº«äº†å¹¾å€‹å¸¸è¦‹æŠ€å·§: Dynamic Mapping Index Template Index Alias Dynamic MappingDynamic Mapping æ„æŒ‡ä¸€ç­†è³‡æ–™é€²å…¥ Elasticsearch åš indexing æ™‚ï¼Œè‹¥è©²ç­†è³‡æ–™æ¬„ä½æ²’æœ‰åœ¨ Mapping äº‹å…ˆè¢«å®šç¾©å¥½ï¼ŒElasticsearch æœƒè‡ªå‹•æ ¹æ“šé€é€²ä¾†çš„è³‡æ–™å‹åˆ¥é€²è¡Œåˆ¤æ–·ï¼Œä¾ç…§é è¨­ or æŒ‡å®šçš„è¦å‰‡ç”¢ç”Ÿæ–°æ¬„ä½çš„ Mapping è¨­å®šã€‚ Dynamic Mapping çš„è³‡æ–™å‹åˆ¥åˆ¤æ–·è¦å‰‡ä¸‹æ–¹è¡¨æ ¼ç‚º Elasticsearch å°é€é€²ä¾†çš„è³‡æ–™é è¨­åˆ¤å®šçš„è¦å‰‡ JSON è³‡æ–™å‹æ…‹ åˆ¤å®šæˆ Elasticsearch çš„è³‡æ–™å‹æ…‹ null ä¸æœƒç”¢ç”Ÿå°æ‡‰çš„æ¬„ä½ true or false boolean æµ®é»æ•¸ float æ•´æ•¸ long ç‰©ä»¶ object é™£åˆ— æ ¹æ“šé™£åˆ—å…§çš„è³‡æ–™å‹åˆ¥æ±ºå®š -&gt; è£œå……ï¼šç²¾ç¢ºä¾†èªªæ˜¯ é™£åˆ—ä¸­çš„ç¬¬ä¸€å€‹éç©ºå€¼çš„è³‡æ–™å‹åˆ¥ å­—ä¸² 1. æ˜¯å¦ç‚ºæ—¥æœŸæ ¼å¼ 2. æ˜¯å¦ç‚º double or long æ ¼å¼ 3. è‹¥éä¸Šè¿°å…©ç¨®æ ¼å¼ï¼Œæœƒç›´æ¥æŒ‡æ´¾ text å‹åˆ¥ï¼Œæ­é… keyword å‹åˆ¥çš„ä½œé™„åŠ æ¬„ä½(sub-field) æ›´å¤šç´°ç¯€å¯åƒè€ƒæ–‡ä»¶ è£œå……: text èˆ‡ keyword çš„å·®ç•° åœ¨ Elasticsearch ä¸­ï¼Œtext ç”¨æ–¼ç´”æ–‡å­—çš„è™•ç†ï¼Œè€Œ keyword å¯é‡å°å­—ä¸²é€²è¡Œæ’åºæˆ–æ˜¯èšåˆ(Aggregation)ç­‰é€²éšé¡å‹çš„æ“ä½œã€‚ ä¸Šè¿°æ¯”è¼ƒåœ–è¡¨ä¸­å¯è§€å¯Ÿåˆ° Elasticsearch å°å­—ä¸²åš Dynamic Mapping æ™‚ï¼Œè‹¥éæ—¥æœŸ or double or long çš„æ ¼å¼ï¼Œé è¨­æœƒçµ¦text å’Œ keyword å…©ç¨®å‹åˆ¥çš„è³‡æ–™æ¬„ä½ï¼Œé¡ä¼¼ç”¨ç©ºé–“ä¾†æ›å–æœªä¾†æ“ä½œçš„ä¾¿åˆ©æ€§ã€‚ å–¬å”åœ¨é€™é‚Šå»ºè­°ç›¡é‡ä½¿ç”¨è‡ªå·±é å…ˆå®šç¾©å¥½ mapping çš„è³‡æ–™å‹åˆ¥ï¼Œä»¥ä¸Šè¿°çš„å­—ä¸²å‹åˆ¥ç‚ºä¾‹ï¼š Elasticsearch é è¨­æœƒçµ¦å®šå…©å€‹åˆ†åˆ¥ç‚º text å’Œ keyword å…©ç¨®å‹åˆ¥çš„æ¬„ä½ï¼Œç­‰æ–¼æ˜¯åœ¨è³‡æ–™è™•ç†ä¸Šæœƒå¤šåšä¸€ä»¶äº‹æƒ…ï¼Œè‹¥é å…ˆå®šç¾©å¥½ç‰¹å®šæ¬„ä½éœ€è¦çš„å­—ä¸²å‹åˆ¥(å¦‚ç›´æ¥æŒ‡å®štext æˆ– keyword)ï¼Œå¯ä»¥ç¯€çœä¸å¿…è¦çš„ç©ºé–“æµªè²»ã€‚ Dynamic Mapping çš„å¥½è™•æœ‰äº›å ´æ™¯ä¹‹ä¸‹å¾ˆé›£é åˆ¤ä¸€å®šåªæœ‰å“ªäº›æ¬„ä½ï¼Œä¾‹å¦‚ï¼šç³»çµ±çš„ Logï¼Œé€™æ™‚ Dynamic Mapping çš„å„ªé»å°±æ˜¯å°é€é€²ä¾†çš„è³‡æ–™åš Mapping è¨­å®šï¼Œå‹•æ…‹åœ°å»ºç«‹æ¬„ä½ã€‚ å¦å¤–è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œåœ¨åŸå§‹è³‡æ–™æ¬„ä½ä¸å­˜åœ¨çš„æƒ…æ³ä¸‹ï¼ŒDynamic Mapping æ˜¯ç”±ç¬¬ä¸€ç­†é€é€² Elasticsearch çš„è³‡æ–™ä¾†åšæ±ºå®šã€‚ Dynamic Mapping çš„å¯¦ç”¨æŠ€å·§ ä»¥ log ç‚ºä¾‹ï¼Œè‹¥æ˜ç¢ºçŸ¥é“å­—ä¸²è¦å¦‚ä½•è¢«è™•ç†ï¼Œåªæœ‰å°‘æ•¸ç‰¹å®šæ¬„ä½æœƒæ˜¯ text çš„è©±ï¼Œå¯å°‡é è¨­çš„å­—ä¸²æ¬„ä½æŒ‡å®šç‚ºkeywordï¼Œåªå°ç‰¹å®šæ¬„ä½å®£å‘Šç‚º text -&gt; çµåˆ Dynamic Template è¨­ã€‚å®še.g. strings_as_keywordsï¼Œè¨­å®šç´°ç¯€å¯åƒè€ƒå–¬å”çš„éµäººè³½æ–‡ç«  è‹¥é è¨­é€é€² Elasticsearch çš„è³‡æ–™éå¸¸æ˜ç¢ºæ˜¯ textï¼Œç„¡éœ€ç”¨åˆ°åƒæ˜¯ Aggregation, Sorting or Scriptç­‰æ“ä½œï¼Œå°±ä¸å¿…ä¿ç•™ keyword é¡å‹çš„ sub-field è‹¥è³‡æ–™ç‰¹æ€§å¤§å¤šçš„æ•¸å€¼æ¬„ä½å¸¶æœ‰å°æ•¸é»ï¼Œä¸”ç©ºé–“ä¸¦éç‚ºæœ€å¤§è€ƒé‡ä¸‹ï¼Œå¯å°‡æ•¸å€¼é è¨­ç‚º double or float -&gt; é¿å…ä¸€é–‹å§‹é€²ä¾†çš„è³‡æ–™æ•´æ•¸ï¼Œå¾ŒçºŒé€é€² Index è³‡æ–™å»å¸¶æœ‰å°æ•¸çš„è©±å°±ç„¡æ³•å¯«å…¥ Index è£¡(å› ç‚ºåœ¨ Elasticsearch çš„ Index ä¸€æ—¦åšå¥½ Mapping ï¼Œå³ç„¡æ³•ä¿®æ”¹)ï¼Œæœ‰æ•ˆæ¸›å°‘é€™é¡éé æœŸçš„ç‹€æ³ç™¼ç”Ÿã€‚ ä¾çµ±ä¸€æ¬„ä½å‘½åè¦å‰‡ï¼Œå¥—ç”¨è³‡æ–™å‹æ…‹ è‹¥å€¼ç‚ºæ—¥æœŸæ™‚é–“ -&gt; ä»¥ _datetime åšçµå°¾ã€‚ e.g. create_datetime, modify_datetime è‹¥å€¼ç‚ºæ•´æ•¸ -&gt; ä»¥ _count åšçµå°¾ã€‚ e.g. play_count å°‡ç‰¹å®šå½¢æ…‹å®šç¾©æ–¼æ¬„ä½é–‹é ­ -&gt; long_, double_, int_ ç­‰ç­‰ï¼Œä¾ç…§åœ˜éšŠé”æˆçš„å…±è­˜å®šç¾©å¥½å‘½åè¦å‰‡ å¿…è¦çš„åš´è¬¹ï¼Œé¿å…æ„å¤– å°å¿ƒè¨­å®š Dynamic Templateï¼Œç‰¹åˆ¥æ˜¯ä¿®æ”¹ Dynamic Templateï¼Œå¯èƒ½æœƒé‡åˆ° Runtime Error (Indexing æ™‚æ‰æœƒå ±éŒ¯) é—œé–‰ Dynamic Field Mapping: æœªäº‹å…ˆå®šç¾©çš„æ¬„ä½ï¼Œé€²å…¥ Elasticsearch åš indexing æ™‚ dynamic: false: é€™é‚Šéœ€æ³¨æ„ï¼Œå³ä¾¿è¨­å®šç‚º falseï¼Œä»æœƒå­˜åœ¨ index çš„ _source è£¡é¢ï¼Œä¸åƒ…ä¸æœƒè¢« index ä¸”æœå°‹æ™‚æ²’æœ‰ä½œç”¨ dynamic: strict: æ­¤ç‚ºè¼ƒä½³çš„åšæ³•ï¼Œåœ¨ indexing æ™‚é‡åˆ°æœªè¢«å®£å‘Šçš„æ¬„ä½ç›´æ¥æ‹‹å‡º exeception é—œé–‰ æ—¥æœŸ å’Œ æ•¸å€¼ çš„è‡ªå‹•åˆ¤æ–·ï¼š é¿å…æ‰‹èª¤ç”¢ç”Ÿéé æœŸçš„ Mappingï¼Œé€ æˆç„¡æ³•ä¿®æ”¹çš„ç‹€æ³ Index Templateä¸€èˆ¬è¼ƒå¥½çš„åšæ³•æ˜¯å…ˆä¾åˆé©çš„ settings åŠ mapping ä¾†è¨­ç½® Indexï¼Œä½†éš¨è‘—æ™‚é–“å¢åŠ ï¼Œè³‡æ–™é‡ä¹Ÿæœƒè·Ÿè‘—å¢é•·ï¼ŒIndex ä¹Ÿæ‡‰è©²è¦éš¨è‘—æ™‚é–“ç”¢ç”Ÿæ–°çš„ï¼Œéœ€è¦é€é Index Template ä¾†æœ‰æ•ˆç®¡ç†é€™äº›å‹•æ…‹å¢é•·çš„ Index Index Template çš„å¥½è™•ç•¶æ–°çš„ Index è¦è¢«å»ºç«‹æ™‚ï¼Œè‹¥ç¬¦åˆé å…ˆè¨­å®šå¥½çš„ Index Template ä¸­çš„ index_patternï¼ŒElasticsearch æœƒä¾æ“š Template çš„è¨­å®šä¾†å»ºç«‹ Index Index Template ä½¿ç”¨å»ºè­°å–¬å”åˆ†äº«å€‹å»ºè­°ï¼š é‡å° Index Template çš„ index_pattern å’Œ priority ä¾†å»ºç«‹çµæ§‹åŒ–çš„ç®¡ç†æ–¹å¼ï¼Œe.g. index_pattern è¨­ç‚ºlogs-xxxx-* ï¼Œé€™é¡è¦å‰‡æ“æœ‰ç¹¼æ‰¿æ•ˆæœï¼Œå¦‚: logs-20210101-v1 èˆ‡ logs-20210101-v2 å¯å¥—ç”¨æ–¼åŒå€‹ Template(pattern ç‚º logs-xxxx-*) version ä¸€å®šè¦çµ¦ï¼ŒåŒæ™‚å»ºè­°å°‡è©² Template çš„åŸºæœ¬æè¿°ä»¥åŠæœ€å¾Œæ›´æ–°æ™‚é–“è¨˜éŒ„æ–¼ _meta ä¹‹ä¸­ï¼Œä»¥ä¾¿æ–¼ç¶­è­·èˆ‡ç®¡ç† æŠ½å‡ºå¯å…±ç”¨çš„è¨­ç½®ï¼Œè®Šæˆ Component Templateï¼Œå¢åŠ é‡ç”¨æ€§ï¼Œç®¡ç†èµ·ä¾†æ›´å®¹æ˜“ã€‚ å–„ç”¨ Simulate API ä¾†é©—è­‰ Index Template ç”¢ç”Ÿçš„çµæœåŠå½±éŸ¿ç¯„åœ å¯å¤šåƒè€ƒå®˜æ–¹åŠä»–äººçš„ Index Template è¨­è¨ˆæ–¹å¼ Index Aliasé€éåˆ¥åä¾†å­˜å–ä¸€å€‹ or å¤šå€‹ Indexï¼Œå–¬å”æä¾›å¹¾å€‹å»ºè­°ï¼š ç›¡é‡å…¨é¢ä½¿ç”¨ Index Alias ä¾†å­˜å– Index: è‹¥é time-series indexï¼ŒåŸå§‹ Index å¯åŠ å…¥ _v1 é€™é¡çš„ç‰ˆæœ¬è™Ÿï¼ŒAlias å¯ç”¨åŸå§‹åç¨±ï¼Œå¦‚ï¼šsong alias æŒ‡å‘ song_v1 çš„ Index =&gt; æœªä¾†è¦ä¿®æ”¹æˆ–æ˜¯ reindex æ™‚ï¼Œè¼ƒä¸å½±éŸ¿ä½¿ç”¨ç«¯ å–„ç”¨ Index Alias æ­é… Filter Filter åœ¨ Elasticsearch æ˜¯ Cacheable çš„æœå°‹ç”¨æ³•ï¼Œç›¸è¼ƒä¸€èˆ¬çš„ queryï¼Œfilter å¯è¢« cacheï¼Œæ•ˆèƒ½ä¹Ÿè¼ƒä½³ Filter é¡ä¼¼æ–¼é—œé€£å¼è³‡æ–™åº«çš„ View é©åº¦å°‡ filter å°è£æ–¼ alias ä¸­ï¼Œé™ä½ä½¿ç”¨ç«¯çš„è¤‡é›œåŒ–æŸ¥è©¢ è³‡æ–™å­˜å–ç¯„åœçš„æ¬Šé™ç®¡ç†ï¼š é™åˆ¶ä½¿ç”¨è€…åªèƒ½å­˜å–ç‰¹å®šå­é›†åˆ or ç‰¹å®šæ™‚é–“ç¯„åœçš„è³‡æ–™ï¼Œé©åº¦æ­é… security æ¬Šé™æ§ç®¡ï¼Œå¯é¿å…ä½¿ç”¨è€…å­˜å–åˆ°ä¸æ‡‰å–å¾—çš„è³‡æ–™ï¼Œæˆ–æ˜¯ä¸€å£æ°£æŸ¥è©¢å¤ªå¤šçš„èˆŠè³‡æ–™ï¼Œå°æ•ˆèƒ½ç”¢ç”Ÿå½±éŸ¿ é…åˆ routing ä¾†æŒ‡å®šè³‡æ–™å¯«å…¥ç‰¹å®šçš„ shard: Elasticsearch æ˜¯ä¸€å€‹ Cluster çš„æ¶æ§‹ï¼Œä¸€èˆ¬ä¾†èªªéƒ½æœƒè¨­ç½®è¨±å¤š replicaionsï¼Œé€™äº› replicaions å¯èƒ½æœƒåˆ†æ•£æ–¼å¤šå°æ©Ÿå™¨ä¸Šã€‚ è³‡æ–™åœ¨ Indexing æ™‚ï¼Œæœƒä¾æ“š routing value æ±ºå®šè³‡æ–™è¦å¯«å…¥å“ªå€‹ shard ä¸Šé¢ï¼Œè‹¥æœ‰æŒ‡å®š routing valueï¼ŒåŒæ¨£ routing value çš„è³‡æ–™æœƒè¢«è¨ˆç®—æ”¾åˆ°ç›¸åŒçš„ shard ä¸Šï¼Œå°æ–¼ performance å„ªåŒ–èˆ‡ç®¡ç†è³‡æ–™éƒ½æœ‰å¹«åŠ© =&gt; e.g. ç›¸åŒä½¿ç”¨è€… or ç›¸åŒåœ°å€çš„è³‡æ–™å¯«å…¥ç›¸åŒçš„shard ä¸Šï¼Œå¯æå‡ routing çš„ cache hit rate é…åˆ Index Management Lifecycle Management (ILM): ä½¿ç”¨ ILM åŠŸèƒ½ä¾†ç®¡ç†æœƒéš¨æ™‚é–“å¢é•·çš„è³‡æ–™ï¼Œæ­é… Index Alias ä¾†åˆ‡æ›å¯«å…¥ Index æ™‚æŒ‡å®šçš„å¯¦é«” Index è³‡æ–™é€²å…¥ Elasticsearh ä¹‹å¾Œå¯«å…¥ Elasticsearh ä¹‹å¾Œï¼Œè¦è€ƒé‡çš„é¢å‘è®Šæˆå¦‚ä½•ç®¡ç†ä¿ç•™åœ¨ Elasticsearh çš„è³‡æ–™ Segment File çš„æ•¸é‡Elasticsearh çš„åº•å±¤ç”¨ Apache Lucene ä¾†å»ºç«‹ Indexï¼Œå»ºç«‹å¥½çš„ Index å¯¦éš›ä¸Šæ˜¯å¯«å…¥ç¡¬ç¢Ÿè£¡é¢ï¼Œä¹Ÿå°±æ˜¯ Segment Fileï¼ŒSegment File æ•¸é‡å¤šå¯¡ Elasticsearh æœ‰å½±éŸ¿ï¼Œæ•¸é‡è¶Šå¤šå° æŸ¥è©¢é€Ÿåº¦ å’Œ ç¡¬ç¢Ÿç©ºé–“ è¶Šä¸å¥½ã€‚ Shard çš„æ•¸é‡Elasticsearh Shard çš„æ•¸é‡å¤šï¼Œè¡¨è³‡æ–™è¢«åˆ‡åˆ†æˆå¾ˆå¤šå¡Šï¼Œå¯æ”¾ç½®åœ¨ä¸åŒå°æ©Ÿå™¨åšè™•ç†ï¼Œé€™æœ‰åŠ©æ–¼å¤§é‡å¯«å…¥(indexing) =&gt; æœ‰å¤šå°æ©Ÿå™¨åˆ†æ“”å¯«å…¥çš„å·¥ä½œï¼Œæ•… Shard è¶Šå¤šï¼Œindexing çš„é€Ÿåº¦æ„ˆå¿«ï¼Œä½†æŸ¥è©¢æˆæœ¬æ„ˆé«˜ï¼Œå–®ä¸€ shard æ„ˆå¤§ï¼Œå‰‡ Cluster çš„ Rebalance æˆæœ¬æ„ˆé«˜ Index çš„å¤§å°Index æ„ˆå¤§ï¼ŒæŸ¥è©¢æ•ˆç‡æ„ˆå¥½(è³‡æ–™éƒ½æ”¾åœ¨åŒå€‹ Index è£¡é¢)ï¼Œä½†æ˜¯æœƒå½±éŸ¿è³‡æ–™ç§»è½‰çš„ç­‰å¾…æ™‚é–“ï¼Œå¦‚ time-series è³‡æ–™å¯èƒ½æœƒä¾æ“šæ™‚é–“ç§»è½‰è‡³ä¸åŒçš„éšæ®µ(hot -&gt; warm -&gt; cold ç­‰ä¸åŒéšæ®µ) è³‡æ–™çš„æ–°èˆŠç¨‹åº¦æ–°è³‡æ–™é€šå¸¸ä½¿ç”¨é »ç‡è¼ƒé«˜ï¼Œæœƒçµ¦è¼ƒå¥½çš„ç¡¬é«”è³‡æºï¼Œè¼ƒèˆŠçš„è³‡æ–™å› ç‚ºä½¿ç”¨é »ç‡è¼ƒä½ï¼Œå¯é…ç½®è¼ƒå·®çš„ç¡¬é«”è³‡æº æ™‚é–“ç²’åº¦é‡ä¸Šè³‡æ–™é‡è¼ƒå¤§çš„æƒ…å½¢ï¼Œè§€å¯Ÿéå¾€çš„è³‡æ–™å»åˆ‡åˆ†è¼ƒå¤§çš„æ™‚é–“ç²’åº¦ï¼ŒæŸ¥çœ‹åŒ¯ç¸½çµæœï¼Œå¦‚ï¼šæ¯å¤©çš„ log æ•¸é‡ã€æ¯å¤©çš„éŠ·å”®é‡‘é¡ç­‰ç­‰ Index æ•¸é‡è³‡æºæœ‰é™ï¼Œç§»é™¤éèˆŠçš„è³‡æ–™ï¼Œåªä¿ç•™åŒ¯ç¸½çµæœ è³‡æ–™çš„å®‰å…¨æ€§ å¦¥å–„è¦åŠƒå­˜å–é™åˆ¶ è¨˜å¾—å‚™ä»½ï¼ Index ç”Ÿå‘½é€±æœŸç®¡ç†ï¼š Index Lifecycle Managementå¤§éƒ¨åˆ†å­˜åœ¨ Elasticsearch çš„è³‡æ–™éƒ½æ˜¯éš¨è‘—æ™‚é–“è®ŠåŒ–çš„ã€‚éš¨è‘—æ™‚é–“å¢é•·ï¼Œå¦‚ä½•ç®¡ç†ä¸”æœ‰æ•ˆåˆ©ç”¨ä¿å­˜åœ¨ Elasticsearch çš„è³‡æ–™é¡¯å¾—æ ¼ç‚ºé‡è¦ï¼Œå®˜æ–¹å°æ–¼æ™‚é–“åºçš„è³‡æ–™å»ºè­°æ¡ç”¨ç†±æº«å†·æ¶æ§‹æ­é…Index Lifecycle Management é€²è¡Œç®¡ç† ç†±æº«å†·æ¶æ§‹ï¼š Hot-Warm-Cold Architectureåˆç¨±ä¸‰æº«æš–æ¶æ§‹(?)ï¼Œå®˜æ–¹çš„ Blog æœ‰æ›´è©³ç´°çš„è§£é‡‹ï¼Œé€™é‚Šç°¡å–®æ‘˜è¦ Hot Phase: æ­¤éšæ®µå­˜æ”¾æœ€æ–°çš„è³‡æ–™ï¼ŒåŒæ™‚ä½¿ç”¨æ©Ÿç‡ä¹Ÿæœ€é«˜ï¼Œæ‰€ä»¥æœƒè² è²¬è™•ç† indexing çš„è³‡æ–™ï¼Œé‚„æœ‰é »ç¹çš„æœå°‹è«‹æ±‚ =&gt; é…ç½®è¼ƒå¤šçš„ primary shardã€‚ Rollover: ç”±æ–¼è³‡æ–™æœƒéš¨æ™‚é–“å¢é•·ï¼Œé€é Rollover çš„æ©Ÿåˆ¶ï¼Œå° Index é€²è¡Œ Rotateï¼Œé€²è€Œç”¢ç”Ÿæ–°çš„ Index ä¾†æ¥æ–°çš„è³‡æ–™ï¼ŒåŸå…ˆçš„ Index å‰‡æœƒé€²å…¥ä¸‹å€‹éšæ®µ Warm Phase: ç•¶ä¸€ä»½ Index çš„è³‡æ–™æˆé•·åˆ°ä¸€å®šçš„é‡ or å·²ç¶“éäº†ä¸€æ®µæ™‚é–“ï¼Œå‰‡å°‡è©²è³‡æ–™è½‰åˆ° Warm éšæ®µï¼Œé€™æ™‚çš„è³‡æ–™æ˜¯ read-only çš„ï¼Œä¹Ÿå°±æ˜¯ä¸è™•ç†å¯«å…¥ Index çš„è«‹æ±‚ï¼Œåªèƒ½è¢«æœå°‹ã€‚ Cold Phase: ç•¶ä¸€ä»½ Index è³‡æ–™ç¶“æ­·ä¸€æ®µè¼ƒé•·çš„æ™‚é–“ï¼Œä½¿ç”¨é »ç‡è¼ƒå°‘æ™‚ï¼Œå°‡å…¶è½‰ç§»åˆ° Cold éšæ®µï¼Œä¸¦ä¸”é‡å°é€™äº›è³‡æ–™é€²è¡Œå†·å‡(Freeze)è™•ç†ï¼Œæ­¤æ™‚è³‡æ–™æœƒä»¥æœ€ç¯€çœç³»çµ±è³‡æºçš„ç‹€æ…‹ä¸‹é€²è¡Œä¿å­˜ï¼ŒæŸ¥è©¢çš„é€Ÿåº¦åˆæœƒæ¯” Warm éšæ®µä¾†å¾—æ›´æ…¢ã€‚ Delete: å°ä¸å†éœ€è¦å­˜æ”¾æ–¼ Elasticsearch çš„ index é€²è¡Œåˆªé™¤(å¯è¨­å®šå‚™ä»½æˆåŠŸå¾Œæ‰ç§»é™¤ Index) å¿«ç…§é€±æœŸç®¡ç†: Snapshot Lifecycle Management(SLM) å¯è¨­å®šä»»å‹™åšå®šæœŸå‚™ä»½ å¯è¨­å®šå‚™ä»½çš„ä¿å­˜æ™‚é–“èˆ‡æ•¸é‡ -&gt; ç¢ºä¿å‚™ä»½ä½”ç”¨çš„ç©ºé–“ä¸æœƒç„¡é™åˆ¶å¢é•· Elasticsearch ç›¸é—œè¡“èª Node: Elasticsearch å¯¦ä¾‹(Instance)ï¼Œå¯ä»¥çœ‹æˆå¢é›†(Cluster)ä¸­çš„ä¸€å€‹ç¯€é»ï¼Œä¸€å€‹ Node ç‚ºä¸€å€‹ processï¼Œä¸€èˆ¬æƒ…æ³ä¸‹ï¼šä¸€å°æ©Ÿå™¨åŸ·è¡Œä¸€å€‹ Elasticsearch çš„ processã€‚ è£œå……ï¼šå®˜æ–¹å»ºè­°ä¸€å°æ©Ÿå™¨çš„ JVM heap size ä¸è¶…é 32G Cluster: è¡¨ä¸€å€‹å¢é›†ï¼Œå¢é›†ä¸­åŒ…å«å¤šå€‹ç¯€é»ï¼Œç¯€é»ä¹‹é–“æœƒåˆ†å·¥è™•ç†ã€æˆ–åŸ·è¡Œå‚™æ´ä»»å‹™ Index: å¯è¦–ç‚ºä¸€å€‹è³‡æ–™åº«ï¼Œæ“æœ‰1~å¤šå€‹ shard (åˆ†ç‰‡)ï¼Œè³‡æ–™æœƒè¢«åˆ†é…åˆ°é€™äº› shard ä¸­ Shard: ä¸€å€‹ Lucene index çš„å„²å­˜å–®ä½ï¼Œè£¡é¢å­˜æœ‰å¤šå€‹ segmentsï¼ŒåŒæ™‚ä¹Ÿæ˜¯ Cluster è³‡æ–™æ¬ç§»çš„æœ€å°å–®ä½ Segment: å¯¦éš›å¯«å…¥ Disk çš„ Lucene index çš„å”¯ç¨æª”æ¡ˆ Document: æŒ‡ Elasticsearch ä¸€ç­†ç­†çš„è³‡æ–™ Elasticsearch å¦‚ä½•ä¿å­˜è³‡æ–™ï¼Ÿä¸Šåœ–æºè‡ªå–¬å”ç°¡å ±ï¼Œè§£é‡‹ Elasticsearch å­˜æ”¾è³‡æ–™çš„æ•´å€‹æ¶æ§‹ - elasticsearch persistence model å¾ä¸Šé¢åˆ†å±¤çš„æ¶æ§‹åœ–ä¾†çœ‹ï¼Œè³‡æ–™å¯«å…¥ Elasticsearch æ™‚ï¼Œå›  Elasticsearch é€é Lucene åš indexing æ™‚ï¼Œå¤§éƒ¨åˆ†çš„æ™‚é–“éƒ½æ˜¯ä¿å­˜åœ¨è¨˜æ†¶é«”ï¼Œç¶“é Refresh 1 ç§’(é è¨­æ˜¯1ç§’)ï¼Œæ‰èƒ½åœ¨ Elasticsearch ä¸­æŸ¥è©¢åˆ°ï¼Œæ»¿ 30mins or 512mb æ™‚æ‰æœƒåŸ·è¡Œ Flushï¼Œå°‡è³‡æ–™å¯«åˆ° Disk è£¡é¢ã€‚ ç‚ºé¿å…è³‡æ–™éºå¤±(çœŸæ­£å¯«å…¥ Disk è€Œéç•™åœ¨è¨˜æ†¶é«”)ï¼ŒElasticsearch æœƒå…ˆå¯« Translog(æ¯ 5 ç§’å¯«ä¸€æ¬¡) åˆ° Disk ä¸Šã€‚ å³ä¾¿æ˜¯ Elasticsearch é è¨­çš„é…ç½®é‚„æ˜¯æœ‰å¯èƒ½ç™¼ç”Ÿè³‡æ–™éºå¤±çš„ç‹€æ³ï¼Œæ‰€ä»¥è¦è¨­ç½® replica æ‰èƒ½åœ¨ç™¼ç”Ÿè³‡æ–™éºå¤±æ™‚é‚„åŸè³‡æ–™ã€‚ Elasticsearch å…¶ä»–å„ªåŒ–æ–¹æ³•Index æ•ˆèƒ½å„ªåŒ– Indexing å¤§é‡è³‡æ–™æ™‚ï¼Œå–„ç”¨ bulk request æ¸›å°‘ä¾†å› indexing çš„æ¬¡æ•¸ =&gt; ä¸éè¦æ³¨æ„ bulk ä¸€æ¬¡å¯«å…¥çš„è³‡æ–™é‡éå¤§å¯èƒ½æœƒåƒå…‰æ‰€æœ‰çš„è¨˜æ†¶é«” å–„ç”¨ multi-thread / multi-worker åš indexing èª¿ä½ or æš«æ™‚é—œé–‰ refrersh_interval æŒ‡å®š routing æ–¹å¼ï¼Œæ¸›å°‘ thread æ•¸é‡ ç¬¬ä¸€æ‰¹è³‡æ–™åš indexing æ™‚ï¼Œå…ˆä¸è¨­å®š replica é—œé–‰ java process swapping èª¿é«˜ indexing buffer å¤§å° èª¿æ•´ Translog çš„ Flush è¨­å®šï¼Œæ¸›å°‘ Disk I/O æœå°‹å„ªåŒ– å–„ç”¨ä¸¦å°‡ filter æ¢ä»¶åˆ‡å‰²ï¼Œå¢åŠ  cache åˆ©ç”¨ç‡ æœå°‹æ¬„ä½æ„ˆå°‘æ„ˆå¥½ å°‘ç”¨ join, nested, regex å°‘ç”¨ script ä¾æ“š Aggregation çš„éœ€æ±‚ Pre-index è³‡æ–™ ç›¡é‡ä½¿ç”¨ keyword ç•¶ identifier å‹æ…‹ å°‡ä¸æœƒå†ä½¿ç”¨çš„ index åšå¼·åˆ¶åˆä½µ åœ¨ query æˆ– aggregation éœ€æ±‚é‡è¼ƒé«˜çš„ç’°å¢ƒï¼Œå®‰æ’ç‰¹å®šçš„ cordinating Node æ§åˆ¶ replica æ•¸é‡ï¼Œä¸è¨­éå¤šå¾— replica å°çµæœ¬æ¬¡ç·šä¸Šç›´æ’­æ´»å‹•æ»¿æ»¿çš„ä¹¾è²¨ï¼Œå¾ Elasticsearch çš„æ¦‚å¿µã€åŸç†åˆ°æ‡‰ç”¨æ–¹æ³•ï¼Œé€™éº¼å¤šçš„è³‡è¨Šé‡å¯¦åœ¨å¾ˆé›£åœ¨ä¸€æ™‚ä¹‹é–“æ¶ˆåŒ–ï¼Œé€™å…©é€±é€±æœ«èŠ±äº†é»æ™‚é–“æŠŠåˆ†äº«å…§å®¹æ•´ç†åˆ°æœ¬ç¯‡æ–‡ç« ï¼Œéå¸¸æ„Ÿè¬å–¬å”åœ¨æœ¬æ¬¡æ´»å‹•åˆ†äº«é€™éº¼å¤šå¯¶è²´çš„å¯¦æˆ°ç¶“é©—ï¼Œä¹‹å¾Œå¯ä»¥æŠŠé€™äº›çŸ¥è­˜æ…¢æ…¢çš„é‹ç”¨åœ¨å¯¦éš›å·¥ä½œä¸Šï¼ è³‡æº Will ä¿å“¥çš„æŠ€è¡“äº¤æµä¸­å¿ƒ - Elasticsearch Index ç®¡ç†èˆ‡æ•ˆèƒ½å„ªåŒ–æŠ€å·§ [ç°¡å ±] å–¬å” Elasticsearch Index ç®¡ç†æŠ€å·§èˆ‡æ•ˆèƒ½å„ªåŒ– å–¬å”æ•™ Elastic - 10 - ç®¡ç† Index çš„ Best Practices (2/7) - ä¸‰æº«æš–æ¶æ§‹ - Hot Warm Cold Architecture","link":"2021/06/06/DevOps/ELK/Elasticsearch%20Index%20%E7%AE%A1%E7%90%86%E8%88%87%E6%95%88%E8%83%BD%E5%84%AA%E5%8C%96%E6%8A%80%E5%B7%A7/"},{"title":"[ELK] å¦‚ä½•å‚™ä»½ Elastic Cloud çš„ Snapshot è‡³ AWS S3","text":"å‰è¨€Elastic Cloud æä¾›å¿«ç…§ (Snapshot) æ©Ÿåˆ¶ä¾†å‚™ä»½ Cluster çš„è³‡æ–™ï¼Œæˆ‘å€‘å¯ä»¥å°‡å…¶é€£æ¥è‡³ AWS S3 ä¸Šé€²è¡Œä¿å­˜ã€‚ æœ¬æ–‡å°‡ç¤ºç¯„å¦‚ä½•å°‡ Elastic Cloud Snapshot å­˜æ”¾è‡³ AWS S3 æœå‹™ï¼Œä¸¦è¨­ç½® Policy é€²è¡Œå®šæœŸå‚™ä»½å·¥ä½œã€‚ æµç¨‹å¤§ç¶± AWS IAM è¨­ç½® AWS S3 Bucket è¨­ç½® Elastic Cloud Credential è¨­ç½® Elastic Cloud Repositories å’Œ Policy è¨­ç½® å¯¦ä½œAWS IAM è¨­ç½®å»ºç«‹ User é€²å…¥ AWS Console çš„ IAM æœå‹™é é¢ é»æ“Šå·¦æ–¹æ¬„ä½çš„ Userï¼Œæ‰¾åˆ°ä¸Šæ–¹çš„ Add User æŒ‰éˆ•å»ºç«‹å°ˆé–€æ“ä½œ S3 çš„ User å»ºç«‹æˆåŠŸå¾Œæœƒç”¢ç”Ÿæ†‘è­‰è³‡è¨Šï¼Œé»æ“Š Download .csv ä¸‹è¼‰è‡³è‡ªå·±é›»è…¦ å»ºç«‹ Policy é»æ“Šå·¦æ–¹æ¬„ä½çš„ Policiesï¼Œæ‰¾åˆ°ä¸Šæ–¹çš„ Add Policy æŒ‰éˆ•å»ºç«‹å°ˆé–€æ“ä½œ S3 çš„ Policy è²¼ä¸‹ä¸‹æ–¹ JSON æ ¼å¼çš„è³‡æ–™ï¼Œå®šç¾©å¥½ Policy123456789101112131415161718{ &quot;Version&quot;: &quot;2012-10-17&quot;, &quot;Statement&quot;: [ { &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: &quot;s3:ListAllMyBuckets&quot;, &quot;Resource&quot;: &quot;arn:aws:s3:::*&quot; }, { &quot;Effect&quot;: &quot;Allow&quot;, &quot;Action&quot;: &quot;s3:*&quot;, &quot;Resource&quot;: [ &quot;arn:aws:s3:::elastic-cloud-snapshot-demo&quot;, &quot;arn:aws:s3:::elastic-cloud-snapshot-demo/*&quot; ] } ]} å…¶ä¸­ï¼Œæœ¬æ–‡ä»¥ elastic-cloud-snapshot-demo ç‚ºè¦å­˜æ”¾ Snapshot çš„ S3 Bucket Nameï¼Œå¯è‡ªè¡Œæ›¿æ›æˆè‡ªè¨‚çš„åç¨±ã€‚ è‡ªè¨‚ Policy Name å¾Œé»æ“Š Create Policy å®Œæˆå»ºç«‹ å°‡ç›®æ¨™ Policy Attach è‡³æ–°å»ºç«‹çš„ User é¸æ“‡ Attach æœå°‹ä¸¦é¸æ“‡å‰›æ‰æ–°å»ºçš„ User AWS S3 Bucket è¨­ç½® å»ºç«‹ S3 Bucketï¼Œè‡ªè¨‚ Bucket åç¨±ï¼Œæœ¬æ–‡ç¯„ä¾‹ç‚º elastic-cloud-snapshot-demoï¼Œå¯è‡ªè¡Œæ›¿æ›æˆè‡ªè¨‚çš„åç¨±ã€‚ Elastic Cloud Credential è¨­ç½® é€²å…¥ Elastic Cloud å¾Œå°ç®¡ç†ä»‹é¢ï¼Œé¸æ“‡è¦å‚™ä»½è‡³ S3 çš„ Cluster â†’ å·¦æ–¹åˆ—è¡¨ä¸­çš„ Security â†’ é»æ“Šå³ä¸‹ Elasticsearch Keystore çš„ Add settings æŒ‰éˆ• æ·»åŠ å‰›æ‰æ–¼ AWS IAM æœå‹™ä¸­æ–°å»º User æ™‚æ‰€è¼‰çš„æ†‘è­‰è³‡è¨Šï¼Œè£¡é¢æœƒåŒ…å« Access Key å’Œ Secret Keyï¼Œ éœ€è¦å°‡é€™äº›è³‡è¨Šå¡«å…¥ KeyStore ä¸­ã€‚ å…©è€…çš†å¡«å…¥å¾ŒæŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦æœ‰é¡¯ç¤ºæ–¼ç•«é¢ä¸­ Elastic Cloud Repositories å’Œ Policy è¨­ç½® æ–¼ Elastic Cloud ä¸­è¨­ç½® Registries è‡ªè¨‚ Repository åç¨± â†’ é¸æ“‡ S3 â†’ é»æ“Š Next å¡«å…¥ Client åç¨± (æœ¬æ–‡ç‚º default) â†’ è¼¸å…¥ç›®æ¨™çš„ S3 Bucket åç¨± (æœ¬æ–‡ç‚º elastic-cloud-snapshot-demo)ï¼Œå…¶é¤˜åƒæ•¸å¯ä¾è‡ªèº«éœ€æ±‚åšèª¿æ•´ï¼Œè¨­å®šå®Œé»æ“Š Register æŒ‰éˆ•å®Œæˆå»ºç«‹ã€‚ å»ºç«‹æˆåŠŸå¾Œé¸æ“‡å‰›å‰›å»ºå¥½çš„ Repositoryï¼Œå¯é»æ“Šä¸‹æ–¹çš„ Verify repository æª¢é©—æ˜¯å¦æˆåŠŸé€£çµ è‹¥æˆåŠŸé€£çµæœƒå‡ºç¾ä¸‹åœ–çš„åœ–ç¤º å°è©² Repository æ–°å¢å°æ‡‰çš„ Policy è¼¸å…¥è‡ªè¨‚çš„ Policy Name (æœ¬æ–‡ç‚º elastic-cloud-cluster-backup) â†’ è¼¸å…¥è‡ªè¨‚çš„ Snapshot Name (æœ¬æ–‡ç‚º &lt;cluster-daily-snap-{now/d}&gt; ) â†’ é¸æ“‡ç›®æ¨™ Repository â†’ è¨­ç½® Schedule æ’å®šå‚™ä»½çš„é »ç‡ é¸æ“‡å‚™ä»½ä¾†æº Index (ä¹Ÿå¯ä»¥é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å•Ÿ all data åš å…¨é¸) æœ€å¾Œç¢ºèªä¸€ä¸‹è¨­ç½®çš„ Policy è³‡è¨Š è¨­ç½®æˆåŠŸå¾Œå¯ä»¥å› Snapshot é é¢æŸ¥çœ‹æ˜¯å¦æœ‰å­˜åœ¨ä¾å‰›å‰›è¦å‰‡æ‰€å»ºå¥½çš„ Snapshot å›‰ï¼ å›åˆ° S3 Bucket æŸ¥çœ‹è³‡æ–™æ˜¯å¦æœ‰æˆåŠŸå‚™ä»½ ä»¥ä¸Šç‚ºå‚™ä»½ Elastic Cloud Snapshot è‡³ AWS S3 æœå‹™çš„æ•´å¥—æµç¨‹ã€‚ ç›¸é—œåƒè€ƒæ–‡ä»¶ Configure a snapshot repository using AWS S3 Repository Settings","link":"2021/03/13/DevOps/ELK/%5BELK%5D%20%E5%A6%82%E4%BD%95%E5%82%99%E4%BB%BD%20Elastic%20Cloud%20%E7%9A%84%20Snapshot%20%E8%87%B3%20AWS%20S3/"},{"title":"[ELK] Elasticsearch","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 16 å‰è¨€ç¹¼çºŒä¸Šä¸€ç¯‡çš„ELKç­†è¨˜ï¼Œæœ¬ç¯‡ä¸»è¦è¿‘ä¸€æ­¥ç­†è¨˜ELKä¸­çš„Elasticsearch ElasticesearchElasticesearchæ˜¯ä¸€å€‹åŸºæ–¼RESTful APIçš„æ¶æ§‹è¨­è¨ˆï¼Œä½¿ç”¨è€…æ‰€æœ‰çš„æ“ä½œéƒ½å¯ä»¥é€éHTTP Methodå¦‚ï¼šGET/POST/PUT/DELETEä¾†å®Œæˆã€‚å¯ä»¥ç°¡å–®çš„æŠŠå®ƒå®šç¾©æˆåˆ†æ•£å¼å¢é›†æ¶æ§‹çš„éé—œè¯å¼è³‡æ–™åº«ï¼Œå›é¡§ä¸€ä¸‹ä¸Šä¸€ç¯‡æ‰€æåˆ°çš„å¹¾å€‹é‡è¦åè©ï¼Œå¯ä»¥ç°¡å–®å°ç…§è³‡æ–™åº« node : server index : database type : table fields : columns documents : rows APIå¹¾å€‹é‡è¦è¡Œç‚º indexï¼š é‡å°æ•´å€‹documentï¼Œæ—¢å¯ä»¥æ–°å¢åˆå¯ä»¥æ›´æ–°ï¼› createï¼šåªæ˜¯æ–°å¢æ“ä½œï¼Œå¯ä»¥ç”¨PUTæŒ‡å®šIDï¼Œæˆ–POSTä¸æŒ‡å®šIDï¼› updateï¼šæŒ‡çš„æ˜¯éƒ¨åˆ†æ›´æ–°ï¼Œå®˜æ–¹åªæ˜¯èªªç”¨POSTï¼Œè«‹æ±‚bodyè£¡ç”¨scriptæˆ–docè£¡åŒ…å«documentè¦æ›´æ–°çš„éƒ¨åˆ†ï¼› deleteå’Œreadï¼šå°±æ˜¯ç™¼deleteå’Œgeté€™å…©ç¨®HTTP Methodäº† å¸¸ç”¨çš„æŒ‡ä»¤é€²å…¥Kibanaçš„ç®¡ç†ä»‹é¢ä¸­ï¼Œå·¦å´çš„å°è¦½åˆ—æ‰¾åˆ°ä¸€å€‹åç‚ºDev Toolsçš„éˆ•ï¼Œé»æ“Šä¹‹å¾Œå°±å¯ä»¥é–‹å§‹ä¸‹æŒ‡ä»¤å›‰ï¼ æŸ¥çœ‹clusterç‹€æ…‹å¦‚æœæƒ³æŸ¥çœ‹clusterçš„ç•¶å‰ç‹€æ…‹ï¼Œå¯ä»¥åœ¨Kibanaçš„ç®¡ç†ä»‹é¢åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤ 1GET _cluster/health æœƒå›å‚³ä¸€å€‹JSONæ ¼å¼çš„è³‡æ–™æ›´å¤šcluster healthå¯åƒè€ƒå®˜æ–¹æ–‡ä»¶æˆ–æ˜¯åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹æ•´å€‹clusterçš„ç‹€æ…‹ 1GET _cluster/state æŸ¥çœ‹nodeç‹€æ…‹å¦‚æœæƒ³æŸ¥çœ‹nodeçš„ç‹€æ…‹ 1GET _cat/nodes?v åœ¨é è¨­æƒ…æ³ä¸‹åªæœƒæœ‰ä¸€å€‹Nodeæ›´å¤šç”¨æ³•å¯ä»¥åƒè€ƒå®˜æ–¹æ–‡ä»¶: Nodes info APIã€cat nodes API æŸ¥çœ‹Indiceçš„ç›¸é—œè¨Šæ¯1GET _cat/indices?v ä¸Šåœ–ä¸­çš„æ¬„ä½ç´°ç¯€ health: ä»£è¡¨è³‡æ–™é»çš„å¥åº·ç‹€æ…‹ï¼Œredè¡¨è³‡æ–™æœ‰ç¼ºæç„¡æ³•ä½¿ç”¨;yellow è¡¨è³‡æ–™åªæœ‰ä¸€ä»½æ²’æœ‰shardï¼Œè‹¥å–®ä¸€çµé»å£æç„¡æ³•é€²è¡Œå›å¾©;greenè¡¨è³‡æ–™æœ‰ shard çš„å‚™æ´è‹¥å–®é»æå£ä¾ç„¶å¯ä»¥æ­£å¸¸é‹è¡Œæª¢ç´¢ status : æ˜¯å¦å•Ÿç”¨ index : index æª¢ç´¢åç¨± uuid : å”¯ä¸€è­˜åˆ¥ key pri : ä¸»è¦ shards æ•¸é‡ rep : å‰¯æœ¬ shards æ•¸é‡ docs.count : index ä¸‹ç¸½ç´€éŒ„ç­†æ•¸ docs.deleted : è³‡æ–™è¢«ç•°å‹•çš„æ¬¡æ•¸ store.size : å„²å­˜ä¸»è¦è³‡æ–™æ‰€ä½”ç”¨çš„ç©ºé–“ pri.store.size : å„²å­˜å‰¯æœ¬æ‰€ä½”ç©ºé–“ å‰›æ‰ä¸Šè¿°çš„æŒ‡ä»¤éƒ½æ˜¯åœ¨Kibanaä»‹é¢ä¸Šå»æ“ä½œï¼Œä¸éå…¶å¯¦ä¹Ÿå¯ä»¥é€écURLçš„æ–¹å¼ä¾†å–å¾—å›å‚³è³‡æ–™åˆ°è©²è¡ŒæŒ‡ä»¤å³é‚Šæœ‰å€‹æ¿æ‰‹çš„iconï¼Œé»æ“Šå¾Œæœƒè·³å‡ºä¸‹æ‹‰å¼é¸å–®ï¼Œé¸æ“‡Copy cURLï¼Œæ¥è‘—é–‹å•Ÿçµ‚ç«¯æ©Ÿï¼Œè²¼ä¸Šå‰›å‰›çš„cURL å…¶ä»–è£œå……shardsElasticsearchå¯ä»¥æŠŠä¸€å€‹å®Œæ•´çš„Indexåˆ†æˆå¤šå€‹åˆ‡ç‰‡(slice)ï¼Œæ¯å€‹åˆ‡ç‰‡(slice)ç¨±ä½œshardï¼Œå¥½è™•æ˜¯å¯ä»¥æŠŠä¸€å€‹å¤§çš„Indexæ‹†åˆ†æˆå¤šå€‹ï¼Œåˆ†å¸ƒåˆ°ä¸åŒçš„Node(ç¯€é»)ä¸Šï¼Œæ§‹æˆåˆ†å¸ƒå¼æœå°‹ï¼ŒåŠ å¿«è™•ç†é€Ÿåº¦ï¼Œé€éæ°´å¹³æ“´å±•(horizontally scale)å¢åŠ è³‡æ–™å„²å­˜çš„ç¸½é‡ã€‚ ä¸ééœ€è¦æ³¨æ„çš„æ˜¯: åˆ‡åˆ†å¤šå€‹shardæ˜¯åœ¨Indexçš„å±¤ç´šä¸Šé‹ä½œã€‚ä¹Ÿå°±æ˜¯èªªï¼Œsliceçš„æ•¸é‡åªèƒ½åœ¨Indexå‰µå»ºå‰æŒ‡å®šï¼Œå¦‚æœIndexå‰µå»ºå¾Œä¸èƒ½æ›´æ”¹ã€‚ æ¯å€‹shardå¯çœ‹ä½œæ˜¯ä¸€å€‹ç¨ç«‹çš„Index shardåˆ†å…©ç¨®é¡å‹ Primary shard: æ¯å€‹Documentéƒ½å­˜åœ¨ä¸€å€‹Primary shardã€‚æœå°‹documentæ™‚ï¼Œæœƒå…ˆåœ¨Primary shardä¸ŠåŠ ä¸Šç´¢å¼•å€¼ï¼Œç„¶å¾Œåœ¨æ­¤shardçš„æ‰€æœ‰å‰¯æœ¬(replicas)ä¸ŠåŠ ä¸Šç´¢å¼•å€¼ã€‚ç´¢å¼•(Index)å¯ä»¥åŒ…å«ä¸€å€‹æˆ–å¤šå€‹Primary shardï¼ˆé è¨­å€¼ç‚º5ï¼‰ã€‚å»ºå¥½Indexå¾Œï¼Œä¾¿ç„¡æ³•æ›´æ”¹Indexä¸­çš„Primary shardæ•¸é‡ã€‚ Replica shard: æ¯å€‹Primary shardå¯æ“æœ‰é›¶åˆ°å¤šå€‹Replica shardã€‚æœ‰å…©å€‹ç›®çš„ï¼š å¢åŠ ç³»çµ±Crashçš„å®¹å¿åº¦;å¦‚æœPrimary shardæ•…éšœï¼Œå¯ä»¥å°‡Replica shardè®Šæ›´ç‚ºPrimary shardã€‚é è¨­æƒ…æ³ä¸‹ï¼Œæ¯å€‹Primary shardéƒ½æœ‰ä¸€å€‹Replica shardï¼Œä½†å¯ä»¥åœ¨ç¾æœ‰Indexä¸Šå‹•æ…‹ä¿®æ”¹Replica shardæ•¸é‡ replicasä»£è¡¨Indexå‰¯æœ¬ï¼Œç™½è©±ä¸€é»å°±æ˜¯å‚™ä»½ï¼Œè€ŒElasticsearchå¯ä»¥å»ºç«‹å¤šå€‹Indexçš„å‰¯æœ¬ï¼ŒElasticsearché è¨­å°±æœƒå•Ÿç”¨replicaså€¼å¾—æ³¨æ„çš„æ˜¯ï¼šreplicaçš„æ•¸é‡æ˜¯å¯ä»¥å‹•æ…‹ä¿®æ”¹çš„ã€‚å‡è¨­ä¸€ç¨®æƒ…æ³ï¼Œè‹¥ä»Šå¤©åœ¨å…¶ä¸­ä¸€å°Node serverå£æ‰æ™‚ï¼Œå•Ÿç”¨å‚™ä»½çš„è³‡æ–™ï¼Œç”¨æœ€å¿«çš„é€Ÿåº¦é‚„åŸåŸå§‹è³‡æ–™ï¼Œé€™æ˜¯ä¸€ç¨®åœ¨ç½é›£å¾©åŸä¸Šå¸¸ç”¨çš„æ‰‹æ®µã€‚å‰¯æœ¬çš„ä½œç”¨ä¸€æ˜¯æé«˜ç³»çµ±çš„å®¹éŒ¯æ€§ï¼Œç•¶å€‹æŸå€‹Nodeæˆ–æŸå€‹Shardæå£æˆ–éºå¤±æ™‚å¯ä»¥å¾å‰¯æœ¬ä¸­æ¢å¾©ã€‚äºŒæ˜¯æé«˜Elasticsearchçš„æŸ¥è©¢æ•ˆç‡ï¼ŒElasticsearchæœƒè‡ªå‹•å°æœå°‹è¦æ±‚é€²è¡Œè² è¼‰å¹³è¡¡ã€‚ replicasç›¸é—œé‹ä½œ åœ¨Indexå±¤ç´šé€²è¡Œé…ç½®ã€‚åœ¨å»ºç«‹Indexæ™‚ï¼Œå¯é¸æ“‡æ¯å€‹shardå¯ä½œéœ€è¦å¤šå°‘å€‹replica replicasæ˜¯æ ¹æ“šIndexä¸­çš„shardè¤‡è£½çš„ï¼Œè¤‡è£½å‡ºæ–°çš„replica shard è¢«è¤‡è£½çš„shardè¢«ç¨±ä½œprimary shard primary shardå’Œreplica shardçš„é›†åˆç¨±ä½œreplication group ä¾†çœ‹å¼µç¯„ä¾‹æ¶æ§‹åœ–ä¸Šé¢çš„æ¶æ§‹åœ–å°‡ä¸€å€‹Indexåˆ†å‰²å‡ºå…©å€‹primary shardsï¼Œåˆ†åˆ¥åšå…©å€‹replica shardï¼Œè€Œprimary shardsèˆ‡å…¶è¡ç”Ÿå‡ºä¾†çš„replica shardså½¢æˆä¸€å€‹replication groupï¼Œæ•…æ­¤Indexæ¶µè“‹å…©çµ„replication groupæ¥è‘—ä¾†çœ‹replica shardæ˜¯å¦‚ä½•è¨­è¨ˆä¾†åšè³‡æ–™é‚„åŸä¸Šåœ–å¯çŸ¥ï¼Œreplica shardä¸æœƒè¢«æ”¾åœ¨åŸå§‹çš„primary shardï¼Œè€Œæ˜¯æ”¾åœ¨ä¸åŒå€‹Nodeè£¡é¢ï¼Œå¦‚primary shard Aåœ¨Node Aå…¶ç”¢ç”Ÿçš„å…©å€‹replica shardsæ”¾åœ¨Node Bï¼Œæ•…Node Aæœ‰å¤©çªç„¶ç„¡æ³•é‹ä½œæ™‚ï¼ŒNode Bä¸­è‡³å°‘é‚„æœ‰ä¸€å€‹replica shardså¯ä»¥åšè³‡æ–™é‚„åŸã€‚ åƒé–± Elasticsearchä¸­çš„ä¸€äº›é‡è¦æ¦‚å¿µ","link":"2020/05/23/DevOps/ELK/%5BELK%5D%20Elasticsearch/"},{"title":"[ELK] å¦‚ä½•æ›´æ–° Kibana Visualization &amp; Dashboard å°æ‡‰çš„ Index Pattern","text":"å‰è¨€è¦å°‡ Elasticsearch å…§çš„è³‡æ–™åšè¦–è¦ºåŒ–ï¼Œé€é Kibana Visualization æ‹‰åœ–è¡¨å‘ˆç¾ï¼Œä¸¦æ•´åˆé€²ä¸€å¼µ Dashboard ä¸­ã€‚ ç”±æ–¼ Visualization æ˜¯å°æ‡‰æ–¼ Kibana ä¸­çš„ index patternï¼Œè‹¥ä»Šå¤©æŠŠåŸå§‹çš„ index pattern åˆªé™¤ï¼Œé‡å»ºä¸€å€‹åŒåçš„ index patternï¼ŒåŸå§‹çš„ Visualization æœƒå‡ºç¾ Could not locate that index-pattern é€™é¡çš„éŒ¯èª¤è¨Šæ¯ï¼Œç„¡æ³•æ­£å¸¸é¡¯ç¤ºã€‚ å¦‚ä¸‹åœ–æ‰€ç¤ºï¼š åŸå› æ˜¯æ¯å€‹å»ºå¥½çš„ index pattern éƒ½æœƒå¸¶ä¸€å€‹ç¨ç«‹ ID ï¼ŒKibana Visualization æœƒç¶å®šè©² IDï¼Œæ•…åŸå§‹ index pattern è¢«åˆªé™¤æ™‚ï¼Œå³ä¾¿æ–°å»ºä¸€å€‹åŒå index patternï¼ŒID æ”¹è®Šé€ æˆ Visualization æ‰¾ä¸åˆ°åŸå§‹ç¶å®šçš„ index patternã€‚ æœ¬ç¯‡æ–‡ç« æœƒç¤ºç¯„å¦‚ä½•åœ¨ä¸å¦å¤–å»º Visualization å’Œ Dashboard çš„æƒ…æ³ä¸‹ï¼Œæ›¿æ›æ–°çš„ Index Pattern å¯¦ä½œ Elastic Cloud ç‰ˆæœ¬ç‚º 7.10 ä»¥ä¸‹é€éå…©ç¨®æ–¹æ³•ä¾†æ›´æ–° Kibana Visualizationï¼Œå¯¦éš›æƒ…æ³ä¾ç…§æ—¢æœ‰çš„ Visualization æ•¸é‡ã€‚ è‹¥è¦æ›´æ”¹çš„ Visualization æ•¸é‡å¾ˆå°‘:è«‹åœ¨ä¿å­˜çš„å°è±¡è¨­ç½®ä¸‹æ›´æ”¹ç´¢å¼•æ¨¡å¼ID è‹¥è¦æ›´æ”¹çš„ Visualization æ•¸é‡å¾ˆå¤š(e.g. åŒä¸€å¼µ Dashboard ä¸‹å¤šå€‹ Visualization):åŒ¯å‡º JSON ç‰©ä»¶ï¼ˆObjectsï¼‰ï¼Œæ‰“é–‹è©²ç‰©ä»¶ï¼Œæ›¿æ›æª”æ¡ˆå…§çš„èˆŠ index pattern ID ï¼Œä¸¦é‡æ–°åŒ¯å…¥ Kibana Objects ä¸­ Visualization æ•¸é‡å°‘ é»æ“Šå–®ä¸€å€‹ Visualizationï¼Œæœƒå‡ºç¾å¦‚ä¸‹åœ–çš„æç¤ºè¨Šæ¯ å›åˆ° Stack Management -&gt; é»æ“Š Index Pattern -&gt; æ‰¾åˆ°æ–°å»ºçš„ Index Pattern é»æ“Šæ–°å»ºçš„ Index Pattern -&gt; æ–¼é é¢æœ€ä¸Šæ–¹çš„ç¶²å€åˆ—æ‰¾åˆ°æ–°çš„ Index Pattern IDï¼Œå°‡å…¶è¤‡è£½ åˆ°å‰›å‰›å‡ºç¾ Error è¨Šæ¯çš„ Visualization é é¢ -&gt; æ»‘é¼ æ»¾å‹•è‡³æœ€ä¸‹æ–¹ æ–¼ references æ¬„ä½ä¸­çš„ id æ›¿æ›æˆæ–°çš„ Index Pattern ID æ›¿æ›å®Œç•¢å¾Œé»æ“Š Save visualization object -&gt; åŸæœ¬çš„ Visualization æ¢å¾©æ­£å¸¸ Visualization æ•¸é‡å¤šä¸‹æ–¹ä»¥åŒä¸€å¼µ Dashboard ä¸‹æœ‰å¤šå€‹ Visualization çš„æƒ…å½¢ä¸‹ä½œç‚ºç¯„ä¾‹ é€²å…¥Kibana ä»‹é¢ -&gt; é»æ“Šç•«é¢å·¦ä¸Šè§’çš„ icon å±•é–‹é¸å–® -&gt; Stack Management é»æ“Š Saved Objects é¸æ“‡ç›®æ¨™ Object -&gt; Export æ‰“é–‹ä¸‹è¼‰è‡³æœ¬æ©Ÿçš„ Object -&gt; å°‡ Object å…§çš„ id å…¨æ•¸æ›¿æ›æ–°çš„ Index pattern ID å°‡ä¿®æ”¹å®Œå¾Œçš„ Object é‡æ–°ä¸Šå‚³è‡³ Kibana Saved Objects æŸ¥çœ‹ Dashboardï¼Œæ‰€æœ‰åœ–è¡¨éƒ½æ­£å¸¸é¡¯ç¤ºå›‰ï¼ ä»¥ä¸Šç‚ºæ›´æ–° Kibana Visualization &amp; Dashboard å°æ‡‰ Index Pattern ID çš„æ–¹æ³•","link":"2021/03/15/DevOps/ELK/%5BELK%5D%20%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0%20Kibana%20Visualization%20&%20Dashboard%20%E5%B0%8D%E6%87%89%E7%9A%84%20Index%20Pattern/"},{"title":"[Docker] Docker å¯¦ä½œç¯‡ - Imageã€Container","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 11 å‰è¨€ä¹‹å‰ç°¡å–®çš„ä»‹ç´¹éDockerå¾Œï¼Œæœ¬ç¯‡æ–‡ç´€éŒ„Dockerç³»çµ±æ¶æ§‹åŠæ“ä½œImageã€Containerçš„åŸºæœ¬æŒ‡ä»¤ã€‚ Docker ç³»çµ±æ¶æ§‹Dockerç³»çµ±æ¶æ§‹ä¸»è¦æ˜¯Client-Serveræ¶æ§‹ï¼ŒClient ç«¯ç¨±ç‚ºDocker Clientï¼ŒServerç«¯ç¨±ç‚ºDocker Daemonç•¶æˆ‘å€‘å°dockerä¸‹æŒ‡ä»¤æ™‚ï¼Œæœƒç™¼requestçµ¦Docker Daemonå»åŸ·è¡ŒæŒ‡ä»¤å°æ‡‰çš„å·¥ä½œã€‚ Docker Daemonåšå“ªäº›äº‹? ç®¡ç†å¤šå€‹container ç®¡ç†å¤šå€‹å¾DockerHub pullä¸‹ä¾†æˆ–æ˜¯åœ¨æœ¬åœ°ç”±dockerfileå»ºç«‹çš„Image å°‡æœ¬åœ°å»ºç«‹å¥½Imageæ¨åˆ°é›²ç«¯ä¸Šçš„repository Hands on Labåˆæ­¥äº†è§£Docker ç³»çµ±æ¶æ§‹å¾Œï¼Œæ¥è‘—ä¾†è‘—æ‰‹å­¸ç¿’ç›¸é—œæŒ‡ä»¤å§ï¼ Docker ç™»å…¥1docker login åŸ·è¡Œä¸Šè¿°æŒ‡ä»¤å¾Œï¼Œè¼¸å…¥è‡ªå·±åœ¨Docker Hubä¸Šå»ºç«‹çš„å¸³è™Ÿå¯†ç¢¼å°±å¯ä»¥ç™»å…¥äº† Docker imageç›¸é—œçš„åŸºæœ¬æŒ‡ä»¤æŸ¥çœ‹ç›¸é—œæŒ‡ä»¤èªªæ˜1docker run --help æŸ¥çœ‹æ‰€æœ‰çš„imageåŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤æœƒåˆ—å‡ºæ‰€æœ‰localç«¯çš„image 1docker images é ç«¯ä¸‹è¼‰imageDocker Hub ä¸Šæœ‰å¤§é‡çš„Imageå¯ä»¥ç”¨ï¼Œå¦‚æœè¦å¾é ç«¯çš„Docker Registry ä¸‹è¼‰è‡³æœ¬åœ°ç«¯ï¼Œå¯ä»¥åŸ·è¡Œ 1docker pull image_name docker pull Imageåç¨±çš„æ ¼å¼æœ‰å…©ç¨®: Docker Registryä½å€ï¼šä½å€çš„æ ¼å¼ä¸€èˆ¬æ˜¯ &lt;ç¶²åŸŸå/IP&gt;[:é€£æ¥åŸ è™Ÿç¢¼]ã€‚ é è¨­ä½å€æ˜¯ Docker Hubã€‚ Repository nameï¼šRepository nameæ˜¯å…©æ®µå¼åç¨±: &lt;ä½¿ç”¨è€…åç¨±&gt;/image_name:image_tagã€‚å°æ–¼ Docker Hubï¼Œè‹¥æœªçµ¦å®šä½¿ç”¨è€…åç¨±ï¼Œå‰‡é è¨­ç‚ºå¾å®˜æ–¹çš„imageï¼Œä¹Ÿå°±æ˜¯library ç¯„ä¾‹: pulléå®˜æ–¹çš„Imageä¾‹å¦‚ä»Šå¤©æˆ‘çš„docker hubä¸Šå·²ç¶“æœ‰å€‹è‡ªå·±buildå¥½çš„image(å¦‚ä¸Šåœ–)ï¼Œæˆ‘è¦å°‡å…¶pullä¸‹ä¾†ï¼Œæˆ‘å¯ä»¥åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤ 1docker pull tom861012/imagedemo:0.0.1.RELEASE tom861012ç‚ºæˆ‘çš„docker hubå¸³è™Ÿï¼Œimagedemoç‚ºimageåç¨±è€Œ0.0.1.RELEASEç‚ºtagåã€‚ ç¯„ä¾‹ï¼š å¾å®˜æ–¹çš„Image pull MySQL Imageå°‡image_nameæ›¿æ›æˆç›®æ¨™imageï¼Œä¾‹å¦‚è¦ä¸‹è¼‰MySQLé€™å€‹image 1docker pull mysql æŸ¥æ‰¾ç›¸é—œçš„imageè‹¥è¦æŸ¥æ‰¾å­˜æ”¾åœ¨remote repositoryçš„imageï¼Œå¯ä»¥ç”¨searché€™å€‹æŒ‡ä»¤ 1docker search image_name ç¯„ä¾‹ï¼š MySQL Imageå°‡image_nameæ›¿æ›æˆç›®æ¨™imageï¼Œä¾‹å¦‚è¦æŸ¥æ‰¾MySQLç›¸é—œimage 1docker search mysql æŸ¥çœ‹ç›®æ¨™imageçš„æ­·å²ç´€éŒ„1docker image history image_name æŸ¥çœ‹ç›®æ¨™imageçš„ç›¸é—œæ•¸æ“šè³‡æ–™1docker image inspect image_name åˆªé™¤localç«¯çš„image123docker image remove imageæˆ–æ˜¯docker rmi ä¸€æ¬¡åˆªé™¤ä¸å¿…è¦(æœªä½¿ç”¨)çš„image1docker rmi $(docker images --filter &quot;dangling=true&quot; -q --no-trunc) æ›¿imageåŠ ä¸Štag1docker tag Image ID repository_address:image_tag è‹¥åœ¨æ²’æœ‰æŒ‡å®š TAG æ˜¯å“ªå€‹ç‰ˆæœ¬çš„æƒ…æ³ä¸‹ï¼Œé è¨­æœƒæ˜¯latestè¡¨ç¤ºæœ€æ–°ç‰ˆæœ¬ï¼Œç•¶ç„¶æˆ‘å€‘ä¹Ÿè‡ªè¨‚tag åç¨±ï¼Œå¦‚ï¼šåŠ å…¥Repository ç‰ˆæœ¬è™Ÿï¼Œæ‰“åŒ…å‡ºä¾†çš„ Docker Imageï¼Œå¾Œé¢çš„TAG å°±æœƒå¾latest è®ŠæˆæŒ‡å®šçš„ç‰ˆæœ¬è™Ÿäº†ã€‚å¯¦å‹™ä¸Šç‚ºäº†æ˜“æ–¼è¾¨è­˜ï¼Œé€šå¸¸æœƒåœ¨Tagä¸­åŠ å…¥ç‰ˆæœ¬è™Ÿã€‚ Containerç›¸é—œçš„åŸºæœ¬æŒ‡ä»¤å»ºç«‹ä¸¦åŸ·è¡Œdocker container1docker run -p port:container_port repository:image_tag_name -p: ç‚º--publish çš„ç°¡å¯« repository ç‚ºDockerHubæ‰€å­˜æ”¾Repositoryï¼Œå…¶ä¸­åŒ…å«å¤šå€‹Imageï¼Œæ¯å€‹Imageæœ‰ä¸åŒçš„æ¨™ç±¤(tag) image_tag_name : imageçš„tag name åŸ·è¡Œdocker runæ™‚ï¼Œè‹¥æœ¬åœ°ç«¯ç„¡æ­¤Imageå­˜åœ¨æ™‚ï¼Œæœƒå¾DockerHubä¸Šæ‰¾ç›®æ¨™Repositoryæ‹‰ä¸‹ä¾†(pull down)åˆ°æœ¬åœ° docker runä¸­é–“çš„éç¨‹ å…ˆåœ¨local image cacheå°‹æ‰¾è©²image è‹¥æ‰¾ä¸åˆ°è©²imageï¼Œæœƒå¾€é ç«¯çš„image repositoryå°‹æ‰¾(é è¨­ç‚ºDocker Hub) æ‹‰ä¸‹(pull)ä¸‹è¼‰æœ€æ–°ç‰ˆæœ¬çš„image æ ¹æ“špullä¸‹ä¾†çš„imageä¾†å»ºæ–°çš„container åœ¨ docker engine è£¡é¢çµ¦ container ç§æœ‰ç¶²è·¯ä¸Šçš„è™›æ“¬ ip é–‹å•Ÿä¸»æ©Ÿç«¯çš„port(çœ‹ä½ è¨­å®šå“ªå€‹port)ä¸¦è½‰å€åˆ° containeçš„port(è‹¥æ²’æœ‰ä¸‹--publishæŒ‡ä»¤å°±ä¸æœƒæ‰“é–‹ä»»ä½• port) èƒŒæ™¯åŸ·è¡Œ: detachåœ¨docker runçš„æŒ‡ä»¤ä¸­åŠ ä¸Š--detach(æˆ–æ˜¯ç°¡å¯«-d)ï¼Œå¯ä»¥è®“dockeråœ¨èƒŒæ™¯åŸ·è¡Œã€‚ 1docker run -p port:container_port -d repository:image_tag_name é€™å€‹æŒ‡ä»¤æœƒå°å‡ºcontainer ID æŸ¥çœ‹åŸ·è¡Œä¸­çš„ Docker Container1docker container ls åŸ·è¡Œä¸Šè¿°æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹containerç›¸é—œçš„è³‡è¨Šï¼Œå¦‚IDã€åç¨±ã€åŸ·è¡Œçš„Commandã€å»ºç«‹æ™‚é–“ã€æ‰€åœ¨çš„ImageåŠå°æ‡‰çš„portç­‰ç­‰ã€‚æˆ–æ˜¯åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤ä¹Ÿå¯ä»¥ 1docker ps åœæ­¢docker container1docker container stop containerID(å¯ä»¥å–å‰å››å€‹) æˆ–æ˜¯å°‡stopæŒ‡ä»¤æ”¹ç‚ºkillä¹Ÿå¯ä»¥ 1docker container kill containerID(å¯ä»¥å–å‰å››å€‹) é›–ç„¶stopã€killéƒ½å¯ä»¥å°‡containeråœæ­¢ï¼Œå…©è€…çš„å€åˆ¥åœ¨æ–¼killæŒ‡ä»¤æ˜¯å¼·è¡Œçµ‚æ­¢containerï¼Œè€Œstopæ˜¯å¾ªåºçš„ï¼Œæœƒå…ˆç»™containerç™¼é€ä¸€å€‹TERMè¨Šè™Ÿ(signal)ï¼Œè®“containeråšä¸€äº›é€€å‡ºå‰å¿…é¡»çš„å®‰å…¨æ€§æ“ä½œï¼Œcontainerè‡ªåŠ¨åœæ­¢é‹ä½œï¼Œç›¸å°ä¹‹ä¸‹è¼ƒç‚ºå„ªé›…(graceful) åˆªé™¤ container1docker rm containerID æ¸…ç†æ‰€æœ‰åœæ­¢é‹è¡Œçš„container1docker container prune å•Ÿå‹•å·²çµ‚æ­¢å®¹å™¨åˆ©ç”¨startæŒ‡ä»¤ï¼Œå°‡ä¸€å€‹å·²ç¶“çµ‚æ­¢çš„å®¹å™¨å•Ÿå‹•åŸ·è¡Œ 1docker start container_nameæˆ–id è§€å¯Ÿ container çš„è³‡æºä½¿ç”¨é‡1docker stats statsæŒ‡ä»¤æœƒé¡¯ç¤ºç›®å‰æ‰€æœ‰åŸ·è¡Œä¸­çš„ containeræ‰€åƒæ‰çš„ CPU, è¨˜æ†¶é«”, ç¶²è·¯å’Œç£ç¢Ÿ I/O ç­‰ç­‰ï¼Œå®ƒæ˜¯å³æ™‚æ€§çš„ï¼è®“ä½¿ç”¨è€…å¯ä»¥çŸ¥é“æ¯å€‹ Container ä½¿ç”¨æ‰å¤šå°‘çš„ç³»çµ±è³‡æºã€‚ é™åˆ¶containerè¨˜æ†¶é«”çš„ä½¿ç”¨é‡åŠ ä¸Š-mé€™å€‹æŒ‡ä»¤åƒæ•¸è¡¨ç¤º--memoryï¼Œå¯ä»¥æŒ‡å®šè¨˜æ†¶é«”çš„å®¹é‡é™åˆ¶ï¼Œå¦‚ä¸‹æ–¹ç¯„ä¾‹ç‚ºé™åˆ¶512m 1docker run -p port:container_port -d -m 512m repository:image_tag_name é™åˆ¶container CPUçš„ä½¿ç”¨é‡åŠ ä¸Š--cpu-quotaé€™å€‹æŒ‡ä»¤åƒæ•¸å¯ä»¥æŒ‡å®š CPU è³‡æºé™åˆ¶ï¼Œæœ€å¤§ç‚º1000000ï¼Œä¸‹æ–¹ç¯„ä¾‹ç‚ºä¸Šé™çš„ä¸€åŠ: 500000 1docker run -p port:container_port -d -m 512m --cpu-quota=500000 repository:image_tag_name æŸ¥çœ‹logæŸ¥çœ‹container idçš„log 1docker logs containerID(å¯ä»¥å–å‰å››å€‹) docker systemç›¸é—œçš„åŸºæœ¬æŒ‡ä»¤æŸ¥çœ‹dockerç³»çµ±è³‡è¨Š1docker system info æŸ¥çœ‹ç¡¬ç¢Ÿä½¿ç”¨æƒ…æ³ç”¨äº†ä¸€æ®µæ™‚é–“Dockerå¾Œï¼Œæœƒç™¼ç¾å®ƒä½”ç”¨äº†ä¸å°‘ç¡¬ç¢Ÿç©ºé–“ï¼Œå¦‚æœæƒ³çŸ¥é“ç¡¬ç¢Ÿçš„ä½¿ç”¨æƒ…æ³å¯ä»¥åŠ ä¸ŠdfæŒ‡ä»¤ 1docker system df ç›£æ§äº‹ä»¶æ´»å‹•Docker æœ‰æä¾›eventsæŒ‡ä»¤ç”¨ä¾†ç›£è½Dockerçš„äº‹ä»¶ç´€éŒ„ï¼Œå¯ç”¨ä¾†æŸ¥æ‰¾å•é¡Œï¼Œä¾‹å¦‚å®¹å™¨ä¸€ç›´åŸ·è¡Œä¸èµ·ä¾†çš„æ™‚å€™ï¼Œå°±å¯ä»¥ä½¿ç”¨ docker events ä¾†è§€å¯Ÿåˆ°åº•æ˜¯å¤±æ•—åœ¨å“ªä¸€å€‹éšæ®µã€‚ 1docker system events ä¸‹é€™å€‹æŒ‡ä»¤æ™‚ï¼Œè¨˜å¾—è¦é–‹å¦å¤–ä¸€å€‹çµ‚ç«¯æ©Ÿï¼Œå› ç‚ºé€™å€‹æŒ‡ä»¤æ˜¯ä¸€ç›´æŒçºŒç›£æ§äº‹ä»¶çš„ç‹€æ…‹ï¼Œæ‰€ä»¥è¦ä¸€ç›´è®“ä»–runæ‰æœ‰è¾¦æ³•ç›£è½äº‹ä»¶ åˆªé™¤æ‰€æœ‰æœªä½¿ç”¨çš„ containers, networks, images1docker system prune åƒè€ƒæ•™å­¸docker å¿«é€Ÿå­¸ç¿’è‡ªæˆ‘æŒ‘æˆ° Day1 dockerå…¥é–€è§€å¿µ æ‰‹æŠŠæ‰‹æ•™ä½ å®‰è£ã€ä½¿ç”¨ docker ä¸¦å¿«é€Ÿç”¢ç”Ÿ Anaconda ç’°å¢ƒ (1)","link":"2020/04/19/DevOps/Docker/%5BDevOps%5D%20Docker%20%E5%AF%A6%E4%BD%9C%E7%AF%87%20-%20Image%E3%80%81Container/"},{"title":"[Terraform] Terraformå…¥é–€(2) - è®Šæ•¸","text":"å‰è¨€æœ¬ç¯‡ç‚ºTerraformç³»åˆ—çš„ç¬¬äºŒç¯‡ï¼Œç´€éŒ„Terraformå¦‚ä½•å®šç¾©åŠæ‡‰ç”¨è®Šæ•¸ Hands on Labè®Šæ•¸å®£å‘Švariableé–‹é ­åšè®Šæ•¸å®£å‘Šï¼Œå¾Œé¢æ¥è‡ªå®šç¾©çš„è®Šæ•¸åç¨±ï¼Œå¦‚ä¸‹æ–¹ç¯„ä¾‹ï¼Œè®Šæ•¸åç‚ºiam_user_nameï¼Œè®Šæ•¸å€¼ç‚ºmy_iam_user 123variable &quot;iam_user_name&quot; { default = &quot;my_iam_user&quot;} è‹¥ç„¡çµ¦äºˆdefaulté€™å€‹å±¬æ€§çš„è©±ï¼ŒåŸ·è¡Œterraform applyå¾Œæœƒè¦æ±‚è¼¸å…¥å€¼ã€‚ åŒ¯å‡ºè®Šæ•¸é™¤äº†ä¸Šé¢ä½¿ç”¨è®Šæ•¸å®£å‘Šçš„æ–¹æ³•å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨çµ‚ç«¯æ©Ÿä¸­è¼¸å…¥æŒ‡ä»¤ä¾†å®šç¾©è®Šæ•¸ï¼Œå¦‚: Macç‰ˆæ¡export TF_VAR_iam_user_name=VALUEçš„èªæ³•ä¾†åŒ¯å‡ºè®Šæ•¸ã€‚ 1export TF_VAR_iam_user_name=&quot;test_prefix&quot; åŒ¯å‡ºè®Šæ•¸å¾ŒåŸ·è¡Œterraform plan -refresh=falseæŸ¥çœ‹è®ŠåŒ–ä¸Šåœ–å¯è§€å¯Ÿåˆ°iam_user_nameæ›¿æ›æˆtest_prefix Windowsç‰ˆç›¸ç•°æ–¼MacæŒ‡ä»¤ï¼ŒWindowsç‰ˆæ¡ç”¨SET VARIABLE=VALUEæŒ‡ä»¤ä¾†åŒ¯å‡ºè®Šæ•¸ã€‚ å–ç”¨è®Šæ•¸å€¼æ¡var.*çš„æ–¹å¼ä¾†å–å¾—è®Šæ•¸å€¼ï¼Œå¦‚å»¶çºŒä¸Šä¸€ç¯‡æ–‡çš„ç¯„ä¾‹: 1234resource &quot;aws_iam_user&quot; &quot;my_iam_user&quot; { count = 2 name = &quot;${var.iam_user_name}_${count.index}&quot;} æ›´æ”¹å¾ŒåŸ·è¡Œterraform applyæŒ‡ä»¤ã€‚å¦å¤–ä¹Ÿå¯ä»¥é€éterraform consoleçš„æ–¹å¼é©—è­‰æ˜¯å¦èƒ½å–å¾—è®Šæ•¸å€¼ã€‚ è³¦äºˆè®Šæ•¸å‹æ…‹æ—¢ç„¶èƒ½çµ¦è®Šæ•¸å€¼ï¼Œé‚£ç•¶ç„¶ä¹Ÿå¯ä»¥å®šç¾©è®Šæ•¸å‹æ…‹å•¦ï¼Œåªè¦åœ¨å®£å‘Šè®Šæ•¸çš„åœ°æ–¹çµ¦äºˆtypeå±¬æ€§ï¼Œä¸¦æŒ‡å®šå“ªå€‹å‹æ…‹ä½œç‚ºå±¬æ€§å€¼ã€‚å¦‚ï¼š 1234variable &quot;iam_user_name&quot; { default = &quot;my_iam_user&quot; type = string #any(é è¨­) or number, boolen, list, map} çµ±ä¸€ç®¡ç†è®Šæ•¸(variable)æˆ‘å€‘å¯ä»¥å¦å¤–å»ºä¸€å€‹terraform.tfvarsæˆ–æ˜¯*.auto.tfvarsæª”æ¡ˆä¾†é›†ä¸­ç®¡ç†è®Šæ•¸ã€‚ ç¯„ä¾‹æ–¼æ ¹ç›®éŒ„ä¸‹å»ºç«‹ä¸€terraform.tfvarsæª”æ¡ˆï¼Œæ­¤æª”å¯«å…¥ 1iam_user_name = &quot;tf_file_test_iam_user_name&quot; è¡¨ç¤ºå®£å‘Šè®Šæ•¸iam_user_nameï¼Œä¸¦è³¦äºˆå€¼tf_file_test_iam_user_nameã€‚åŸ·è¡Œterraform plan -refresh=falseæŸ¥çœ‹è®ŠåŒ–","link":"2020/04/03/DevOps/Terraform/%5BDevOps%5D%20Terraform%E5%85%A5%E9%96%80(2)%20-%20%E8%AE%8A%E6%95%B8/"},{"title":"[ELK] å¦‚ä½•é€é enrich processor æ“´å¢è³‡æ–™å±¬æ€§","text":"å‰è¨€åœ¨è³‡æ–™è™•ç†çš„éç¨‹ä¸­ï¼Œæœƒé‡å°è³‡æ–™æºçš„ä¸å®Œæ•´æˆ–æ˜¯å†—ä½™çš„è³‡æ–™è¨‚å®š pipelines ä¾†åšé è™•ç†ï¼ŒElastic å®˜æ–¹æä¾› elastic ingest pipeline åŠŸèƒ½ï¼Œå°‡ä¸€é€£ä¸²çš„åˆ¶å®šå¥½çš„è™•ç†å™¨(Processors) åŒ¯é›†åœ¨ä¸€å€‹ pipeline ï¼Œå°ä¾†æºè³‡æ–™åšçµæ§‹åŒ–è™•ç†ã€‚ æˆ‘å€‘å¯ä»¥è¨­ç½®å¤šå€‹ç¨ç«‹çš„ Processors åœ¨åŒå€‹ Pipeline è£¡é¢ï¼Œåœ¨ä¾†æºè³‡æ–™é€é€² Elasticsearch åš indexing ä¹‹å‰ï¼Œæœƒç¶“éæŒ‡å®šçš„ Pipelineï¼Œ Pipeline è£¡å«æœ‰å¤šå€‹ Processorsï¼Œ Processor å¯ä»¥åšçš„äº‹æƒ…å¾ˆå¤šï¼Œå¦‚: é‡æ–°å‘½åã€æ–°å¢æ¬„ä½ã€è³‡æ–™å‹åˆ¥&amp;å¤§å°å¯«è½‰æ›ï¼Œç”šè‡³æ”¯æ´æ­£è¦è¡¨é”å¼ï¼Œå¯ä»¥åšè¤‡é›œçš„åˆ¤æ–·å¼ã€‚ æœ¬æ–‡ä¸»è¦ç¤ºç¯„å…¶ä¸­ä¸€ç¨® Processor - Enrich Processor Enrich ProcessorEnrich Processor çš„åŠŸèƒ½æ˜¯é‡å°å‚³å…¥è³‡æ–™æº(elasticsearch ä¸­çš„ document)æ“´å¢è³‡æ–™å±¬æ€§ï¼Œä¸‹æ–¹åœ–ç‰‡å±•ç¤ºæ•´å€‹æ“´å¢è³‡æ–™çš„é‹ä½œæµç¨‹ï¼šç”±ä¸Šåœ–å¯çŸ¥è³‡æ–™æº(incoming documnet)é€é€² Elasticsearch å‰ï¼Œç¶“éé å…ˆè¨­ç½®å¥½çš„ pipelineï¼Œpipeline è£¡é¢åŒ…å«å¤šå€‹å®šç¾©å¥½ä¸”ç›¸äº’ç¨ç«‹çš„ processor ã€‚ Enrich Processor å¯é¸å®šå·²ç¶“å­˜åœ¨æ–¼ Elasticsearch çš„æŸå€‹ indexï¼ŒæŒ‡å®šè¢«é¸å®šçš„ index æŸå€‹æ¬„ä½ä½œç‚ºåƒè€ƒ(æ³¨æ„: é€™å€‹åƒè€ƒæ¬„ä½å¿…é ˆæ˜¯ä¾†æº documents ä¹Ÿæœ‰çš„æ¬„ä½)ï¼Œå°‡è¢«é¸å®šçš„ index ä¸­çš„å…¶ä»–æ¬„ä½ mapping è‡³ä¾†æº documentï¼Œå½¢æˆæ–°çš„è³‡æ–™æ¬„ä½ã€‚ çœ‹å®Œå‰é¢èªªæ˜ï¼Œå° processor æœ‰åˆæ­¥æ¦‚å¿µå¾Œï¼Œæ¥è‘—ä¾†å¯¦ä½œå§ï¼ Letâ€™s get technical at the Hands-on Labsè—‰ç”±å®˜æ–¹ç¯„ä¾‹ä¾†å¯¦åšä¸€å€‹ Enrich Processorã€‚ä»¥ä¸‹ç¯„ä¾‹çš†æ–¼ Kibana çš„ Dev tool é€²è¡Œï¼š æ–°å»º Indexä¸‹è¿°æ–¹æ³•ä¾†å»ºç«‹åç‚º postal_codes çš„ index 12345678910111213PUT /postal_codes{ &quot;mappings&quot;: { &quot;properties&quot;: { &quot;location&quot;: { &quot;type&quot;: &quot;geo_shape&quot; }, &quot;postal_code&quot;: { &quot;type&quot;: &quot;keyword&quot; } } }} æ–°å¢ documentå‘ postal_codes è£¡æ–°å¢ä¸€å€‹ document ä¸­ï¼ŒåŒ…å« post_code åŠç›¸é—œä½ç½®çš„è³‡æ–™ 12345678PUT /postal_codes/_doc/1?refresh=wait_for{ &quot;location&quot;: { &quot;type&quot;: &quot;envelope&quot;, &quot;coordinates&quot;: [ [ 13.0, 53.0 ], [ 14.0, 52.0 ] ] }, &quot;postal_code&quot;: &quot;96598&quot;} å¯é€é GET æ–¹æ³•ä¾†æŸ¥è©¢ index å…§å®¹ 1GET /postal_codes/_search æ–°å»º enrich policyé€é enrich policy API ä¾†åˆ¶å®š enrich policy çµ¦æ–°å»ºç«‹çš„ enrich processorï¼Œenrich policy å¿…é ˆæ¶µè“‹ï¼š ä¸€å€‹æˆ–å¤šå€‹ä¾†æº indexï¼š å·²å­˜åœ¨çš„ elasticsearch è£¡çš„ index match_field: ç”¨æ–¼é…å°çš„åƒè€ƒæ¬„ä½(field)ï¼Œé€™å€‹æ¬„ä½å¿…é ˆæ˜¯ä¾†æº document å’Œå·²å­˜åœ¨çš„ document å…±æœ‰çš„ enrich_fieldsï¼šé…å°å¾Œè¦æ–°å¢è‡³ä¾†æº document ä¸­çš„æ¬„ä½ã€‚é€™äº›æ¬„ä½å¿…é ˆå­˜åœ¨ä¾†æº index è£¡ æ¥è‘—ä¾†å»ºç«‹æ–°çš„ policy - postal_policy 12345678PUT /_enrich/policy/postal_policy{ &quot;geo_match&quot;: { &quot;indices&quot;: &quot;postal_codes&quot;, &quot;match_field&quot;: &quot;location&quot;, &quot;enrich_fields&quot;: [ &quot;location&quot;, &quot;postal_code&quot; ] }} ä¸Šè¿°ç¯„ä¾‹è¡¨ç¤ºé€é geo_match çš„æ–¹æ³•ï¼Œä¾†æº indexï¼ˆsource indexï¼‰- postal_codes æœƒé€é location æ¬„ä½ä¾†é€²è¡Œé…å°ï¼Œå¦‚æœé…å°åˆ° æŒ‡å®šçš„ field name ï¼Œå‰‡æœƒå°‡ location åŠ postal_code é€™å…©å€‹æ¬„ä½ä¸€åŒæ·»åŠ åˆ°ä¾†æº index çš„ document è£¡é¢ å…¶ä»– match æ–¹æ³•å¯åƒè€ƒæ–‡ä»¶ åŸ·è¡Œ enrich policyï¼š execute enrich policyåŸ·è¡Œ execute enrich policy API ç‚ºè©² enrich policy å»ºä¸€å€‹ä¾†æº indexåŸ·è¡ŒæˆåŠŸå›å‚³ä¸‹è¿°çµæœï¼š 12345{ &quot;status&quot; : { &quot;phase&quot; : &quot;COMPLETE&quot; }} æŸ¥è©¢enrich policy1GET /_enrich/policy æŸ¥è©¢çµæœå¦‚ä¸‹ 123456789101112131415{ &quot;config&quot; : { &quot;geo_match&quot; : { &quot;name&quot; : &quot;postal_policy&quot;, &quot;indices&quot; : [ &quot;postal_codes&quot; ], &quot;match_field&quot; : &quot;location&quot;, &quot;enrich_fields&quot; : [ &quot;location&quot;, &quot;postal_code&quot; ] } }} å»ºç«‹ pipelineé€é PUT pipeline API æ–¹æ³•ä¾†æ–°å¢ or æ›´æ–° enrich processor è‡³åç‚º postal_lookup çš„ pipeline ä¸­ 12345678910111213PUT /_ingest/pipeline/postal_lookup{ &quot;processors&quot;: [ { &quot;enrich&quot;: { &quot;description&quot;: &quot;Add 'geo_data' based on 'geo_location'&quot;, &quot;policy_name&quot;: &quot;postal_policy&quot;, &quot;field&quot;: &quot;geo_location&quot;, &quot;target_field&quot;: &quot;geo_data&quot; } } ]} å›å‚³çµæœ 123{ &quot;acknowledged&quot; : true} èªªæ˜ policy_name: æ–¼ pipeline æŒ‡å®š enrich policy field: é…å°çš„æ¬„ä½ï¼Œå‰è¿°ç¯„ä¾‹ä»¥ geo_location ç‚ºé…å°çš„æ¬„ä½ target_field: é…å°æˆåŠŸå¾Œï¼Œä¾†æº document æœƒæ–°å¢çš„æ¬„ä½åç¨± æ–°å¢ä¾†æºè³‡æ–™æ–°å¢ document ä¸¦æŒ‡å®š postal_lookup é€™å€‹ pipeline æ“´å¢è³‡æ–™ 123456PUT /users/_doc/0?pipeline=postal_lookup{ &quot;first_name&quot;: &quot;Mardy&quot;, &quot;last_name&quot;: &quot;Brown&quot;, &quot;geo_location&quot;: &quot;POINT (13.5 52.5)&quot;} æŸ¥è©¢ users 1GET /users/_doc/0 æŸ¥è©¢çµæœ 123456789101112131415161718192021222324252627282930{ &quot;_index&quot; : &quot;users&quot;, &quot;_type&quot; : &quot;_doc&quot;, &quot;_id&quot; : &quot;0&quot;, &quot;_version&quot; : 1, &quot;_seq_no&quot; : 0, &quot;_primary_term&quot; : 1, &quot;found&quot; : true, &quot;_source&quot; : { &quot;geo_location&quot; : &quot;POINT (13.5 52.5)&quot;, &quot;last_name&quot; : &quot;Brown&quot;, &quot;geo_data&quot; : { &quot;location&quot; : { &quot;coordinates&quot; : [ [ 13.0, 53.0 ], [ 14.0, 52.0 ] ], &quot;type&quot; : &quot;envelope&quot; }, &quot;postal_code&quot; : &quot;96598&quot; }, &quot;first_name&quot; : &quot;Mardy&quot; }} ç”±ä¸Šè¿°æŸ¥è©¢çµæœå¾—çŸ¥ï¼Œé€é pipeline è£¡çš„ enrich processor æ“´å¢äº† geo_data è£¡çš„è³‡æ–™ï¼ŒåŒ…å«coordinates ä»¥åŠ postal_code Enrich processor å¹¾å€‹è¦æ³¨æ„çš„é» å»ºå¥½ enrich policy å¾Œï¼Œå°‡ç„¡æ³•æ›´æ–°æˆ–æ›´æ”¹ã€‚åä¹‹ï¼Œå¯ä»¥è—‰ç”±å»ºç«‹ä¸¦åŸ·è¡Œæ–°çš„ enrich policy æ›¿æ›èˆŠçš„ policy ä½¿ç”¨ delete enrich policy API åˆªé™¤èˆŠçš„ enrich policy (é‡è¦)enrich policy é€£æ¥çš„ä¾†æº index (source index) è‹¥æœ‰æ›´æ–°è³‡æ–™ï¼Œå‰‡éœ€è¦é‡æ–°åŸ·è¡Œ execute enrich policy API æ›´æ–°èˆŠçš„ source indexã€‚ ä»¥ä¸‹æ“·å–è‡ªéƒ¨åˆ†æ–‡ä»¶å…§å®¹ Update an enrich indexOnce created, you cannot update or index documents to an enrich index. Instead, update your source indices and execute the enrich policy again. This creates a new enrich index from your updated source indices and deletes the previous enrich index. If wanted, you can reindex or update any already ingested documents using your ingest pipeline. å°çµå‰é¢å¯¦ä½œäº†å¦‚ä½•å»ºç«‹ enrich processor è‡³ pipeline ä¸­ï¼Œä¸¦å°‡ä¾†æºè³‡æ–™(document) æŒ‡å®šç”±è©² pipeline è™•ç†ï¼Œå°‡é…å°åˆ°çš„ document æ“´å……æ¬„ä½ï¼Œé€™å€‹æ¦‚å¿µé¡ä¼¼æ–¼é—œé€£å¼è³‡æ–™åº«çš„ Join Tableï¼Œé€é enrich processor æˆ‘å€‘èƒ½å¤ è—‰ç”±å·²å­˜åœ¨çš„è³‡æ–™å°ä¾†æºè³‡æ–™é€²è¡Œæ“´å¢ã€‚ Reference Set up an enrich processor","link":"2021/04/17/DevOps/ELK/%5BELK%5D%20%E5%A6%82%E4%BD%95%E9%80%8F%E9%81%8E%20enrich%20processor%20%E6%93%B4%E5%A2%9E%E8%B3%87%E6%96%99%E5%B1%AC%E6%80%A7/"},{"title":"[Terraform] Terraformå…¥é–€(3) - list&amp;map","text":"å‰è¨€æœ¬ç¯‡ç‚ºTerraformç³»åˆ—çš„ç¬¬ä¸‰ç¯‡ï¼Œä¸»è¦ç´€éŒ„åœ¨Terraformä¸­çš„listå’Œmapå…©ç¨®è³‡æ–™çµæ§‹ Hands on LabListterraform list å¦‚åŒä¸€èˆ¬ç¨‹å¼èªè¨€çš„é™£åˆ—çµæ§‹ï¼Œæˆ‘å€‘å¯ä»¥å­˜æ”¾å¤šå€‹å…ƒç´ åœ¨é™£åˆ—å…§ï¼Œé€éç´¢å¼•å€¼(index)çš„æ–¹å¼é€²è¡ŒæŸ¥æ‰¾ã€‚ 123456789101112131415# declare variablevariable &quot;names&quot; { default = [&quot;tom&quot;, &quot;jack&quot;, &quot;tonny&quot;]}# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot; version = &quot;~&gt; 2.55&quot;}resource &quot;aws_iam_user&quot; &quot;my_iam_user&quot; { count = length(var.names) name = var.names[count.index]} åˆ†åˆ¥åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤ 12terraform initterraform apply åœ¨AWS IAM Useråˆ†åˆ¥æ–°å¢tomã€jackã€tonnyä¸‰ä½Users æ¥è‘—é€²å…¥terraform console 1terraform console å–å¾—è®Šæ•¸é•·åº¦123length(var.names)# 3 åè½‰listä¸­çš„å…ƒç´ é †åº123456reverse(var.names)# [# &quot;tonny&quot;,# &quot;jack&quot;,# &quot;tom&quot;,# ] åˆä½µlist1concat(var.names, [&quot;amy&quot;]) æ³¨æ„ï¼Œåˆä½µæ™‚ï¼Œè³‡æ–™çµæ§‹ç‚ºlistï¼Œå¦å‰‡æœƒå ±Invalid value for &quot;seqs&quot; parameter: all arguments must be lists or tuples; got string.çš„éŒ¯èª¤è¨Šæ¯ concat()åˆä½µlistæ™‚ï¼Œä¸å½±éŸ¿åŸå§‹çš„list æ’åºlist1sort(var.names) æª¢æŸ¥æ˜¯å¦å­˜åœ¨å¯ä»¥é€écontainsé€²è¡Œå…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨çš„è©±å›å‚³ç‚ºtrueï¼Œåä¹‹ç‚ºfalseã€‚ 12contains(var.names, &quot;tom&quot;)contains(var.names, &quot;hey&quot;) é™å®šç¯„åœ1range(start, end, space) startï¼šè¡¨èµ·å§‹å€¼ endï¼šè¡¨çµæŸå€¼(å¯¦éš›å°å‡ºçš„å€¼ç‚ºend-1) spaceï¼šé–“éš”(é è¨­ç‚º1) 1range(1,10) 1range(1,20, 2) æ›´å¤šTerraform å…§å»ºçš„functionså¯åƒè€ƒå®˜æ–¹æ–‡ä»¶ æ·»åŠ terraform listterraform listé è¨­indexä»¥æ•¸å€¼0é–‹å§‹åšæ’åºï¼Œå¦‚æœæƒ³æ”¹ä»¥elementåç¨±ä¾†æ’åºçš„è©±ï¼Œæ”¹æˆä¸‹æ–¹ä½œæ³•:main,tf 1234567891011121314151617# declare variablevariable &quot;names&quot; { default = [&quot;jason&quot;,&quot;tom&quot;, &quot;jack&quot;, &quot;chris&quot;]}# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot; version = &quot;~&gt; 2.55&quot;}resource &quot;aws_iam_user&quot; &quot;my_iam_user&quot; { # count = length(var.names) # name = var.names[count.index] for_each = toset(var.names) name = each.value} for_eachå¯åƒè€ƒå®˜æ–¹æ–‡ä»¶, each.valueå¯åƒè€ƒå®˜æ–¹æ–‡ä»¶åŸ·è¡Œterraform apply -refresh=falseå¾ŒæŸ¥çœ‹terraform.tfstateé€™å€‹æª”æ¡ˆå…§å®¹ï¼Œè§€å¯Ÿè®ŠåŒ–ã€‚ index_keyç”±åŸæœ¬çš„æ•¸å€¼è½‰ç‚ºjack mapmapåœ¨Terraformä¸­çš„è³‡æ–™çµæ§‹ç”¨{key : value}ä¾†è¡¨ç¤ºï¼Œå¦‚è¦å–å¾—keyå°æ‡‰çš„valueå€¼ï¼Œèªæ³•ç‚ºkey.valueã€‚ç¯„ä¾‹ 1234567891011121314# declare variablevariable &quot;names&quot; { default = { tom : &quot;Taiwan&quot;, jack : &quot;UK&quot;, chris : &quot;US&quot;, }}# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot; version = &quot;~&gt; 2.55&quot;} é€²å…¥terraform console å–å¾—mapå…§æ‰€æœ‰è³‡æ–™1var.names å–å¾—æŸå€‹keyå°æ‡‰çš„value1var.names.jack mapå…§å–å¾—æ‰€æœ‰çš„keyåç¨±1234567keys(var.names)# [# &quot;chris&quot;,# &quot;jack&quot;,# &quot;tom&quot;,# ] mapå…§å–å¾—æ‰€æœ‰çš„value1234567values(var.names)# [# &quot;US&quot;,# &quot;UK&quot;,# &quot;Taiwan&quot;,# ] æŸ¥çœ‹ç‰¹å®šå€¼æ¡lookup(obj, &quot;key&quot;) obj: ç›®æ¨™ç‰©ä»¶ key: ç‰©ä»¶ä¸­çš„æŸå€‹key123lookup(var.names, &quot;jack&quot;)# UK ç¶œåˆç·´ç¿’å‡è¨­ä»Šå¤©æƒ³å»ºç«‹ä¸‰å€‹IAM Usersï¼Œåˆ†åˆ¥è®“æ¯å€‹UseråŠ ä¸Štagï¼Œtagå€¼ç‚ºå°æ‡‰æ‰€åœ¨çš„åœ‹å®¶ 1234567891011121314151617181920# declare variablevariable &quot;users&quot; { default = { tom : &quot;Taiwan&quot;, jack : &quot;UK&quot;, chris : &quot;US&quot;, }}# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot; version = &quot;~&gt; 2.55&quot;}resource &quot;aws_iam_user&quot; &quot;my_iam_user&quot; { for_each = var.users name = each.key # å°æ¯å€‹useråŠ ä¸Škey tags = { country :each.value # åŠ ä¸Škeyå°æ‡‰çš„value }} ä¸Šè¿°ç¨‹å¼ç¢¼å¯«å®ŒåŸ·è¡Œterraform applyæŸ¥çœ‹aws IAM Userç®¡ç†ä»‹é¢ï¼Œæœƒæ–°å¢ç¨‹å¼ç¢¼å¯«çš„3å€‹userå¯é»é–‹å–®ä¸€useræŸ¥çœ‹è©³æƒ…ï¼Œç¢ºèªå‰›æ‰å»ºç«‹çš„tagæ˜¯å¦æœ‰çœŸçš„åŠ ä¸Šå»ï¼Œä»¥chrisç‚ºä¾‹: æˆ–æ˜¯æ¡ç¬¬äºŒç¨®åšæ³•ï¼š åŸç‰©ä»¶å…§å†åŒ…ä¸€å±¤ç‰©ä»¶ 1234567891011121314151617181920212223variable &quot;users&quot; { default = { tom : {country :&quot;Taiwan&quot;, department: &quot;ABC&quot;} jack : {country :&quot;UK&quot;, department: &quot;EFG&quot;}, chris : {country :&quot;US&quot;, department: &quot;XYZ&quot;}, }}# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot; version = &quot;~&gt; 2.55&quot;}resource &quot;aws_iam_user&quot; &quot;my_iam_user&quot; { for_each = var.users name = each.key tags = { # country :each.value country :each.value.country # ç›´æ¥å¾ç¬¬äºŒå±¤ç‰©ä»¶å–value department :each.value.department }} è£œå……æœ¬ç¯‡åŒ…å«å‰é¢å¹¾ç¯‡æœ‰é—œTeraaformçš„æ–‡ç« ç¯„ä¾‹è£¡é¢ï¼Œæœ‰æåˆ°terraform applyæŒ‡ä»¤ï¼Œçœ¼å°–çš„äººæœƒç™¼ç¾æˆ‘å¾Œé¢åœ¨ä¸‹åŸ·è¡Œçš„æŒ‡ä»¤æ™‚ï¼Œæœƒåœ¨å¾Œé¢åŠ -refresh=falseã€‚ä¸»å› æ˜¯è‹¥æ—¥å¾Œå°ˆæ¡ˆè®Šå¤§ï¼ŒTerraformå¯«å¾—è…³æœ¬æ„ˆå¤šï¼Œæ¶‰åŠåˆ°çš„æœå‹™æ„ˆä¾†æ„ˆé›œï¼Œæ¯æ¬¡åŸ·è¡Œæ™‚æœƒèŠ±å¤§é‡æ™‚é–“é€²è¡Œè³‡æºçš„è«‹æ±‚ï¼Œç‚ºäº†æ¸›å°‘æ¯æ¬¡è«‹æ±‚çš„æ•¸é‡åŠæ™‚é–“ï¼Œæ¡ç”¨cacheçš„æ–¹å¼ï¼Œæ¯æ¬¡åŸ·è¡Œæ™‚åªæ›´æ–°æœ‰ç•°å‹•çš„éƒ¨åˆ†ï¼Œè€Œéå°æ‰€æœ‰æœå‹™é‡æ–°è«‹æ±‚æ‰€æœ‰çš„æœå‹™è³‡æºã€‚ Ref For larger infrastructures, querying every resource is too slow. Many cloud providers do not provide APIs to query multiple resources at once, and the round trip time for each resource is hundreds of milliseconds. On top of this, cloud providers almost always have API rate limiting so Terraform can only request a certain number of resources in a period of time. Larger users of Terraform make heavy use of the -refresh=false flag as well as the -target flag in order to work around this. In these scenarios, the cached state is treated as the record of truth.","link":"2020/04/04/DevOps/Terraform/%5BDevOps%5D%20Terraform%E5%85%A5%E9%96%80(3)%20-%20list&map/"},{"title":"[Terraform] Terraformå…¥é–€(5) - åˆ©ç”¨Terraformä¾†å»ºç½®å¤šå€‹workspace","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 10 å‰è¨€ä¸çŸ¥ä¸è¦ºTerraformé€™ç³»åˆ—çš„éš¨æ‰‹ç­†è¨˜å¯«åˆ°ç¬¬äº”ç¯‡ï¼Œæœ¬æ–‡è¨˜éŒ„å¦‚ä½•é€éæ’°å¯«Terraformè…³æœ¬ä¾†é–‹å•ŸS3ã€DynamoDBï¼Œç¶å®šIAM Userï¼Œä¸¦å»ºç½®åœ¨ä¸åŒworkspaceä¸‹ã€‚ Hands on Labåˆå§‹åŒ–å°ˆæ¡ˆ12345# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot; version = &quot;~&gt; 2.55&quot;} åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤åšåˆå§‹åŒ– 1terraform init å»ºç«‹S3 bucketã€DynamoDBå†ä¾†å°±æ˜¯å»ºç«‹S3 bucketã€DynamoDBï¼Œæœƒåˆ†åˆ¥å®šç¾©S3 bucketã€DynamoDBå…©å€‹resourceï¼ŒS3æœƒè¨­å®šç”Ÿå‘½é€±æœŸç‚ºæ°¸ä¹…ä¿å­˜ï¼Œä¸¦é€éversioningè¨­å®šä¾†ç´€éŒ„å¤šå€‹ç‰ˆæœ¬è™Ÿï¼Œè‹¥æœªä¾†é–‹ç™¼æ™‚ï¼Œå°ˆæ¡ˆæ”¹å£äº†é‚„å¯ä»¥é€€å›å‰ä¸€å€‹ç‰ˆæœ¬ï¼ 123456789101112131415161718192021222324252627282930313233343536# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot; version = &quot;~&gt; 2.55&quot;}# S3 Bucketresource &quot;aws_s3_bucket&quot; &quot;backend_state&quot; { bucket = &quot;dev-application-backend-state01&quot; # è‡ªè¨‚ bucket åç¨± # è¨­å®šS3çš„ç”Ÿå‘½é€±æœŸ lifecycle { # æ°¸ä¹…ä¿å­˜ prevent_destroy = true } # å„²å­˜å¤šå€‹ç‰ˆæœ¬è™Ÿï¼Œè‹¥ä¹‹å¾Œé–‹ç™¼ä¸Šé‡åˆ°å•é¡Œï¼Œå¯é€€å›èˆŠçš„ç‰ˆæœ¬ versioning{ enabled = true } server_side_encryption_configuration{ rule { apply_server_side_encryption_by_default { sse_algorithm = &quot;AES256&quot; } } }}# Locking - DynamoDB resource &quot;aws_dynamodb_table&quot; &quot;dynamodb_demo&quot; { name = &quot;dev_application_dynamodb01&quot; billing_mode = &quot;PAY_PER_REQUEST&quot; hash_key = &quot;LockID&quot; attribute { name = &quot;LockID&quot; type = &quot;S&quot; # ä»¥å­—ä¸²çš„æ–¹å¼å„²å­˜ }} å®Œæˆä¸Šè¿°ç¨‹å¼ç¢¼å¾ŒåŸ·è¡Œä¸‹æŒ‡ä»¤å®Œæˆå»ºç«‹ 1terraform apply æŸ¥çœ‹å…©è€…æ˜¯å¦æˆåŠŸæ–°å¢ S3 DynamoDB é…ç½®IAM Useræ¥è‘—æˆ‘å€‘è¦å°‡å‰é¢å»ºç«‹çš„S3ã€DynamoDBè³¦äºˆæŸå€‹Userï¼Œç‚ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œå¦å¤–æ–°å»ºä¸€å€‹åç‚ºusersçš„è³‡æ–™å¤¾ï¼Œç›®éŒ„çµæ§‹å¦‚ä¸‹:æ¥è‘—å»ºç«‹main.tfï¼Œä¸¦å¯«å…¥ä¸‹æ–¹ç¨‹å¼ç¢¼ï¼ŒåŸ·è¡Œterraform initåˆå§‹åŒ– 1234567891011121314151617181920terraform { backend &quot;s3&quot;{ bucket = &quot;dev-application-backend-state01&quot; key = &quot;backendState-proj-dev&quot; region = &quot;us-east-2&quot; dynamodb_table = &quot;dev_application_dynamodb01&quot; encrypt = true }}# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot; version = &quot;~&gt; 2.55&quot;}# AWS IAM Userresource &quot;aws_iam_user&quot; &quot;my_iam_user&quot; { name = &quot;my_iam_user_demo&quot; # è¢«è³¦äºˆçš„Useråç¨±} åŸ·è¡Œterraform applyå¾ŒæŸ¥çœ‹æ–°å»ºç«‹çš„UseræŸ¥çœ‹S3è¨­å®šï¼Œæœƒç™¼ç¾å‰›æ‰çµ¦äºˆåŠ å¯†çš„ç¨®é¡-AES ä¿®æ”¹S3å­˜æ”¾æª”æ¡ˆçš„è·¯å¾‘ä¸Šé¢çš„ç¯„ä¾‹ç¨‹å¼ç¢¼æˆåŠŸåŸ·è¡Œå¾Œï¼Œæª”æ¡ˆæœƒæ”¾åœ¨S3çš„æ ¹ç›®éŒ„åº•ä¸‹ï¼Œå¯¦å‹™ä¸Šå¯èƒ½æœƒæœ‰å¾ˆå¤šå°ˆæ¡ˆå­˜æ”¾ï¼Œé€™æ™‚è¦å€‹åˆ¥æ­¸é¡åœ¨ä¸åŒçš„å°ˆæ¡ˆç›®éŒ„ä¸‹ï¼Œæ‰€ä»¥æˆ‘å€‘å°‡åŸå§‹key(ä½œçˆ²æª”æ¡ˆå­˜æ”¾è·¯å¾‘)æ”¹ç‚ºdev/user/backendState-proj-devã€‚ 123456789101112131415161718192021terraform { backend &quot;s3&quot;{ bucket = &quot;dev-application-backend-state01&quot; # key = &quot;backendState-proj-dev&quot; key = &quot;dev/user/backendState-proj-dev&quot; # å¯è‡ªè¨‚æª”æ¡ˆè·¯å¾‘ region = &quot;us-east-2&quot; dynamodb_table = &quot;dev_application_dynamodb01&quot; encrypt = true }}# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot; version = &quot;~&gt; 2.55&quot;}# AWS IAM Userresource &quot;aws_iam_user&quot; &quot;my_iam_user&quot; { name = &quot;my_iam_user_demo&quot;} ä¿®æ”¹å‰è¦è¨˜å¾—å…ˆåŸ·è¡Œterraform inité€²è¡Œåˆå§‹åŒ– ç³»çµ±æœƒæç¤ºæ˜¯å¦å°‡ç‹€æ…‹è¤‡è£½åˆ°æ–°çš„ç‹€æ…‹ã€‚åˆå§‹åŒ–å®Œæˆå¾Œé‡æ–°åˆ·æ–°é é¢ï¼Œæœƒçœ‹åˆ°åŸæœ¬backendState-proj-devçš„æª”æ¡ˆè·¯å¾‘è®Šæˆåœ¨dev/user/é€™å€‹è·¯å¾‘ä¸‹ã€‚ å»ºç½®å¤šå€‹workspaceæŸ¥çœ‹ç•¶å‰çš„workspace1terraform workspace show å°šæœªå»ºç«‹å…¶ä»–workspaceçš„æƒ…æ³ä¸‹ï¼Œworkspaceåç¨±ç‚ºdefaultã€‚ å»ºç«‹æ–°workspaceèªæ³•å¦‚ä¸‹ï¼Œworkspaceç‚ºè‡ªå®šçš„åç¨± 1terraform workspace new workspace ç¯„ä¾‹ä»¥prod-devä½œç‚ºæ–°çš„workspaceåç¨± 1terraform workspace new prod-dev å»ºç«‹å®Œæ–°çš„workspaceå¾Œè¦é€²è¡Œåˆå§‹åŒ– 1terraform init å›åˆ°AWS S3 consoleä»‹é¢æœƒç™¼ç¾æ–°å¢env:è³‡æ–™å¤¾ï¼Œè£¡é¢å­˜æ”¾å‰›æ‰å»ºç«‹çš„workspace æŸ¥çœ‹env:è³‡æ–™å¤¾ ä¸éé€™é‚Šè¦æ³¨æ„ä¸€å€‹åœ°æ–¹ï¼Œé»é–‹å‰›æ‰å»ºç«‹workspaceè£¡çš„æª”æ¡ˆ æœƒç™¼ç¾ç‰©ä»¶æ˜¯ç©ºçš„ï¼ æ€éº¼å›äº‹ï¼Ÿï¼Ÿï¼Ÿ å› ç‚ºæˆ‘å€‘æŠŠIAM Userå¯«æ­»äº†ï¼Œé€ æˆèˆ‡å‰ä¸€å€‹workspaceä½¿ç”¨åŒä¸€çµ„IAM User nameï¼Œå› æ­¤å°‡aws_iam_useré€™å€‹resourceä¿®æ”¹ç‚ºå‹•æ…‹çš„IAM Userï¼Œä»¥ç•¶å‰çš„workspace nameä½œç‚ºå‰ç¶´ 1234resource &quot;aws_iam_user&quot; &quot;my_iam_user&quot; { # name = &quot;my_iam_user_demo&quot; name = &quot;${terraform.workspace}_my_iam_user_demo&quot;} æ¥è‘—åŸ·è¡Œterraform planè§€å¯Ÿè®ŠåŒ–prod-devè®Šç‚ºå‰ç¶´åç¨±ï¼Œæ¥è‘—åŸ·è¡Œterraform applyå›åˆ°workspaceè£¡çš„æª”æ¡ˆï¼šé€™ä¸€æ¬¡ç‰©ä»¶è£¡é¢å°±ä¸æ˜¯ç©ºçš„ï½ï½ï½ä¹‹å¾Œä¸ç®¡åœ¨å…¶ä»–workspaceå»ºç«‹çš„IAM Userä¹Ÿä¸æœƒè¡çªï¼ åˆ‡æ›è‡³ç‰¹å®šçš„workspaceå¦‚æœè¦åˆ‡å›åŸæœ¬çš„workspaceï¼Œèªæ³•å¦‚ä¸‹æ–¹ï¼Œworkspaceå¯æ›¿æ›æˆç›®å‰å­˜åœ¨çš„workspaceåç¨± 1terraform workspace select workspace ä»¥åˆ‡æ›å›defaultç‚ºä¾‹ï¼š 1terraform workspace select default æŸ¥çœ‹æ‰€æœ‰çš„workspace1terraform workspace list *ä¹‹è™•è¡¨ç•¶å‰æ‰€è™•çš„workspace é™¤äº†ä½¿ç”¨æŒ‡ä»¤æŸ¥çœ‹ç•¶å‰æ‰€è™•çš„workspaceä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥åˆ°å°ˆæ¡ˆè³‡æ–™å¤¾ä¸‹çš„.terraformç›®éŒ„è£¡é¢æœ‰ä¸€å€‹åç‚ºenvironmentçš„æª”æ¡ˆï¼Œè£¡é¢æœƒé¡¯ç¤ºç•¶å‰workspaceåç¨±ã€‚ æœ€çµ‚çš„æª”æ¡ˆç›®éŒ„çµæ§‹å¦‚ä¸‹:","link":"2020/04/13/DevOps/Terraform/%5BDevOps%5D%20Terraform%E5%85%A5%E9%96%80(5)%20-%20%E5%88%A9%E7%94%A8Terraform%E4%BE%86%E5%BB%BA%E7%BD%AE%E5%A4%9A%E5%80%8B%E7%92%B0%E5%A2%83(workspace)/"},{"title":"[Terraform] Terraformå…¥é–€(1)","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 08 å‰è¨€å› ç›®å‰å¯¦ç¿’å…¬å¸ä»£ç†è¨±å¤šé›²æœå‹™ï¼Œæœ‰ä½¿ç”¨Terraformæ’°å¯«è…³æœ¬ä¾†ç®¡ç†é›²å¹³å°ï¼Œè—‰æ­¤æ©Ÿæœƒç­†è¨˜ä¸€ä¸‹å­¸ç¿’Terraformé€™é …å·¥å…·ã€‚æœ¬ç¯‡æœƒç´€éŒ„å¦‚ä½•å¯¦éš›æ’°å¯«Terraformè…³æœ¬ä¾†æ“ä½œAWS S3ã€IAMé€™å…©é …æœå‹™ã€‚ ä»€éº¼æ˜¯Terraformï¼ŸTerraformæ˜¯ç”±HashiCorpé€™å®¶å…¬å¸æ‰€é–‹ç™¼ï¼Œæ˜¯ä¸€å€‹åŸºç¤æ¶æ§‹å³ç¨‹å¼ç¢¼(Infrastructure as Code;ç°¡ç¨±IaC)çš„é–‹æºå·¥å…·ï¼Œé—œæ–¼IaCæ¶æ§‹çš„ç´°ç¯€å¯åƒè€ƒé€™ç¯‡ï¼Œè€Œä¸”å®ƒæ”¯æŒå¤šç¨®é›²ç’°å¢ƒï¼Œé‚„å¯ä»¥é€²è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚å¯ä»¥æƒ³åƒä¸€ç¨®æƒ…æ³ï¼Œå¦‚æœä»Šå¤©æœ‰å¤šå€‹é›²è¦é€²è¡Œç®¡ç†ï¼Œå¯èƒ½æ¶æ§‹æœƒéš¨æ™‚éœ€è¦èª¿æ•´ï¼Œæˆ–æ˜¯è¦é…ç½®è³‡æ–™åº«ã€ç¶²è·¯å®‰å…¨ç­‰è¨­å®šæ™‚Terraformè®Šæˆæ˜¯å¾ˆå¥½çš„å·¥å…·å»ç®¡ç†é€™äº›é›²ç«¯çš„åŸºç¤æ¶æ§‹ã€‚ä»¥AWSç‚ºä¾‹ï¼Œæœ‰äº†Terraformå¾Œï¼Œæˆ‘å€‘ä¾¿ä¸å†éœ€è¦é€éæ‰‹å‹•æ“ä½œæ»‘é¼ é»æ“Šconsoleä»‹é¢ï¼Œåªè¦æ’°å¯«å¥½ Terraform è…³æœ¬ï¼Œä¸€éµå°±èƒ½å®Œæˆæƒ³è¦åšçš„äº‹æƒ…ï¼Œé€éç¨‹å¼ç¢¼å»ç®¡ç†æ“æœ‰çš„é›²ç«¯è³‡æºã€‚ç°¡å–®æ­¸ç´ä¸€ä¸‹Terraformçš„å„ªé»åŠç‰¹è‰² é‡å°æ“æœ‰çš„é›²ç«¯æœå‹™åšç‰ˆæœ¬æ§ç®¡ è‡ªå‹•åŒ–æ¸¬è©¦é›²ç«¯æ¶æ§‹ å®¹æ˜“é–±è®€ï¼Œä¸€èµ·é–‹ç™¼çš„äººå¯é–±è®€è…³æœ¬ç†è§£ç›®å‰ä½¿ç”¨çš„é›²æœå‹™ç›¸é—œè¨­å®š åœ¨ä¸åŒçš„ç’°å¢ƒä¸‹(å¦‚: é–‹ç™¼ã€æ¸¬è©¦ã€å¯¦éš›ä¸Šç·š)ï¼Œé›²æœå‹™çš„é…ç½®éƒ½æœƒç›¸åŒ Terraformçš„æª”æ¡ˆå‰¯æª”åæ˜¯*.tf ç”¨HCLèªè¨€æ’°å¯« è·¨å¹³å°(æ”¯æ´å“ªäº›å¹³å°å¯çœ‹å®˜æ–¹æ–‡ä»¶) Hands On Labå®‰è£å®˜æ–¹è¼‰é»å¦‚æœæ˜¯Macçš„è©±å¯ä»¥ä½¿ç”¨Homebrew 1brew install terraform ç•¶ç„¶ä¹Ÿå¯ä»¥æ‰‹å‹•ä¸‹è¼‰å£“ç¸®æª”ï¼Œè§£å£“ç¸®åˆ°/usr/binã€/usr/local/bin ç›®éŒ„ï¼Œè§£å£“ç¸®å¾—åˆ°ç·¨è­¯å¥½çš„åŸ·è¡Œæª”ã€‚ æŸ¥çœ‹ç‰ˆæœ¬æª¢æŸ¥æ˜¯å¦å¯åŸ·è¡Œterraformï¼Œé–‹å•Ÿçµ‚ç«¯æ©Ÿï¼Œè¼¸å…¥terraform -versionï¼Œæœƒé¡¯ç¤ºç•¶å‰terraformç‰ˆæœ¬è¨Šæ¯ åˆå§‹åŒ–Providerå…ˆä¾†å€‹ç¯„ä¾‹å§ï¼åœ¨å°ˆæ¡ˆè³‡æ–™å¤¾å»ºç«‹ä¸€å€‹åç‚ºmain.tfçš„æª”æ¡ˆ 1234# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot;} ä¸‹æŒ‡ä»¤é€²è¡Œåˆå§‹åŒ– 1terraform init terraform æœƒæ ¹æ“šåœ¨ç•¶å‰çš„ç›®éŒ„ä¸‹ç”¢ç”Ÿä¸€äº›æœ¬åœ°ç«¯è¨­å®šï¼Œä¸¦æ ¹æ“šä¸Šé¢çš„è¨­å®šä¸‹è¼‰ç›¸å°æ‡‰çš„äºŒé€²ä½æª”ï¼Œæ”¾åˆ°.terraformç›®éŒ„ä¸­ã€‚ä¸Šè¿°çš„ç¨‹å¼ç¢¼ä¸­ï¼Œproviderç”¨æ–¼æ±ºå®šå°å“ªä¸€å€‹å¹³å°æ“ä½œ regionæ˜¯AWSéœ€è¦çš„å±¬æ€§ï¼Œè¡¨ç¤ºåœ°å€ã€‚ é…ç½®Providerå°‡çµ‚ç«¯æ©Ÿå‡ºç¾çš„version = &quot;~&gt; 2.55&quot; é€™æ®µè³‡è¨ŠåŠ å…¥main.tfå…§ã€‚ 12345# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot; version = &quot;~&gt; 2.55&quot;} æŸ¥çœ‹ç•¶å‰ç›®éŒ„çµæ§‹ ä¸‹è¼‰ä¸¦åŒ¯å‡º Access Keyé–‹å•Ÿçµ‚ç«¯æ©Ÿï¼Œè¼¸å…¥ä¸‹æ–¹æŒ‡ä»¤ï¼Œä¸¦æ›¿æ›æˆè‡ªå¾AWS downloadä¸‹ä¾†çš„Access Key 12export AWS_ACCESS_KEY_ID=Your Access Keyexport AWS_SECRET_ACCESS_KEY=Your SECRET ACCESS Key å»ºç«‹S3é…ç½®resourceresourceæ˜¯è¡¨ç¤ºæ±ºå®šç”¨æŒ‡å®šé›²å¹³å°ä¸­çš„å“ªå€‹æœå‹™(è³‡æº)ï¼Œæ¡é¡ä¼¼JSONçš„çµæ§‹ï¼Œçµæ§‹å¤§æ¦‚æœƒæ˜¯ 123resource é›²ç«¯æœå‹™(æœå‹™)åç¨± è‡ªå®šè³‡æºåç¨± { å±¬æ€§ = å€¼} ä»¥AWS S3ä½œç‚ºç¯„ä¾‹: 1234# plan - excuteresource &quot;aws_s3_bucket&quot; &quot;my_s3_bucket&quot; { bucket = &quot;my-s3-bucket-terraform-01&quot;} ä¸Šè¿°ç¨‹å¼ç¢¼è¡¨ç¤ºä»¥aws_s3_bucketç‚ºé›²ç«¯è³‡æº(AWSæœ‰S3é€™é …å„²å­˜éœæ…‹è³‡æºçš„æœå‹™)ï¼Œä¸¦è‡ªå®šç¾©ä¸€å€‹my_s3_bucketåç¨± æŸ¥çœ‹Terraformç•°å‹•åœ¨å¯¦éš›åŸ·è¡Œä¹‹å‰è§€å¯Ÿ Terraform å°‡åšå“ªäº›å“ªäº›æ”¹è®Šï¼Œé€™æ˜¯ç‚ºäº†é˜²æ­¢æˆ‘å€‘ä¿®æ”¹åˆ°æˆ‘å€‘ä¸æ‡‰è©²ä¿®æ”¹çš„æ±è¥¿ï¼Œæˆ–æ˜¯æœ‰ä¸æ˜¯æˆ‘å€‘é æœŸçš„çµæœ 1terraform plan åŸ·è¡Œ/å‰µå»º1terraform apply é€™è£¡ Terraform ä¸€æ¨£æœƒè¼¸å‡ºç›¸é—œçš„è³‡è¨Šå…§å®¹ï¼Œå‘Šè¨´ä½ æœƒæœ‰å“ªäº›æ”¹è®Šï¼Œä¸¦è®“ä½ è¼¸å…¥å»ç¢ºèªæ˜¯å¦çœŸçš„è¦åŸ·è¡Œï¼Œåªè¦è¼¸å…¥ yesï¼Œå°±æœƒå¯¦éš›é–‹å•ŸS3æœå‹™äº†ã€‚å»ºç«‹æˆåŠŸï¼ æˆåŠŸå¾Œå›åˆ°S3 ç®¡ç†ä»‹é¢å°±æœƒçœ‹åˆ°å‰›å‰›å»ºç«‹å¥½çš„bucketå›‰ï¼ æŸ¥çœ‹ç‹€æ…‹(state)terraformåœ¨åŸ·è¡Œå®Œå¾Œï¼Œæœƒåœ¨ç•¶å‰ç›®éŒ„ä¸‹ç”¢ç”Ÿä¸€å€‹terraform.tfstateæª”ï¼Œæ­¤æª”æ¡ˆåŒ…å«äº†é€éterraform ç”¢ç”Ÿå‡ºä¾†resourceçš„è©³ç´°è³‡è¨Šï¼Œè€Œterraformä¾æ“šé€™å€‹æª”æ¡ˆä¾†è¿½è¹¤åŠç¶­è­·resourceã€‚è¼¸å…¥ä¸‹æ–¹æŒ‡ä»¤å¯ç§€å‡ºç•¶å‰resourceç‹€æ…‹çš„ç›¸é—œè³‡è¨Š 1terraform show ç•°å‹•å‡è¨­ä»Šå¤©æˆ‘å€‘æŠŠbucket = &quot;my-s3-bucket-terraform-01&quot;æ”¹æˆbucket = &quot;my-s3-bucket-terraform-02&quot;ä¸¦åŸ·è¡Œterraform applyï¼Œæœƒçœ‹åˆ°å¦‚ä¸‹åœ–æ‰€ç¤ºçš„ç•°å‹•è³‡è¨Šå›åˆ°S3ç®¡ç†ä»‹é¢æœƒçœ‹åˆ°åç¨±å·²ç¶“åšæ›´å‹• å› ç‚ºterraform.tfstateä¿ç•™æ‰€æœ‰resourceçš„ç‹€æ…‹ï¼ŒåŸ·è¡Œterraformå‘½ä»¤æ™‚ï¼Œé€™å€‹æª”æ¡ˆå¿…é ˆè¦å­˜åœ¨ï¼Œç¢ºä¿ terraformå¯ä»¥æ­£ç¢ºçš„ç›£è½resourceçš„ç‹€æ³ã€‚ å¦å¤–ï¼Œé€éterraform planæŒ‡ä»¤ï¼Œå¯ä»¥è®“ä½ åœ¨å¯¦éš›åŸ·è¡Œä¹‹å‰è§€å¯ŸTerraformå°‡åšå“ªäº›å“ªäº›æ”¹è®Š å•Ÿå‹•VersioningS3æœ‰å€‹Versioningçš„åŠŸèƒ½ï¼Œç¾åœ¨æˆ‘å€‘è¦é€éæ’°å¯«.tfé»¨çš„æ–¹å¼ä¾†é–‹å•Ÿé€™å€‹åŠŸèƒ½ï¼Œæ–¼resourceå…§æ·»åŠ versioning {enabled = true}é€™æ®µç¨‹å¼ç¢¼ 123456resource &quot;aws_s3_bucket&quot; &quot;my_s3_bucket&quot; { bucket = &quot;my-s3-bucket-terraform-02&quot; versioning { enabled = true }} æ·»åŠ å®Œç•¢ä¹‹å¾ŒåŸ·è¡Œterraform applyï¼Œterraformæœƒè‡ªå‹•å¹«æˆ‘å€‘è®Šæ›´S3çš„è¨­å®šï¼ŒåŸ·è¡Œå¾Œæœƒçœ‹åˆ°ä¸‹æ–¹é€™æ®µè¨Šæ¯:è¡¨ç¤ºversioningåŠŸèƒ½å·²è¢«é–‹å•Ÿï¼Œæ¥è‘—å›åˆ°aws S3çš„consoleä»‹é¢é»é¸my-s3-bucket-terraform-02ï¼Œæ‰¾åˆ°Propertiesä¸Šåœ–å¯æª¢è¦–æ­¤åŠŸèƒ½æˆåŠŸè¢«é–‹å•Ÿï¼ åˆªé™¤åŸ·è¡Œterraform destroyå°±å¯ä»¥æ¸…é™¤æ‰€æœ‰çš„è³‡æºï¼Œæœƒè¦ä½ è¼¸å…¥yesåšç‚ºç¢ºèªã€‚ terraform consoleterraformä¹Ÿæä¾›consoleçš„æ–¹å¼ä¾†é ç«¯æ“ä½œ å¯¦ä½œåŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤é€²å…¥console 1terraform console å¦‚æœè¦æŸ¥çœ‹å‰›å‰›å»ºç«‹çš„S3 bucketï¼Œä¾ç…§resourceä¸­çš„type.nameçš„æ–¹å¼è¼¸å…¥æŒ‡ä»¤ï¼Œå¦‚: 1aws_s3_bucket.my_s3_bucket è¡¨ç¤ºå¾aws_s3_bucketé€™å€‹resourceä¸­é¸æ“‡å‰›å‰›å»ºç«‹çš„my_s3_bucketåŸ·è¡ŒæŒ‡ä»¤å¾Œæœƒç§€å‡ºè©²Bucketå…§å«çš„ç›¸é—œè³‡è¨Šã€‚ç•¶ç„¶æˆ‘å€‘ä¹Ÿå¯ä»¥å¾€ä¸‹æ‰¾æ›´è©³ç´°çš„è³‡è¨Šï¼Œå¦‚å‰›å‰›æ–°å¢çš„versioningæŒ‡ä»¤ 1aws_s3_bucket.my_s3_bucket.versioning å›å‚³å€¼ç‚ºä¸€å€‹listè³‡æ–™çµæ§‹çš„è³‡è¨Šï¼Œæ‰€ä»¥å¯ä»¥è¿‘ä¸€æ­¥å–å¾—listå…§çš„ç‰©ä»¶ã€‚ 1aws_s3_bucket.my_s3_bucket.versioning[0].enabled é€€å‡ºconsole1exit Output æŸ¥çœ‹è¼¸å‡ºè¨Šæ¯é™¤äº†åˆ©ç”¨consoleæŸ¥çœ‹.tfé…ç½®çš„è¨Šæ¯å¤–ï¼Œä¹Ÿå¯ä»¥æ’°å¯«outputèªæ³•ä¾†è¼¸å‡ºæˆ‘å€‘æƒ³è¦çš„è¨Šæ¯ï¼Œä¾‹å¦‚å°å‡ºå‰›å‰›åœ¨consoleå…§çœ‹åˆ°çš„è¨Šæ¯ï¼Œå¯ä»¥æŠŠaws_s3_bucket.my_s3_bucket.versioning[0].enabledæ”¾å…¥outputä¸­ï¼Œå¦‚ï¼š 123output &quot;my_s3_bucket_versioning&quot; { value = aws_s3_bucket.my_s3_bucket.versioning[0].enabled} my_s3_bucket_versioningç‚ºè‡ªå·±å®šç¾©çš„åç¨±ï¼Œæ¥è‘—åŸ·è¡Œterraform apply -refresh=falseæŸ¥çœ‹è¨Šæ¯æˆ–æ˜¯å¯ä»¥å°å‡ºå®Œæ•´çš„è¨Šæ¯ 123output &quot;my_s3_bucket_detail&quot; { value = aws_s3_bucket.my_s3_bucket} æ“ä½œIAMæ¥è‘—ç”¨terraformè…³æœ¬ä¾†å»ºç«‹AWS IAM User 1234# IAM Userresource &quot;aws_iam_user&quot; &quot;my_iam_user&quot; { name = &quot;my_iam_user001&quot;} åœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥æŒ‡ä»¤ 1terraform plan -out iam.tfplan ç•«é¢æœƒæç¤ºè¼¸å…¥terraform apply &quot;iam.tfplan&quot;çš„æŒ‡ä»¤å°å‡ºä¸Šåœ–è¨Šæ¯è¡¨ç¤ºæˆåŠŸå»ºç«‹IAM Userå¦‚ä¸Šåœ–ï¼Œé€²å…¥IAM User Consoleä»‹é¢å°±æœƒçœ‹è¦‹å‰›å‰›å»ºç«‹å¥½çš„Userå“¦ï¼ç•¶ç„¶æˆ‘å€‘ä¹Ÿå¯ä»¥å°å‡ºoutputä¾†åšæª¢æŸ¥ 123output &quot;my_iam_user_detail&quot; { value = aws_iam_user.my_iam_user} æ›´æ–°IAM User nameå‡è¨­è¦æ›´æ”¹Useråmy_iam_user001ç‚ºmy_iam_user001_update 1234# IAM Userresource &quot;aws_iam_user&quot; &quot;my_iam_user&quot; { name = &quot;my_iam_user001_update&quot;} æ›´æ”¹å®Œç•¢å¾Œï¼Œè¼¸å…¥ä¸‹æ–¹æŒ‡ä»¤ 1terraform apply -target=aws_iam_user.my_iam_user å»ºç«‹å¤šå€‹IAM Useræœ¬ç¯‡åªæœ‰å…ˆè¨˜éŒ„æœ€åŸºç¤çš„ç”¨æ³•ï¼Œæ›´å¤šç›¸é—œç”¨æ³•å¯åƒè€ƒå®˜æ–¹æ–‡ä»¶ã€‚å‡è¨­ä»Šå¤©è¦ä¸€æ¬¡å»ºç«‹å…©å€‹Userï¼Œåšæ³•æ˜¯çµ¦äºˆIAM Useré€™å€‹Resourceæ¬¡æ•¸(count)ï¼Œä¸¦é€éç‰©ä»¶çš„æ–¹å¼assignï¼Œå¦‚ï¼š 1234resource &quot;aws_iam_user&quot; &quot;my_iam_user&quot; { count = 2 name = &quot;my_iam_user_${count.index}&quot;} å…¶ä¸­indexç·¨è™Ÿæ˜¯å¾0é–‹å§‹ï¼ŒåŸ·è¡Œterraform applyå¾Œæ‰“é–‹consoleä»‹é¢æœƒçœ‹åˆ°æ–°å»ºç«‹çš„å…©å€‹Userï¼Œåˆ†åˆ¥ç‚ºmy_iam_user_0ã€my_iam_user_1 è£œå……ä¸€äº›è¼ƒå¸¸ç”¨çš„æŒ‡ä»¤ terraform fmtï¼š å°‡æŒ‡ä»¤é€²è¡Œçµ±ä¸€æ ¼å¼ï¼Œæ”¹å–„å› å¤šäººå…±åŒé–‹ç™¼ï¼Œå„è‡ªé¢¨æ ¼å·®ç•°éå¤§çš„å•é¡Œã€‚ terraform graphï¼š åœ–å½¢åŒ–æ‰€æœ‰è³‡æºçš„ç›¸ç•°æ€§ã€‚ terraform import : å°å…¥ç›®å‰å·²ç¶“åœ¨é›²ç«¯ä¸Šæ‰‹å‹•å»ºç«‹è³‡æºåˆ°Terraformä¸­ã€‚ terraform validateï¼š ç”¨æ–¼é©—è­‰æ˜¯å¦å­˜åœ¨èªæ³•éŒ¯èª¤ã€‚ ä»¥ä¸Šé€éAWSå…©å€‹æœå‹™ç¯„ä¾‹ä¾†å¯¦ä½œTerraformè…³æœ¬ï¼Œå€˜è‹¥æœ‰ç–æ¼æˆ–éŒ¯èª¤ä¹‹è™•ï¼Œå¯åœ¨ä¸‹æ–¹ç•™è¨€è®“æˆ‘çŸ¥é“ï¼ åƒé–±Terraform å…¥é–€å­¸ç¿’ç­†è¨˜","link":"2020/04/02/DevOps/Terraform/%5BDevOps%5D%20Terraform%E5%85%A5%E9%96%80/"},{"title":"[ELK] Hello! ELK","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 15 åœ–ç‰‡æº å‰è¨€æœ€è¿‘å› ç‚ºå¯¦ç¿’ç’°å¢ƒéœ€è¦æ¥è§¸ELKï¼Œæ•…è—‰æ­¤æ©Ÿæœƒä¾†ç­†è¨˜ä¸€ä¸‹ï¼ŒåŠ æ·±å­¸ç¿’å°è±¡ã€‚ ä»€éº¼æ˜¯ELKï¼Ÿå…¶å¯¦å¤§å®¶æ‰€ç¨±çš„ELKä¸¦éä¸€å¥—è»Ÿé«”ï¼Œè€Œæ˜¯ç”±ä¸‰å€‹ä¸åŒçš„é–‹æºè»Ÿé«”çš„å­—é¦–ç¸®å¯«æ‰€æ§‹æˆçš„å¥—ä»¶ï¼Œä¸‰è€…ç‚º: Logstash: è’é›†æ—¥èªŒ(log)ï¼Œç‚ºæ—¥èªŒè³‡æ–™è™•ç†ç³»çµ±ï¼Œå¯åŒæ™‚å¾å¤šå€‹ä¾†æºç²å–è³‡æ–™ Elasticsearch: å¼·å¤§çš„æœå°‹åŠŸèƒ½ Kibana: å°‡è³‡æ–™è¦–è¦ºåŒ–çš„å ±è¡¨è»Ÿé«” ELKæ™‚å¸¸è¢«æ‡‰ç”¨åœ¨è§£æ±ºæœå°‹ã€ç´€éŒ„ã€ä¿å®‰åˆ†æã€æŒ‡æ¨™åˆ†æã€ç‡Ÿé‹åˆ†æç­‰å•é¡Œï¼Œè¶Šä¾†è¶Šå¤šä¼æ¥­æ¡ç”¨ELKï¼Œå¯è¦‹æ­¤ç¯‡æ–‡ç« çš„æ•´ç†ã€‚ ELK workflowELKçš„æ•´é«”é‹ä½œæµç¨‹å¯åƒè€ƒä¸‹æ–¹åœ–ç‰‡: åœ–ç‰‡æºæ•´é«”é‹ä½œæµç¨‹æ˜¯å°‡è¨­å‚™çš„æ—¥èªŒï¼Œé€éæª”æ¡ˆæˆ–ç³»çµ±çš„logå‚³é€çµ¦Logstashé€²è¡Œè§£æï¼Œå†å­˜å…¥ElasticSearché€²è¡ŒæŸ¥è©¢/çµ±è¨ˆï¼Œæœ€å¾Œç”±Kibanaå°‡çµ±è¨ˆçµæœä»¥è³‡æ–™è¦–è¦ºåŒ–å‘ˆç¾ã€‚ å®‰è£å°ELKæœ‰åˆæ­¥èªè­˜å¾Œå°±ä¾†å‹•æ‰‹å®‰è£å§ï¼ Elasticsearchè‡³å®˜æ–¹è¼‰é»æ‰¾åˆ°é©åˆè‡ªå·±ä½œæ¥­ç³»çµ±çš„æª”æ¡ˆé€²è¡Œä¸‹è¼‰ï¼ŒMacçš„è©±ï¼Œä¸‹è¼‰å®Œtar.gzçš„æª”æ¡ˆå¾Œï¼Œè‡³çµ‚ç«¯æ©ŸåŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤è§£å£“ç¸® 1tar -xzf elasticsearch-7.6.2-darwin-x86_64.tar.gz æ¥è‘—åˆ‡æ›åˆ°elasticsearch-7.6.2ç›®éŒ„ä¸‹åŸ·è¡Œbinè³‡æ–™å¤¾ä¸‹çš„elasticsearchåŸ·è¡Œæª” 1./bin/elasticsearch æ¸¬è©¦æ˜¯å¦å®‰è£æˆåŠŸé è¨­æœƒé–‹åœ¨portè™Ÿ9200ï¼Œåˆ°å¦å¤–ä¸€å€‹çµ‚ç«¯æ©Ÿä¸ŠåŸ·è¡Œ 1curl 127.0.0.1:9200 å¦‚æœæˆåŠŸçš„è©±æœƒå›å‚³ä¸€å€‹JSONæ ¼å¼çš„è³‡æ–™ Kibanaè‡³å®˜æ–¹è¼‰é»æ‰¾åˆ°é©åˆè‡ªå·±ä½œæ¥­ç³»çµ±çš„æª”æ¡ˆé€²è¡Œä¸‹è¼‰ï¼ŒMacçš„è©±ï¼Œä¸‹è¼‰å®Œtar.gzçš„æª”æ¡ˆå¾Œï¼Œè‡³çµ‚ç«¯æ©ŸåŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤è§£å£“ç¸® 1tar -xzf kibana-7.6.2-linux-x86_64.tar.gz æ¥è‘—åˆ‡æ›åˆ°kibana-7.6.1-darwin-x86_64ç›®éŒ„ä¸‹åŸ·è¡Œbinè³‡æ–™å¤¾ä¸‹çš„kibanaåŸ·è¡Œæª” 1./bin/kibana æ³¨æ„: è¦å…ˆæŠŠelasticsearch çµ¦runèµ·ä¾†å¾Œå†èµ·kibana é è¨­æœƒé–‹åœ¨portè™Ÿ5601ï¼Œè¨ªå•http://localhost:5601å¯ç¢ºä»»æ˜¯å¦æœ‰æˆåŠŸå•Ÿå‹•kibana LogStashLogstash æ˜¯ä¸€å¥— Log åˆ†ææ¡†æ¶ï¼Œå¯ä»¥å¹«åŠ©æˆ‘å€‘è™•ç†å„å¼å„æ¨£çš„ Logã€‚å®˜æ–¹è¼‰é» Elasticsearch basic architectureå‰é¢å®‰è£å®ŒELKå¾Œï¼Œæ¥è‘—è¦è¨è«–Elasticsearchçš„åŸºç¤æ¶æ§‹ Node ç¯€é»ä¸Šåœ–çš„æ¯å€‹ç¯€é»(Node) å°±æ˜¯ä¸€å€‹Elasticsearchçš„å¯¦ä¾‹(Instance)ï¼Œç”¨æ–¼å„²å­˜è³‡æ–™ï¼Œä¸€å°æ©Ÿå™¨å¯ä»¥åŒæ™‚å•Ÿç”¨å¤šå€‹Nodeã€‚ Cluster å¢é›†è€Œå¢é›†(Cluster) æ˜¯ç”±ä¸€å€‹æˆ–è€…å¤šå€‹æ“æœ‰ç›¸åŒcluster nameé…ç½®çš„Nodeæ‰€çµ„æˆï¼Œåœ¨é è¨­çš„æƒ…æ³ä¸‹ï¼Œæ¯å€‹Clusterä¹‹é–“æ˜¯äº’ç›¸ç¨ç«‹çš„ã€‚ ç•¶ç„¶ï¼Œå¦‚æœè¦è·¨å¢é›†(Cross-Cluster)é€²è¡Œæœå°‹ä¹Ÿæ˜¯å¯ä»¥ï¼Œä¸éå¯¦éš›ä¸Šæ¯”è¼ƒå°‘æœƒé€™æ¨£ä½¿ç”¨ï¼Œé€šå¸¸åŒæ™‚å•Ÿç”¨å¤šå€‹Clusteræ˜¯ç‚ºäº†ä¸åŒç›®çš„ï¼Œå¦‚ï¼šä¸€å€‹Clusterç”¨æ–¼æœå°‹é›»å•†çš„APï¼Œå¦ä¸€å€‹Clusterå‰‡è² è²¬APçš„æ•ˆèƒ½ç®¡ç†(Performance Management)ã€‚ Document æ–‡æª”ç¨±ä½œæ–‡æª”ï¼Œæ˜¯æœå°‹è³‡æ–™çš„æœ€å°å–®å…ƒï¼Œä»¥JSONä½œç‚ºå„²å­˜çš„è³‡æ–™æ ¼å¼ï¼Œåœ¨ä¸€å€‹Indexæˆ–è€…Typeä¸­ï¼Œå¯ä»¥å­˜å„²å¾ˆå¤šå€‹documentã€‚ index ç´¢å¼•indexåœ¨Elasticsearchä¸­ç›¸ç•¶æ–¼ä¸€å€‹è³‡æ–™åº«ï¼Œæ‰€ä»¥indexåº•ä¸‹æœƒåŒ…å«å¤šå€‹document æ•´ç†å¹¾å€‹é‡è¦çš„ç›¸é—œåè© index: åœ¨Elasticsearchä¸­indexç›¸ç•¶æ–¼ä¸€å€‹è³‡æ–™åº«ã€‚ type: ç›¸ç•¶æ–¼è³‡æ–™åº«ä¸­çš„ä¸€å€‹è¡¨ã€‚ id: é¡ä¼¼è³‡æ–™åº«çš„ä¸»éµ(Primary Key)ï¼Œä½œç‚ºå”¯ä¸€çš„å€¼ï¼Œdocumentä¸­çš„çš„IDå¯ä»¥ç”±Elasticsearchè‡ªå‹•åˆ†é…ï¼Œæˆ–æ‰‹å‹•æ·»åŠ åˆ°indexæ™‚åˆ†é…çµ¦å®ƒå€‘ã€‚ node: ç¯€é»æ˜¯Elasticsearchå¯¦ä¾‹(Instance)ï¼Œå¯ä»¥çœ‹æˆå¢é›†(Cluster)ä¸­çš„ä¸€å€‹ç¯€é»ã€‚ä¸€å°æ©Ÿå™¨å¯ä»¥åŸ·è¡Œå¤šå€‹å¯¦ä¾‹ï¼Œä½†æ˜¯åŒä¸€å°æ©Ÿå™¨ä¸Šçš„å¯¦ä¾‹åœ¨é…ç½®ä¸Šè¦ç¢ºä¿httpå’Œtcp Portä¸åŒã€‚ cluster: è¡¨ä¸€å€‹å¢é›†ï¼Œå¢é›†ä¸­æœ‰å¤šå€‹ç¯€é»ï¼Œå…¶ä¸­æœ‰ä¸€å€‹æœƒè¢«é¸çˆ²ä¸»ç¯€é»ï¼Œé€™å€‹ä¸»ç¯€é»æ˜¯å¯ä»¥é€šéé¸èˆ‰ç”£ç”Ÿçš„ï¼Œä¸»å¾ç¯€é»æ˜¯å°æ–¼é›†ç¾¤å…§éƒ¨ä¾†èªªçš„ã€‚ document: ç¨±ä½œæ–‡æª”ï¼Œæ˜¯æœå°‹è³‡æ–™çš„æœ€å°å–®å…ƒï¼Œå¯èƒ½æ˜¯ log æ–‡ä»¶ä¸­çš„ä¸€ç­†ç´€éŒ„ ï¼Œä»¥JSONï¼ˆç”±ä¸€å † Key:Value çš„è³‡æ–™çµ„æˆï¼‰ä½œç‚ºå„²å­˜çš„è³‡æ–™æ ¼å¼ã€‚åœ¨ä¸€å€‹Indexæˆ–è€…Typeä¸­ï¼Œå¯ä»¥å­˜å„²å¾ˆå¤šå€‹documentã€‚é›–ç„¶documentæ˜¯å„²å­˜åœ¨Indexä¸­ï¼Œä½†å¯¦éš›ä¸Šï¼Œå®ƒå¿…éœ€è¢«ç´¢å¼•æˆ–åˆ†é…åˆ°Indexä¸­çš„ä¸€å€‹Typeä¸Šã€‚ åƒé–± What is an Elasticsearch Index? Introduction to the Elasticsearch Architecture","link":"2020/05/16/DevOps/ELK/%5BELK%5D%20Hello!%20ELK/"},{"title":"[Ansile] å…¥é–€æ¦‚å¿µ","text":"ä»€éº¼æ˜¯ Ansile?Ansile æ˜¯ç”± Red Hat(ç´…å¸½) å…¬å¸æ‰€æä¾›ï¼Œç¶“é–‹æ”¾åŸå§‹ç¢¼ç¤¾ç¾¤é€²è¡Œé–‹ç™¼ï¼Œç§‰æŒåŸºç¤è¨­æ–½å³ä»£ç¢¼ç‚ºå…¶ä¸­ä¸€é …ç†å¿µï¼Œå°ˆæ³¨åœ¨ IT è‡ªå‹•åŒ–é ˜åŸŸï¼Œé€éæ’°å¯« YAML è…³æœ¬å° IT åŸºç¤è¨­æ–½é€²è¡Œæ“ä½œåŠç®¡ç†ã€‚ ä¸»è¦çš„å„ªé»ï¼š ä»¥ YML æ ¼å¼ç·¨å¯«ï¼Œå®¹æ˜“ä¸Šæ‰‹èˆ‡ç¶­è­· ç„¡ä»£ç†(Agentless)ç¨‹å¼ é€é SSH é€²è¡Œé€£ç·šï¼Œç”¨æ–¼èˆ‡é ç«¯ Server æºé€šã€‚ ä¸éœ€è¦å®‰è£åœ¨ Client ç«¯ ç‰¹è‰²é€™è£¡åˆ—èˆ‰å¹¾é … Ansible çš„ç‰¹è‰² ç„¡ä»£ç†(Agentless)ç¨‹å¼ç°¡å–®èªªæ˜ä»€éº¼æ˜¯ç„¡ä»£ç†(Agentless)ç¨‹å¼ï¼Œé¸æ“‡ä¸€å°è£æœ‰ Ansible ä½œç‚ºä¸­å¤®æ§ç®¡çš„ä¸»æ©Ÿï¼Œå¯è—‰ç”±è©²ä¸»æ©Ÿé ç«¯ç™»å…¥å…¶ä»–çš„ç›®æ¨™ä¸»æ©Ÿã€‚ åˆ—é»æ•´ç†: æ–¼ä¸­å¤®ä¸»æ©Ÿè®€å…¥å¯«å¥½è¦ Ansible é€²è¡Œç›¸é—œæ“ä½œçš„è…³æœ¬ Ansible é€éç¶²è·¯ä½œé ç«¯é€£ç·šï¼Œç›´æ¥å°å…¶ä»–ç›®æ¨™ç¯€é»ä¸Šçš„ä¸»æ©ŸåŸ·è¡Œè…³æœ¬ä¸‹é”çš„è¡Œç‚º é ç«¯é€£ç·šæ–¹å¼æ¡ç”¨ SSH æ¡ â€œæ¨æ’­â€ å‹çš„æ¶æ§‹ ä¹Ÿå°±æ˜¯èªªï¼ŒAnsible èƒ½å¤ è·Ÿäººç‚ºé€²è¡Œç™»å…¥çš„è¡Œç‚ºç›¸åŒ ä¸‹åœ–è§£é‡‹ç„¡ä»£ç†(Agentless)ç¨‹å¼çš„éç¨‹ï¼šåœ–ç‰‡æº Ansile çµ„æˆåŠå¸¸è¦‹åè©Ansible çµ„æˆä¸»è¦ä»°è³´ä»¥ä¸‹å¹¾å€‹è¦ç´ : Ansile æœ¬é«” Inventory: ç”¨æ–¼å®šç¾©ç›®æ¨™æ©Ÿå™¨çš„é€£ç·šè³‡è¨Šï¼Œæ’°å¯«é ç«¯ Server çš„è³‡è¨Š -&gt; â€œåœ¨å“ªè£¡â€ ä¾†åŸ·è¡Œ Ansible Module: åœ¨ Client ç«¯åŸ·è¡Œçš„æŒ‡ä»¤æˆ–ä¸€çµ„é¡ä¼¼æŒ‡ä»¤ Playbook: ç…§å­—é¢çš„æ„æ€ç‚ºåŠ‡æœ¬ã€‚å¯ä»¥è—‰ç”±äº‹å…ˆå®šç¾©å¥½çš„Playbooks ä¾†è®“å„å€‹ Managed Node é€²è¡ŒæŒ‡å®šçš„å‹•ä½œ (Plays) å’Œä»»å‹™ (Tasks) -&gt; å°‡éœ€è¦è‡ªå‹•åŒ–çš„æ±è¥¿éƒ½æœƒå¯«åœ¨è£¡é¢ Task: å–®å€‹éœ€è¦è‡ªå‹•åŒ–åŸ·è¡Œçš„ä»»å‹™ Handlerï¼šç”¨ä¾†è§¸ç™¼æœå‹™çš„ç‹€æ…‹ï¼Œe.g. é‡å•Ÿï¼Œåœæ­¢æœå‹™ ansible.cfgï¼šAnsible ä¸»è¦çš„è¨­å®šæª” Roleï¼šå°‡ Playbooks è·Ÿå…¶ä»–ç›¸ä¾æª”æ¡ˆä¸€åŒæ•´åˆèµ·ä¾†ï¼Œä½œç‚º Module ä½¿ç”¨ å¦å¤–ï¼ŒAnsile é€™å¥—å·¥å…·æ˜¯åŸºæ–¼ Python æ‰€æ’°å¯«ï¼Œè¨±å¤šè¨­è¨ˆå“²å­¸åƒè€ƒ Pythonã€‚ å€åˆ†æ©Ÿå™¨è§’è‰²åœ¨ Ansible è£¡ï¼Œæœƒå°‡æ‰€æœ‰æ©Ÿå™¨çš„è§’è‰²å€åˆ†æˆå…©ç¨® Control Machine (æ§åˆ¶ä¸»æ©Ÿ)ï¼šé€™é¡ä¸»æ©Ÿéœ€å®‰è£ Ansible ä¸”é€éåŸ·è¡Œ Playbook å° Managed Node (è¢«æ§ç¯€é»)é€²è¡Œéƒ¨ç½²ã€‚ Managed Node (è¢«æ§ç¯€é»)ï¼šåˆä½œé™æ§ç¯€é» (Remote Node)ã€‚ç›¸å°æ–¼æ§åˆ¶ä¸»æ©Ÿï¼Œé€™é¡ç¯€é»ç‚ºé€é Ansible é€²è¡Œéƒ¨ç½²çš„ç›®æ¨™ã€‚ é€™é¡ç¯€é»ä¸éœ€è¦å®‰è£ Ansible ï¼Œä½†é ˆç¢ºä¿è©²ç¯€é»å¯é€é SSH èˆ‡ control machine æºé€š LinterAnsible æœ‰å°æ‡‰çš„ linter å«åš Ansible-lintï¼Œå¹«åŠ©é–‹ç™¼è€…åœ¨æ’°å¯«çš„éç¨‹ä¸­ç¶­æŒ Ansible çš„æ’°å¯«é¢¨æ ¼ã€‚ å®‰è£ 1sudo pip install ansible-lint æŸ¥çœ‹ç‰ˆæœ¬ 1ansible-lint --version output 1ansible-lint 4.2.0 Hands on Lab12345678910111213141516171819202122- name: Install nginx &amp; PostgreSQL # hosts: dev1 become: true tasks: - name: Run command to update shell: apt upgrade -y; apt update - name: Install nginx apt: name: nginx state: latest - name: Start NGINX service: name: nginx state: started - name: Install PostgreSQL apt: name: postgresql state: latest - name: Start PostgreSQL service: name: postgresql state: started","link":"2021/03/17/DevOps/ansible/%5BAnsile%5D%20%E5%85%A5%E9%96%80%E6%A6%82%E5%BF%B5/"},{"title":"[Redis] æé«˜ Redis åŸ·è¡Œæ•ˆç‡çš„æ–¹æ³• - Pipeline","text":"å‰è¨€ éå»åœ¨ä½¿ç”¨ Redis æŒ‡ä»¤æ™‚ï¼Œéƒ½æ˜¯ä¸€æ¢ä¸€æ¢æŒ‡ä»¤ç™¼é€çµ¦ Redis ï¼Œæ¯æ¢æŒ‡ä»¤éƒ½æœƒç¶“é ç™¼é€æŒ‡ä»¤ -&gt; Redis server æ¥æ”¶æŒ‡ä»¤ -&gt; è™•ç†è³‡æ–™ -&gt; å›å‚³çµæœ çš„æµç¨‹ï¼Œé€™æ¨£ä¸€ä¾†ä¸€å›èŠ±è²»çš„æ™‚é–“ç¨±ä½œ round-trip time (ç°¡ç¨±RTT)ï¼Œåœ¨å‚³é€éç¨‹ä¸­é‚„éœ€è€ƒé‡ç¶²è·¯æ¯æ¬¡å»ºç«‹é€£ç·šè€—æ™‚èˆ‡å»¶é²å•é¡Œã€‚ è‹¥åŒæ™‚æœ‰å¤šæ¢æŒ‡ä»¤è¦è™•ç†æ™‚ï¼ŒRTT å°±æœƒæ‹‰é•·ï¼Œç‚ºç¸®çŸ­å¤šå€‹æŒ‡ä»¤åœ¨åŒæ™‚é–“æ’éšŠåˆ†åˆ¥åŸ·è¡Œé€ æˆçš„æ•ˆèƒ½å•é¡Œï¼ŒRedis æä¾› Pipeline çš„æ©Ÿåˆ¶ï¼Œè®“å¤šå€‹æŒ‡ä»¤åœ¨åŒæ™‚é–“åŸ·è¡Œä¸”ä¸éœ€ç›¸äº’ç­‰å¾…ï¼Œä¸€æ¬¡å›å‚³æ‰€åŸ·è¡Œå®Œçš„çµæœã€‚ æ—¢ç„¶é€™é …æ©Ÿåˆ¶å°æ–¼æ•ˆèƒ½æå‡æœ‰å¹«åŠ©ï¼Œä¾†äº†è§£ä¸€ä¸‹ Redis Pipeline çš„æ¦‚å¿µåŠä½¿ç”¨ä¸Šè¦æ³¨æ„çš„é …ç›®å§ï¼ Pipelineå¦‚å‰è¨€æ‰€æè¿°ï¼Œåœ¨æœªä½¿ç”¨ Pipeline ä¹‹å‰ï¼Œæ˜¯å¤šæ¢æŒ‡ä»¤ä¾åºå»å° Redis ç™¼é€æŒ‡ä»¤ï¼Œå¾ç™¼é€æŒ‡ä»¤åˆ°æ”¶åˆ°åŸ·è¡Œçµæœï¼Œæ•´å€‹éç¨‹éš¨è‘—æŒ‡ä»¤çš„æ•¸é‡è®Šå¤šï¼Œç­‰å¾…æ™‚é–“è·Ÿè‘—è®Šé•·ï¼Œè€Œå¼•å…¥ Pipeline æ©Ÿåˆ¶ï¼Œå¯è®“å¤šå€‹æŒ‡ä»¤ä¸€æ¬¡ç™¼é€çµ¦ Redis serverï¼ŒPipeline å¯¦ç¾çš„åŸç†æ˜¯æ¡ç”¨ Queue (æ’éšŠçš„æ–¹å¼)ï¼Œä»¥å…ˆé€²å…ˆå‡ºçš„æ–¹å¼ç¢ºä¿è³‡æ–™çš„é †åºæ€§ï¼Œæœ€å¾ŒåŸ·è¡Œ exec æŒ‡ä»¤å°‡ Queue è£¡æ‰€æœ‰çš„æŒ‡ä»¤ä¸€æ¬¡ç™¼é€çµ¦ Redisã€‚ ä¾åºç™¼é€(æœªä½¿ç”¨ Pipeline) å¦‚ä¸Šåœ–æ‰€ç¤ºï¼Œæœ‰å››æ¢æŒ‡ä»¤ä¾åºå° Redis é€²è¡Œç™¼é€ï¼Œæ•´é«”èŠ±è²»çš„æ™‚é–“æ˜¯å››æ¢æŒ‡ä»¤ä¾†å›èŠ±è²»æ™‚é–“çš„åŠ ç¸½ã€‚ æ‰¹æ¬¡ç™¼é€(ä½¿ç”¨ Pipeline) ä¸Šåœ–ç”¨å’–å•¡è‰²çš„ Pipeline åŒ…èµ·ä¾†çš„æ‰€æœ‰æŒ‡ä»¤æœƒä¸€æ¬¡ç™¼é€çµ¦ Redisï¼ŒåªèŠ±è²»ä¸€æ¬¡ç™¼é€çš„ä¾†å›æ™‚é–“ï¼Œç›¸è¼ƒæ–¼å‰é¢çš„æ–¹å¼ï¼Œæ‰¹æ¬¡ç™¼é€èŠ±æ›´å°‘çš„æ™‚é–“è™•ç† Client ç«¯é€ä¾†çš„æŒ‡ä»¤ï¼Œä¹Ÿæ„å‘³è‘—èƒ½å¤ ç¸®çŸ­ç³»çµ±å›æ‡‰æ™‚é–“ã€‚ é™¤äº† RTT ä¹‹å¤–ï¼ŒPipeline ä¹Ÿæé«˜äº† Redis server ä¸­æ¯ç§’å¯ä»¥åŸ·è¡Œçš„æŒ‡ä»¤æ•¸é‡ã€‚ é€™æ˜¯å› ç‚ºåœ¨æœªä½¿ç”¨ Pipeline ä¸€æ¢ç™¼é€æŒ‡ä»¤çš„æƒ…æ³ä¸‹ I/O æˆæœ¬æœƒå¾ˆé«˜ï¼Œé€™ç‰½æ¶‰åˆ°ç³»çµ±å‘¼å« read() and write() çš„è½‰æ›ï¼Œé »ç¹çš„ context switch å° server æœƒæ˜¯å¾ˆå¤§çš„è² æ“”ã€‚ èˆ‰ä¾‹:æœªä½¿ç”¨ Pipeline çš„æƒ…å½¢ä¸‹ç™¼é€ 10 æ¢æŒ‡ä»¤ï¼Œç³»çµ±å‘¼å«ç™¼ç”Ÿ 10 æ¬¡ context switchï¼Œè‹¥æ–¼ Pipeline è£¡é¢å°‡ 10 æ¢æŒ‡ä»¤ä¸€æ¬¡ç™¼é€ï¼Œåªæœƒç™¼ç”Ÿä¸€æ¬¡ context switch æ³¨æ„ å–®å€‹ Pipeline å¤§å°:å„˜ç®¡ Pipeline èƒ½æœ‰æ•ˆé™ä½ RTTï¼Œæ¸›å°‘ I/O æ¬¡æ•¸ï¼Œè‹¥ client ç«¯ä½¿ç”¨ Pipeline å°‡å¤§é‡æŒ‡ä»¤ä»¥é¡ä¼¼ç¾¤çµ„çš„æ–¹å¼ï¼Œä¸€æ¬¡ç™¼é€çµ¦ Redis serverï¼Œæœƒæ¶ˆè€—å¤§é‡çš„è¨˜æ†¶é«”(ç¾¤çµ„è£¡çš„æŒ‡ä»¤è¶Šå¤šï¼Œæ¶ˆè€—çš„è¨˜æ†¶é«”è³‡æºè¶Šå¤§)ï¼ŒåŒæ™‚æœƒå¢åŠ  client ç«¯çš„ç­‰å¾…æ™‚é–“ï¼ŒåŠé€ æˆä¸€å®šç¨‹åº¦çš„å»¶é²ã€‚å› æ­¤ä»é ˆæ³¨æ„ Pipeline å®¹é‡ä¸å¯éå¤§ï¼Œéå¤§æ™‚ç›¡å¯èƒ½æ¡ç”¨å¤šå€‹ Pipeline åˆ†æ¬¡ç™¼é€ï¼Œæ¸›å°‘å–®æ¬¡ Pipeline çš„å¤§å°(å—é™æ–¼serverçš„è¨˜æ†¶é«”å¤§å°)ã€‚èˆ‰ä¾‹: æ¯”è¼ƒ2è¬æ¢æŒ‡ä»¤ä¸åŒçš„ç™¼é€æ–¹å¼ä¸€æ¬¡æ€§ç™¼é€å’Œåˆ†å…©æ¬¡ç™¼é€(æ¯æ¬¡ç™¼1è¬æ¢æŒ‡ä»¤ï¼Œè®€å®Œè³‡æ–™æ”¶åˆ°å›æ‡‰å¾Œå†ç™¼å¦å¤–1è¬æ¢æŒ‡ä»¤)ã€‚å° client ç«¯ä¾†èªªé€Ÿåº¦æ˜¯å·®ä¸å¤šï¼Œä½†æ˜¯å° server ç«¯ä¾†èªªï¼Œè¨˜æ†¶é«”ä½”ç”¨å»å·®äº†1è¬æ¢æŒ‡ä»¤å›æ‡‰çš„å¤§å°ã€‚ é©ç”¨æ–¼åŸ·è¡Œé€£çºŒä¸”ç„¡ç›¸ä¾æ€§çš„æŒ‡ä»¤(ä¸éœ€ä»°è³´å‰ä¸€å€‹æŒ‡ä»¤çš„å›å‚³çµæœ) ä¸æ“æœ‰åŸå­æ€§(Atomic): ç™¼é€çš„å¤šæ¢æŒ‡ä»¤è£¡é¢å¯èƒ½éƒ¨åˆ†æˆåŠŸï¼Œä¸€éƒ¨åˆ†å¤±æ•—; Pipeline åœ¨ server ä¸Šæ˜¯éé˜»å¡çš„ï¼Œæ„å‘³è€…è‹¥æœ‰ä¾†è‡ªå…¶ä»– client ç™¼é€çš„ pipeline ä¸æœƒè¢«é˜»æ­¢ï¼Œç”¢ç”Ÿäº¤éŒ¯åŸ·è¡Œçš„ç‹€æ³ã€‚ (å¦‚ä¸‹åœ–æ‰€ç¤ºï¼Œåœ–ç‰‡å–è‡ª Thomas Hunter çš„ç°¡å ±) ä½¿ç”¨æ™‚æ©Ÿ éœ€è¦æ¸›å°‘ç¶²è·¯å»¶é²ï¼Œæå‡æ•ˆèƒ½ éœ€è¦ç™¼é€å¤šæ¢æŒ‡ä»¤çµ¦ Redisï¼Œä¸”æŒ‡ä»¤ä¹‹é–“æ²’æœ‰ç›¸ä¾æ€§(ä¸éœ€ç­‰å¾…ä¸Šå€‹æŒ‡ä»¤çš„çµæœ)ï¼Œä¸€æ¬¡ç²å¾—æ‰€æœ‰çµæœ å¯é æ€§è¦æ±‚è¼ƒä½çš„éœ€æ±‚ï¼Œå…è¨±ä¸€å®šæ¯”ä¾‹çš„å¤±æ•—(å¯å¾ŒçºŒè£œå„Ÿ) e.g. å¤§é‡ç™¼é€ç°¡è¨Š èˆ‡ Transactions(multi) çš„å·®ç•°multi ç”¨æ–¼é–‹å•Ÿ Transactionsã€‚ Transaction è£¡å¤šæ¢æŒ‡ä»¤æœƒæŒ‰ç…§å…ˆå¾Œé †åºè¢«æ”¾é€²ä¸€å€‹ Queue è£¡ï¼Œæœ€å¾ŒåŸ·è¡Œ EXEC æŒ‡ä»¤å®Œæˆ Transactionã€‚ å…©è€…å·®åˆ¥: è«‹æ±‚æ¬¡æ•¸ä¸åŒï¼š multi éœ€è¦æ¯å€‹æŒ‡ä»¤éƒ½ç™¼é€ä¸€æ¬¡è«‹æ±‚çµ¦ server ç«¯ï¼ŒPipeline å‰‡æ˜¯æœ€å¾Œä¸€æ¬¡æ€§ç™¼é€çµ¦ server ç«¯ï¼Œè«‹æ±‚æ¬¡æ•¸ç›¸è¼ƒ multi å°‘ åŸå­æ€§(Atomic): Pipeline ä¸ä¿è­‰åŸå­æ€§ï¼ŒPipeline ä¸­ç™¼é€çš„æ¯æ¢æŒ‡ä»¤éƒ½æœƒè¢« server ç«‹å³åŸ·è¡Œï¼Œè‹¥åŸ·è¡Œå¤±æ•—ï¼Œå°‡æœƒåœ¨å›æ‡‰è£¡é¢å¾—åˆ°å°æ‡‰å¾—éŒ¯èª¤è³‡è¨Šï¼› Transactions æ“æœ‰åŸå­æ€§ï¼Œä¸æœƒç™¼ç”Ÿèˆ‡å…¶ä»– client ç™¼é€æŒ‡ä»¤äº¤äº’åŸ·è¡Œçš„æƒ…æ³(å¦‚ä¸‹åœ–æ‰€ç¤º) ç¯„ä¾‹Redis æä¾›å„å€‹ç†±é–€ç¨‹å¼èªè¨€å‡½å¼åº«ï¼Œä¸‹æ–¹æä¾› Python çš„ç¯„ä¾‹ï¼Œä½¿ç”¨ redis-py é€™å€‹å®˜æ–¹æ”¯æ´çš„å‡½ç¤ºåº«ã€‚ ä¸‹æ–¹ç¯„ä¾‹æœƒå…ˆå»ºç«‹åç‚º product çš„ç¯„ä¾‹è³‡æ–™ï¼Œè£¡é¢åŒ…å«ä¸åŒçš„ t-shirt æ¨£å¼ï¼Œç›®æ¨™æ˜¯è¦å°‡ç¯„ä¾‹è³‡æ–™é€é hset çš„æ–¹å¼å¯«å…¥ Redis è£¡é¢ã€‚ ç¯„ä¾‹çš„è³‡æ–™çµæ§‹å¦‚ä¸‹: æç¤º: ä¿æŒä»‹é¢ä¹¾æ·¨å¯ä»¥å–„ç”¨ä¸‹æ–¹ç®­é ­æ”¶èµ·ç¨‹å¼ç¢¼å€å¡Š 1234567891011121314151617181920212223{ &quot;shirt:1&quot;: { &quot;color&quot;: &quot;black&quot;, &quot;price&quot;: 49.99, &quot;style&quot;: &quot;fitted&quot;, &quot;quantity&quot;: 5, &quot;nPurchased&quot;: 0 }, &quot;shirt:2&quot;: { &quot;color&quot;: &quot;maroon&quot;, &quot;price&quot;: 60, &quot;style&quot;: &quot;Office Shirt&quot;, &quot;quantity&quot;: &quot;6&quot;, &quot;nPurchased&quot;: 0 }, &quot;shirt:3&quot;: { &quot;color&quot;: &quot;Pink&quot;, &quot;price&quot;: 79.99, &quot;style&quot;: &quot;Over Shirt&quot;, &quot;quantity&quot;: &quot;3&quot;, &quot;nPurchased&quot;: 0 }} Python code ç¯„ä¾‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657# å¼•å…¥ redis-py import redisimport time# ======= å»ºç«‹ç¯„ä¾‹è³‡æ–™ =======product = [ { &quot;color&quot;: &quot;black&quot;, &quot;price&quot;: 49.99, &quot;style&quot;: &quot;fitted&quot;, &quot;quantity&quot;: 5, &quot;nPurchased&quot;: 0, }, { &quot;color&quot;: &quot;maroon&quot;, &quot;price&quot;: 60, &quot;style&quot;: &quot;Office Shirt&quot;, &quot;quantity&quot;: &quot;6&quot;, &quot;nPurchased&quot;: 0, }, { &quot;color&quot;: &quot;Pink&quot;, &quot;price&quot;: 79.99, &quot;style&quot;: &quot;Over Shirt&quot;, &quot;quantity&quot;: &quot;3&quot;, &quot;nPurchased&quot;: 0, }]shirts = dict()id = 1for i in product: key = f&quot;shirt:{id}&quot; shirts[key] = i id += 1print(shirts)# ======= å»ºç«‹ Redis Connection Pool =======pool = redis.ConnectionPool(host='127.0.0.1', decode_responses=True, db=0)r = redis.StrictRedis(connection_pool=pool)starttime = time.time()# ======= å»ºç«‹ Redis Pipelineï¼Œå°‡å¤šæ¢ hset æŒ‡ä»¤æ”¾å…¥ Pipeline è£¡ç­‰å¾…åŸ·è¡Œ =======with r.pipeline(transaction=False) as pipe: for s_id, shirt in shirts.items(): for field, value in shirt.items(): pipe.hset(s_id, field, value) pipe.execute()output = f'It took {time.time() - starttime} seconds to work.'print(output) ä¸Šæ–¹ç¯„ä¾‹å‘¼å«å‡½å¼åº« redis-py è£¡çš„ pipeline()ï¼Œå°‡æ¯æ¢ hset æŒ‡ä»¤æ”¾å…¥ Pipeline è£¡ç­‰å¾…æœ€å¾Œ execute() å‘¼å«æ™‚ä¸€æ¬¡é€å‡ºã€‚ æœ€å¾Œé€é Redis Desktop Manager é€™é¡çš„è¦–è¦ºåŒ–ä»‹é¢å·¥å…·å¯ä»¥çœ‹åˆ°è¢«å¯«å…¥çš„ t-shirt è³‡æ–™ï¼ å¦å¤–ä¹Ÿå¯ä»¥å˜—è©¦ä¸ä½¿ç”¨ Pipeline çš„åšæ³•ï¼Œæ¯”è¼ƒå…©è€…æ‰€èŠ±è²»æ™‚é–“ã€‚ ç¸½çµæœ¬ç¯‡æ–‡ç« è¨è«–äº† Pipeline æ¦‚å¿µã€å¥½è™•ã€ä½¿ç”¨æ™‚æ©Ÿä»¥åŠä½¿ç”¨ä¸Šè¦æ³¨æ„çš„åœ°æ–¹ï¼Œé™¤æ­¤ä¹‹å¤–ä¹Ÿå’Œ Transactions æ¯”è¼ƒå·®ç•°ï¼Œæœ€å¾Œå¯¦éš›ç”¨ç¨‹å¼èªè¨€æ¼”ç·´ä¸€æ¬¡ç¯„ä¾‹ã€‚ Reference Redis pipelining Atomicity In Redis: Thomas Hunter Redis: Pipelining, Transactions and Lua Scripts Redis uses pipeline to speed up query speed","link":"2022/01/15/Database/Redis/%5BBackend%5D%20%E6%8F%90%E9%AB%98%20Redis%20%E5%9F%B7%E8%A1%8C%E6%95%88%E7%8E%87%E7%9A%84%E6%96%B9%E6%B3%95%20-%20Pipeline/"},{"title":"[Terraform] Terraformå…¥é–€(4) - åˆ©ç”¨Terraformä¾†æ“ä½œAWS EC2","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 09 å‰è¨€æœ¬ç¯‡ç‚ºTerraformç³»åˆ—çš„ç¬¬å››ç¯‡ï¼Œä¸»è¦å¯¦ä½œç”¨Terraformé ç«¯å»ºç«‹ä¸¦é€£æ¥EC2ï¼Œä»£æ›¿ä¹‹å‰æ‰‹å‹•é»æ“Šaws consoleï¼ŒIAMçš„éƒ¨åˆ†æœƒé¸æ“‡Amazon Linux AMIï¼Œé–±è®€æœ¬ç¯‡å»ºè­°è¦å…ˆäº†è§£AWS EC2çš„ç›¸é—œçŸ¥è­˜ã€‚ Hands on Labå»ºç«‹Security Groupå±¬æ€§å¯è©³è¦‹å®˜æ–¹çµ¦çš„sample 1234567891011121314151617181920212223242526272829303132333435# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot; #é¸æ“‡ä½ è¦çš„å€åŸŸ version = &quot;~&gt; 2.55&quot;}// HTTP Server -&gt;Security Group// Security Group(å³fire wall)=&gt; 80 port : TCP , 22 port : TCP, CIDR: [&quot;0.0.0.0/0&quot;]resource &quot;aws_security_group&quot; &quot;http_server_sg&quot; { name = &quot;http_server_sg&quot; vpc_id = &quot;VPC ID&quot; # è²¼ä¸ŠAWS é è¨­çš„VPC ID ingress{ # ingressç‚ºå…¥å£çš„é™åˆ¶è¦å‰‡ from_port = 80 to_port = 80 protocol = &quot;tcp&quot; cidr_blocks = [&quot;0.0.0.0/0&quot;] } ingress{ # ingressç‚ºå…¥å£çš„é™åˆ¶è¦å‰‡ from_port = 22 to_port = 22 protocol = &quot;tcp&quot; cidr_blocks = [&quot;0.0.0.0/0&quot;] } egress{ # å‡ºå£è¦å‰‡ from_port = 0 to_port = 0 protocol = -1 cidr_blocks = [&quot;0.0.0.0/0&quot;] } tags = { name = &quot;http_server_sg&quot; }} ä¾ç…§ä¸Šè¿°ç¨‹å¼ç¢¼åŸ·è¡Œterraform applyï¼Œå³å¯æˆåŠŸå»ºç«‹Security Group æœ‰é—œSecurity Groupè¨­å®šçš„ruleï¼Œç¯„ä¾‹çš„è¨­å®šä¸æ˜¯æ¯”è¼ƒå®‰å…¨çš„åšæ³•ï¼Œå¦‚ingressè¨­å®šã€‚NOTE: Setting protocol = â€œallâ€ or protocol = -1 with from_port and to_port will result in the EC2 API creating a security group rule with all ports open. This API behavior cannot be controlled by Terraform and may generate warnings in the future.ä¸Šè¿°ç‚ºå…¶ä¸­ä¸€å€‹æœ‰é—œå®‰å…¨è¨­å®šçš„æé†’ï¼Œæ›´å¤šå®‰å…¨å»ºè­°å¯åƒè€ƒå®˜æ–¹æ–‡ä»¶ å‹™å¿…è¦çœ‹æ¸…æ¥šç•¶å‰VPCæ‰€åœ¨çš„Regionï¼Œåˆ¥åƒæˆ‘ä¸€æ¨£ç¬¬ä¸€æ¬¡å¯¦ä½œæŠŠä¸åŒRegionçš„VPC IDè²¼ä¸Šå»ï¼Œçµæœä¸€ç›´è·³å‡ºThe vpc ID does not existçš„éŒ¯èª¤ï¼ åˆ°AWS EC2çš„ç®¡ç†ä»‹é¢ï¼Œå·¦æ–¹åˆ—è¡¨æ‰¾åˆ°Security Groupså³å¯çœ‹è¦‹å‰›å‰›æ–°å»ºçš„Security Group ä¸‹è¼‰key pairè‡³AWS EC2çš„ç®¡ç†ä»‹é¢ï¼Œå·¦æ–¹åˆ—è¡¨æ‰¾åˆ°Key Pairsï¼Œé€²å…¥é é¢é»æ“ŠCreate key pairã€‚å–åç‚ºec2-terraformï¼Œé¸æ“‡pemæª”å®Œæˆå»ºç«‹çš„åŒæ™‚ï¼Œæœƒä¸‹è¼‰ä¸€çµ„key pairåˆ°æœ¬åœ°ï¼Œå°‡æ­¤æª”ç§»å…¥å°ˆæ¡ˆè³‡æ–™å¤¾ä¸­ï¼Œæ¥è‘—æ›´æ”¹æª”æ¡ˆæ¬Šé™ 1chmod 400 ec2-terraform.pem chmod 400è¡¨ç¤ºåªæœ‰æ“æœ‰è€…æ‰èƒ½å¤ ä¿®æ”¹çš„æ¬Šé™ï¼Œéæ“æœ‰è€…åªèƒ½å¤ è®€å– å»ºç«‹EC2æ¥çºŒä¸Šé¢çš„ç¯„ä¾‹ç¨‹å¼ç¢¼ï¼Œæ¥è‘—æ–°å¢aws_instanceé€™å€‹resource 1234567resource &quot;aws_instance&quot; &quot;http_server&quot; { ami = &quot;ami-0e01ce4ee18447327&quot; # å°æ‡‰ Amazon Linux 2 AMI key_name = &quot;ec2-terraform&quot; # ä¸‹è¼‰è‡³æœ¬åœ°çš„pemæª”æª”å instance_type = &quot;t2.micro&quot; vpc_security_group_ids = [aws_security_group.http_server_sg.id] subnet_id = &quot;subnet-16ee127d&quot;} é»æ“ŠLaunch Instanceï¼Œé¸æ“‡AMIç‚ºAmazon Linux 2 AMIï¼ŒInstance Typeç‚ºt2.microAMIå°æ‡‰idçš„éƒ¨åˆ†å¯ä»¥åœ¨Choose AMIçš„ç®¡ç†ä»‹é¢ä¸­çœ‹åˆ°æ¯å€‹IAMå°ˆå±¬çš„IDè€ŒInstance Typeçš„éƒ¨åˆ†å¯ä»¥åƒè€ƒAWSæä¾›çš„typeï¼Œä¸ä¸€å®šè¦æŒ‰ç…§ä¸Šè¿°ç¯„ä¾‹ vpc_security_group_idsçš„è©±ï¼Œå…¶å¯¦å¯ä»¥å¾ .tfstate æª”æ¡ˆä¸­æ‰¾åˆ°security group çš„idï¼Œä¸éå»ºè­°éˆæ´»ä¸€é»ï¼Œä¸è¦ç›´æ¥å¯«æ­»ï¼Œé‚„æ˜¯é€éaws_security_group.http_server_sg.idä¾†å–å¾—idæœƒæ¯”è¼ƒå¥½ã€‚ subnet_idçš„è©±ï¼Œå›åˆ°VPCç®¡ç†ä»‹é¢ï¼Œå·¦æ–¹æ¬„ä½æœ‰subnetï¼Œå¯æ‰¾åˆ°æƒ³è¦çš„subnet id ç¢ºèªæ²’å•é¡Œä¹‹å¾Œå¯ä»¥å…ˆä¸‹terraform validateé€²è¡Œé©—è­‰ï¼Œæ¥è‘—åŸ·è¡Œterraform applyå°±å¯ä»¥å›‰ï¼ é€£æ¥EC2ç¾åœ¨è¦é€²è¡Œé ç«¯é€£æ¥EC2ï¼Œæˆ‘çš„ä½œæ³•åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹æ–°å¢ä¸€è³‡æ–™å¤¾ï¼Œåç‚ºaws_key_pairï¼Œä¸¦åŸå…ˆä¸‹è¼‰çš„key pairç§»å…¥æ­¤è³‡æ–™å¤¾ä¸‹ï¼Œå†è¨­ä¸€è®Šæ•¸aws_key_pairï¼Œè£¡é¢å­˜æ”¾key pairçš„ä½ç½®è·¯å¾‘ã€‚æ¥è‘—æ–°å¢resourceè¨­å®šconnectionå±¬æ€§ã€‚ type = &quot;ssh&quot;: è¡¨æˆ‘å€‘æ¡ç”¨SSHçš„æ–¹å¼é€£æ¥ host = self.public_ip: è¡¨ä¸»æ©Ÿå°æ‡‰çš„ip private_key = file(var.aws_key_pair): ç§é‘°å¾æœ¬åœ°å°ˆæ¡ˆå¤¾å…§é€²è¡Œè·¯å¾‘æœå°‹ï¼Œæ‰¾åˆ°ä¸‹è¼‰ä¸‹ä¾†çš„.pemæª” æ¥è‘—è¨­å®šprovisionerå±¬æ€§ï¼Œ&quot;remote-exec&quot;è¡¨é€²è¡Œé ç«¯æ“ä½œä¸‹é”çš„æŒ‡ä»¤ï¼Œçµ¦å®šinlineé™£åˆ—ï¼Œè£¡é¢å­˜æ”¾è¦ä¸‹é”çš„æŒ‡ä»¤ï¼Œæ¯è¡ŒæŒ‡ä»¤,å€éš” 1234567891011121314151617181920212223242526variable &quot;aws_key_pair&quot; { default = &quot;./aws_key_pair/ec2-terraform.pem&quot;}resource &quot;aws_instance&quot; &quot;http_server&quot; { ami = &quot;ami-0e01ce4ee18447327&quot; # å°æ‡‰ Amazon Linux 2 AMI key_name = &quot;ec2-terraform&quot; # ä¸‹è¼‰è‡³æœ¬åœ°çš„pemæª”æª”å instance_type = &quot;t2.micro&quot; vpc_security_group_ids = [aws_security_group.http_server_sg.id] subnet_id = &quot;subnet-16ee127d&quot; connection { # é ç«¯é€£æ¥EC2 type = &quot;ssh&quot; host = self.public_ip # å…¬æœ‰ip user = &quot;ec2-user&quot; private_key = file(var.aws_key_pair) } provisioner &quot;remote-exec&quot; { # é ç«¯åŸ·è¡ŒæŒ‡ä»¤ inline = [ # é€£æ¥é ç«¯æ™‚ï¼Œæœƒé–‹å§‹åŸ·è¡Œä¸€ç³»åˆ—çš„æŒ‡ä»¤ &quot;sudo yum install httpd -y&quot;, # install httpd &quot;sudo service httpd start&quot;, # start # å°å‡ºå­—ä¸²è¨Šæ¯è‡³index.html æª” &quot;echo Welcome to virtual server which is at ${self.public_dns} | sudo tee /var/www/html/index.html&quot;, # copy file ] }} æ–°å¢é€£æ¥EC2çš„ç¨‹å¼ç¢¼å¾Œï¼Œé ˆå…ˆå°‡EC2 terminateæ‰æœƒåŸ·è¡Œremote-execçš„æŒ‡ä»¤ï¼Œæ‰€ä»¥å…ˆåŸ·è¡Œterraform destroyï¼Œå†åŸ·è¡Œterraform applyåœ¨çµ‚ç«¯æ©Ÿä¸Šå¤§æ¦‚æœƒçœ‹åˆ°ä¸Šè¿°çš„åŸ·è¡Œç•«é¢ã€‚æ¥è‘—å¾.tfstateæª”ä¸­æ‰¾åˆ°public_dnså°æ‡‰çš„ç¶²å€ï¼Œè²¼ä¸Šç¶²å€ä¹‹å¾Œå°±å¯ä»¥é †åˆ©è¨ªå•å‰›å‰›çš„å…§å®¹å›‰ï¼ é€²éšï¼šé¸ç”¨é è¨­çš„VPCç›´æ¥ä½¿ç”¨é è¨­(default)çš„VPCï¼Œå°‡å®ƒæ”¹ç‚ºå‹•æ…‹çš„ï¼Œç”¨ä¾†å–ä»£åŸæœ¬å¯«æ­»çš„vpc_idï¼ŒTerraformæœƒè‡ªå‹•æ ¹æ“šç•¶å‰Providerè¨­å®šçš„Regionï¼Œæ‰¾è©²Regionä¸‹é è¨­çš„VPC IDï¼Œé€™æ¨£å°±ä¸æœƒç™¼ç”Ÿåƒæˆ‘ä¸Šè¿°çŠ¯ä¸‹çš„éŒ¯èª¤: æ‰¾éŒ¯Regionçš„VPC IDåŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤ 1terraform apply -target=aws_default_vpc.default ä¸¦ä¿®æ”¹vpc_idçµ¦å®šçš„å€¼ 12# vpc_id = &quot;vpc-4dbe6a26&quot; # è²¼ä¸ŠAWS é è¨­çš„VPC ID vpc_id = aws_default_vpc.default.id # ä½¿ç”¨é è¨­çš„VPC ID åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤ 1terraform apply -refresh=false å®Œæ•´ç¨‹å¼ç¢¼12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364# Configure the AWS Providerprovider &quot;aws&quot; { region = &quot;us-east-2&quot; version = &quot;~&gt; 2.55&quot;}resource &quot;aws_default_vpc&quot; &quot;default&quot; { }// HTTP Server -&gt;Security Group// Security Group(å³fire wall)=&gt; 80 port : TCP , 22 port : TCP, CIDR: [&quot;0.0.0.0/0&quot;]resource &quot;aws_security_group&quot; &quot;http_server_sg&quot; { name = &quot;http_server_sg&quot; # vpc_id = &quot;vpc-4dbe6a26&quot; # è²¼ä¸ŠAWS é è¨­çš„VPC ID vpc_id = aws_default_vpc.default.id # ä½¿ç”¨é è¨­çš„VPC ID ingress { // ingressç‚ºå…¥å£çš„é™åˆ¶è¦å‰‡ from_port = 80 to_port = 80 protocol = &quot;tcp&quot; cidr_blocks = [&quot;0.0.0.0/0&quot;] } ingress { // ingressç‚ºå…¥å£çš„é™åˆ¶è¦å‰‡ from_port = 22 to_port = 22 protocol = &quot;tcp&quot; cidr_blocks = [&quot;0.0.0.0/0&quot;] } egress { # è®“ä»»ä½•äººéƒ½èƒ½é€£é€²ä¾† from_port = 0 to_port = 0 protocol = -1 cidr_blocks = [&quot;0.0.0.0/0&quot;] } tags = { name = &quot;http_server_sg&quot; }}variable &quot;aws_key_pair&quot; { default = &quot;./aws_key_pair/ec2-terraform.pem&quot;}resource &quot;aws_instance&quot; &quot;http_server&quot; { ami = &quot;ami-0e01ce4ee18447327&quot; key_name = &quot;ec2-terraform&quot; instance_type = &quot;t2.micro&quot; vpc_security_group_ids = [aws_security_group.http_server_sg.id] subnet_id = &quot;subnet-16ee127d&quot; connection { # é ç«¯é€£æ¥EC2 type = &quot;ssh&quot; host = self.public_ip # å…¬æœ‰ip user = &quot;ec2-user&quot; private_key = file(var.aws_key_pair) } provisioner &quot;remote-exec&quot; { # é ç«¯åŸ·è¡ŒæŒ‡ä»¤ inline = [ # é€£æ¥é ç«¯æ™‚ï¼Œæœƒé–‹å§‹åŸ·è¡Œä¸€ç³»åˆ—çš„æŒ‡ä»¤ &quot;sudo yum install httpd -y&quot;, # install httpd &quot;sudo service httpd start&quot;, # start # å°å‡ºå­—ä¸²è¨Šæ¯è‡³index.html æª” &quot;echo Welcome to virtual server which is at ${self.public_dns} | sudo tee /var/www/html/index.html&quot;, # copy file ] }} å¦å¤–å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå®˜æ–¹æœ‰æåˆ°aws_default_vpcä¸åŒæ–¼å…¶ä»–çš„resourceï¼ŒTerraformä¸¦ä¸æœƒé¡å¤–å»ºç«‹é€™é …è³‡æºï¼Œè€Œæ˜¯ç›´æ¥å°‡å®ƒç´å…¥ç®¡ç†ã€‚ The aws_default_vpc behaves differently from normal resources, in that Terraform does not create this resource, but instead â€œadoptsâ€ it into management.å®˜æ–¹æ–‡ä»¶","link":"2020/04/12/DevOps/Terraform/%5BDevOps%5D%20Terraform%E5%85%A5%E9%96%80(4)%20-%20%E5%88%A9%E7%94%A8Terraform%E4%BE%86%E6%93%8D%E4%BD%9CAWS%20EC2/"},{"title":"[Database] MongoDBå®‰è£èˆ‡é€£æ¥","text":"MongoDBMongoDBæ˜¯ä¸€å€‹NoSQLçš„è³‡æ–™åº«ï¼Œç›¸è¼ƒå‚³çµ±RDBMSï¼ŒNoSQLè³‡æ–™åº«ä¸éœ€äº‹å…ˆå®šç¾©schemaï¼Œè¨­è¨ˆä¸Šé¢è¼ƒç‚ºå½ˆæ€§ï¼ŒMongoDBä¹Ÿæœ‰é¡ä¼¼SQLèªæ³•å°è³‡æ–™åº«é€²è¡Œè³‡æ–™æ“ä½œçš„æ–¹æ³•ï¼Œæœ¬ç¯‡è‘—é‡æ–¼ç´€éŒ„MongoDBçš„å®‰è£èˆ‡é€£æ¥ã€‚ å®‰è£MongoDBå› ç‚ºè‡ªå·±æ˜¯ç”¨Macï¼Œæ‰€ä»¥æœ¬ç¯‡ä»¥Macç‚ºä¸»ï¼Œå®‰è£çš„æ˜¯ç¤¾ç¾¤ç‰ˆæœ¬ã€‚ CLIå®‰è£ä½¿ç”¨CLIå®‰è£æ–¹å¼ 1brew tap mongodb/brew 1brew install mongodb-community@4.2 å®˜æ–¹æ•™å­¸ æ‰‹å‹•å®‰è£å®˜æ–¹è¼‰é»ç›¸é—œæ•™å­¸ å®‰è£Mongo Compassåœ¨æœ¬åœ°æ“ä½œMongoDBé™¤äº†é€éShellæŒ‡ä»¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä½¿ç”¨MongoDBå®˜æ–¹çš„GUIå·¥å…·é€²è¡Œç®¡ç†ï¼Œåˆ°ä¸‹æ–¹çš„å®˜æ–¹è¼‰é»é¸æ“‡å°æ‡‰ç‰ˆæœ¬åŠä½œæ¥­ç³»çµ±å¾Œå³å¯ä¸‹è¼‰ã€‚å®˜æ–¹è¼‰é» ç®¡ç†ä»‹é¢ é€£æ¥é ç«¯MongoDBçš„æ–¹å¼é€£æ¥æ–¹å¼å¯æ¡ä»¥ä¸‹å¹¾ç¨®å¸¸è¦‹æ–¹å¼ Connect to Cluster0é€²å…¥MongoDBå®˜ç¶²ï¼Œç™»å…¥å€‹äººå¸³è™Ÿï¼Œ æ–¹æ³•ä¸€: Application é»æ“ŠConnect Instructionsï¼Œé¸æ“‡Connect Your Application é¸æ“‡ç¨‹å¼èªè¨€ï¼Œä¸¦è¤‡è£½ä¸‹æ–¹æŒ‡ä»¤ æ‰“é–‹Mongo Compassï¼Œè²¼ä¸Šå‰›æ‰è¤‡è£½çš„æŒ‡ä»¤ï¼Œä¸¦å°‡passwordæ›¿æ›æˆè‡ªå·±çš„ç”¨æˆ¶å¯†ç¢¼ æˆåŠŸé€£ä¸Š æ–¹æ³•äºŒ: Fill in connection fields individuallyå¯è¼¸å…¥ä¸»æ©Ÿåç¨±ã€ç”¨æˆ¶å¸³è™Ÿã€å¯†ç¢¼ç­‰æ¬„ä½ï¼Œå¦‚æœæ˜¯ç´”ç²¹åœ¨æœ¬åœ°æ¸¬è©¦ï¼ŒHostnameè¼¸å…¥localhostï¼Œporté è¨­ç‚º27017ã€‚ æ–¹æ³•ä¸‰: Mongo Shellé»æ“ŠConnect Instructionsï¼Œé¸æ“‡Connect with the Mongo Shell è¤‡è£½å®˜æ–¹çµ¦çš„mongo shell æ‰“é–‹çµ‚ç«¯æ©Ÿï¼Œè¼¸å…¥å‰›å‰›è¤‡è£½çš„æŒ‡ä»¤ï¼Œä¸¦è¼¸å…¥ç”¨æˆ¶å¯†ç¢¼ æˆåŠŸç™»å…¥ ä»¥ä¸Šç‚ºMongoDBå®‰è£åŠé€£æ¥çš„æ–¹å¼","link":"2019/09/11/Database/MongoDB/%5BMongoDB%5D%20MongoDB%E5%AE%89%E8%A3%9D%E8%88%87%E9%80%A3%E6%8E%A5/"},{"title":"[Redis] Redis - Transaction","text":"å‰è¨€ ç‚ºç¢ºä¿è³‡æ–™çš„æ­£ç¢ºæ€§ï¼Œ Redis ä¹Ÿæä¾›äº†é¡ä¼¼æ–¼é—œè¯å¼è³‡æ–™åº«çš„ Transaction æ©Ÿåˆ¶ï¼Œä½† Redis æä¾›çš„ Transaction æœ‰ä¸€äº›ç›¸ç•°ä¹‹è™• e.g. ä¸æ”¯æ´ rollbackï¼Œæœ¬ç¯‡æ–‡ç« ç´€éŒ„ Redis Transaction çš„æ¦‚å¿µèˆ‡ä½¿ç”¨æ–¹å¼ã€‚ TransactionRedis Transaction å…è¨±ä¸€æ¬¡åŸ·è¡Œå¤šæ¢æŒ‡ä»¤(æ‰¹æ¬¡æ“ä½œ)ï¼ŒTransaction åœ¨é‹ä½œæ™‚ä¸»è¦æœƒåœç¹åœ¨ MULTI, EXEC, DISCARD and WATCH é€™å››å€‹æŒ‡ä»¤ï¼Œä»¥ä¸‹æ˜¯ Transaction å¹¾å€‹é‡é»ï¼š é€²è¡Œæ‰¹æ¬¡æ“ä½œçš„æµç¨‹ä¸­ï¼Œåœ¨ç™¼é€ EXEC æŒ‡ä»¤ å‰ æœƒå…ˆè¢«åºåˆ—åŒ–ä¸”æ”¾åœ¨ Queue è£¡æŒ‰é †åºç­‰å¾…åŸ·è¡Œ Transaction æ“æœ‰åŸå­æ€§ (Atomicity)ï¼šåªæœ‰å…©ç¨®ç‹€æ…‹ï¼šå…¨éƒ¨éƒ½åŸ·è¡Œ æˆ– ä¸€å€‹éƒ½ä¸åŸ·è¡Œ ã€‚å¦‚ï¼š client ç«¯åœ¨åŸ·è¡Œ EXEC æŒ‡ä»¤å‰ç™¼ç”Ÿé€£ç·šä¸­æ–·å°è‡´ç„¡æ³•æ­£å¸¸ï¼Œå‰‡ä¸æœƒåŸ·è¡Œä»»ä½•æ“ä½œ æˆ–æ˜¯ client ç«¯åœ¨åŸ·è¡Œ EXEC æŒ‡ä»¤å‰è¼¸å…¥éŒ¯èª¤çš„æŒ‡ä»¤(e.g èªæ³•) ä¹Ÿä¸æœƒåŸ·è¡Œä»»ä½•æ“ä½œã€‚ä¸€æ—¦ Client ç«¯ç™¼é€ EXEC æŒ‡ä»¤å¾Œï¼Œæ‰€æœ‰çš„æŒ‡ä»¤é€šé€šæœƒè¢«åŸ·è¡Œï¼Œå³ä½¿ä¹‹å¾Œ Client ç«¯æ–·ç·šä¹Ÿæ²’é—œä¿‚ï¼Œå› ç‚º Redis å·²ç¶“è¨˜éŒ„æ‰€æœ‰è¦åŸ·è¡Œçš„æŒ‡ä»¤ æœ‰åˆ¥æ–¼å‚³çµ±çš„é—œè¯å¼è³‡æ–™åº«ï¼ŒRedis ä¸æ”¯æ´ rollback æ©Ÿåˆ¶(æ¸›å°‘å° Redis æ•ˆèƒ½å½±éŸ¿) Redis Transaction å…·æœ‰éš”é›¢æ€§ (Isolation)ï¼šæŒ‡çš„æ˜¯åŒä¸€ç­†è³‡æ–™ï¼Œä¿éšœä¸æœƒè¢«å…©å€‹ Transaction åŒæ™‚æ›´æ”¹ï¼Œç”¢ç”Ÿç«¶çˆ­æ¢ä»¶(Race Condition)ï¼Œä¸€å€‹ Transaction å®Œæˆä¹‹å‰ï¼Œå…¶å®ƒ client ç«¯é€å‡ºçš„å„ç¨®æ“ä½œæŒ‡ä»¤éƒ½ä¸èƒ½è¢«åŸ·è¡Œï¼Œä¿è­‰äº†éš”é›¢æ€§ã€‚ æ‡‰ç”¨Transaction çš„éš”é›¢æ€§å¯ä»¥ç¢ºä¿è³‡æ–™ä¸æœƒåœ¨åŒä¸€æ™‚é–“è¢«å¤šå€‹äººé€²è¡Œæ”¹å‹•ï¼Œç¢ºä¿è³‡æ–™æ­£ç¢ºæ€§ã€‚ èˆ‰æ ¼ç”Ÿæ´»ä¾‹å­ï¼š ç”²ä¹™å…©äººåŒæ™‚æŸ¥è©¢åŒç­ç«è»ŠåŒå€‹åº§ä½ï¼Œå…©äººéƒ½ç™¼ç¾å¾Œè¨‚è³¼æ­¤åº§ä½ï¼Œç”²å…ˆå®Œæˆä»˜æ¬¾ï¼Œä¹™å¾ŒçºŒä¹Ÿå®Œæˆä»˜æ¬¾ï¼Œæœƒé€ æˆç”²æ‹¿åˆ°åº§ä½è€Œä¹™ä»˜äº†éŒ¢æ²’æœ‰æ‹¿åˆ°åº§ä½ã€‚ åŠ å…¥ Transaction æ©Ÿåˆ¶è®Šæˆç”²å…ˆå®Œæˆäº¤æ˜“ï¼Œä¹™éœ€ç­‰ç”²å®Œæˆäº¤æ˜“å¾Œå¾—çŸ¥åº§ä½æ•¸é‡å†é€²è¡Œäº¤æ˜“ã€‚ ç”¨æ³•MULTI æŒ‡ä»¤å»ºç«‹ä¸€å€‹ Transactionï¼Œæ”¶åˆ° â€œOKâ€ çš„æç¤ºå¾Œå¯é–‹å§‹è¼¸å…¥å…¶ä»–è¦åŸ·è¡Œçš„æŒ‡ä»¤æ”¾å…¥ Transactionï¼Œæœ€å¾Œå†åŸ·è¡Œ EXECã€‚ ç¯„ä¾‹1:åŸ·è¡Œå…©æ¬¡ set åˆ†åˆ¥å»ºç«‹ bank1, bank2 å…©å€‹ key 123456789&gt; MULTIOK&gt; set bank1 5000QUEUED&gt; set bank2 6000QUEUED&gt; exec1) OK2) OK æ¥çºŒ MULTI å¾Œè¼¸å…¥çš„å…©å€‹ SET æŒ‡ä»¤å¾—åˆ°çš„çµæœç‚º QUEUED è¡¨è©²æŒ‡ä»¤å·²è¢«åºåˆ—åŒ–ä¸”æ”¾åœ¨ Queue è£¡æŒ‰é †åºç­‰å¾…åŸ·è¡Œï¼Œæœ€å¾Œå¾ EXEC æ”¶åˆ° 2 å€‹ â€œOKâ€ è¡¨æ”¾åœ¨ Queue è£¡çš„å…©å€‹ SET æŒ‡ä»¤è¢«æˆåŠŸåŸ·è¡Œï¼ æ¥è‘—çœ‹å¦ä¸€å€‹ä¾‹å­ï¼Œå¦‚æœç™¼ç”Ÿ Transaction è£¡çš„æŒ‡ä»¤æœ‰éŒ¯èª¤çš„æƒ…å½¢ e.g. æŒ‡ä»¤æ‹¼éŒ¯ï¼Œ Redis æœƒåµæŸ¥åˆ°é€™å€‹éŒ¯èª¤ï¼Œä¸¦å°‡å…ˆå‰å·²æ”¾å…¥ QUEUE è£¡çš„æŒ‡ä»¤éƒ½æ¨æ£„æ‰ã€‚ ç¯„ä¾‹2:å°‡ç¯„ä¾‹ 1 çš„ bank1, bank2 çš„å€¼éƒ½åŠ ä¸Š 100ï¼Œå…¶ä¸­å° bank2 ä¸‹çš„æŒ‡ä»¤èªæ³•æ˜¯éŒ¯èª¤çš„ 12345678&gt; multiOK&gt; incrby bank1 100QUEUED&gt; incrbyy bank2 100(error) ERR unknown command `incrbyy`, with args beginning with: `bank2`, `100`,&gt; exec(error) EXECABORT Transaction discarded because of previous errors. ç”±æ–¼ incrby æ˜¯æ‹¼éŒ¯çš„æŒ‡ä»¤ï¼ŒRedis è·³å‡º â€œ(error) ERR unknown command incrbyy, with args beginning with: bank2, 100,â€ çš„éŒ¯èª¤æç¤ºï¼Œæœ€çµ‚åŸ·è¡Œ EXEC æ™‚ä¹Ÿæç¤º EXECABORT Transaction discarded æœ€å¾Œé€é MGET æª¢æŸ¥ bank1, bank2 æ˜¯å¦æœ‰è®Šå‹•ï¼š 123MGET bank1 bank21) &quot;5000&quot;2) &quot;6000&quot; å¾çµæœä¾†çœ‹å‰›æ‰ Transaction è£¡ä¸‹çš„æŒ‡ä»¤æ²’æœ‰å° bank1, bank2 åšä»»ä½•è®Šå‹•ï¼Œè­‰æ˜åªè¦æœ‰ä¸€å€‹ä»¥ä¸Šçš„æŒ‡ä»¤åœ¨ åŸ·è¡ŒEXEC å‰ è¢« Redis åµæ¸¬å‡ºä¾†ï¼Œå…¶ä»–çš„æŒ‡ä»¤å³ä¾¿æ˜¯æ²’å•é¡Œçš„ä¹Ÿæœƒè¢«æ¨æ£„æ‰ï¼Œä¿æŒåŸ·è¡Œå‰çš„ç‹€æ³ Transaction è£¡çš„éŒ¯èª¤å¯¦å‹™ä¸Šå¯èƒ½ç™¼ç”Ÿ Redis æ²’è¾¦æ³•äº‹å…ˆæ–¼ QUEUE è£¡åµæŸ¥åˆ°é€™é¡çš„éŒ¯èª¤ï¼Œå¦‚EXEC åŸ·è¡Œ ä¹‹å¾Œ æ‰å¼•ç™¼éŒ¯èª¤ï¼Œè¡¨ç¤º Transaction è£¡ç­‰å¾…è¢«åŸ·è¡Œçš„æŒ‡ä»¤å¥—ç”¨éŒ¯èª¤çš„ä½¿ç”¨æƒ…å¢ƒã€‚ å¸¸è¦‹ä¾‹å­ï¼šé‡å° Lists æ“ä½œçš„æŒ‡ä»¤ï¼Œç›®æ¨™ key çš„è³‡æ–™é¡å‹å»æ˜¯ String ç¯„ä¾‹3:æ›¿æ› ç¯„ä¾‹2 å° bank2 ä¸‹çš„æŒ‡ä»¤ï¼Œæ”¹ç‚º ZADDã€‚ 123456789101112&gt; incrby bank1 100QUEUED&gt; zadd bank2 1 100QUEUED&gt; exec1) (integer) 51002) (error) WRONGTYPE Operation against a key holding the wrong kind of value&gt; MGET bank1 bank21) &quot;5100&quot;2) &quot;6000&quot; ç”±æ–¼ bank2 è³‡æ–™é¡å‹æ˜¯ stringï¼ŒZADD å‰‡æ˜¯æ“ä½œ sortedset é¡å‹ï¼Œç›¸ç•°é¡å‹çš„æŒ‡ä»¤æ“ä½œç„¡æ³•åœ¨æ”¾å…¥ QUEUE æ™‚ä¸”åŸ·è¡Œ EXEC ä¹‹å‰è¢« Redis åµæ¸¬å‡ºéŒ¯èª¤ã€‚ è‹¥å°‡ZADD çš„åŸ·è¡Œé †åºèˆ‡ INCRBY å°èª¿ä¹Ÿæœƒå¾—åˆ°ä¸€æ¨£çš„çµæœ 12345678910111213&gt; multiOK&gt; zadd bank2 1 100QUEUED&gt; incrby bank1 100QUEUED&gt; exec1) (error) WRONGTYPE Operation against a key holding the wrong kind of value2) (integer) 5200&gt; MGET bank1 bank21) &quot;5200&quot;2) &quot;6000&quot; ç›¸è¼ƒæ–¼å‰é¢ç¯„ä¾‹ 2 æŒ‡ä»¤çš„èªæ³•éŒ¯èª¤ï¼Œç¯„ä¾‹ 3 çš„é¡å‹éŒ¯èª¤è®“ Transaction ä¾èˆŠæ­£å¸¸åŸ·è¡Œï¼Œä½†æ˜¯é€é MGET æŸ¥è©¢ bank1, bank2 çš„çµæœæœƒç™¼ç¾ bank1 å·²ç¶“è¢« incrby æ”¹å‹•ï¼Œè¡¨ç¤ºé€™é¡ åªæœ‰åœ¨åŸ·è¡Œ EXECå¾Œ ï¼Œè·‘å®Œæ•´å€‹ Transaction æ‰ç™¼ç”Ÿçš„éŒ¯èª¤ï¼Œé™¤äº†éŒ¯èª¤çš„é‚£å€‹æŒ‡ä»¤ä¹‹å¤–ï¼Œå…¶ä»–æŒ‡ä»¤ä»èƒ½å°è³‡æ–™é€²è¡Œæ”¹å‹•ã€‚ æˆªè‡ªå®˜æ–¹æ–‡ä»¶çš„æè¿°ï¼šItâ€™s important to note that even when a command fails, all the other commands in the queue are processed â€“ Redis will not stop the processing of commands. DISCARDåŸ·è¡Œ DISCARD æŒ‡ä»¤æ™‚ï¼Œæœƒæ”¾æ£„ Transactionsï¼ŒåŒæ™‚ QUEUE è£¡é¢çš„æ‰€æœ‰æŒ‡ä»¤æœƒè¢«æ¸…ç©ºï¼Œä¸¦é€€å‡ºæ•´å€‹ç‹€æ…‹ï¼š ç¯„ä¾‹4æ–°å¢ bank3, bank4 å…©å€‹ key 1mset bank3 1000 bank4 2000 å€‹åˆ¥å°ä¸Šé¢å…©å€‹ key çš„å€¼åœ¨ Transactions è£¡åŸ·è¡Œ set å¢åŠ  100ï¼Œæ¥è‘—åŠ ä¸Š DISCARD 1234567891011&gt; multiOK&gt; incrby bank3 100QUEUED&gt; incrby bank4 100QUEUED&gt; discardOK&gt; MGET bank3 bank41) &quot;1000&quot;2) &quot;2000&quot; é€é MGET å¾—çŸ¥ bank3, bank4 å› ç‚º DISCARD æ¨æ£„åŸæœ‰çš„ incrby ï¼Œè€Œæ²’æœ‰ä»»ä½•è®Šå‹• å¦‚æœæ˜¯åŠ ä¸Š DISCARD å¾Œå†åŸ·è¡Œ EXEC å‰‡æœƒå¾—åˆ°éŒ¯èª¤æç¤ºï¼š ERR EXEC without MULTIã€‚ WATCHå‰é¢è¨è«–äº† Redis çš„ Transaction æ¦‚å¿µå’Œæ“ä½œæµç¨‹ï¼Œæœ¬ç¯€æœƒè¨è«– Redis Watch æŒ‡ä»¤åŠåœ¨ Transaction ä¸­çš„è§’è‰²ã€‚ WATCH æä¾›ä¸€å€‹åç‚º check-and-set (CAS) çš„æ©Ÿåˆ¶çµ¦ Transactionï¼Œç”¨æ–¼åµæ¸¬æŒ‡å®šçš„ key æ˜¯å¦åœ¨ Transaction åŸ·è¡Œä¹‹å‰ç™¼ç”Ÿè®Šå‹•ï¼Œ æ˜¯ EXEC æŒ‡ä»¤çš„åŸ·è¡Œæ¢ä»¶ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œè‹¥ WATCH æŒ‡å®šçš„ key æœ‰ç™¼ç”Ÿæ”¹å‹•ï¼Œæ•´å€‹ Transaction å°±æœƒè¢«çµ‚æ­¢ï¼Œä¸¦å›å‚³ null å€¼ã€‚ ç¯„ä¾‹1ï¼šå° bank1 ä¸‹ WATCH æŒ‡ä»¤ç›£æ¸¬ï¼Œå†å°è©² key åšæ”¹å‹•ï¼Œæœ€å¾Œæ–¼ Transaction ä¸­å° bank1 å†åšä¸€æ¬¡æ”¹å‹• 12345678910&gt; WATCH bank1OK&gt; incrby bank1 100(integer) 5200&gt; multiOK&gt; incrby bank1 100QUEUED&gt; exec(nil) åœ¨ Transaction ä¹‹å‰å° bank1 ä¸‹WATCHï¼Œæœ€å¾ŒåŸ·è¡Œ EXEC æ™‚å›å‚³ (nil) è®“æ•´å€‹ Transaction çµ‚æ­¢ã€‚ ç¯„ä¾‹2ï¼šå»¶ä¼¸ç¯„ä¾‹1çš„æ–¹å¼ï¼Œé€™æ¬¡æ”¹æˆåœ¨è‡ªå·±çš„é›»è…¦ä¸Šé–‹å…©å€‹çµ‚ç«¯æ©Ÿè¦–çª—ï¼Œå·¦é‚Šè¦–çª—å…ˆåŸ·è¡Œ watch ç›£æ§ bank1 æ˜¯å¦æœ‰è¢«æ”¹å‹•ï¼Œæ¥è‘—æ–¼å³æ–¹è¦–çª—ä¸‹æŒ‡ä»¤ incrby bank1 200 ï¼Œæ¨¡æ“¬å…¶ä»–çš„ user å°‡ bank1 çš„å€¼åŠ ä¸Š 200ã€‚å†å›åˆ°å·¦æ–¹è¦–çª—åŸ·è¡Œ multi é–‹å•Ÿ Transaction å¾Œè¼¸å…¥æŒ‡ä»¤ incrby bank1 300 å°‡ bank1 çš„å€¼åŠ ä¸Š 300ï¼ŒåŸ·è¡Œ EXEC å¾Œå¾—åˆ°å›å‚³çµæœç‚º (nil)ã€‚ å¾é€™å€‹ç¯„ä¾‹å¯ä»¥äº†è§£ watched key åœ¨å¦ä¸€å€‹ Client ç«¯é€²è¡Œæ”¹å‹•å¾Œï¼Œç¢ºä¿äº†æ²’æœ‰ç«¶çˆ­æ¢ä»¶(Race Condition)æ™‚æ‰èƒ½æ­£ç¢ºåŸ·è¡Œã€‚ è‹¥æƒ³æ¶ˆé™¤é‡å° Transaction çš„ watched key å¯åŸ·è¡Œ UNWATCH çš„æŒ‡ä»¤çµ‚æ­¢ã€‚ Noteç”±æ–¼ WATCH åªæœ‰ç•¶è¢«ç›£æ§çš„ key è¢«ä¿®æ”¹å¾Œé˜»æ­¢ä¹‹å¾Œ ä¸€å€‹ Transaction åŸ·è¡Œï¼Œä¸èƒ½ä¿è­‰å…¶ä»– Client ç«¯ä¸ä¿®æ”¹é€™å€‹ keyï¼Œæ•…ä¸€èˆ¬æƒ…æ³ä¸‹éœ€è¦ EXEC åŸ·è¡Œå¤±æ•—å¾Œé‡æ–°åŸ·è¡Œæ•´å€‹å‡½æ•¸ã€‚ å°çµæœ¬ç¯‡è¨è«– Transaction åœ¨ Redis çš„é‡è¦æ¦‚å¿µä»¥åŠMULTI, EXEC, DISCARD and WATCH é€™å››å€‹æŒ‡ä»¤ï¼Œæœ‰æ•ˆåœ°ç®¡ç† Transaction åŸ·è¡Œï¼Œæ‰èƒ½ä¿è­‰è³‡æ–™å®Œæ•´æ€§ã€‚ Ref 4.4 Redis transactions | Chapter 4: Keeping data safe and ensuring performance Redis - Transaction","link":"2022/01/11/Database/Redis/%5BBackend%5D%20Redis%20-%20Transction/"},{"title":"[Redis] Redis è³‡æ–™çµæ§‹ - Hash","text":"å‰è¨€ ä¸Šä¸€ç¯‡æ¢è¨äº† Redis Lists è³‡æ–™çµæ§‹ï¼Œæœ¬ç¯‡å°‡ç´€éŒ„ Redis å„²å­˜ç‰©ä»¶ç”¨çš„è³‡æ–™çµæ§‹ - Hash ä»€éº¼æ˜¯ Hashï¼Ÿå±¬æ–¼ field-value é›†åˆï¼Œé©åˆç”¨æ–¼å„²å­˜ç‰©ä»¶ï¼Œèˆ‡ string ä¸åŒçš„é»åœ¨æ–¼ Hash å¯ä»¥æ˜¯å¤šå€‹ field - value æˆå°å­˜åœ¨ HSET &amp;&amp; HGET &amp;&amp; HGETALL &amp;&amp; HSETNXRef: HSETã€Ref: HGETã€Ref: HGETALL HSET ç”¨æ–¼è¨­ç½® hashï¼Œè‹¥æŒ‡å®šçš„ field å·²å­˜åœ¨æ–¼ Redisï¼ŒåŸæœ‰çš„ field æœƒè¢«è¦†å¯«æ‰ã€‚è€Œ HGET å‰‡æ˜¯å–å‡ºæŒ‡å®šçš„ hash field å°æ‡‰çš„å€¼ã€‚ HGETALL å‰‡æ˜¯å–å¾—æŒ‡å®šçš„ hash ä¸‹æ‰€æœ‰ field-value ä½¿ç”¨ HSETNXï¼Œåªæœ‰åœ¨è©² field ä¸å­˜åœ¨æŒ‡å®šçš„ hash æ™‚æ‰å¯ä»¥è¨­ç½®(å›å‚³å€¼ç‚º 1)ï¼Œåä¹‹å‰‡ä¸å½±éŸ¿åŸä¾†çš„ field å°æ‡‰çš„ value (å›å‚³å€¼ç‚º 0) èªæ³•ï¼šHSET 1HSET key field value [ field value ...] HGET 1HGET key field HSETNX 1HSETNX key field value HGETALL 1HGETALL key ç¯„ä¾‹ï¼šå»ºç«‹åç‚º student çš„ hashï¼ŒåŒæ™‚çµ¦å®š name, gender, age é€™äº› field å°æ‡‰çš„å€¼ 1HSET student name &quot;Bob&quot; gender male age 22 å–å¾— student name çš„å€¼ 1234HGET student nameOutput:&quot;Bob&quot; å–å¾— student é€™å€‹ hash ä¸‹çš„æ‰€æœ‰ field - value å° 123456789HGETALL studentOutput:1) &quot;name&quot;2) &quot;Bob&quot;3) &quot;gender&quot;4) &quot;male&quot;5) &quot;age&quot;6) &quot;22&quot; ä½¿ç”¨ HSETNX å° student æ–°å¢åç‚º hobby çš„ field 12345678910HSETNX student hobby tennis# æŸ¥çœ‹ HSETNX åŸ·è¡Œå¾Œçš„çµæœHVALS studentOutput:1) &quot;Bob&quot;2) &quot;male&quot;3) &quot;22&quot;4) &quot;tennis&quot; å†åŸ·è¡Œä¸€æ¬¡ HSETNX å° student æ–°å¢åŒå€‹åç‚º hobby çš„ fieldï¼Œç”±æ–¼ hobby é€™å€‹ field å…ˆå‰å·²å­˜åœ¨ student è£¡é¢ï¼Œæ•…å›å‚³å€¼ç‚º 0ï¼Œä¸” hobby é‚„æ˜¯ä¿æŒåŸæœ¬çš„å€¼ 123HSETNX student hobby basketball(integer) 0 HMGETRef: HMGET ç›¸è¼ƒæ–¼ HEGT åªèƒ½æŒ‡å®šä¸€å€‹ fieldï¼ŒHMGET å…è¨±ä¸€æ¬¡æŒ‡å®šå¤šå€‹ fieldï¼Œå–å¾—å°æ‡‰çš„ valueã€‚ è‹¥æŒ‡å®šçš„ field å·²å­˜åœ¨æ–¼ Redisï¼ŒåŸæœ‰çš„ field æœƒè¢«è¦†å¯«æ‰; ä¸å­˜åœ¨ Redis è£¡æ™‚ï¼Œå›å‚³å€¼ç‚º nil èªæ³•ï¼š 1HMGET key field [field ...] ç¯„ä¾‹ï¼šå»¶çºŒä¸Šå€‹ hash ç¯„ä¾‹çš„ studentï¼Œé€™æ¬¡åŒæ™‚æŒ‡å®š name, age å…©å€‹ field çš„å€¼ 1234567HSET student name &quot;Bob&quot; gender male age 22HMGET student name ageOutput:1) &quot;Bob&quot;2) &quot;22&quot; field ä¸å­˜åœ¨ Redis è£¡æ™‚ï¼Œå›å‚³å€¼ç‚º nilã€‚ 123456HMGET student name age testOutput:1) &quot;Bob&quot;2) &quot;22&quot;3) (nil) ä¸Šæ–¹ç¯„ä¾‹ä¸­ test ç‚ºåŸæœ¬ä¸å­˜æ–¼ student çš„ fieldï¼Œæ•…å›å‚³å€¼ç‚º nil HVALS &amp;&amp; HKEYSRef: HVALSã€Ref: HKEYS HVALSç”¨æ–¼å–å¾—æŒ‡å®šçš„ Hash åº•ä¸‹æ‰€æœ‰çš„ valueï¼Œè€Œ HKEYS å‰‡æ˜¯å–å¾—æŒ‡å®šçš„ Hash åº•ä¸‹æ‰€æœ‰çš„ key èªæ³•ï¼š 123HVALS keyHKEYS key ç¯„ä¾‹ï¼šå»¶çºŒä¸Šå€‹ hash ç¯„ä¾‹çš„ studentï¼Œå–å¾— student ä¸‹çš„æ‰€æœ‰ values 123456HVALS studentOutput:1) &quot;Bob&quot;2) &quot;male&quot;3) &quot;22&quot; å–å¾— student ä¸‹çš„æ‰€æœ‰ keys 123456HKEYS studentOutput:1) &quot;name&quot;2) &quot;gender&quot;3) &quot;age&quot; HEXISTSRef: HEXISTS ç”¨æ–¼æª¢æŸ¥æŒ‡å®šçš„ field æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ key è£¡é¢ã€‚ å›å‚³å€¼ç‚º 1ï¼šè©² field å­˜åœ¨æŒ‡å®šçš„ key è£¡é¢ å›å‚³å€¼ç‚º 0ï¼šè©² field ä¸å­˜åœ¨æŒ‡å®šçš„ key è£¡é¢ or key æœ¬èº«å°±ä¸å­˜åœ¨ Redis èªæ³•ï¼š 1HEXISTS key field ç¯„ä¾‹ï¼šå»¶çºŒ student çš„ç¯„ä¾‹ï¼Œåˆ†åˆ¥æª¢æŸ¥ name, test é€™å…©å€‹ field æ˜¯å¦å­˜åœ¨ 12345678910HEXISTS student nameOutput:(integer) 1HEXISTS student testOutput:(integer) 0 HDELRef: HDEL æ–¼ç›®æ¨™ hash ä¸­åˆªé™¤ä¸€å€‹è‡³å¤šå€‹æŒ‡å®šçš„ field èªæ³•ï¼š 1HDEL key field [field ...] ç¯„ä¾‹ï¼šé™¤é™¤ student è£¡çš„ hobby, age é€™å…©å€‹ field 12345678910HDEL student hobby ageOutput:(integer) 2HKEYS studentOutput:1) &quot;name&quot;2) &quot;gender&quot; ç¸½çµOK! é€éå‰é¢çš„æŒ‡ä»¤å’Œç¯„ä¾‹äº†è§£å¦‚ä½•å° Hash key è£¡çš„ field å–å€¼ã€ä¿®æ”¹ã€æŸ¥è©¢åŠåˆªé™¤ï¼Œä¸‹ä¸€ç¯‡æœƒé€²å…¥åˆ° Redis è³‡æ–™çµæ§‹ - SET Reference An introduction to Redis data types and abstractions","link":"2022/01/07/Database/Redis/%5BRedis%5D%20Redis%20%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B%20-%20Hash/"},{"title":"[Redis] Redis è³‡æ–™çµæ§‹ - Lists","text":"å‰è¨€ å»¶çºŒ ä¸Šç¯‡ è¨è«–åˆ° Redis åŸºç¤çš„è³‡æ–™çµæ§‹ - Stringï¼Œæœ¬ç¯‡è¦è¨è«–å¦ä¸€å€‹è³‡æ–™çµæ§‹ - Lists ä»€éº¼æ˜¯ Listsï¼ŸRef: Lists Redis çš„ Lists ç‚ºæœ‰é †åºçš„åˆ—è¡¨ï¼Œå¯æ–¼åˆ—è¡¨çš„èµ·å§‹æˆ–æœ«ç«¯æ·»åŠ  or åˆªé™¤è£¡é ­çš„å…ƒç´  ä¾†çœ‹çœ‹ Redis å° Lists æä¾›å“ªäº›å¸¸ç”¨çš„æŒ‡ä»¤å§ï¼ LPUSHRef: LPUSH å°‡å…ƒç´ æ·»åŠ åˆ°æŒ‡å®š key è£¡çš„åˆ—è¡¨çš„ç¬¬ä¸€å€‹ä½ç½®ï¼Œå¯ä¸€æ¬¡å¯«å…¥å¤šç­†å…ƒç´ ã€‚ å›å‚³å€¼: åˆ—è¡¨çš„é•·åº¦ èªæ³•ï¼š 1LPUSH key element [element ...] ç¯„ä¾‹ï¼šæ–¼ mylist è£¡ä¸€æ¬¡å¯«å…¥ä¸‰ç­†å…ƒç´  a, b, c 1LPUSH mylist a b c é€é LRANGE å°‡è³‡æ–™åˆ—å‡ºä¾† 123456LRANGE mylist 0 -1Output:1) &quot;c&quot;2) &quot;b&quot;3) &quot;a&quot; çµæœå¾—çŸ¥ï¼Œc åœ¨ LPUSH æŒ‡ä»¤è£¡é¢æ˜¯æœ€å°¾ç«¯ï¼Œå¾ LRANGE å¾—å‡ºçš„çµæœæ˜¯æ”¾åœ¨ç¬¬ä¸€ä½ LRANGERef: LRANGE èªæ³•ï¼š 1LRANGE key start stop start ç´¢å¼•çš„èµ·å§‹ä½ç½®ï¼Œé è¨­èµ·å§‹é»ç‚º 0 stop ç´¢å¼•æœ«ç«¯çš„ä½ç½®ï¼Œå¯ç”¨ -1 è¡¨ç¤ºæœ€å°¾ç«¯ æ³¨æ„: è¶…å‡ºç¯„åœçš„ç´¢å¼•(Out-of-range indexes)è¶…å‡ºç¯„åœçš„ç´¢å¼•ä¸æœƒç”¢ç”ŸéŒ¯èª¤ï¼Œè‹¥ start å¤§æ–¼åˆ—è¡¨çš„å°¾ç«¯ï¼Œå‰‡å›å‚³ä¸€å€‹çš„ç©ºåˆ—è¡¨ã€‚è‹¥ stop è¶…éåˆ—è¡¨æœ«ç«¯çš„å¯¦éš›ç´¢å¼•å€¼ï¼ŒRedis æœƒå°‡å…¶è¦–ç‚ºåˆ—è¡¨çš„æœ€å¾Œä¸€å€‹å…ƒç´ ã€‚ start &gt; end stop è¶…éåˆ—è¡¨æœ«ç«¯çš„å¯¦éš›ç´¢å¼•å€¼ RPUSHRef: RPUSH å°‡å…ƒç´ æ·»åŠ åˆ°æŒ‡å®š key è£¡çš„åˆ—è¡¨çš„æœ«ç«¯ä½ç½®ï¼Œå¯ä¸€æ¬¡å¯«å…¥å¤šç­†å…ƒç´ ã€‚ å›å‚³å€¼: åˆ—è¡¨çš„é•·åº¦ èªæ³•ï¼š 1RPUSH key element [element ...] ç¯„ä¾‹ï¼šæ–¼ pushlist è£¡ä¸€æ¬¡å¯«å…¥ä¸‰ç­†å…ƒç´  d, e, f 1RPUSH pushlist d e f é€é LRANGE å°‡è³‡æ–™åˆ—å‡ºä¾† 123456LRANGE pushlist 0 -1Output:1) &quot;d&quot;2) &quot;e&quot;3) &quot;f&quot; RPUSHX &amp;&amp; LPUSHXRef: LPUSHXã€Ref: RPUSHX RPUSHX é¡ä¼¼å‰è¿°çš„ RPUSH æ–¹æ³•ï¼Œæ–¼åˆ—è¡¨çš„æœ«ç«¯æ’å…¥ä¸€å€‹ or å¤šå€‹å…ƒç´ ï¼Œåªæ˜¯ RPUSHX éœ€æŒ‡å®šçš„ key æ˜¯å·²å­˜åœ¨ Redis çš„æƒ…æ³ä¸‹æ‰æœƒæ·»åŠ æ–°å…ƒç´ ï¼Œè€Œ LPUSHX ä¹Ÿæ˜¯ä¸€æ¨£çš„æ¦‚å¿µã€‚ å›å‚³å€¼: åˆ—è¡¨çš„é•·åº¦ èªæ³•ï¼š 12345# LPUSHXLPUSHX key element [element ...]# RPUSHXRPUSHX key element [element ...] è‹¥åŸå§‹çš„ key ä¸å­˜åœ¨ Redis, å›å‚³å€¼ç‚º 0 åä¹‹è‹¥ key å­˜åœ¨å‰‡æœƒæ·»åŠ å…ƒç´  12345678910RPUSHX pushlist a b cOutput:LRANGE pushlist 0 -11) &quot;d&quot;2) &quot;e&quot;3) &quot;f&quot;4) &quot;a&quot;5) &quot;b&quot;6) &quot;c&quot; 123456789101112LPUSHX pushlist 123 456Output:LRANGE pushlist 0 -11) &quot;456&quot;2) &quot;123&quot;3) &quot;d&quot;4) &quot;e&quot;5) &quot;f&quot;6) &quot;a&quot;7) &quot;b&quot;8) &quot;c&quot; RPOPRef: RPOPã€Ref: LPOP LPOPï¼šåˆªé™¤ä¸¦å›å‚³å­˜åœ¨ key çš„åˆ—è¡¨è£¡ ç¬¬ä¸€å€‹å…ƒç´  RPOPï¼šåˆªé™¤ä¸¦å›å‚³å­˜åœ¨ key çš„åˆ—è¡¨è£¡ æœ€å¾Œä¸€å€‹å…ƒç´  è‹¥å…ƒç´ ä¸å­˜åœ¨ï¼Œå›å‚³å€¼ç‚º (nil) å¯æŒ‡å®šç§»é™¤å…ƒç´ çš„æ•¸é‡(æŒ‡å®šå€‹æ•¸è¶…éåŸæœ‰æ•¸é‡æ™‚è¡¨ å…¨éƒ¨ç§»é™¤) èªæ³•ï¼š 1RPOP key [count] [count] ç‚ºåˆªé™¤çš„å€‹æ•¸ï¼Œ ç¯„ä¾‹1ï¼š ç§»é™¤å–®ä¸€å…ƒç´ å°‡ pushlist è£¡çš„æœ€å¾Œä¸€å€‹å…ƒç´  &quot;c&quot; ç§»é™¤ 123456789101112131415161718192021222324252627282930# å‰è¿°çš„ pushlist ç¯„ä¾‹LRANGE pushlist 0 -1Output:1) &quot;456&quot;2) &quot;123&quot;3) &quot;d&quot;4) &quot;e&quot;5) &quot;f&quot;6) &quot;a&quot;7) &quot;b&quot;8) &quot;c&quot;# ç§»é™¤ pushlist è£¡çš„å…ƒç´ RPOP pushlistOutput:&quot;c&quot;# æŸ¥çœ‹ç§»é™¤å…ƒç´ å¾Œçš„ pushlistLRANGE pushlist 0 -1 Output:1) &quot;456&quot;2) &quot;123&quot;3) &quot;d&quot;4) &quot;e&quot;5) &quot;f&quot;6) &quot;a&quot;7) &quot;b&quot; ç¯„ä¾‹2ï¼š ç§»é™¤å¤šå€‹å…ƒç´ æŠŠèªæ³•è£¡çš„ count åƒæ•¸åŠ é€²ä¾†ï¼ŒæŒ‡å®šè¦ç§»é™¤çš„å…ƒç´ å€‹æ•¸ 12345678910111213141516171819# å‰è¿°çš„ pushlist ç¯„ä¾‹LRANGE pushlist 0 -1Output:1) &quot;456&quot;2) &quot;123&quot;3) &quot;d&quot;4) &quot;e&quot;5) &quot;f&quot;6) &quot;a&quot;7) &quot;b&quot;# æŒ‡å®šç§»é™¤ pushlist è£¡æœ€å¾Œ 3 å€‹å…ƒç´ RPOP pushlist 3Output:1) &quot;b&quot;2) &quot;a&quot;3) &quot;f&quot; LTRIMRef: LTRIM LTRIM ç”¨ä¾†æ“·å–ç‰¹å®šç¯„åœçš„å…ƒç´  èªæ³•ï¼š 1LTRIM key start stop start ä»¥ 0 ç‚ºèµ·å§‹é»é–‹å§‹ç´¢å¼•çš„ä½ç½® stop ç´¢å¼•çš„çµ‚é»ï¼Œå¯ç”¨ -1 è¡¨æœ€å¾Œä¸€å€‹å…ƒç´  ç¯„ä¾‹ï¼šåœ¨ trimlist è£¡æœ‰ä¸‰å€‹å…ƒç´ ï¼šâ€œoneâ€, â€œtwoâ€, â€œthreeâ€ 1RPUSH trimlist &quot;one&quot; &quot;two&quot; &quot;three&quot; å–å‡º â€œtwoâ€, â€œthreeâ€ å…©å€‹å…ƒç´  12345LTRIM trimlist 1 -1Output1) &quot;two&quot;2) &quot;three&quot; Note:è¶…å‡ºç¯„åœçš„ç´¢å¼•ä¸æœƒç”¢ç”ŸéŒ¯èª¤å¦‚ï¼š start å¤§æ–¼åˆ—è¡¨çš„å°¾ç«¯ï¼Œæˆ–è€… start &gt; endï¼Œå›å‚³å€¼æ˜¯ä¸€å€‹ ç©ºåˆ—è¡¨ï¼ˆé€™æœƒå°è‡´ key è¢«åˆªé™¤ï¼‰ã€‚å¦‚æœ end å¤§æ–¼åˆ—è¡¨çš„å°¾ç«¯ï¼ŒRedis æœƒå°‡å…¶è¦–ç‚ºåˆ—è¡¨çš„æœ€å¾Œä¸€å€‹å…ƒç´ ã€‚ LSETRef: LSET æŒ‡å®šç´¢å¼•ä½ç½®æ‰€åœ¨çš„å…ƒç´ é€²è¡Œæ›¿æ› èªæ³•ï¼š 1LSET key index element ç¯„ä¾‹ï¼šæ–¼ lset è£¡æ”¾ç½®ä¸‰å€‹å…ƒç´ ï¼šâ€oneâ€, â€œtwoâ€, â€œthreeâ€ 1RPUSH lset &quot;one&quot; &quot;two&quot; &quot;three&quot; åˆ†åˆ¥å°ç¬¬0ã€å€’æ•¸ç¬¬2å€‹å…ƒç´ åšæ›¿æ› 12345678910LSET lset 0 &quot;four&quot;LSET lset -2 &quot;five&quot;LRANGE lset 0 -1Output:1) &quot;four&quot;2) &quot;five&quot;3) &quot;three&quot; LINDEXRef: LINDEX æŸ¥æ‰¾æŒ‡å®šç´¢å¼•ä½ç½®æ‰€åœ¨çš„å…ƒç´ ï¼Œå›å‚³æ‰¾åˆ°çš„å…ƒç´ ï¼Œè‹¥è¶…é list ç´¢å¼•çš„ä½ç½®å‰‡å›å‚³ (nil) èªæ³•ï¼š 1LINDEX key index ç¯„ä¾‹ï¼šlist æ·»åŠ ä¸‰å€‹å…ƒç´  â€œoneâ€, â€œtwoâ€, â€œthreeâ€ 1RPUSH list &quot;one&quot; &quot;two&quot; &quot;three&quot; æŸ¥æ‰¾ç´¢å¼•ä½ç½®åœ¨ 2 çš„å…ƒç´  1234LINDEX list 2Output:&quot;three&quot; LINSERTRef: LINSERT æ–¼åˆ—è¡¨è£¡æŒ‘å‡ºä¸€å€‹å…ƒç´ ä½œç‚ºåƒè€ƒé»ï¼Œé¸æ“‡æ–¼åƒè€ƒé»çš„å‰ or å¾Œæ·»åŠ æ–°å…ƒç´  èªæ³•ï¼š 1LINSERT key BEFORE | AFTER pivot element pivot æŒ‡å®šä½œç‚ºåƒè€ƒé»çš„å…ƒç´  ç¯„ä¾‹ï¼š 1RPUSH list &quot;one&quot; &quot;two&quot; &quot;three&quot; æ–¼å…ƒç´  â€œoneâ€ å‰æ–¹æ’å…¥æ–°çš„å…ƒç´  â€œzeroâ€ 123456789LINSERT list BEFORE &quot;one&quot; &quot;zero&quot;LRANGE list 0 -1Output:1) &quot;zero&quot;2) &quot;one&quot;3) &quot;two&quot;4) &quot;three&quot; æ–¼å…ƒç´  â€œthreeâ€ å¾Œæ–¹æ’å…¥æ–°çš„å…ƒç´  â€œfourâ€ 12345678910LINSERT list AFTER &quot;three&quot; &quot;four&quot;LRANGE list 0 -1Output:1) &quot;zero&quot;2) &quot;one&quot;3) &quot;two&quot;4) &quot;three&quot;5) &quot;four&quot; è‹¥åƒè€ƒé»ä¸å­˜åœ¨æ™‚ï¼Œå›å‚³å€¼ç‚º -1 1234LINSERT list AFTER &quot;djrjtlret&quot; &quot;five&quot;Output:(integer) -1 è‹¥ key ä¸å­˜åœ¨æ™‚ï¼Œå›å‚³å€¼ç‚º 0 LLENRef: LLEN æŸ¥æ‰¾å­˜åœ¨ key çš„åˆ—è¡¨çš„é•·åº¦ã€‚ èªæ³•ï¼š 1LLEN key LREMRef: LREM ç”¨æ–¼åˆªé™¤ key åˆ—è¡¨ä¸­å‡ºç¾ç‰¹å®šæ¬¡æ•¸çš„æŒ‡å®šå…ƒç´  1LREM key count element count åƒæ•¸è¡¨æŒ‡å®šçš„æ¬¡æ•¸ è¦å‰‡å¦‚ä¸‹ï¼š count &gt; 0: åˆªé™¤ key åˆ—è¡¨ä¸­ å¾èµ·å§‹é»åˆ°çµ‚é»å‡ºç¾ç‰¹å®šæ¬¡æ•¸çš„æŒ‡å®šå…ƒç´  count &lt; 0: åˆªé™¤åˆ—è¡¨ä¸­ å¾çµ‚é»åˆ°èµ·å§‹é» å‡ºç¾ç‰¹å®šæ¬¡æ•¸çš„æŒ‡å®šå…ƒç´  count = 0: åˆªé™¤ æ‰€æœ‰ å­˜æ–¼ key åˆ—è¡¨ä¸­çš„æŒ‡å®šå…ƒç´  ç¯„ä¾‹1ï¼š å¾çµ‚é»åˆ°èµ·å§‹é»ç§»é™¤å…ƒç´ å»ºç«‹ mylist åˆ—è¡¨ï¼Œåˆ—è¡¨å…§çš„å€¼åŒ…å« 4 å€‹ â€œhelloâ€, 1 å€‹ â€œworldâ€ çš„å…ƒç´  12345678910LPUSH mylist &quot;hello&quot; &quot;hello&quot; &quot;world&quot; &quot;hello&quot; &quot;hello&quot;LRANGE mylist 0 -1Output:1) &quot;hello&quot;2) &quot;hello&quot;3) &quot;world&quot;4) &quot;hello&quot;5) &quot;hello&quot; ç¾åœ¨è¦ mylist è£¡å¾ çµ‚é»é–‹å§‹ ç§»é™¤ 2 å€‹ hello å…ƒç´  12345678LREM mylist -2 &quot;hello&quot;LRANGE mylist 0 -1Output:1) &quot;hello&quot;2) &quot;hello&quot;3) &quot;world&quot; é‡æ–°æŸ¥çœ‹ mylist å¾—åˆ°æ–°çš„çµæœæ˜¯æœ€å¾Œå…©å€‹ â€œhelloâ€ å…ƒç´ å·²å¾ Redis å…§ç§»é™¤ ç¯„ä¾‹2ï¼š å¾èµ·å§‹é»åˆ°çµ‚é»ç§»é™¤å…ƒç´ å»ºç«‹ fruit åˆ—è¡¨ï¼Œåˆ—è¡¨å…§çš„å€¼åŒ…å« 3 å€‹ â€œmangoâ€, 1 å€‹ â€œpeachâ€, 1 å€‹ â€œpeachâ€, 1 å€‹ â€œbananaâ€ å’Œ 1 å€‹ grape çš„å…ƒç´  1234567891011RPUSH fruit &quot;mango&quot; &quot;mango&quot; &quot;mango&quot; &quot;peach&quot; &quot;banana&quot; &quot;grape&quot;LRANGE fruit 0 -1Output:1) &quot;mango&quot;2) &quot;mango&quot;3) &quot;mango&quot;4) &quot;peach&quot;5) &quot;banana&quot;6) &quot;grape&quot; ç¾åœ¨è¦ fruit è£¡å¾ èµ·é»é–‹å§‹ ç§»é™¤ 2 å€‹ mango å…ƒç´  123456789LREM fruit 2 &quot;mango&quot;LRANGE fruit 0 -1Output:1) &quot;mango&quot;2) &quot;peach&quot;3) &quot;banana&quot;4) &quot;grape&quot; é‡æ–°æŸ¥çœ‹ fruit å¾—åˆ°æ–°çš„çµæœæ˜¯æœ€å‰é¢çš„å…©å€‹ â€œmangoâ€ å…ƒç´ å·²å¾ Redis å…§ç§»é™¤ ç¯„ä¾‹3ï¼š ç§»é™¤æ‰€æœ‰å…ƒç´ é‡è¤‡ç¯„ä¾‹äºŒçš„è³‡æ–™ï¼Œåªæ˜¯é€™æ¬¡å°‡ count è¨­ç‚º 0 12345678LREM fruit 0 &quot;mango&quot;LRANGE fruit 0 -1Output:1) &quot;peach&quot;2) &quot;banana&quot;3) &quot;grape&quot; ç¸½çµçœ‹å®Œå‰é¢æ‰€æœ‰çš„æŒ‡ä»¤åŠç¯„ä¾‹ï¼Œå¤§æ¦‚èƒ½äº†è§£å¦‚ä½•åœ¨ Lists è£¡æ–°å¢ã€åˆªé™¤ã€æŸ¥è©¢åŠä¿®æ”¹å…ƒç´ ï¼Œä¸‹ä¸€ç¯‡ç´€éŒ„ Redis å„²å­˜ç‰©ä»¶ç”¨çš„è³‡æ–™çµæ§‹ - Hash Reference An introduction to Redis data types and abstractions","link":"2022/01/06/Database/Redis/%5BRedis%5D%20Redis%20%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B%20-%20Lists/"},{"title":"[Database] Microsoft SQL Server æ¦‚å¿µæ•´ç†","text":"å‰è¨€é€™æ˜¯æœ¬å­¸æœŸåœ¨èª²å ‚ç´¹ä¸Šå­¸ç¿’çš„é—œè¯å¼è³‡æ–™åº«ï¼Œä»–æ˜¯å¾®è»Ÿé–‹ç™¼çš„ä¸€å¥—è³‡æ–™åº«ç®¡ç†ç³»çµ±ã€‚ä»¥ä¸‹ç°¡ç¨±:MS SQL Serverï¼›è³‡æ–™åº«ç°¡ç¨±DBMS SQL Serverä¸»è¦åˆ†å…©ç¨®DB System databaseSQL Server é‹ä½œæ‰€éœ€çš„DBï¼Œéš¨ç³»çµ±å®‰è£æ™‚è‡ªå‹•å»ºç«‹ã€‚åº•ä¸‹æœ‰å¤šå€‹å­é¡åˆ¥: masterSQL Serverçš„æ ¸å¿ƒDBï¼Œå­˜æ”¾æ‰€æœ‰userå¸³è™Ÿ&amp;å¯†ç¢¼ã€ç´€éŒ„æ‰€æœ‰DBå¯¦é«”å­˜æ”¾è·¯å¾‘ã€‚ msdbè² è²¬ç³»çµ±è‡ªå‹•åŒ–ç®¡ç†æ‰€éœ€è³‡è¨Šï¼Œå¦‚: å·¥ä½œæ’ç¨‹(job)ã€è­¦ç¤º(alert)ç­‰ã€‚ modelä½¿ç”¨è€…è³‡æ–™åº«çš„ç¯„æœ¬ï¼ŒDBA(è³‡æ–™åº«ç®¡ç†å¸«)å»ºDBæ™‚ï¼Œç³»çµ±æœƒå…ˆè¤‡è£½æ­¤DBå†åšèª¿æ•´ï¼Œç”¨æ–¼è¨­å®šDBåˆå§‹ç‹€æ…‹ã€‚ tempdbSQL Serveré‹ä½œæ™‚ï¼Œåšé‹ç®—æˆ–å­˜æ”¾çš„DBï¼Œæ¯æ¬¡å•Ÿå‹•æ™‚éƒ½æœƒé‡æ–°å»ºç«‹ã€‚ User databaseç”±DBA(è³‡æ–™åº«ç®¡ç†å¸«)å»ºç«‹ï¼Œå­˜æ”¾userè³‡æ–™ã€‚ è£œå……å¹¾å€‹åè©:DBA:è³‡æ–™åº«ç®¡ç†å¸«ï¼Œåœ¨SQL Serverä¸­ç¨±ä½œSystem Administrator(SA)ï¼Œåœ¨ä»»ä½•DBä¸­éƒ½æ˜¯DBO(è³‡æ–™åº«æ“æœ‰è€…)ã€‚ DBO(Database Owner):è³‡æ–™åº«æ“æœ‰è€…ï¼Œæ“æœ‰è³‡æ–™åº«çš„æœ€é«˜æ¬Šé™ã€‚ SQL Server Profilerç”¨æ–¼ç›£çœ‹SQL Serveræ‰€æ”¶åˆ°çš„æŒ‡ä»¤ï¼Œé ˆå…·å‚™SA(System Administrator)æ¬Šé™ã€‚ SQL èªè¨€ä¸»è¦åˆ†ä¸‰å¤§é¡: DDLã€DCLã€DMLDDL(Data Definition Language): è³‡æ–™å®šç¾©èªè¨€ç”¨æ–¼ç®¡ç†å®¹å™¨ï¼Œç‚ºDBAæ“ä½œä»‹é¢ï¼Œèªæ³•åˆ†ä¸‰é¡: CREATE å»ºç«‹ ALTER èª¿æ•´ DROP æ‘§æ¯€ DCL(Data Control Language): è³‡æ–™æ§åˆ¶èªè¨€ç”¨æ–¼ç®¡ç†æ¬Šé™ï¼Œç‚ºDBAæ“ä½œä»‹é¢ï¼Œèªæ³•åˆ†ä¸‰é¡: GRANT æˆæ¬Š DENY ç¦æ­¢ REVOKE ä¸­ç«‹ DML(Data Manipulation Language): è³‡æ–™æ“ä½œèªè¨€ç”¨æ–¼ç®¡ç†æ¬Šé™ï¼Œæ˜¯DBç¨‹å¼è¨­è¨ˆå¸«æ“ä½œDBæ™‚ä½¿ç”¨ï¼Œèªæ³•åˆ†å››é¡: Insert æ–°å¢ Delete åˆªé™¤ Update ä¿®æ”¹ Select æŸ¥è©¢ SQL Server Data Typeåœ¨é€²å…¥SQL Server è™•ç† data typeçš„æ–¹å¼ä¹‹å‰ï¼Œå…ˆç°¡å–®äº†è§£ä¸€ä¸‹å­—å…ƒç¢¼ã€‚ ASCIIç‚ºç¾åœ‹æ¨™æº–å­—æºç¢¼ï¼Œä¸»è¦ç”¨æ–¼é¡¯ç¤ºç¾ä»£è‹±èªå’Œå…¶ä»–è¥¿æ­èªè¨€ã€‚ ä¸€å€‹å­—å…ƒ = 1byte -&gt; è™•ç†ä¸€å€‹è‹±æ–‡å­—æˆ–æ•¸å­— å…©å€‹å­—å…ƒè™•ç†ä¸€å€‹ä¸­æ–‡å­— Big 5è™•ç†ç¹é«”ä¸­æ–‡ Unicodeçµ±ä¸€å­—å…ƒï¼Œåˆç¨±â€æ¨™æº–è¬åœ‹ç¢¼â€ ä¸€å€‹å­—å…ƒ = 2byte - &gt; ä¸­æ–‡ã€è‹±æ–‡å­—æˆ–æ•¸å­—çš†å¯è™•ç† å®ƒå¯ä»¥ä½¿é›»è…¦å¾—ä»¥å‘ˆç¾ä¸–ç•Œä¸Šæ•¸åç¨®æ–‡å­—çš„ç³»çµ± æ¦‚ç•¥äº†è§£å­—å…ƒç·¨ç¢¼å¾Œå°±æ­£å¼é€²å…¥SQL Serverçš„data typeï¼Œåœ¨æ–‡å­—è™•ç†ä¸Šï¼Œä½¿ç”¨ASCIIã€Unicodeä½œç¯„ä¾‹: ASCIIè™•ç† char() : ç”¨æ–¼è™•ç†å›ºå®šé•·åº¦çš„å­—ï¼Œè‹¥å®£å‘Šçš„ç©ºé–“æœªç”¨å®Œæœƒå¡«å…¥ç©ºç™½-&gt; ç¯€çœæ™‚é–“ varchar(): ç”¨æ–¼è™•ç†è®Šå‹•é•·åº¦çš„å­—ï¼Œè‹¥å®£å‘Šçš„ç©ºé–“æœªç”¨å®Œå‰‡ä¸æœƒå°‡å‰©é¤˜ç©ºé–“å¡«å…¥ç©ºç™½ text : è™•ç†é•·æ–‡å­—ï¼Œå¯æ”¾å…¥2Gå¤§å°çš„å­—å…ƒã€‚ Unicodeè™•ç†Nè¡¨Unicodeè™•ç† Nchar(): ç”¨æ–¼è™•ç†å›ºå®šé•·åº¦çš„å­— Nvarchar(): ç”¨æ–¼è™•ç†è®Šå‹•é•·åº¦çš„å­— Ntext:è™•ç†é•·æ–‡å­— æœ‰äº›æ¯”è¼ƒç‰¹æ®Šçš„ä¸­å­—ç„¡æ³•ä½¿ç”¨ASCII(Big5)è™•ç†ï¼Œæœƒé¡¯ç¤ºâ€?â€ã€‚ è£œå……UTF-8ä¸€ç¨®é‡å°Unicodeçš„å¯è®Šé•·åº¦å­—å…ƒç·¨ç¢¼ï¼Œç”¨ä¾†è¡¨ç¤ºUnicodeæ¨™æº–ä¸­çš„ä»»ä½•å­—å…ƒå…¶ç·¨ç¢¼ä¸­çš„ç¬¬ä¸€å€‹ä½å…ƒçµ„ä»èˆ‡ASCIIç›¸å®¹ï¼Œä½¿å¾—åŸä¾†è™•ç†ASCIIå­—å…ƒçš„è»Ÿé«”ç„¡éœ€æˆ–åªä½œå°‘éƒ¨ä»½ä¿®æ”¹å¾Œï¼Œä¾¿å¯ç¹¼çºŒä½¿ç”¨ã€‚ æ•¸å­—è™•ç†æ•¸å­—è³‡æ–™å‹æ…‹ä¸»è¦åˆ†å…©ç¨®: æ•´æ•¸ã€å¯¦æ•¸ æ•´æ•¸ä»¥intè¡¨ç¤ºå…¶è³‡æ–™å‹æ…‹ã€‚ å¯¦æ•¸å¯å¸¶æœ‰å°æ•¸é»ï¼Œä¸»è¦åˆ†ä¸‰é¡æ‡‰ç”¨: ç§‘å­¸è¨˜è™Ÿ: ç”¨æ–¼è¡¨ç¤ºæ¥µå¤§çš„æ•¸ï¼Œä»¥æŒ‡æ•¸çš„æ–¹å¼å„²å­˜ï¼Œä»¥floatè¡¨ç¤ºå…¶è³‡æ–™å‹æ…‹ã€‚ ç²¾ç¢ºæ•¸å­—: æŒ‡å®šæ‰€éœ€çš„æ•´æ•¸åŠå°æ•¸ç²¾ç¢ºä½æ•¸ï¼Œä»¥decimal(t,n)è¡¨ç¤ºå…¶è³‡æ–™å‹æ…‹ï¼Œtè¡¨å…¨éƒ¨æœ‰å¹¾ä½ç²¾ç¢ºæ•¸å­—ï¼Œnè¡¨å¤šå°‘ä½å°æ•¸ã€‚ éŒ¢: éŒ¢é€™å€‹ç¨®é¡æ¯”è¼ƒç‰¹åˆ¥ï¼Œåœ¨çœŸå¯¦ä¸–ç•Œä¸­ä¸æœƒæœ‰äººä½¿ç”¨å¤§æ–¼4ä½å°æ•¸çš„é‡‘éŒ¢å–®ä½ï¼Œæ‰€ä»¥åœ¨æ•¸å­—è™•ç†ä¸Šç¨ç«‹å‡ºä¸€å€‹éŒ¢çš„ç¨®é¡ï¼Œmoneyè¡¨ç¤ºå…¶è³‡æ–™å‹æ…‹ã€‚ æ™‚é–“ã€æ—¥æœŸè™•ç† DateTime: å„²å­˜è³‡æ–™å‹æ…‹ç‚ºæ—¥æœŸ&amp;æ™‚é–“ Date: å„²å­˜è³‡æ–™å‹æ…‹ç‚ºæ—¥æœŸ Time: å„²å­˜è³‡æ–™å‹æ…‹ç‚ºæ™‚é–“ æª”æ¡ˆç¨®é¡MS SQL Serverä¸­çš„æª”æ¡ˆç¨®é¡åˆ†ä½œ2ç¨®: Data File Transction Log File Data Fileå­˜æ”¾è³‡æ–™å…§å®¹ï¼Œæª”æ¡ˆä¾ç…§é †è¨Šç´°åˆ†2é¡ mdf(master data file):ç¬¬ä¸€å€‹è³‡æ–™æª”ï¼Œå‰¯æª”åç‚ºmdfã€‚ ndf(secondary data file):ç¬¬äºŒå€‹ä»¥ä¸Šçš„è³‡æ–™æª”ï¼Œå‰¯æª”åç‚ºndfã€‚ Transction Log Fileå„²å­˜äº¤æ˜“ç´€éŒ„ï¼Œå‰¯æª”åç‚ºldfã€‚ äº¤æ˜“ä¸€å€‹ä»¥ä¸Šçš„å‹•ä½œï¼Œå…·æœ‰è¦å°±å®Œå…¨å®Œæˆï¼Œå¦å‰‡å°±ç•¶ä½œä¸€åˆ‡æœªç™¼ç”Ÿçš„ç‹€æ…‹ç¨±ä½œäº¤æ˜“ï¼ŒACIDå¯ä»¥ç”¨ä¾†æè¿°äº¤æ˜“çš„ç‰¹æ€§ã€‚ A: Atomicity(å–®å…ƒæ€§)åƒèˆ‡äº¤æ˜“çš„æ‰€æœ‰å‹•ä½œåªèƒ½æœ‰å…©ç¨®çµæœï¼Œè¦å°±å…¨éƒ¨å®Œæˆï¼Œå¦å‰‡å°±æœªæ›¾ç™¼ç”Ÿé C: Consistency(ä¸€è‡´æ€§)åƒèˆ‡äº¤æ˜“çš„æ¯ä¸€å€‹å‹•ä½œï¼Œè‹¥äº¤æ˜“æˆåŠŸï¼Œå‰‡å…¨éƒ¨åœç•™åœ¨äº¤æ˜“æˆåŠŸå¾Œçš„ç‹€æ…‹ï¼Œè‹¥äº¤æ˜“å¤±æ•—ï¼Œå‰‡å…¨éƒ¨å›åˆ°äº¤æ˜“å‰ç‹€æ…‹ã€‚ I: Isolation(å­¤ç«‹æ€§)ç•¶äº¤æ˜“é€²è¡Œæ™‚ï¼Œè‹¥è®€å–è³‡æ–™ï¼Œå‰‡å…¶ä»–äº¤æ˜“ä¸å¯ä¿®æ”¹è³‡æ–™ï¼Œè‹¥äº¤æ˜“ä¿®æ”¹è³‡æ–™ï¼Œå‰‡å…¶ä»–äº¤æ˜“ä¸å¯è®€å¯«è³‡æ–™ã€‚ D: Durability(æ°¸ä¹…æ€§)äº¤æ˜“æˆåŠŸæ™‚ï¼Œåƒèˆ‡äº¤æ˜“çš„è³‡æ–™æœƒè¢«æ­£ç¢ºåæ‡‰åˆ°è³‡æ–™åº«ï¼Œä¸æœƒæ¶ˆå¤±ã€‚ èˆ‰å€‹ç”Ÿæ´»ä¸­çš„å¸¸è¦‹æ¡ˆä¾‹:ATMææ¬¾: å¾æ’å¡é–‹å§‹~åˆ—å°æ˜ç´°è¡¨å‰éƒ½ç®—æ˜¯äº¤æ˜“ã€‚ ACIDèˆ‡ç¢ºä¿æ©Ÿåˆ¶:A: é¡¯æ€§äº¤æ˜“ Begin å®£å‘Šäº¤æ˜“ éš±æ€§äº¤æ˜“ ä¸å¿…å®£å‘Šå³å…·æœ‰äº¤æ˜“ç‰¹æ€§ï¼Œå¦‚: Insertã€Updateã€Delete C: Rollback äº¤æ˜“å¤±æ•—è—‰æ­¤æŒ‡ä»¤å›åˆ°äº¤æ˜“å‰ç‹€æ…‹ã€‚ Rollforward äº¤æ˜“æˆåŠŸï¼Œè—‰æ­¤æŒ‡ä»¤æ›´æ–°åˆ°DBä¸­ã€‚ I: lock:Sé–å®š: åˆç¨±å…±äº«é–å®šXé–å®š: åˆç¨±ç¨ä½”é–å®š D:Write: å¯«å…¥DBRead: è®€å–DBè³‡æ–™ ODBC:å¾®è»Ÿæ‰€æå‡ºçš„é–‹æ”¾DBé€£æ¥ä»‹é¢ï¼Œç”¨ä¾†é€£æ¥å„ç¨®DBMSï¼Œå³å„DBMSå…±ç”¨ã€‚ index:ç´¢å¼•å€¼ï¼Œé‡å°æŒ‡å®šæ¬„ä½äº‹å…ˆæ’åºï¼Œæ–¹ä¾¿æŸ¥è©¢ã€‚ å„ªé»: æŸ¥è©¢å¿«é€Ÿ ç¼ºé»: æ›´æ”¹æˆ–ç¶­è­·çš„æˆæœ¬è¼ƒé«˜(å¢åŠ ã€åˆªé™¤ã€ä¿®æ”¹é€Ÿåº¦æ…¢) ç¨®é¡:cluster index:åœ¨tableä¸­é¸æœ€å¸¸è¢«æŸ¥è©¢æˆ–æ’åºçš„æ¬„ä½æˆ–æ¬„ä½çµ„åˆä½œç‚ºcluster indexï¼Œè³‡æ–™å¯¦éš›ä»¥æ­¤(index)åšæ’åºã€‚ non cluster index:å°‡æŒ‡å®šæ¬„ä½æˆ–æ¬„ä½çµ„åˆä½œç‚ºç´¢å¼•å€¼ï¼Œä¸¦å°‡æ¬„ä½å…§å®¹è¤‡è£½åˆ°tableä¸­ä¸”æ’åºï¼Œå°‡æ¯ç­†è³‡æ–™çš„ç´¢å¼•å¾Œçš„cluster indexå€¼è¤‡è£½åˆ°ç´¢å¼•å¾Œçš„æ¬„ä½ä¸­ã€‚ joinç”¨æ–¼åæ­£è¦åŒ–ï¼Œå°‡åŸå…ˆæ‹†è§£çš„tableé †è‘—Referenceåˆä½µç‚ºä¸€å€‹è¼ƒå¤§çš„tableã€‚joinæœ‰4ç¨®æ–¹å¼: inner joinã€left outer joinã€right outer joinã€full outer join unionå°‡å…©å€‹çµæ§‹ç›¸åŒ(æ¬„ä½æ•¸ç›¸åŒã€è³‡æ–™é¡åˆ¥ç›¸åŒ)çš„è³‡æ–™é›†é€²è¡Œç–ŠåŠ ã€‚","link":"2019/07/14/Database/SQL%20Server/Database/"},{"title":"[Redis] Redis è³‡æ–™çµæ§‹ - Sorted Sets","text":"å‰è¨€ ä¸Šç¯‡è«‡åˆ° Redis çš„ SET è³‡æ–™çµæ§‹ï¼Œæœ¬ç¯‡æœƒæ¢è¨æ“æœ‰èˆ‡ SET ç›¸ä¼¼ç‰¹æ€§çš„ Sorted Setsï¼ç›¸æ¯”è¼ƒå…©è€…ä¹‹é–“çš„å·®ç•°åŠç”¨é€”ã€‚ ä»€éº¼æ˜¯ Sorted Setsï¼ŸRef: Sorted SetsSorted Sets æ˜¯ Redis è£¡å…¶ä¸­ä¸€ç¨®è³‡æ–™çµæ§‹ï¼Œé¡ä¼¼æ–¼ Set èˆ‡ Hash çš„æ··åˆå‹ã€‚ é™¤äº†æ“æœ‰ Set çš„ å”¯ä¸€(ä¸é‡è¤‡)çš„ç‰¹æ€§ä¹‹å¤–ï¼ŒSorted Sets è£¡çš„å…ƒç´ æ˜¯ æœ‰åºçš„!Sorted Sets è£¡æ¯å€‹ element éƒ½æœƒå°æ‡‰çš„ä¸€å€‹æµ®é»æ•¸çš„å€¼ï¼Œé€™å€‹å€¼ç¨±ä½œ scoreï¼Œä»¥ score çš„å€¼ç”±ä½åˆ°é«˜é€²è¡Œæ’åº è—‰ç”± Sorted Sets æŒ‰é †åºå­˜æ”¾çš„ç‰¹æ€§ï¼Œå¯ä»¥å¿«é€Ÿåœ°æ–°å¢ã€åˆªé™¤ã€ä¿®æ”¹è£¡é¢çš„ element XX: åªæ›´æ–°å·²ç¶“å­˜åœ¨çš„å…ƒç´ ï¼Œä¸å¢åŠ æ–°å…ƒç´  NX: èˆ‡ XX ç›¸åï¼Œåªå¢åŠ æ–°å…ƒç´ ã€‚ä¸æ›´æ–°å·²å­˜åœ¨çš„å…ƒç´ ã€‚ LT: åªæœ‰ç•¶æ–°çš„ score å€¼ ä½ æ–¼ç•¶å‰ score æ™‚æ‰æ›´æ–°ç¾æœ‰å…ƒç´ ï¼Œä»å¯å¢åŠ æ–°å…ƒç´  GT: åªæœ‰ç•¶æ–°çš„ score å€¼ é«˜ æ–¼ç•¶å‰ score æ™‚æ‰æ›´æ–°ç¾æœ‰å…ƒç´ ï¼Œä»å¯å¢åŠ æ–°å…ƒç´  CH: CH æ˜¯ changed çš„ç¸®å¯«ï¼Œç”¨æ–¼æ·»åŠ ã€ä¿®æ”¹å…ƒç´  INCR: ç”¨æ–¼å¢åŠ è¢«æŒ‡å®šçš„ element çš„ score æ³¨æ„: GT, LT,NX ä¸‰è€…æ˜¯äº’æ–¥çš„ ZADDZADD å°‡ element æ·»åŠ è‡³æŒ‡å®šçš„ key è£¡é¢ï¼Œé è¨­æƒ…æ³ä¸‹ ZADD æŒ‡å®šçš„ key ä¸å­˜åœ¨ Redis æ™‚æœƒè‡ªå‹•å»ºä¸€å€‹æ–°çš„ã€‚ ä½¿ç”¨ä¸ŠæŒ‡ä»¤å’Œ Set ç›¸ä¼¼ï¼Œåªè¦æŠŠé–‹é ­çš„ S æ”¹æˆ Zï¼ŒZADD æœ¬èº«ä¹Ÿæä¾›ä¸€äº›åƒæ•¸ï¼Œå¯æ ¹æ“šä½¿ç”¨æƒ…å¢ƒåœ¨æŒ‡ä»¤è£¡åŠ å…¥é€™äº›åƒæ•¸ã€‚ èªæ³•ï¼š 1ZADD key [ NX | XX] [ GT | LT] [CH] [INCR] score member [ score member ...] ç¯„ä¾‹ï¼šå»ºç«‹ä¸€å€‹ students çš„ Sorted Sets 12&gt; ZADD students 1 Rob 2 John 3 Smith(integer) 3 é€é ZRANGE å°‡ students è£¡çš„å…ƒç´ å¾é ­è‡³å°¾(0,-1)å–å‡ºä¾† 123456&gt; ZRANGE students 0 -1Output:1) &quot;Rob&quot;2) &quot;John&quot;3) &quot;Smith&quot; æ–¼ ZRANGE å¾Œæ–¹åŠ ä¸Š WITHSCORES çš„åƒæ•¸å¯ä»¥é€£åŒ element å°æ‡‰çš„ score ä¸€åŒå–å‡º 123456789&gt; ZRANGE students 0 -1 WITHSCORESOutput:1) &quot;Rob&quot;2) &quot;1&quot;3) &quot;John&quot;4) &quot;2&quot;5) &quot;Smith&quot;6) &quot;3&quot; ç¯„ä¾‹ï¼š åŠ ä¸Š CH åƒæ•¸åŠ ä¸ŠCH æ–¼æŒ‡å®šçš„ key è£¡æ·»åŠ æ–°å…ƒç´ ï¼ŒSorted Set æœƒæ ¹æ“šæŒ‡å®š score çš„å¤§å°å° element åšæ’åº 123456789101112131415161718&gt; ZADD students CH 0 Alex 2 Ted(integer) 2&gt; ZRANGE students 0 -1 WITHSCORESOutput:1) &quot;Alex&quot;2) &quot;0&quot;3) &quot;Rob&quot;4) &quot;1&quot;5) &quot;John&quot;6) &quot;2&quot;7) &quot;Ted&quot;8) &quot;2&quot;9) &quot;Smith&quot;10) &quot;3&quot;11) &quot;Tom&quot;12) &quot;4&quot; ç¯„ä¾‹ï¼š åŠ ä¸Š INCR åƒæ•¸å°‡ Rob çš„ score çš„å€¼åŠ  2 1234567891011121314151617181920&gt; ZADD students INCR 2 Rob&quot;3&quot;&gt; ZRANGE students 0 -1 WITHSCORESOutput:1) &quot;Alex&quot;2) &quot;0&quot;3) &quot;John&quot;4) &quot;2&quot;5) &quot;Ted&quot;6) &quot;2&quot;7) &quot;Rob&quot;8) &quot;3&quot;9) &quot;Smith&quot;10) &quot;3&quot;11) &quot;Tom&quot;12) &quot;4&quot;13) &quot;Tommy&quot;14) &quot;4&quot; å¾çµæœå¯è§€å¯Ÿåˆ°ï¼ŒRob å› ç‚º score å¢åŠ è‡³ 3ï¼Œé †åºè®Šæˆ Ted (score ç‚º2) ä¹‹å¾Œ(ä¸Šå€‹ç¯„ä¾‹é‚„åœ¨ Ted ä¹‹å‰) ZRANGEZRANGEæŸ¥è©¢ sorted set è£¡æŒ‡å®šç¯„åœçš„å…ƒç´ ï¼ŒæŸ¥è©¢çš„æ–¹å¼åŒ…å«: æŒ‰ index(ç´¢å¼•;æˆ–ç¨±æ’å - rank)ã€æŒ‰ score ã€æŒ‰ å­—å…¸é †åº(lexicographical order) èªæ³•ï¼š 1ZRANGE key min max [ BYSCORE | BYLEX] [REV] [LIMIT offset count] [WITHSCORES] BYSCORE: è—‰ç”± score ä½œç‚ºæŒ‡å®šç¯„åœç¯©é¸ elements BYLEX: æŒ‰ç…§ å­—æ¯ ç¯„åœç¯©é¸ï¼Œ- è¡¨èµ·å§‹å­—æ¯; + è¡¨å°¾ç«¯å­—æ¯ã€‚ ( ç¬¦è™Ÿè¡¨ æ’é™¤; [ è¡¨ åŒ…å« REV: è¡¨é¡›å€’æ’åºï¼Œå…ƒç´ æ”¹ç‚ºå¾æœ€é«˜åˆ†åˆ°æœ€ä½åˆ†é€²è¡Œæ’åº LIMIT: æŒ‡å®šåç§»çš„æ•¸é‡ ç¯„ä¾‹ï¼š æŸ¥è©¢ score ç‚ºæ–¼ 1~3 çš„æ‰€æœ‰ elementsæ–¼æŒ‡ä»¤è£¡åŠ ä¸Šåƒæ•¸ BYSCORE å³å¯ç¯©é¸å‡ºæŒ‡å®šç¯„åœçš„æ‰€æœ‰ elements 1234567891011ZRANGE students 1 3 BYSCORE WITHSCORESOutput:1) &quot;John&quot;2) &quot;2&quot;3) &quot;Ted&quot;4) &quot;2&quot;5) &quot;Rob&quot;6) &quot;3&quot;7) &quot;Smith&quot;8) &quot;3&quot; ç¯„ä¾‹ï¼š ä»¥ BYLEX ç‚ºæ¢ä»¶ç¯©é¸å‡ºæ‰€æœ‰ elementså¯ç”¨ - è¡¨èµ·å§‹å­—æ¯; + è¡¨å°¾ç«¯å­—æ¯ç¯©é¸ key è£¡çš„å…ƒç´  1234&gt; ZRANGE students - + BYLEX1) &quot;Alex&quot;2) &quot;John&quot;3) &quot;Ted&quot; ç¯„ä¾‹ï¼š ä»¥ BYLEX æ­é…ç‰¹æ®Šç¬¦è™Ÿç¯©é¸ elementså‰é¢æåˆ° ( ç¬¦è™Ÿè¡¨ æ’é™¤; [ è¡¨ åŒ…å« å¯ä»¥åˆ©ç”¨ç‰¹æ®Šç¬¦è™Ÿ ( æ­é… BYLEX çš„æ–¹å¼ä¾†éæ¿¾å‡ºæŒ‡å®šçš„ elementsã€‚ å¦‚ï¼šç¯©é¸å€¼ç‚º é Alex åŠ Ted çš„å…ƒç´  1234&gt; ZRANGE students (Alex (Ted BYLEXOutput:1) &quot;John&quot; æ–¼æŒ‡ä»¤è£¡åŠ ä¸Š (Alex (Ted BYLEX çš„ç¯©é¸æ¢ä»¶ï¼Œæˆ‘å€‘å°±å¯ä»¥éæ¿¾æ‰ Alex, Ted é€™å…©å€‹å…ƒç´ ã€‚ åŒç†ï¼Œå¯ä»¥ç”¨ç‰¹æ®Šç¬¦è™Ÿ [ ä½œç‚ºç´å…¥ç¯©é¸ç¯„åœçš„æ¢ä»¶ å¦‚ï¼šç¯©é¸å€¼ç‚º é Alex ä¸”åŒ…å« Ted çš„æ‰€æœ‰å…ƒç´  12345&gt; ZRANGE students (Alex [Ted BYLEXOutput:1) &quot;John&quot;2) &quot;Ted&quot; ZREMZREMç§»é™¤æŒ‡å®šçš„ Sorted Set key è£¡ä¸€å€‹ or å¤šå€‹ element èªæ³•ï¼š 1ZREM key member [member ...] ç¯„ä¾‹ï¼šç§»é™¤ Rob 123456789101112131415161718&gt; ZREM students Rob(integer) 1&gt; ZRANGE students 0 -1 WITHSCORESOutput:1) &quot;Alex&quot;2) &quot;0&quot;3) &quot;John&quot;4) &quot;2&quot;5) &quot;Ted&quot;6) &quot;2&quot;7) &quot;Smith&quot;8) &quot;3&quot;9) &quot;Tom&quot;10) &quot;4&quot;11) &quot;Tommy&quot;12) &quot;4&quot; ZSCOREZSCORE å›å‚³æŒ‡å®š element å°æ‡‰çš„ score èªæ³•ï¼š 1ZSCORE key member ç¯„ä¾‹ï¼š 1234&gt; ZSCORE students JohnOutput:&quot;2&quot; ZCOUNT &amp; ZLEXCOUNTZCOUNTã€ZLEXCOUNT ZCOUNT æ ¹æ“š score è¨ˆç®— sorted set key è£¡çš„æ‰€æœ‰å…ƒç´ æ•¸é‡; ZLEXCOUNT æ ¹æ“š ZLEXCOUNT ä¸€æ¨£é©ç”¨å‰è¿°æåˆ°çš„è¦å‰‡: - è¡¨èµ·å§‹å­—æ¯; + è¡¨å°¾ç«¯å­—æ¯ç¯©é¸ key è£¡çš„å…ƒç´ ; ( ç¬¦è™Ÿè¡¨ æ’é™¤; [ è¡¨ åŒ…å« èªæ³•ï¼š 123ZCOUNT key min maxZLEXCOUNT key min max å…¶ä¸­ min, max é€™å…©å€‹åƒæ•¸è¡¨æŒ‡å®šçš„æœ€å¤§å’Œæœ€å°å€¼ï¼Œè‹¥æƒ³è¦è¨ˆç®—æ•´å€‹ key è£¡çš„æ‰€æœ‰å…ƒç´ æ•¸é‡å‰‡æ˜¯åˆ†åˆ¥åŠ ä¸Š: -inf, +inf ç¯„ä¾‹ï¼šè¨ˆç®— students æ‰€æœ‰å…ƒç´ æ•¸é‡ 12&gt; ZCOUNT students -inf +inf(integer) 6 ZREMRANGEBYLEXZREMRANGEBYLEX é€é BYLEX çš„è¦å‰‡ç§»é™¤æŒ‡å®šçš„ element BYLEX çš„è¦å‰‡ï¼š è¡¨èµ·å§‹å­—æ¯; + è¡¨å°¾ç«¯å­—æ¯ç¯©é¸ key è£¡çš„å…ƒç´ ; ( ç¬¦è™Ÿè¡¨ æ’é™¤; [ è¡¨ åŒ…å« èªæ³•ï¼š 1ZREMRANGEBYLEX key min max ç¯„ä¾‹ï¼šç§»é™¤å¾ Alex è‡³ Ted çš„æ‰€æœ‰å…ƒç´  123456789&gt; ZRANGE students - + BYLEX1) &quot;Alex&quot;2) &quot;John&quot;3) &quot;Ted&quot;&gt; ZREMRANGEBYLEX students [Alex [Ted(integer) 3&gt; ZRANGE students 0 -1(empty array) ZPOPMAXZPOPMAX ç§»é™¤ä¸¦å›å‚³æœ€é«˜ score çš„å…ƒç´  èªæ³•ï¼š 1ZPOPMAX key [count] count: ç§»é™¤çš„æ•¸é‡ï¼Œå¤§æ–¼ 1 çš„è©±æœƒç”± score æœ€é«˜è‡³æ¬¡é«˜çš„element é–‹å§‹ç§»é™¤ ç¯„ä¾‹ï¼š æœªæŒ‡å®šæ•¸é‡ 1234567891011121314151617181920&gt; ZRANGE students 0 -1 WITHSCORES 1) &quot;Alex&quot; 2) &quot;0&quot; 3) &quot;John&quot; 4) &quot;2&quot; 5) &quot;Ted&quot; 6) &quot;2&quot; 7) &quot;Smith&quot; 8) &quot;3&quot; 9) &quot;Tom&quot;10) &quot;4&quot;11) &quot;Tommy&quot;12) &quot;4&quot;&gt; ZPOPMAX studentsOutput:1) &quot;Tommy&quot;2) &quot;4&quot; ç¯„ä¾‹ï¼š æŒ‡å®šæ•¸é‡ 12345&gt; ZPOPMAX students 21) &quot;Tom&quot;2) &quot;4&quot;3) &quot;Smith&quot;4) &quot;3&quot; å¸¸è¦‹çš„æ¡ˆä¾‹ ç·šä¸ŠéŠæˆ²çš„ç©åˆ†æ’è¡Œæ¦œ:å–„ç”¨ ZADD æŒ‡ä»¤å¯ä»¥åœ¨æ¯æ¬¡ç©å®¶æäº¤éŠæˆ²ç©åˆ†æ™‚ï¼Œæ–¼ Redis å…§æ›´æ–°è©²åç©å®¶çš„ç©åˆ†ï¼Œä¾ç©åˆ†é«˜ä½ç”¨ ZRANGE åšæ’åºï¼Œåˆ—å‡ºå³æ™‚ç©åˆ†æ’åã€‚ å•†åŸçš„ç†±éŠ·æ’è¡Œæ¦œ ç¸½çµçœ‹å®Œäº†æœ¬ç¯‡é–‹é ­å° Sorted Set çš„è§£é‡‹ï¼Œä»¥åŠé€éç¯„ä¾‹å¯¦éš›æ“ä½œæ›´èƒ½äº†è§£èˆ‡ Set ä¹‹é–“çš„å·®ç•°ï¼Œè—‰ç”± Sorted Set çš„æœ‰åºæ€§ï¼Œåœ¨å¯¦éš›æ‡‰ç”¨ä¸Šæä¾›æ›´å¤šçš„ç”¨é€”ï¼ Reference An introduction to Redis data types and abstractions","link":"2022/01/09/Database/Redis/%5BRedis%5D%20Redis%20%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B%20-%20Sorted%20Sets/"},{"title":"[Redis] Redis è³‡æ–™çµæ§‹ - String","text":"å‰è¨€ Redis æ˜¯ç†±é–€ä¸”é–‹æºçš„è³‡æ–™åº«ï¼Œä»¥è¨˜æ†¶é«”ç‚ºä¸»(in-memory)é€²è¡Œè³‡æ–™å­˜å–ï¼Œä¸¦ä»¥éµå€¼ (key-value) çš„å½¢å¼å­˜æ”¾è³‡æ–™åº«å…§ã€‚ ç”±æ–¼è³‡æ–™æ˜¯åŸºæ–¼è¨˜æ†¶é«”é€²è¡Œè®€å¯«ï¼Œè¨˜æ†¶é«”è®€å–çš„é€Ÿåº¦è¼ƒä¸€èˆ¬ç¡¬ç¢Ÿä¾†å¾—å¿«ï¼Redis é€™é …å„ªå‹¢è¢«å»£æ³›åœ°é‹ç”¨åœ¨å¤§å‹ç³»çµ±è£¡åšè³‡æ–™å¿«å–ï¼ŒåŠ å¿«æ•´é«”ç³»çµ±æ•ˆèƒ½ï¼Œä¸åƒ…æœ‰åŠ©æ–¼æé«˜ç³»çµ±å›æ‡‰çš„é€Ÿåº¦ï¼ŒåŒæ™‚èƒ½æ¸›å°‘é—œè¯å¼è³‡æ–™åº«çš„å·¥ä½œé‡(å‰é¢ Redis å¯ä»¥æ‡‰ä»˜ä½¿ç”¨è€…é€ä¾†çš„è«‹æ±‚ï¼Œå°±ä¸éœ€è¦å†åˆ°å¾Œæ–¹ä¸»è³‡æ–™åº«è®€å–è³‡æ–™)ã€‚ Redis æœ¬èº«æä¾›å¤šç¨®è³‡æ–™çµæ§‹ï¼Œå¦‚: Strings, List, Set, Hash, Sorted Set ç­‰ã€‚ å¸¸è¦‹æœå‹™æ‡‰ç”¨: å¿«å–ï¼šå€ŸåŠ©è¨˜æ†¶é«”é«˜æ•ˆèƒ½è®€å–çš„å¿«å–æ–¹å¼ï¼Œæ¸›å°‘ç¡¬ç¢Ÿ I/O çš„å»¶é²æ™‚é–“ï¼Œåœ¨å¤§å‹çš„åˆ†æ•£å¼ç³»çµ±è£¡å¹¾ä¹æ˜¯å¾Œç«¯å¿«å–çš„é¦–é¸ã€‚ æµé‡ &amp; é€Ÿç‡é™åˆ¶ï¼šæœ‰äº›æ¶ç¥¨ç³»çµ±ç‚ºé¿å…çŸ­æ™‚é–“æµé‡æš´å¢ï¼Œæœƒåœ¨ç³»çµ±è£¡é¢æ¡ç”¨ Redis åšçµ±è¨ˆï¼Œè®“ç¶²ç«™æˆ–ç·šä¸Šæœå‹™å¯ä»¥è¦–æµé‡ç‹€æ³ä½œè‡ªå‹•åŒ–çš„èª¿æ•´ã€‚ æ’è¡Œæ¦œåŠŸèƒ½ï¼šå¸¸è¦‹æ–¼é›»å•†ã€éŠæˆ²è£¡çš„æ’è¡Œæ¦œæ´»å‹•ï¼Œè—‰ç”± Redis é«˜æ•ˆè®€å–è³‡æ–™çš„å„ªå‹¢é”æˆè¿‘ä¹å³æ™‚æ›´æ–°è³‡æ–™ï¼Œå¯¦ç¾å³æ™‚æ’åçš„åŠŸèƒ½ï¼Œå¾ŒçºŒæœ‰ç¯‡é—œæ–¼ Sorted Set çš„æ–‡ç« æœƒè¨è«–åˆ°ï¼ äº†è§£ Redis å¸¸è¦‹çš„ç”¨é€”å¾Œï¼Œæ¥è‘—é€²å…¥æœ¬ç¯‡è¨è«–é‡é»: Redis è³‡æ–™çµæ§‹ - Strings ä»€éº¼æ˜¯ Stringsï¼ŸSTRING Strings æ˜¯ Redis æœ€åŸºç¤çš„å„²å­˜å‹æ…‹ï¼Œä¸€å€‹éµ(key)å°ä¸€å€‹å€¼(value)ï¼Œå¯å­˜æ”¾ä»»ä½•å½¢å¼çš„è³‡æ–™ e.g. JPEG åœ–ç‰‡æˆ–å·²åºåˆ—åŒ–çš„ç‰©ä»¶ç­‰ï¼Œå®˜æ–¹æç¤ºæœ€å¤§å¯ä»¥å„²å­˜ 512 MB çš„è³‡æ–™é‡ æ¥è‘—ä¾†çœ‹å¸¸è¦‹çš„å¹¾å€‹ Redis æ”¯æ´å° String çš„æ“ä½œå§ï¼ SETSET STRING SET æŒ‡ä»¤å¾Œæ–¹çš„å¿…å¡«é …ç›®åˆ†åˆ¥æ˜¯ key åç¨±ã€key çš„å€¼ï¼ŒæˆåŠŸæ–°å¢æ™‚æœƒå›å‚³ OKï¼Œè¦å‰‡å¦‚ä¸‹ï¼š 1SET key value [EX seconds|PX milliseconds|EXAT unix-time-seconds|PXAT unix-time-milliseconds|KEEPTTL] [NX|XX] [GET] ç¯„ä¾‹ - æ–°å¢ä¸€å€‹ key &amp; value:æ–°å¢åç‚º test çš„ key ä¸”å€¼ç‚º test key 12// set æŒ‡ä»¤æ–°å¢set test &quot;test key&quot; å–å¾— key å°æ‡‰çš„å€¼: get &lt;key_name&gt; 12345// å–å¾— test key çš„å€¼get test// å›å‚³&quot;test key&quot; è‹¥ set æŒ‡ä»¤æŒ‡å®šçš„ key å·²å­˜åœ¨ï¼Œå‰‡æœƒ è¦†å¯« æ‰åŸæœ¬çš„ key å€¼ Options for SetSet æŒ‡ä»¤å¾Œé¢å¯ä»¥æ·»åŠ é¡å¤–çš„åƒæ•¸é”æˆä¸åŒçš„éœ€æ±‚ï¼Œæ“·å–å¹¾å€‹å¸¸ç”¨çš„: EX(in seconds): è¨­ç½® key çš„å­˜çºŒæ™‚é–“(TTL)ï¼Œåˆ°æœŸå¾Œè‡ªå‹•å¾ redis åˆªé™¤(å›å‚³ nil)ï¼Œå–®ä½ä»¥ ç§’ è¨ˆç®—ã€‚å¸¸è¦‹ç”¨æ³•ï¼š å„²å­˜ user ç™»å…¥çš„ session NX: æŒ‡å®šçš„ key åªæœ‰åŸæœ¬ä¸å­˜åœ¨ redis æ™‚æ‰å¯è¨­ç½®ï¼Œè‹¥ key å·²å­˜åœ¨å‰‡å›å‚³ nil XX: æŒ‡å®šçš„ key åªæœ‰å·²å­˜åœ¨ redis æ™‚æ‰å¯è¨­ç½®ï¼Œè‹¥ key ä¸å­˜åœ¨å‰‡å›å‚³ nil SampleæŸ¥çœ‹ç•¶å‰æ“æœ‰çš„ keyï¼š 1keys * Output: 123451) &quot;test2&quot;2) &quot;jsondata&quot;3) &quot;test&quot;4) &quot;test1&quot;5) &quot;test3&quot; æ¥è‘—æ–¼ Set æŒ‡ä»¤å¾Œæ–¹åŠ ä¸Šå€‹åˆ¥åƒæ•¸åšæ¯”è¼ƒã€‚ ç¯„ä¾‹ï¼šè¨­ç½®æ–° key åç‚º test4ï¼Œä¸”å€¼ç‚º 4 EX:è¨­ç½® exkey ä¸¦çµ¦å®š TTL ç‚º 5 ç§’1set exkey &quot;test ex key&quot; EX 5 5 ç§’ä¹‹å¾Œè‡ªå‹•å¾ Redis åˆªé™¤ NX:12345sample 1:set test1 4 nxsample 2:set test4 4 nx å›å‚³çµæœç‚º (nil) è¡¨ä¸ç¬¦åˆæŒ‡ä»¤è£¡çš„ XX åƒæ•¸æ¢ä»¶ï¼Œåä¹‹å‰‡æˆç«‹ XX:12345sample 1:set test4 4 xxsample 2:set test1 4 xx å›å‚³çµæœç‚º (nil) è¡¨ä¸ç¬¦åˆæŒ‡ä»¤è£¡çš„ XX åƒæ•¸æ¢ä»¶ï¼Œåä¹‹å‰‡æˆç«‹ APPENDå¦‚æœ key å·²ç¶“å­˜åœ¨ä¸¦ä¸”æ˜¯å­—ä¸²(string)ï¼Œæƒ³åœ¨è©² key çš„å€¼å¾Œé¢æ·»åŠ æ–°çš„å­—ä¸²å¯ç”¨ APPEND æŒ‡ä»¤å®Œæˆï¼Œè©²æŒ‡ä»¤çš„å›å‚³å€¼ç‚º: æ›´æ–°å¾Œçš„å­—ä¸²ç¸½é•·åº¦ ç¯„ä¾‹:è¨­ç½®ä¸€å€‹åç‚º greeting çš„ keyï¼Œå…¶ç•¶å‰å€¼ç‚º &quot;Hello&quot; 123set greeting Helloget greeting é€é APPEND æŒ‡ä»¤æ·»åŠ æ–°çš„å€¼ &quot; World&quot; åˆ° greeting è£¡ 123APPEND greeting &quot; World&quot;get greeting Output: 1&quot;Hello World&quot; å›å‚³å€¼çš„å­—ä¸²ç¸½é•·åº¦ç‚º: 11 INCR &amp;&amp; INCRBYè‹¥æƒ³å°‡å­˜æ–¼ key è£¡çš„æ•¸å­—åšåŠ æ³•ï¼Œå¯é€é INCR æˆ–æ˜¯ INCRBY æŒ‡ä»¤å®Œæˆã€‚ Ref: INCRã€Ref: INCRBY INCR èˆ‡ INCRBY å…©è€…å·®ç•°åœ¨æ–¼ï¼š INCR æ¯æ¬¡å¢åŠ çš„å€¼ç‚º 1 INCRBY å¯æŒ‡å®šå¢åŠ çš„å€¼ è‹¥æ˜¯ key åŸæœ¬ä¸å­˜åœ¨æ–¼ Redis è€ŒåŸ·è¡Œ INCR èˆ‡ INCRBY æŒ‡ä»¤ï¼Œ æŒ‡ä»¤åŸ·è¡Œå‰ï¼ŒRedis æœƒç”Ÿæˆ key ä¹‹å¾Œçµ¦å®šé è¨­å€¼ç‚º 0ï¼Œå†åŸ·è¡Œ INCR èˆ‡ INCRBY æŒ‡ä»¤ã€‚ INCR èªæ³•å¦‚ä¸‹: 1incr &lt;key&gt; ä¸‹æ–¹ç¯„ä¾‹æœƒçœ‹åˆ°åŸä¸å­˜æ–¼ Redis çš„ testkeyï¼ŒåŸ·è¡Œ INCR æŒ‡ä»¤å¾Œå¾—åˆ°çš„çµæœç‚º 1 é€™æ˜¯å› ç‚º Redis å…ˆç”¢ç”Ÿ testkey ä¸¦çµ¦è©² key çš„å€¼ç‚º 0ï¼Œæ¥è‘—å†é€²è¡ŒINCR æŒ‡ä»¤å° testkey +1 ã€‚ INCRBY ä¹Ÿæ˜¯é¡ä¼¼çš„æ¦‚å¿µï¼Œèªæ³•å¦‚ä¸‹: 1incrby &lt;key&gt; &lt;increment&gt; å…¶ä¸­ &lt;increment&gt; ç‚ºæƒ³è¦å¢åŠ çš„å€¼ ç¯„ä¾‹ï¼š å°‡åç‚º score çš„ key å€¼åŠ  3 åŸ score å€¼ç‚º 2ï¼ŒåŸ·è¡Œ incrby score 3 æŒ‡ä»¤å¾Œï¼Œå¾—åˆ°çš„çµæœç‚º (integer) 5 æ³¨æ„:ç”±æ–¼ Redis æ²’æœ‰å°ˆç”¨çš„æ•¸å€¼å‹åˆ¥ï¼Œæ‰€ä»¥å­˜åœ¨ Redis è£¡çš„å­—ä¸²æ˜¯ä»¥ 10 ç‚ºåº•çš„ 64 ä½å…ƒå½¢å¼åšè™•ç†ã€‚ Note: this is a string operation because Redis does not have a dedicated integer type. The string stored at the key is interpreted as a base-10 64 bit signed integer to execute the operation. DECR &amp;&amp; DECRBYRef: DECRã€Ref: DECRBY èˆ‡ INCR &amp;&amp; INCRBY ç›¸ä¼¼ï¼Œé‹ç®—æ–¹å¼ç”±åŠ æ³•æ”¹ç‚ºæ¸›æ³•ï¼Œä½¿ç”¨æ–¹æ³•ç›¸åŒã€‚ MSETRef: MSET å‰è¿° SET æŒ‡ä»¤çš†æ˜¯é‡å°å–®ä¸€å€‹ key åšè¨­ç½®ï¼Œè‹¥æƒ³è¦ä¸€æ¬¡è¨­ç½®å¤šå€‹ keyï¼Œå¯ç”¨ MSET ä¾†é”æˆã€‚ èªæ³•ï¼š 1MSET key value [ key value ...] ç¯„ä¾‹ï¼šåŒæ™‚å»ºç«‹ key1, key2 å…©å€‹ key ä¸¦çµ¦å€¼ â€œHelloâ€, â€œWorldâ€ 1MSET key1 &quot;Hello&quot; key2 &quot;World&quot; é€é MGET åŒæ™‚å–å¾— key1, key2 å…©å€‹ key çš„å€¼ 12345&gt; MGET key1 key2&gt; Output1) &quot;Hello&quot;2) &quot;World&quot; æ³¨æ„:MSET å…·æœ‰é—œé€£å¼è³‡æ–™åº«çš„ åŸå­æ€§(Atomicity)ï¼Œå…¶ä¸­ä¸€å€‹ key æ”¹å‹•å¤±æ•—æ™‚æ•´å€‹æ“ä½œå°±æœƒå®£å‘Šå¤±æ•—ï¼Œæ•…åŒå€‹æ“ä½œè£¡é¢æ¶‰åŠå¤šå€‹ key æ”¹å‹•æ™‚ï¼Œä¸æœƒç™¼ç”Ÿåªæœ‰ä¸€éƒ¨åˆ†çš„ key è®Šå‹•çš„æƒ…å½¢ã€‚ Note: MSET is atomic, so all given keys are set at once. It is not possible for clients to see that some of the keys were updated while others are unchanged. MSETNXRef: MSETNX MSETNX æ˜¯ MSET èˆ‡å‰è¿° NX çš„çµåˆï¼Œè¡¨ MSETNX æŒ‡å®šçš„ key åªèƒ½æ˜¯åŸæœ¬ä¸å­˜åœ¨ Redis è£¡çš„æƒ…æ³ä¸‹æ‰èƒ½å»ºç«‹ã€‚ è‹¥ MSETNX æŒ‡å®šçš„ key çš†ä¸å­˜åœ¨ Redis æ™‚ï¼Œå›å‚³å€¼ç‚º (integer) 1ï¼Œåä¹‹ï¼Œåªè¦æœ‰ä¸€å€‹ä»¥ä¸ŠæŒ‡å®šçš„ key å·²ç¶“å­˜æ–¼ Redis æ™‚ï¼Œå›å‚³å€¼ç‚º (integer) 0 èªæ³•ï¼š 1MSETNX key value [ key value ...] ç¯„ä¾‹ï¼š 1MSETNX key3 &quot;k3&quot; key4 &quot;k4&quot; key3, key4 åŸä¸å­˜åœ¨ Redis è£¡ï¼ŒåŸ·è¡Œ MSETNX å¾Œå›å‚³çµæœç‚º (integer) 1ï¼Œè‹¥å†é‡è¤‡åŸ·è¡Œä¸€æ¬¡å‰‡æœƒå¾—åˆ° (integer) 0 çš„çµæœ è‹¥å˜—è©¦ç”¨ key5 æ›¿ä»£ key3 åŒæ™‚ä¿ç•™ key4 åŸ·è¡Œ MSETNXï¼Œç”±æ–¼ key4 å…ˆå‰å·²å­˜åœ¨ Redisï¼Œæ•…å›å‚³çµæœä¸€æ¨£æ˜¯ (integer) 0 ç”¨ GET æª¢æŸ¥ key5 å¯ç™¼ç¾ key5 æ²’æœ‰è¢«å¯«å…¥ Redis è£¡é¢ï¼Œè­‰æ˜å‰›å‰›æåˆ° MSET å…·æœ‰åŸå­æ€§ GETRANGERef: GETRANGEå¾ key è£¡æå–æŸæ®µå­—ä¸²ï¼Œå¯ç”¨ GETRANGE ä¾†å®Œæˆã€‚ èªæ³•ï¼š 1GETRANGE key &lt;start&gt; &lt;end&gt; &lt;start&gt; èµ·å§‹ä½ç½®(å¾0é–‹å§‹) &lt;end&gt; çµ‚é»ä½ç½®(-1 è¡¨å­—ä¸²çš„æœ«ç«¯) ç¯„ä¾‹ï¼šæå– range key è£¡æ‰€æœ‰çš„å€¼ 123SET range helloGETRANGE range 0 -1 å…¶ä»–ç¯„ä¾‹: 123456789101112131415&gt; GETRANGE range 0 3&gt; Output&gt; &quot;hell&quot;&gt; GETRANGE range -3 -1&gt; Output&gt; &quot;llo&quot;&gt; GETRANGE range 0 1000&gt; Output&gt; &quot;hell0&quot; SETEXRef: SETEX ç”¨æ–¼è¨­ç½®å…·æœ‰æ™‚æ•ˆæ€§çš„ key èªæ³•: 1SETEX key seconds value è¨­ç½® exkey ä¸¦çµ¦å®š TTL ç‚º 5 ç§’ 1setex exkey 5 &quot;test ex key&quot; 5 ç§’ä¹‹å¾Œè‡ªå‹•å¾ Redis åˆªé™¤ SETRANGERef: SETRANGE ç”¨æ–¼è¦†å¯«è¢«æŒ‡å®šçš„ key å…§å®¹ï¼Œè©²æŒ‡ä»¤æœƒå¾æŒ‡å®šçš„åç§»é‡é–‹å§‹ï¼Œè¦†å¯«æ•´å€‹å€¼ èªæ³•ï¼š 1SETRANGE key &lt;offset&gt; &lt;value&gt; &lt;offset&gt; è¡¨åç§»é‡ ç¯„ä¾‹ï¼šè¨­ç½® k1 çš„å€¼ç‚º â€œhello world!â€ 1SET k1 &quot;hello world!&quot; ç›®æ¨™æ˜¯å°‡å¾Œé¢çš„ world æ›¿æ›æˆ Redisï¼Œæ•…æ–¼åç§»é‡è¨­å®šç‚º 6 (w é–‹é ­çš„ä½ç½®) 1setrange k1 6 Redis Output: 1&quot;hello Redis!&quot; STRLENRef: STRLEN è¨ˆç®—å­˜æ–¼ key è£¡çš„å€¼çš„é•·åº¦ï¼Œå›å‚³çµæœç‚ºè©²å­—ä¸²çš„ç¸½é•·åº¦ èªæ³•ï¼š 1STRLEN key ç¸½çµå‰é¢æ¢è¨äº†å¹¾å€‹ Redis è£¡å¸¸è¦‹å° String çš„æ“ä½œï¼Œä»¥åŠä¸åŒæƒ…å¢ƒä¸‹å¯ä½¿ç”¨çš„æ–¹å¼ï¼Œä¸‹ç¯‡å°‡è¨è«– Redis è³‡æ–™çµæ§‹ - List Reference An introduction to Redis data types and abstractions","link":"2022/01/05/Database/Redis/%5BRedis%5D%20Redis%20%E8%B3%87%E6%96%99%E9%A1%9E%E5%9E%8B%20-%20String/"},{"title":"[Redis] Redis è³‡æ–™çµæ§‹ - SET","text":"å‰è¨€ æ˜¨æ—¥çš„æ–‡ç« è¨è«–åˆ° Redis å„²å­˜ç‰©ä»¶ç”¨çš„è³‡æ–™çµæ§‹ - Hashï¼Œæœ¬ç¯‡æ¥è‘—æ¢è¨ Redis çš„å¦ä¸€å€‹è³‡æ–™çµæ§‹ - SET ä»€éº¼æ˜¯ SETï¼ŸSET æ˜¯ Redis è£¡ string çš„é›†åˆï¼Œæ•…æœ‰ç„¡åºã€å”¯ä¸€(ä¸é‡è¤‡)ç­‰ç‰¹é»ï¼Œ Redis æœ‰æ”¯æ´å¤šå€‹ Set ä¹‹é–“å–äº¤é›†ï¼Œå·®é›†ï¼Œè¯é›†çš„æ“ä½œ SADD &amp;&amp; SMEMBERSRef: SADDã€Ref: SMEMBERS SADD æ·»åŠ æ–°çš„å€¼è‡³æŒ‡å®šçš„ key setï¼ŒSMEMBERS æŸ¥è©¢æŒ‡å®šçš„ key set è£¡æ‰€æœ‰çš„å€¼ èªæ³•ï¼š 123SADD key member [member ...]SMEMBERS key ç¯„ä¾‹ï¼š 1234567891011&gt; SADD members &quot;Bob&quot; &quot;Allan&quot; &quot;Jack&quot;Output:(integer) 3&gt; SMEMBERS membersOutput:1) &quot;Jack&quot;2) &quot;Allan&quot;3) &quot;Bob&quot; SISMEMBERRef: SISMEMBER ç”¨æ–¼æª¢æŸ¥æŸå€‹å€¼æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ key set è£¡ã€‚ å›å‚³å€¼ç‚º 1 è¡¨å­˜åœ¨; ç‚º 0 å‰‡è¡¨ä¸å­˜åœ¨ èªæ³•ï¼š 1SISMEMBER key member ç¯„ä¾‹ï¼šæ²¿ç”¨ SADD ç¯„ä¾‹è³‡æ–™ 123456789&gt; SISMEMBER members JackOutput:(integer) 1&gt; SISMEMBER members TomOutput:(integer) 0 SCARDRef: SCARD è¨ˆç®—æŒ‡å®šçš„ key set è£¡çš„ element æ•¸é‡ï¼Œå›å‚³å€¼ç‚ºè¨ˆç®—å¾Œçš„çµæœ èªæ³•ï¼š 1SCARD key ç¯„ä¾‹ï¼šæ²¿ç”¨ SADD ç¯„ä¾‹è³‡æ–™ 1234&gt; SCARD membersOutput:(integer) 3 SMOVERef: SMOVE å°‡æŸå€‹ key set è£¡çš„å…ƒç´ ç§»åˆ°å¦ä¸€å€‹æŒ‡å®šçš„ key set è£¡ï¼Œå›å‚³å€¼ç‚º 1 è¡¨è©²å…ƒç´ æˆåŠŸç§»è‡³æŒ‡å®šçš„ key set è£¡ï¼Œåä¹‹è‹¥å›å‚³å€¼ç‚º 0 å‰‡è¡¨ç¤ºè©²å…ƒç´ ä¸åœ¨ä¾†æº key set or æœªåŸ·è¡Œ Note:é€™æ˜¯å…·æœ‰åŸå­æ€§(Atomic) çš„æ“ä½œ èªæ³•ï¼š 1SMOVE source destination member sourceï¼šç§»å‡ºå…ƒç´ çš„ä¾†æº set key destination: ç§»å…¥å…ƒç´ çš„ç›®æ¨™ set key memberï¼šè¦æ¬å‹•çš„å…ƒç´  ç¯„ä¾‹ï¼šæ–°å¢å…©å€‹ key setï¼Œåˆ†åˆ¥æ˜¯ sourcememeb, destinmemeb 123&gt; SADD sourcememeb &quot;A&quot; &quot;B&quot; &quot;C&quot;&gt; SADD destinmemeb &quot;D&quot; &quot;E&quot; å°‡ sourcememeb è£¡çš„ â€œBâ€ å…ƒç´ ç§»å‹•è‡³ destinmemeb è£¡é¢ 1234567891011&gt; SMOVE sourcememeb destinmemeb &quot;B&quot;Output:(integer) 1&gt; SMEMBERS destinmemebOutput:1) &quot;B&quot;2) &quot;E&quot;3) &quot;D&quot; SPOPRef: SPOPå¾æŒ‡å®šçš„ key set éš¨æ©Ÿç§»é™¤ä¸€å€‹ or å¤šå€‹å…ƒç´  èªæ³•ï¼š 1SPOP key [count] [count]: æŒ‡å®šç§»é™¤çš„æ•¸é‡ï¼Œå±¬æ–¼å¯é¸(Optional)åƒæ•¸ Noteé™¤éæœ‰åœ¨ SPOP æŒ‡ä»¤å¾Œé¢åŠ ä¸Šåƒæ•¸æŒ‡å®šæ•¸é‡ï¼Œé è¨­æƒ…æ³ä¸‹æœƒæ˜¯ç§»é™¤ä¸€å€‹å…ƒç´  ç¯„ä¾‹ï¼šæŒ‡å®šç§»é™¤ popsets è£¡çš„å…©å€‹å…ƒç´  12345678SADD popsets &quot;one&quot; &quot;two&quot; &quot;three&quot; &quot;four&quot;(integer) 4&gt; SPOP popsets 2Output:1) &quot;two&quot;2) &quot;four&quot; SREMRef: SREM ç”¨æ–¼ç§»é™¤ä¸€å€‹ or å¤šå€‹æŒ‡å®šçš„å…ƒç´ ï¼Œå›å‚³å€¼ç‚ºç§»é™¤çš„å…ƒç´ æ•¸é‡ã€‚è‹¥ key set ä¸å­˜åœ¨ or key è£¡çš„å…ƒç´ çš†ä¸å­˜åœ¨ï¼Œå‰‡å›å‚³å€¼ç‚º 0 èªæ³•ï¼š 1SREM key member [member ...] ç¯„ä¾‹ï¼šæŒ‡å®š â€œtwoâ€ â€œthreeâ€ å…©å€‹å…ƒç´ æ–¼ popsets è£¡ç§»é™¤ 123456789101112&gt; SADD popsets &quot;one&quot; &quot;two&quot; &quot;three&quot; &quot;four&quot;&gt; SREM popsets &quot;two&quot; &quot;three&quot;Output:(integer) 2SMEMBERS popsetsOutput:1) &quot;one&quot;2) &quot;four&quot; SDIFF &amp;&amp; SDIFFSTORERef: SDIFFã€Ref: SDIFFSTORE SDIFF å¯å–å¾—å¤šå€‹ set é–“çš„ å·®é›†ï¼Œè€Œ SDIFFSTORE å‰‡æ˜¯å–å¾—å·®é›†å¾Œå­˜æ”¾è‡³æŒ‡å®šçš„æ–° key setã€‚ èªæ³•ï¼š 123SDIFF key [key ...]SDIFFSTORE destination key [key ...] ç¯„ä¾‹æè¿°ï¼škey1 = {a,b,c,d}key2 = {c}key3 = {a,c,e} å–å¾— key1 key2 key3 ä¸‰è€…çš„å·®é›† {b,d} ç¯„ä¾‹1ï¼š SDIFFå›å‚³å€¼ç‚ºï¼š å·®é›†è£¡çš„æ‰€æœ‰ elements 123456789101112&gt; SADD key1 a b c d&gt; SADD key2 c&gt; SADD key3 a c e# å–å·®é›†&gt; SDIFF key1 key2 key3Output:1) &quot;b&quot;2) &quot;d&quot; ç¯„ä¾‹2ï¼š SDIFFSTOREæ²¿ç”¨ SDIFF çš„ç¯„ä¾‹è³‡æ–™ï¼Œå›å‚³å€¼ç‚ºï¼šå·®é›†è£¡çš„ element æ•¸é‡ï¼Œä¸¦å°‡å›å‚³å€¼æ”¾é€²æ–°çš„ key set è£¡é¢ 12345678&gt; SDIFFSTORE new_key key1 key2 key3(integer) 2&gt; SMEMBERS new_keyOutput:1) &quot;b&quot;2) &quot;d&quot; SINTER &amp; SINTERSTORERef: SINTERã€Ref: SINTERSTORE æ¦‚å¿µèˆ‡ SDIFF &amp;&amp; SDIFFSTORE å…©è€…é¡ä¼¼ã€‚SINTER å¯å–å¾—å¤šå€‹ set é–“çš„ äº¤é›† ï¼Œè€Œ SINTERSTORE å‰‡æ˜¯å–å¾—äº¤é›†å¾Œå­˜æ”¾è‡³æŒ‡å®šçš„æ–° key setã€‚ èªæ³•ï¼š 123SINTER key [key ...]SINTERSTORE destination key [key ...] æ²¿ç”¨ SDIFF &amp;&amp; SDIFFSTORE çš„ç¯„ä¾‹è³‡æ–™ï¼škey1 = {a,b,c,d}key2 = {c}key3 = {a,c,e} å–å¾— key1 key2 key3 ä¸‰è€…çš„å·®é›† {c} ç¯„ä¾‹1ï¼š SINTER 1234&gt; SINTER key1 key2 key3Output1) &quot;c&quot; ç¯„ä¾‹2ï¼š SDIFFSTOREå°‡å›å‚³å€¼æ”¾é€²æ–°çš„ key set è£¡é¢ 12345&gt; SINTERSTORE new_inter_key key1 key2 key3(integer) 1&gt; SMEMBERS new_inter_key1) &quot;c&quot; SUNION &amp; SUNIONSTORERef: SUNIONã€Ref: SUNIONSTORE SUNION: å–å¾—æ‰€æœ‰é›†åˆè£¡çš„å…ƒç´ ; SUNIONSTORE å°‡æ‰€æœ‰å–å¾—çš„å…ƒç´ æ”¾å…¥æ–°çš„ key set èªæ³•ï¼š 123SUNION key [key ...]SUNIONSTORE destination key [key ...] æ²¿ç”¨ SDIFF &amp;&amp; SDIFFSTORE çš„ç¯„ä¾‹è³‡æ–™ï¼škey1 = {a,b,c,d}key2 = {c}key3 = {a,c,e} å–å¾—æ‰€æœ‰ key1, key2, key3 é›†åˆ: {a,b,c,d,e} ç¯„ä¾‹: SUNION 12345678&gt; SUNION key1 key2 key3Output:1) &quot;a&quot;2) &quot;b&quot;3) &quot;e&quot;4) &quot;d&quot;5) &quot;c&quot; ç¯„ä¾‹: SUNIONSTORE 1234567891011&gt; SUNIONSTORE unkey key1 key2 key3(integer) 5&gt; SMEMBERS unkeyOutput:1) &quot;a&quot;2) &quot;b&quot;3) &quot;e&quot;4) &quot;d&quot;5) &quot;c&quot; ç¸½çµå‰è¿°åˆ—å‡ºäº†å¤šå€‹å¸¸è¦‹ Redis SET çš„æŒ‡ä»¤ï¼Œé€éç¯„ä¾‹äº†è§£å¦‚ä½•è®Šå‹• SET è£¡çš„è³‡æ–™ï¼Œé€²éšä¸€é»é‚„å¯ä»¥å°å¤šå€‹ SETS ä¹‹é–“å–å·®é›†ã€è¯é›†ç­‰ã€‚ ä¸‹ç¯‡ä¾†è¨è«–ä¸€ä¸‹èˆ‡ SET æ“æœ‰ç›¸ä¼¼ç‰¹é»ï¼Œä½†åˆä¸åŒçš„ Sorted Sets å§ï¼ Reference An introduction to Redis data types and abstractions","link":"2022/01/08/Database/Redis/%5BRedis%5D%20Redis%20%E8%B3%87%E6%96%99%E7%B5%90%E6%A7%8B%20-%20SET/"},{"title":"[Database] è³‡æ–™åº«å…¥é–€","text":"å‰è¨€é–‹å§‹èªè­˜è³‡æ–™åº«å‰ï¼Œå…ˆçŸ¥é“ä¸€ä¸‹ä»€éº¼æ˜¯è³‡æ–™?è³‡è¨Š? è³‡æ–™(data): æŒ‡æœªç¶“è™•ç†çš„åŸå§‹ç´€éŒ„e.g. å­¸ç”Ÿä½œæ¥­ã€è€ƒè©¦æˆç¸¾ å¦å¤–ï¼Œè³‡æ–™åˆåˆ†ç‚ºçµæ§‹åŒ–ã€åŠçµæ§‹åŒ–ã€éçµæ§‹åŒ–ä¸‰ç¨® çµæ§‹åŒ–:æœ‰æ˜ç¢ºæ ¼å¼å’Œå…§å®¹é™åˆ¶ e.g. è³‡æ–™åº« åŠçµæ§‹åŒ–:æœ‰æ˜ç¢ºæ ¼å¼ï¼Œç„¡å…§å®¹é™åˆ¶ e.g. Excelã€E-mailã€Facebook éçµæ§‹åŒ–:ç„¡æ˜ç¢ºæ ¼å¼å’Œå…§å®¹é™åˆ¶ e.g. åœ–ç‰‡ã€å½±ç‰‡ è³‡è¨Š(information): æŒ‡ç¶“éâ€è³‡æ–™è™•ç†â€å¾Œçš„çµæœï¼Œç”¢å‡ºæœ‰ç”¨çš„è³‡è¨Šã€‚ e.g. ç­ç´šæˆç¸¾æ’å å¥½çš„è³‡è¨Šå¯ä»¥å¹«åŠ©æ±ºç­–è€…åšå‡ºå¥½æ±ºå®š! è¦ç”¢å‡ºå¥½çš„è³‡è¨Šï¼Œéœ€é€éå¥½å·¥å…·ä¾†é”æˆï¼Œæˆ‘å€‘å¯ä»¥é€éè³‡æ–™åº«ç³»çµ±åšçµ±æ•´ã€‚ ä»€éº¼æ˜¯è³‡æ–™åº«(DataBase,DB)? æ ¹æ“šå®šç¾©æ˜¯æŒ‡ æœ‰æ–¹æ³•ä¸”æœ‰çµ„ç¹”æ€§çš„å°‡ä¸€ç¾¤ç›¸é—œçš„è³‡æ–™é›†åˆèµ·ä¾†ä¸¦å„²å­˜åœ¨ä¸€èµ· æˆ‘æœƒæŠŠå®ƒæ“¬ä½œä¸€å€‹å®¹å™¨ï¼Œå„²å­˜ç¨‹å¼ã€ç³»çµ±é‹ä½œæ‰€éœ€çš„è³‡æ–™ï¼Œä½¿ç”¨è€…å¯ä»¥ä½¿ç”¨SQLèªæ³•å°å®¹å™¨ä¸­çš„æª”æ¡ˆé€²è¡Œæ–°å¢(Create)ã€æŸ¥è©¢(Read)ã€æ›´æ”¹(Update)ã€åˆªæ¸›(Delete)ç­‰æ“ä½œï¼Œåœ¨CSé ˜åŸŸç¨±é€™å››å¤§åŸºæœ¬æ“ä½œç‚ºCRUDã€‚ å¦å¤–è³‡æ–™åº«æœ‰åˆ†é—œè¯å¼å’Œéé—œè¯å¼è³‡æ–™åº«ï¼Œä¸»è¦æ ¹æ“šè™•ç†çš„è³‡æ–™æ ¼å¼ä¾†æ±ºå®šç”¨å“ªç¨®è³‡æ–™åº«ã€‚ ä»€éº¼æ˜¯è³‡æ–™åº«ç®¡ç†ç³»çµ±(DataBase Management System, DBMS )?DBMSæ˜¯ä¸€å¥—æä¾›å¤šä½ä½¿ç”¨è€…ç®¡ç†è³‡æ–™åº«çš„è»Ÿé«”ç³»çµ±ï¼Œè² è²¬è³‡æ–™å­˜å–å’Œæ§åˆ¶ã€‚ä¸€å€‹DBMSæœƒåŒ…å«1~å¤šå€‹DBã€‚å¸¸è¦‹çš„DBMSç‚º: é—œè¯å¼è³‡æ–™åº«ç®¡ç†ç³»çµ±:MS(å¾®è»Ÿ) SQL Serverã€Oracleã€MySQL(å…è²») éé—œè¯å¼è³‡æ–™åº«ç®¡ç†ç³»çµ±:MongoDB è³‡æ–™åº«ç³»çµ±(DataBase System) çš„çµ„æˆ:ä¸€èˆ¬ä¾†èªªä¸€å€‹è³‡æ–™åº«ç³»çµ±ä¸»è¦åŒ…æ‹¬: ç¡¬é«”ã€è»Ÿé«”(DBMS)ã€è³‡æ–™(DB)ã€ä½¿ç”¨è€… ä½¿ç”¨è€…ä¸»è¦åˆ†ä¸‰é¡: 1.ä¸€èˆ¬çµ‚ç«¯ä½¿ç”¨è€…(end user) 2.ç¨‹å¼è¨­è¨ˆå¸«(Programmer) 3.è³‡æ–™åº«ç®¡ç†å¸«(DBA) ä¸‹é¢é€™å¼µåœ–ä¾†èªªæ˜å½¼æ­¤é–“çš„é—œä¿‚ è³‡æ–™åº«ã€è³‡æ–™åº«ç®¡ç†ç³»çµ±ã€è³‡æ–™åº«ç³»çµ±é–“çš„é—œä¿‚ è³‡æ–™åº«çš„å‡ºç¾åŠè¨­è¨ˆç›®çš„ç‚ºä½•?é›†ä¸­ç®¡ç†è³‡æ–™ï¼Œå¢åŠ è³‡æ–™çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼Œä¸¦å»ºç«‹ä¸€å€‹æ•´åˆçš„ç®¡ç†æ©Ÿåˆ¶ï¼ŒæŠŠè³‡æ–™ç®¡ç†å’Œç¨‹å¼è¨­è¨ˆåˆ†é–‹ï¼Œä½¿ç”¨æ¨™æº–åŒ–çš„æŸ¥è©¢èªè¨€(SQLèªæ³•)ã€‚ ç‚ºäº†è§£æ±ºå‚³çµ±æª”æ¡ˆè™•ç†ç³»çµ±è³‡æ–™çš„æ–¹å¼ï¼Œè³‡æ–™åº«ä¸»è¦æä¾›äº†ä»¥ä¸‹å„ªé»: æ¸›å°‘è³‡æ–™çš„é‡è¤‡æˆ–ä¸ä¸€è‡´: å‚³çµ±çš„æ–¹å¼å¯èƒ½é€ æˆå¤§é‡è³‡æ–™é‡è¤‡ï¼Œæˆ–æ˜¯æ›´æ–°çš„æ™‚å€™ä¸å®Œæ•´ï¼Œå°è‡´è³‡æ–™ä¸ä¸€è‡´ è®“è³‡æ–™å…·å…±äº«æ€§: å°‡è³‡æ–™ç¶­è­·åœ¨å–®ä¸€çš„å€‰åº«(Repository)ä¸­å®ƒåªéœ€è¦å®šç¾©ä¸€æ¬¡ï¼Œå°±å¯è®“ä¸åŒçš„ä½¿ç”¨è€…å­˜å–ã€‚ æ¸›å°‘ç¶­è­·æˆæœ¬åŠé–‹ç™¼æ™‚é–“: è³‡æ–™çš„å®‰å…¨æ€§: è³‡æ–™åº«å‡æœ‰å®Œå–„çš„ä¿å¯†ç³»çµ±ï¼Œé€éè³‡æ–™åº«ç®¡ç†å¸«é€²è¡Œç®¡ç† è³‡æ–™ç¨ç«‹æ€§: è³‡æ–™åº«ä¸­æ¯ä¸€é …è³‡æ–™éƒ½å…·æœ‰ã€Œç¨ç«‹æ€§ã€ï¼Œ è³‡æ–™çš„çµæ§‹å’Œå­˜å–æ–¹æ³•æ˜¯å›ºå®šçš„ï¼Œä¸å› ç”¨é€”ä¸åŒè€Œæœ‰æ‰€ä¸åŒã€‚ ç¼ºé»: DBMSæˆæœ¬è¼ƒé«˜ ç•¶DBMSç™¼ç”Ÿæ•…éšœæ™‚ï¼Œæ¯”è¼ƒé›£å¾©åŸ(é›†ä¸­æ§åˆ¶) å¦å¤–ï¼Œèª²å ‚ä¸»è¦ä»‹ç´¹å…©å€‹å¸¸ç”¨çš„è³‡æ–™åˆ†ææ–¹å¼: æ­£è¦åŒ–æ³•(å‚³çµ±) å€‹é«”é—œä¿‚æ¨¡å‹(ER-model) åƒè€ƒç¶²å€: http://www.angle.com.tw/File/Try/51MGA02103-2.pdf ç­†è¨˜å‚³çµ±çš„åˆ†ææ¨¡å‹:** æ­£è¦åŒ–** æ­£è¦åŒ–( Normalization) é€éè’é›†åŸæœ‰ä½œæ¥­çš„è¡¨å–®é€²è¡Œåˆ†æã€æ‹†è§£ï¼Œé¿å…é‡è¤‡å’Œä¸ä¸€è‡´ï¼Œå¾—å‡ºData Schema è³‡æ–™åº«æ˜¯å­˜å¤§é‡è³‡æ–™çš„åœ°æ–¹ï¼Œå…§å«å¤šå€‹è³‡æ–™è¡¨(table)ï¼Œæˆ‘å€‘çš„ç›®æ¨™æ˜¯è¦æ‰¾å‡ºé€™äº›è¡¨æ ¼ä¹‹é–“çš„é—œä¿‚ï¼Œå°‡å¤§çš„è³‡æ–™è¡¨æ‹†æˆå°çš„è³‡æ–™è¡¨ã€‚é †ä¾¿ä¾†èªè­˜ä¸€äº›åè©ã€‚ è³‡æ–™è¡¨(table): ç”±1~nå€‹æ¬„ä½(columnæˆ–ç¨±field)åŠè³‡æ–™éŒ„(recordæˆ–ç¨±row)ï¼Œæ¯å€‹rowè¡¨ä¸€ç­†è³‡æ–™ï¼Œè€Œæ¯å€‹fieldè¡¨ä¸€ç­†è³‡æ–™çš„å±¬æ€§ã€‚ Data Schema: è³‡æ–™åº«æœ¬èº«çš„æè¿°ï¼ŒåŒ…æ‹¬è³‡æ–™åº«çµæ§‹çš„æè¿°ï¼Œä»¥åŠåœ¨è³‡æ–™åº«ä¸Šæ‡‰è©²éµå®ˆçš„é™åˆ¶ã€‚è³‡æ–™åº«å¯¦ä¾‹ (database instance)ï¼š åœ¨æŸå€‹ç‰¹å®šæ™‚åˆ»æ‰€å„²å­˜çš„å¯¦éš›è³‡æ–™ï¼Œä¹Ÿç¨±ä½œè³‡æ–™åº«ç‹€æ…‹ (database state)ã€‚éµå€¼å±¬æ€§:åœ¨é—œè¯å¼è³‡æ–™åº«ä¸­ï¼Œæ¯ä¸€å€‹é—œè¯(è¡¨æ ¼)æœƒæœ‰è¨±å¤šä¸åŒçš„éµå€¼å±¬æ€§ (Key Attribute) ï¼Œå¯ä»¥åˆ†æˆå…©å€‹éƒ¨ä»½ä¾†æ¢è¨ï¼š ä¸€ã€å±¬æ€§(Attribute)ï¼šæ˜¯æŒ‡ä¸€èˆ¬å±¬æ€§æˆ–æ¬„ä½ã€‚ äºŒã€éµå€¼å±¬æ€§(Key Attribute)ï¼šç”±ä¸€å€‹æˆ–ä¸€å€‹ä»¥ä¸Šçš„å±¬æ€§æ‰€çµ„æˆï¼Œ ä¸¦ä¸”åœ¨ä¸€å€‹é—œè¯ä¸­ï¼Œå¿…é ˆè¦å…·æœ‰ã€Œå”¯ä¸€æ€§ã€çš„å±¬æ€§ä¾†ç•¶ä½œã€Œéµ (Key)ã€ã€‚ é—œè¯å¼è³‡æ–™åº«(RDBMS)ä¸­ï¼Œå¸¸è¦‹çš„éµ(Key)å¯åˆ†ç‚ºï¼šå€™é¸éµ(Candidate)ã€ä¸»éµ(Primary Key)ã€å¤–ä¾†éµ(Foreign Key)åŠæ›¿æ›éµã€‚ å€™é¸éµ:å¯å”¯ä¸€è­˜åˆ¥è³‡æ–™è¡¨(Table)ä¸­çš„æ¯ä¸€ç­†è³‡æ–™å±¬æ€§çš„çµ„åˆã€‚ ä¸»éµ(Primary Key):å¾å€™é¸éµä¸­æŒ‘ä¸€å€‹æœ€é©åˆæˆ–å¸¸ç”¨åˆ°çš„ä½œç‚ºä¸»éµï¼Œå¦‚æœæ²’æœ‰åˆé©çš„ï¼Œå°±å®šç¾©ä¸€çµ„æµæ°´è™Ÿã€‚ ä¸»éµè¦æ±‚: ä¸å…è¨±é‡è¤‡ã€ä¸å…è¨±ç‚ºnull(ç„¡æ³•é€²è¡Œé‚è¼¯é‹ç®—)*è¨» å¤–ä¾†éµ(Foreign Key):å…©å€‹è³‡æ–™è¡¨(Table)å…·æœ‰é—œä¿‚(Relationship)æ™‚ï¼Œæœƒç”¢ç”Ÿåƒç…§é—œä¿‚ï¼Œå°‡è¢«åƒç…§çš„è¡¨æ ¼(Table)ä¸­çš„Primary Keyï¼Œç´å…¥åƒç…§çš„Tableä¸­åšç‚ºForiegn Keyã€‚ å¤–ä¾†éµè¦æ±‚: åœ¨è¢«åƒç…§çš„Tableä¸­å¿…é ˆç‚ºPrimary Keyã€‚ ç•¶åƒç…§çš„Tableæ–°å¢ä¸€ç­†è³‡æ–™æ™‚ï¼ŒForiegn Keyçš„å€¼åœ¨è¢«åƒç…§çš„Tableä¸­å¿…é ˆå·²ç¶“å­˜åœ¨ã€‚ Foreign Keyå…è¨±ç‚ºnullï¼Œä½†ä¿®æ”¹å€¼æ™‚æœƒæª¢æŸ¥æ˜¯å¦å­˜åœ¨Primary Keyã€‚ ç•¶è¢«åƒç…§çš„Tableè¦åˆªé™¤ä¸€ç­†è³‡æ–™æ™‚ï¼ŒDBMSæœƒæª¢æŸ¥è©²ç­†è³‡æ–™æ˜¯å¦è¢«Foreign Keyæ‰€åƒç…§ï¼Œå¦‚æœæ˜¯ï¼Œå°±ä¸èƒ½è¢«åˆªé™¤ã€‚ æ›¿æ›éµ:å…¶ä»–è½é¸çš„å€™é¸éµã€‚ æ­£è¦åŒ–çš„å½¢å¼ç¬¬ä¸€æ­£è¦åŒ–: å»é™¤å¤šå€¼æ¯å€‹Fieldåªå…è¨±æ”¾ä¸€å€‹å–®ä½ï¼Œè‹¥æœ‰å¤šå€‹å€¼å‰‡åˆ†æˆå¤šç­†è³‡æ–™(Row)ï¼Œä¸¦æ±ºå®šTableä¸­çš„Primary Keyã€‚ ç¬¬äºŒæ­£è¦åŒ–: å»é™¤éƒ¨åˆ†ç›¸ä¾ Primary Keyå¯èƒ½ä¸åªä¸€å€‹Fieldæ‰€æ§‹æˆï¼Œè‹¥Primary Keyåªæœ‰ä¸€å€‹Fieldï¼Œå‰‡ä¸é ˆå¦å¤–åšç¬¬äºŒæ­£è¦åŒ–(å› ç‚ºå·²ç¶“æ»¿è¶³)ã€‚ æª¢æŸ¥æ‰€æœ‰éPrimary Keyçš„Fieldï¼Œç¢ºèªè©²Fieldå¿…é ˆç”±æ‰€æœ‰Primary Keyçš„Fieldå…±åŒæ±ºå®šï¼Œä¸èƒ½åªæœ‰éƒ¨åˆ†æ±ºå®šã€‚ è‹¥éƒ¨åˆ†Primary Keyçš„Fieldå°±èƒ½æ±ºå®šçš„è©±ï¼Œéœ€è¦å¦å¤–æ‹†å‡ºä¸€å€‹æ–°çš„è¡¨æ ¼ã€‚ ç¬¬ä¸‰æ­£è¦åŒ–: å»é™¤éç§»é—œä¿‚ å…ˆå®Œæˆç¬¬äºŒæ­£è¦åŒ– æª¢æŸ¥æ‰€æœ‰Fieldæ˜¯å¦æœ‰é–“æ¥æ±ºå®šçš„ç¾è±¡ï¼Œæ„æ€æ˜¯Primary Keyæ±ºå®šæŸå€‹Fieldï¼Œè€Œä¸”é€™å€‹Fieldå¯æ±ºå®šå…¶ä»–çš„Fieldã€‚ å°‡ç™¼ç”Ÿæ±ºå®šçš„éç§»ç¾è±¡çš„Fieldæ‹†æˆæ–°çš„Tableã€‚ ä»¥ä¸Šç‚ºæ­£è¦åŒ–çš„æµç¨‹ï¼Œä¹‹å¾Œå†è£œä¸Šå¯¦ä½œçš„ä¾‹å­ã€‚ è¨»: NULL â€“ ã€Œè™›å€¼ã€ï¼Œåœ¨è³‡æ–™åº«ä¸­ç‚ºäº†è­˜åˆ¥æŸä¸€å±¬æ€§æ˜¯ä½¿ç”¨è€…æœªçµ¦å€¼çš„ç‰¹æ®Šæƒ…æ³ï¼Œè¨˜ç‚ºNullï¼ŒNULLå› ç‚ºæ˜¯æœªå®šå€¼ï¼Œç„¡æ³•èˆ‡å…¶ä»–å€¼åšæ¯”è¼ƒã€‚ å†ä¾†ç­†è¨˜å¦ä¸€ç¨®å¸¸ç”¨çš„è³‡æ–™åº«åˆ†ææ¨¡å‹: å¯¦é«”é—œä¿‚æ¨¡å‹( Entity-relationship model, ERD)æœ€æ—©ç”±ç¾ç±è¯è£”é›»è…¦ç§‘å­¸å®¶é™³å“å±±æ‰€æå‡ºçš„æ¦‚å¿µæ¨¡å‹ã€‚ ç›®çš„: åœ¨å°å‡ºDatabase Schemaï¼Œä¸¦æä¾›è³‡æ–™å„²å­˜åŠæ¥­å‹™è¦å‰‡é–“çš„åœ–å‹åŒ–æª¢é©— æ©Ÿåˆ¶ã€‚ å…ˆèªªæ˜ä¸€ä¸‹ERDçš„ç¬¦è™Ÿ: Entity(å¯¦é«”): ç”¨ä¸€çŸ©å½¢è¡¨ç¤ºï¼Œ ç¾å¯¦ä¸–ç•Œäº‹ç‰©çš„ä¸€ç¨®æŠ½è±¡è¡¨ç¤ºï¼Œå¤§å¤šæ˜¯åè©ï¼Œ å¦‚: å®¢æˆ¶èˆ‡å•†å“éƒ½æ˜¯å€‹é«”ã€‚ Attribute(å±¬æ€§): ç”¨æ©¢åœ“è¡¨ç¤ºï¼Œ æè¿°ä¸€å€‹å€‹é«”æœƒæœ‰çš„ç‰¹å¾µã€ç‰¹æ€§ã€‚å¦‚: å®¢æˆ¶æ˜ã€å®¢æˆ¶ä½å€ã€å®¢æˆ¶ç·¨è™Ÿã€‚ Relationship(é—œä¿‚): ç”¨è±å½¢è¡¨ç¤ºï¼Œæè¿°æˆ–å‚³é”å€‹é«”èˆ‡å€‹é«”ä¹‹é–“çš„é—œè¯æ€§ã€‚ ä¾‹: å®¢æˆ¶å’Œå•†å“ä¹‹é–“æœ‰ä¸€ã€éŠ·å”®ã€é—œè¯ï¼Œå› æ­¤å…©å€‹é«”é–“å­˜åœ¨ä¸€éŠ·å”®é—œä¿‚ã€‚ ä½œæ³•: è§€å¯Ÿä½¿ç”¨è€…æƒ…å¢ƒæˆ–éœ€æ±‚æè¿°ï¼Œæ‰¾å‡ºé‡è¦çš„äººã€äº‹ã€æ™‚ã€åœ°ã€ç‰©ï¼Œç•«ä½œEntityã€‚ ä¾Entityæ‰¾å‡ºé‡è¦çš„Attributeï¼Œä»¥ç›´ç·šé€£æ¥Entityã€‚ æ‰¾å‡ºEntityä¹‹é–“æ‰¾å‡ºé‡è¦çš„é—œä¿‚ï¼Œåœ¨Entityé–“ç•«å‡ºRelationshipç›´æ¥é€£æ¥Entityã€‚ ç¯„ä¾‹: &lt;æ³¨æ„&gt; æ­£ç¢ºçš„ERDå¯ä»¥è‡ªå‹•æ»¿è¶³æ­£è¦åŒ–çš„æ‰€æœ‰æµç¨‹ã€‚ é™³å“å±±çš„ERDå¯ä»¥å…è¨±å¤šå°å¤šã€å¤šå…ƒé—œä¿‚ï¼Œä¸”åªæè¿°é‡è¦å±¬æ€§ã€‚ ä¸æè¿°å¤–ä¾†éµï¼Œåªæè¿°ä¸»éµã€‚ ä¸é©åˆè¡¨é”è¤‡é›œçš„è³‡æ–™åº«çµæ§‹(Schema) æ¦‚å¿µè³‡æ–™æ¨¡å‹(Conceptual Data Model,CDM)äº¦ç¨±ä½œé³¥çˆªåœ–ï¼Œç”¨æ–¼è³‡æ–™æ¨¡å‹(Data Model)ä¸­çš„æ¦‚å¿µåˆ†æï¼ŒCDMè™•æ–¼ç³»çµ±åˆ†æéšæ®µï¼Œé‚„ä¸éœ€è¦æ±ºå®šä½¿ç”¨å“ªå€‹è³‡æ–™åº«ç®¡ç†ç³»çµ±(DBMS)ã€‚ ç¯„ä¾‹åœ–ç¤º: å¯¦é«”é—œä¿‚çš„æè¿°å¯ç‚ºä¸€å°ä¸€ã€å¤šå°å¤šã€ä¸€å°å¤šã€‚ â€œ+â€è¡¨ä¸€å®šè¦æœ‰å€¼ï¼Œç©ºå¿ƒåœ“è¡¨æ²’æœ‰å€¼ï¼Œåƒé³¥çˆªä¸€æ¨£çš„åœ–ç¤ºè¡¨ç¤ºå¤šå€‹ã€‚ &lt;æ³¨æ„&gt; ç•«åº•ç·šè€…è¡¨ç¤ºè©²å¯¦é«”çš„ä¸»éµ(Primary Key)ã€‚ ç•«CDMæ™‚ï¼Œåªå…è¨±äºŒå…ƒé—œä¿‚ï¼Œä¸æè¿°å¤–ä¾†éµï¼Œä½†å¯ä»¥è¨­å®šä¸»éµã€‚ è‹¥å…©å€‹å¯¦é«”é–“æœ‰å¤šå°å¤šçš„é—œä¿‚(éƒ½æ˜¯é³¥çˆªåœ–æ¡ˆ)ï¼Œå‰‡éœ€è¦æ‹†æˆ2å€‹ä¸€å°å¤šé—œä¿‚çš„å¯¦é«”ã€‚ ä¾‹å¦‚ä¸Šåœ–çš„è¨‚å–®å’Œç”¢å“ä¹‹é–“çš„é—œä¿‚æ˜¯å¤šå°å¤šï¼Œé‚£æˆ‘å€‘é‚„å¯ä»¥æ‹†åˆ†æˆä¸‹åœ– ä¸­é–“æ–°å¢ä¸€å€‹è¨‚å–®æ˜ç´°ï¼Œè·Ÿå…¶ä»–å…©è€…é—œä¿‚æˆä¸€å°å¤šçš„é—œä¿‚ã€‚ ç•¶è¦æŠŠå¤šå°å¤šçš„é—œä¿‚æ‹†å‡ºæ›´ç´°ç¯€çš„ä¸€å°å¤šé—œä¿‚æ™‚ï¼Œå°±é–‹å§‹é€²å…¥ç³»çµ±è¨­è¨ˆéšæ®µã€‚ ç­†è¨˜ä¸€ä¸‹ç³»çµ±é–‹ç™¼çš„ç”Ÿå‘½é€±æœŸ: å¯¦é«”è³‡æ–™æ¨¡å¼(Physical Data Model,PDM)å¯¦é«”è³‡æ–™æ¨¡å¼æ˜¯ä¾å¯¦éš›é‹ä½œä¸Šçš„è€ƒé‡ï¼Œåœ¨ç‰¹å®šè³‡æ–™åº«ç³»çµ±ä¸Šå¯¦ç¾çš„çµæœï¼Œå’Œä¸Šç¯‡CDMä¸åŒçš„æ˜¯ï¼Œ CDMæ˜¯ç”¨ä¾†è¡¨é”çœŸå¯¦è³‡æ–™åº«çš„æŠ½è±¡æ¦‚å¿µã€‚ ä¸Šç¯‡æœ€å¾Œæœ‰æåˆ°ï¼Œå…·æœ‰å¤šå°å¤šé—œä¿‚çš„å…©å€‹Entityéœ€æ‹†å‡ºå…©çµ„ä¸€å°å¤šé—œä¿‚çš„Entityã€‚å¦å¤–ï¼Œå› ç‚ºéœ€åœ¨ç‰¹å®šçš„è³‡æ–™åº«ç³»çµ±ä¸Šå¯¦ç¾ï¼Œæ‰€ä»¥åœ¨ç•«PDMå‰ä¸€å®šè¦å…ˆé¸å®šå“ªç¨®è³‡æ–™åº«ç®¡ç†ç³»çµ±(DBMS)ï¼Œé¸å®šä¹‹å¾Œå°±ä¸å¯å†åšä¿®æ”¹ã€‚ PDMç¤ºæ„åœ–(By Power Designer): &lt;æ³¨æ„&gt; æ­¤éšæ®µéœ€é¸å®šå“ªå€‹è³‡æ–™åº«ç®¡ç†ç³»çµ±ã€‚ PDMä¸­çš„Entityå¯ä»¥è¨­å®šå¤–ä¾†éµ(Foreign Key)ã€‚ ç®­é ­æŒ‡å‘è¢«åƒç…§çš„Entityï¼Œç®­å°¾ç‚ºåƒç…§Entityï¼Œå°‡è¢«åƒç…§Entityä¸­çš„ä¸»éµæ‹‰åˆ°åƒç…§Entityå…§ä½œç‚ºå¤–ä¾†éµã€‚ é—œä¿‚: ç®­é ­æŒ‡å‘ç‚ºä¸€ï¼Œç®­å°¾ç‚ºå¤š å¦å¤–ç´€éŒ„æ¨¡å‹å…§å¸¸ç”¨çš„è³‡æ–™å‹æ…‹: char(): è¡¨å­—å…ƒï¼Œæœ‰å›ºå®šé•·åº¦ï¼Œ()å…§å¯å¡«å…¥å­—å…ƒçš„æœ€å¤§é•·åº¦ï¼Œç”¨æ–¼è¼ƒæœ‰å›ºå®šé•·åº¦çš„è³‡æ–™ï¼Œä¾‹å¦‚: åå­—ã€‚ å„ªé»: è™•ç†çœæ™‚é–“ varchar():è¡¨å­—å…ƒï¼Œè®Šå‹•é•·åº¦ï¼Œå¯éš¨è‘—ä¸åŒè¼¸å…¥çš„è³‡æ–™é•·åº¦ï¼Œå°æœ€å¤§é•·åº¦åšå½ˆæ€§èª¿æ•´ï¼Œä¾‹å¦‚: åœ°å€ã€‚ å„ªé»: çœç©ºé–“ Integer: æ•´æ•¸ date: æ—¥æœŸ time: æ™‚åˆ» datetime: æ™‚é–“(åŒ…å«æ—¥æœŸã€æ™‚é–“)","link":"2019/07/14/Database/SQL%20Server/database(introduction)/"},{"title":"[Python] Djangoç­†è¨˜ - Django Template Language(1)","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 02 å‰è¨€Djangoæä¾›ç¨ç‰¹çš„æ¨¡æ¿èªæ³•ï¼Œå°‡HTMLé é¢åšå‹•æ…‹è¼‰å…¥ã€‚å› ç‚ºåœ¨HTMLæª”ï¼Œç„¡æ³•ä½¿ç”¨pythonä¾†æ’°å¯«ç¨‹å¼ï¼ŒDjangoçš„æ¨¡æ¿å¼•æ“è®“æ’°å¯«å¥½çš„pythonç¨‹å¼ç¢¼å¯ä»¥å»ºæ§‹åœ¨ç¶²é ä¸Šé¢ã€‚ç°¡å–®ä¾†èªªï¼Œé€éæ¨¡æ¿èªæ³•ï¼Œæˆ‘å€‘å¯ä»¥åœ¨HTMLæª”å¯«å…¥pythonçš„ç¨‹å¼ç¢¼ï¼Œè®“ç¶²é è®Šæˆå‹•æ…‹è¼‰å…¥çš„ç‹€æ…‹ã€‚ Templateç›¸é—œè¨­å®š(Configuration)è‡³å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹æ‰¾åˆ°settings.pyæª”æ¡ˆï¼Œæœå°‹TEMPLATESï¼Œä¾¿èƒ½å¤ çœ‹åˆ°ä»¥ä¸‹è¨­å®šï¼š Django é è¨­å»æ‰¾ TEMPLATES çš„è¨­å®šDIRS: ç‚ºDjangoé¡å¤–æœå°‹TEMPLATESçš„ç›®éŒ„ï¼Œå¦‚æœè¦å¦å¤–è¨­å®šçš„è©±ï¼Œåœ¨é€™å€‹åœ°æ–¹å¡«å¯«è‡ªè¨‚çš„è·¯å¾‘ ä¸€èˆ¬æƒ…æ³ä¸‹ï¼Œæœƒç¿’æ…£åœ¨æ¯å€‹æ–°å¢apps å°ˆæ¡ˆç›®éŒ„ä¸‹å‰µå»ºè©²appsçš„å°ˆå±¬templatesè³‡æ–™å¤¾ï¼Œå› ç‚ºDjangoé è¨­æœƒå»æ‰¾åç‚ºtemplatesè³‡æ–™å¤¾ä¸‹çš„æª”æ¡ˆã€‚ å¯¦ä½œè¨»å†ŠAPPå…ˆå»ºç«‹Django application(app)ï¼Œä¾‹å¦‚å»ºç«‹åç‚ºfoodçš„appï¼Œä¸¦åœ¨settings.pyæª”æ¡ˆä¸‹æ‰¾åˆ°INSTALLED_APPSï¼Œåœ¨æœ«ç«¯åŠ å…¥'food'ã€‚ æŒ‡å®šå°ˆæ¡ˆè·¯å¾‘å†åˆ°urls.pyï¼Œè¨­å®špath('food/', include(&quot;food.urls&quot;) ),ï¼ŒæŒ‡å®šfoodå°ˆæ¡ˆçš„æ ¹è·¯å¾‘ã€‚ å»ºç«‹æ¨¡æ¿åœ¨foodè³‡æ–™å¤¾ä¸‹å¦å¤–è¨­ç«‹ä¸€å€‹templateç›®éŒ„ï¼Œæ–°å¢index.html(æˆ‘æœ‰å¤šä¸€å±¤foodè³‡æ–™å¤¾åšå€åˆ†)index.html 12345678910&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Index&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h2&gt;Welcome to Django!!!&lt;/h2&gt; &lt;/body&gt; &lt;/html&gt; è¼‰å…¥æ¨¡æ¿ä¸¦é€²è¡Œæ¸²æŸ“(render)appå°ˆæ¡ˆä¸‹çš„views.pyå¯«å…¥ä¸‹æ–¹ç¨‹å¼ç¢¼ 123456from django.shortcuts import renderfrom django.http import HttpResponsefrom django.template import loader def index(request): template = loader.get_template('food/index.html') # getting our template return HttpResponse(template.render()) # rendering the template in HttpResponse æŸ¥çœ‹é é¢é–‹å•Ÿä¼ºæœå™¨ï¼ŒåŸ·è¡Œpython3 manage.py runserverï¼ŒåŸå§‹ç¶²é è·¯å¾‘åŠ ä¸Š/foodå³å¯çœ‹åˆ°æ¸²æŸ“å‡ºä¾†çš„index.htmlç•«é¢ å„å¼èªæ³•è®Šæ•¸(Variables)å…©å€‹èŠ±æ‹¬å¼§{ {} }è£¡é¢æ”¾å…¥å‚³ééå»çš„è®Šæ•¸ã€‚ ç¯„ä¾‹å‚³éHello index!è¨Šæ¯ï¼Œä¸¦assignçµ¦è®Šæ•¸åtxtï¼Œå°‡æ­¤è®Šæ•¸å‚³éåˆ°index.htmlæª”é€²è¡Œæ¸²æŸ“ã€‚views.py 1234from django.shortcuts import renderdef index(request): txt = &quot;Hello index!&quot; return render(request, 'food/index.html', {&quot;txt&quot;: txt} ) åœ¨index.htmlæª”ä¸­åŠ å…¥&lt;h3&gt; { {txt} } &lt;/h3&gt;ï¼Œè®Šæ•¸çš„å€¼å°±æœƒè¢«æ¨¡æ¿èªæ³•æ¸²æŸ“ä¸Šå»äº†ï¼ 1234567891011&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Index&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h2&gt;Welcome to Django!!!&lt;/h2&gt; &lt;h3&gt; { {txt} } &lt;/h3&gt; &lt;/body&gt; &lt;/html&gt; æ¨™ç±¤(Tags)Djangoæä¾›å¡«å…¥æ¨™ç±¤çš„æ¨¡æ¿èªæ³•: { % tag % }ï¼Œè—‰ç”±{ % tag % }å¯ä»¥å¯«å…¥æ›´è¤‡é›œçš„é‚è¼¯ï¼Œå¦‚:if-elseã€forç­‰ç­‰ã€‚ æ¢ä»¶åˆ¤æ–·1234567{ % if athlete_list % } Number of athletes: { { athlete_list|length } }{ % elif athlete_in_locker_room_list % } Athletes should be out of the locker room soon!{ % else % } No athletes.{ % endif % } è¿´åœˆ12345&lt;ul&gt;{ % for athlete in athlete_list % } &lt;li&gt;{ { athlete.name } }&lt;/li&gt;{ % endfor % }&lt;/ul&gt; ç¹¼æ‰¿Djangoæä¾›ç¹¼æ‰¿çš„æ¨¡æ¿èªæ³•ï¼Œè®“é–‹ç™¼è€…å¯ä»¥åšåˆ°é‡è¤‡åˆ©ç”¨ã€å½ˆæ€§æ›´å‹•ã€‚ å€å¡Šæ¨™ç±¤(block tags)å®šç¾©ä¸€å€‹å€é–“ï¼Œè®“ç¹¼æ‰¿è€…åšæ›´å‹• =&gt; å½ˆæ€§æ›´å‹• 1{ % block name % } .... { % endblock % } å±•å»¶æ¨™ç±¤(extends tags)å¾ˆå¤šæ™‚å€™ä¸€å€‹ç¶²ç«™æŸéƒ¨åˆ†çš„é é¢æœƒé‡è¤‡ï¼Œç‚ºäº†é¿å…ä¸€ç›´å¯«é‡è¤‡çš„ä»£ç¢¼ï¼Œå¯ä»¥ä½¿ç”¨extends tagsã€‚ =&gt; é‡è¤‡åˆ©ç”¨ 1{ % extends &quot;xxx.html&quot; % } å¯¦éš›æ‡‰ç”¨æ™‚ï¼Œé€šå¸¸æœƒé‡å°ç¶²é é‡è¤‡çš„éƒ¨åˆ†ç¨ç«‹å‡ºä¸€å€‹HTMLæª”ã€‚ å¯¦ä½œå»ºç«‹ä¸€å€‹base.htmlçš„HTMLï¼Œç¶²é å…§å®¹é‡è¤‡çš„éƒ¨åˆ†éƒ½å¯«åœ¨é€™å€‹æª”ï¼Œä¾‹å¦‚:ç¶²ç«™çš„å°è¦½æ¢ base.html 12345678910111213141516171819202122232425262728293031&lt;!doctype html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;!-- Required meta tags --&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt; &lt;!-- Bootstrap CSS --&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css&quot; integrity=&quot;sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh&quot; crossorigin=&quot;anonymous&quot;&gt; &lt;title&gt;Index&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;nav class=&quot;navbar navbar-dark bg-dark&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;navbar-brand&quot;&gt; FoodApp&lt;/a&gt; &lt;div class=&quot;navbar&quot;&gt; &lt;a href=&quot;#&quot; class=&quot;nav-item nav-link&quot;&gt; Add Item&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;nav-item nav-link&quot; &gt; Delete Item&lt;/a&gt; &lt;a href=&quot;#&quot; class=&quot;nav-item nav-link&quot;&gt; Menu Item&lt;/a&gt; &lt;/div&gt; &lt;/nav&gt; { % block body % } { % comment % } æ­¤è™•ç‚ºå½ˆæ€§æ›´å‹•ä¹‹è™• { % endcomment % } { % endblock % } &lt;!-- Optional JavaScript --&gt; &lt;!-- jQuery first, then Popper.js, then Bootstrap JS --&gt; &lt;script src=&quot;https://code.jquery.com/jquery-3.4.1.slim.min.js&quot; integrity=&quot;sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js&quot; integrity=&quot;sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js&quot; integrity=&quot;sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; { % block body % }{ % endblock % }å…§å°±æ˜¯ä¹‹å¾Œè¢«å¼•å…¥å…¶ä»–æª”æ¡ˆä¸­ï¼Œæœƒè®Šå‹•çš„å…§å®¹ã€‚å†ä¾†çœ‹index.htmlæª” 123456789101112131415161718192021222324252627282930313233343536373839{ % extends 'food/base.html' % }&lt;!doctype html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;!-- Required meta tags --&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;&gt; &lt;!-- Bootstrap CSS --&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css&quot; integrity=&quot;sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh&quot; crossorigin=&quot;anonymous&quot;&gt; &lt;title&gt;Index&lt;/title&gt; &lt;/head&gt; &lt;body&gt; { % block body % } { % for item in item_list % } &lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-md-3 offset-md-2&quot;&gt; &lt;img class=&quot;card&quot; height=&quot;150px&quot; src=&quot;{ { item.item_iamge } }&quot;&gt; &lt;/div&gt; &lt;div class=&quot;col-md-4&quot;&gt; &lt;h3&gt;{ { item.item_name } }&lt;/h3&gt; &lt;h4&gt;{ { item.item_desc } }&lt;/h4&gt; &lt;h5&gt;${ { item.item_price } }&lt;/h5&gt; &lt;/div&gt; &lt;div class=&quot;col-md-2&quot;&gt; &lt;a href=&quot;{ % url 'food:detail' item.id% }&quot; class=&quot;btn btn-success&quot;&gt;Details&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; { % endfor % } { % endblock % } &lt;!-- Optional JavaScript --&gt; &lt;!-- jQuery first, then Popper.js, then Bootstrap JS --&gt; &lt;script src=&quot;https://code.jquery.com/jquery-3.4.1.slim.min.js&quot; integrity=&quot;sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js&quot; integrity=&quot;sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js&quot; integrity=&quot;sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; ä¸Šé¢index.htmlæª”æ¡ˆå…§çš„{ % extends 'food/base.html' % }ä½œç‚ºç¹¼æ‰¿base.htmlçš„çµæ§‹ï¼Œä¸¦åœ¨{ % block body % }... { % endblock % }å…§å¯«ä¸Šè¦è®Šå‹•çš„å…§å®¹ çµæœ è·¨ç«™è«‹æ±‚å½é€ çš„é˜²è­·1{ % csrf_token % } åƒé–± Official Doc Django å‘½åç©ºé–“(NameSpace) Django Tutorial- Template Day14 : Template çš„é‹ä½œ","link":"2020/02/20/Python/Django/%5BPython%5D%20Django%E7%AD%86%E8%A8%98%20-%20Django%20Template%20Language(1)/"},{"title":"[Django] åœ¨ Ubuntu ä¸­é‹ç”¨ Nginxã€Gunicorn æ¶è¨­ Django API Server","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 19 å‰è¨€ç›®å‰æ­£åœ¨é€²è¡Œä¸€å€‹Side Projectï¼Œç”¨æœ‹å‹é–‹çµ¦æˆ‘çš„è™›æ“¬æ©Ÿ(VM)æ¶è¨­ä¸€å°API Serverï¼Œè¶é‚„æœ‰è¨˜æ†¶æ™‚è¶•å¿«ä¾†ç­†è¨˜ä¸€ä¸‹ã€‚ å‰ç½®ä½œæ¥­: OS: Ubuntu 18.04 Web Framework: Django 3.0; djangorestframework 3.11 Server: Nginx 1.14 Database: MySQL å¯¦ä½œæ¶æ§‹åœ–å¦‚ä¸‹: å®‰è£ç’°å¢ƒå®‰è£æ‰€éœ€è¦çš„ç’°å¢ƒï¼Œæœƒä¸‹è¼‰python3ã€mysqlã€nginx 12sudo apt-get updatesudo apt-get install python3-pip python3-dev mysql-server libmysqlclient-dev nginx è³‡æ–™åº«12sudo mysql_install_dbsudo mysql_secure_installation åŸ·è¡Œä¸Šè¿°æŒ‡ä»¤é€²è¡Œåˆå§‹åŒ–ï¼Œç³»çµ±æœƒè©¢å•ä¸€äº›ç›¸é—œè¨­å®šï¼Œå¯ä»¥å…¨éƒ¨éƒ½æ¡é è¨­çš„æ–¹å¼ã€‚å…¶ä¸­ï¼Œè¦è¨­å®šrootæ¬Šé™çš„å¯†ç¢¼ï¼Œè¨­å®šå®Œä¹‹å¾ŒåŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤ç™»å…¥rootå¸³è™Ÿ 1mysql -u root -p å®Œæˆç™»å…¥ä¾¿æœƒé€²å…¥MySQL Shellï¼Œåœ¨Shellä¸­å¯«ä¸‹è…³æœ¬å»ºç«‹è³‡æ–™åº« 1CREATE DATABASE &lt;yourprojectname&gt; CHARACTER SET UTF8; å°‡ä¸Šè¿°çš„&lt;yourprojectname&gt;æ›¿æ›æˆè‡ªå·±è¦å»ºç«‹çš„è³‡æ–™åº«åç¨±ï¼Œå…¶ä¸­utf8ç‚ºDjangoé è¨­å¾—ç·¨ç¢¼ã€‚ æ¥è‘—æ˜¯åœ¨MySQLä¸­å»ºç«‹å¦ä¸€å€‹Userï¼Œå»ºè­°ä¹‹å¾Œéƒ½ä½¿ç”¨Userçš„å¸³è™Ÿä¾†ç™»å…¥è³‡æ–™åº«ï¼ 1CREATE USER &lt;yourdbuser&gt;@localhost IDENTIFIED BY '&lt;password&gt;'; ä¸Šè¿°æŒ‡ä»¤ä¸­ï¼Œ&lt;yourdbuser&gt;ç‚ºè‡ªè¨‚çš„Useråç¨±ï¼Œ&lt;password&gt;ç‚ºè‡ªè¨‚çš„å¯†ç¢¼ï¼Œæ³¨æ„å¯†ç¢¼è¦ä»¥å­—ä¸²çš„å½¢å¼æ’°å¯«(è¦æœ‰'')ã€‚ 1GRANT ALL PRIVILEGES ON &lt;yourprojectname&gt;.* TO &lt;yourdbuser&gt;@localhost; åŸ·è¡Œä¸Šè¿°æŒ‡ä»¤ï¼Œè³¦äºˆå‰›å»ºç«‹çš„Userè¨ªå•è³‡æ–™åº«çš„æ¬Šé™ã€‚ 12FLUSH PRIVILEGES;exit å°ˆæ¡ˆä¸‹è¼‰ç›¸ä¾å¥—ä»¶ 12sudo -H pip3 install --upgrade pipsudo -H pip3 install virtualenv å¦‚æœå…ˆå‰åœ¨Githubä¸Šçš„repoå·²ç¶“æœ‰å°ˆæ¡ˆï¼Œå¯ä»¥ç›´æ¥Cloneåˆ°Ubuntuçš„ç’°å¢ƒä¸­ 1git clone repoAddress æˆ–æ˜¯ç›´æ¥åœ¨Ubuntuä¸­å»ºç«‹æ–°çš„å°ˆæ¡ˆ 12mkdir ~/&lt;yourprojectdir&gt;cd ~/&lt;yourprojectdir&gt; åœ¨å°ˆæ¡ˆè³‡æ–™å¤¾ä¸­å»ºç«‹è™›æ“¬ç’°å¢ƒ 1virtualenv &lt;yourenv&gt; å•Ÿå‹•è™›æ“¬ç’°å¢ƒ 1source &lt;yourenv&gt;/bin/activate ä»¥æˆ‘ç‚ºä¾‹ï¼Œæˆ‘çš„è™›æ“¬ç’°å¢ƒåç¨±ç‚ºenv å•Ÿå‹•è™›æ“¬ç’°å¢ƒå¾Œæœƒçœ‹åˆ°çµ‚ç«¯æ©Ÿçš„æœ€å·¦æ–¹æœ‰çš„(env)è¡¨ç¤ºå•Ÿå‹•è™›æ“¬ç’°å¢ƒï¼Œè‹¥è¦é€€å‡ºè™›æ“¬ç’°å¢ƒå‰‡åŸ·è¡Œdeactiveã€‚ ä¸‹è¼‰å°ˆæ¡ˆæ‰€éœ€çš„ç›¸ä¾å¥—ä»¶ 1pip3 install django gunicorn pymysql djangorestframework å»ºç«‹Django restframeworkçš„æ‰‹æŠŠæ‰‹æ•™å­¸å¯ä»¥åƒè€ƒå®˜ç¶²ç¯„ä¾‹ã€‚ æœ¬æ–‡æ˜¯ç›´æ¥Cloneä¹‹å‰å·²ç¶“åœ¨Githubå»ºç«‹å¥½çš„Repoï¼Œå»ºç«‹Djangoå°ˆæ¡ˆçš„éƒ¨åˆ†ä¾¿ä¸å¤šåŠ è©³è¿°ï¼Œä¸»è¦æ˜¯ç´€éŒ„éƒ¨ç½²åˆ°å¯¦éš›ç’°å¢ƒéœ€è¦ä¿®æ”¹çš„è¨­å®šã€‚ åˆ°Djangoä¸»è¦å°ˆæ¡ˆçš„è³‡æ–™å¤¾ä¸‹ï¼Œå»ºç«‹ä¸€å€‹åç‚º__init__.pyçš„æª”æ¡ˆ 1vim __init__.py å¯«ä¸‹ä¸‹æ–¹ç¨‹å¼ç¢¼__init__.py 123import pymysqlpymysql.version_info = (1, 3, 13, &quot;final&quot;, 0)pymysql.install_as_MySQLdb() å¯«å®Œä¸Šè¿°ç¨‹å¼ç¢¼å¾Œå„²å­˜é›¢é–‹ESC+:wq!æ¥è‘—åœ¨settings.pyä¸­åšä¸‹æ–¹å¹¾å€‹æ›´æ”¹ 1vim settings.py settings.py 12345678910111213141516ALLOWED_HOSTS = [ 'domain.com', '&lt;yourserverip&gt;', 'localhost']# æ­¤æ•¸å°‡é è¨­çš„SQLiteæ›¿æ›æˆMySQLDATABASES = { 'default': { 'ENGINE': 'django.db.backends.mysql', 'NAME': '&lt;yourdatabasename&gt;', # è³‡æ–™åº«åç¨± 'USER': '&lt;yourdbuser&gt;', # è³‡æ–™åº«ä½¿ç”¨è€…å¸³è™Ÿ 'PASSWORD': '&lt;password&gt;', # è³‡æ–™åº«å¯†ç¢¼ 'HOST': 'localhost', # ä¸»æ©Ÿä½ç½® 'PORT': '3306', }}STATIC_URL = '/static/'STATIC_ROOT = os.path.join(BASE_DIR, 'static/') å¯«å®Œä¸Šè¿°ç¨‹å¼ç¢¼å¾Œå„²å­˜é›¢é–‹ESC+:wq!ALLOWED_HOSTSç‚ºç¶²åŸŸåç¨±ã€IPï¼Œé‚„æœ‰è¨­å®šé€£æ¥Mysqlè³‡æ–™åº«ï¼Œè¼¸å…¥å‰›æ‰å‰é¢è¨­å®šè³‡æ–™æ™‚ï¼Œå»ºç«‹çš„è³‡æ–™åº«åç¨±ã€ä½¿ç”¨è€…å¸³è™Ÿã€å¯†ç¢¼ã€‚æœ€å¾Œæ˜¯STATIC_ROOTç‚ºè¨­å®šéœæ…‹è³‡æºçš„æ ¹è·¯å¾‘ã€‚ åŸ·è¡Œ 1python3 manage.py collectstatic åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤é€²è¡Œè³‡æ–™åº«é·ç§» 12python3 manage.py makemigrationspython3 manage.py migrate gunicornä½¿ç”¨gunicornæ¸¬è©¦Server12cd ~/&lt;yourprojectdir&gt;gunicorn --bind 0.0.0.0:8000 &lt;yourproject&gt;.wsgi æˆåŠŸå¾Œæœƒçœ‹åˆ°ä¸‹æ–¹ç•«é¢æ¥è‘—è¨ªå•ä½ çš„ä¼ºæœå™¨IPåŠ ä¸ŠPortè™Ÿå³å¯æŸ¥çœ‹ç›®å‰é‹ä½œç‹€æ³ï¼Œå¦‚xxx.xxx.xx.xx:8000ã€‚è·³å‡ºç•¶å‰è™›æ“¬ç’°å¢ƒ 1deactivate è¨­å®šgunicornå»ºç«‹gunicorn.socket 1sudo vim /etc/systemd/system/gunicorn.socket æª”æ¡ˆå¯«å…¥ 12345678[Unit]Description=gunicorn socket[Socket]ListenStream=/run/gunicorn.sock[Install]WantedBy=sockets.target å¯«å®Œä¸Šè¿°ç¨‹å¼ç¢¼å¾Œå„²å­˜é›¢é–‹ESC+:wq! ç¢ºèªä¸€ä¸‹gunicornçš„ä½ç½®ï¼Œå› ç‚ºå¾ŒçºŒå»ºç«‹gunicorn.serviceæª”æ™‚æœƒä½¿ç”¨åˆ° 1which gunicorn åŸ·è¡Œä¸Šè¿°æŒ‡ä»¤æœƒå›å‚³gunicornçš„è·¯å¾‘ å»ºç«‹gunicorn.service 1sudo vim /etc/systemd/system/gunicorn.service gunicorn.serviceæª”æ¡ˆå¯«å…¥ 1234567891011121314151617[Unit]Description=gunicorn daemonRequires=gunicorn.socketAfter=network.target[Service]User=&lt;youruser&gt; # æ­¤è™•è¼¸å…¥é€™å°æ©Ÿå™¨çš„ä½¿ç”¨è€…åGroup=www-dataWorkingDirectory=&lt;path/to/yourprojectdir&gt; # è¼¸å…¥Djangoå°ˆæ¡ˆçš„è·¯å¾‘ExecStart=&lt;gunicorn_path&gt; \\ # è¼¸å…¥gunicornçš„è·¯å¾‘ --access-logfile - \\ --workers 3 \\ --bind unix:/run/gunicorn.sock \\ &lt;yourproject&gt;.wsgi:application[Install]WantedBy=multi-user.target å¯«å®Œä¸Šè¿°ç¨‹å¼ç¢¼å¾Œå„²å­˜é›¢é–‹ESC+:wq!å•Ÿç”¨ Gunicorn socket 12sudo systemctl start gunicorn.socketsudo systemctl enable gunicorn.socket æª¢æŸ¥Gunicorn socketæ˜¯å¦é‹ä½œæˆåŠŸ 1sudo systemctl status gunicorn.socket æˆåŠŸæœƒé¡¯ç¤ºç¶ è‰²activeå­—æ¨£ æª¢æŸ¥gunicorn.sock æª”æ¡ˆæ˜¯å¦å­˜åœ¨/runé€™å€‹è³‡æ–™å¤¾ä¸­ 1file /run/gunicorn.sock å¦‚æœç™¼ç¾æ²’æœ‰åœ¨/runé€™å€‹è³‡æ–™å¤¾ä¸­ï¼Œæˆ–æ˜¯æœ‰å…¶ä»–å•é¡Œï¼Œå¯ä»¥åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤æŸ¥çœ‹Logæ‰¾å•é¡Œ 1sudo journalctl -u gunicorn.socket æ¸¬è©¦Serveré‹ä½œæƒ…æ³ 1sudo systemctl status gunicorn æˆ–æ˜¯ç™¼Curlæ¸¬è©¦ 1curl --unix-socket /run/gunicorn.sock localhost å›å‚³çµæœç‚ºHTMLæ ¼å¼çš„è³‡æ–™è¦å°gunicornæ’æŸ¥å•é¡Œä¹Ÿå¯ä»¥åŸ·è¡Œä¸‹æ–¹æŒ‡ä»¤çœ‹Log 1sudo journalctl -u gunicorn è‹¥é‡åˆ°å•é¡Œï¼Œä¸”æŸ¥çœ‹Logå¾Œå°‡å•é¡Œæ’é™¤ï¼Œéœ€è¦å†é‡æ–°runä¸€æ¬¡gunicorn 12sudo systemctl daemon-reloadsudo systemctl restart gunicorn é…ç½®Nginxä»£ç†å‚³çµ¦Gunicorn1sudo vim /etc/nginx/sites-available/project_name.conf project_nameä¿®æ”¹ç‚ºå°ˆæ¡ˆåç¨±project_name.conf 1234567891011121314server { listen 80; server_name &lt;domain_name&gt; &lt;server_ip&gt;; # æ­¤è™•è¼¸å…¥ç¶²åŸŸååŠipï¼Œå…©è€…ä»¥ç©ºæ ¼éš”é–‹ã€‚ location = /favicon.ico { access_log off; log_not_found off; } location /static/ { root &lt;your_static_root_path&gt;; # staticçš„æ ¹ç›®éŒ„ä½ç½® }location / { include proxy_params; proxy_pass http://unix:/run/gunicorn.sock; }} å°‡æª”æ¡ˆé€£çµåˆ°å•Ÿå‹•ç¶²ç«™çš„ç›®éŒ„ä¾†å•Ÿå‹•è©²æª”æ¡ˆ 123sudo ln -s /etc/nginx/sites-available/project_name.conf /etc/nginx/sites-enabledsudo nginx -tsudo systemctl restart nginx è¨­é˜²ç«ç‰†éœ€è¦é–‹æ”¾80 portä¸Šçš„æµé‡ï¼Œä¸¦åˆªé™¤8000 portï¼Œç¦æ­¢è¨ªå•ã€‚ 12sudo ufw delete allow 8000sudo ufw allow 'Nginx Full' å»ºç«‹æˆåŠŸï¼","link":"2020/07/19/Python/Django/%5BDjango%5D%20%E5%9C%A8Ubuntu%E4%B8%AD%E9%81%8B%E7%94%A8Nginx%E3%80%81Gunicorn%20%E6%9E%B6%E8%A8%AD%20Django%20API%20Server/"},{"title":"[Database] Microsoft SQL Server æ“ä½œ","text":"å¦‚ä½•é€£æ¥è‡³åˆ¥äººçš„SQLServer ç¢ºå®šè‡ªå·±çš„Serveræ˜¯å¦æœ‰æ–°å¢sysuser(SQL Serverçš„å®‰å…¨æ€§-&gt;ç™»å…¥-&gt;å‰µå»ºï¼Œè¨­å®šå¯†ç¢¼ã€å‹¾é¸sysadmin)ã€‚ çŸ¥é“å°æ–¹IP Addressã€‚ æŸ¥çœ‹SQLServerçš„portC: -&gt; window -&gt; system32 -&gt; drivers -&gt; etc -&gt; serviceï¼Œå°‡serviceé€™å€‹æª”æ¡ˆè²¼åˆ°è¨˜äº‹æœ¬ï¼ŒæŸ¥çœ‹MS SQL Serverçš„port numberã€‚ è¨­å®šport åˆ°é›»è…¦çš„é˜²ç«ç‰†é€²éšè¨­å®š æ–°å¢è¼¸å…¥è¦å‰‡ é¸é€£æ¥åŸ  å‹¾é¸TCPå”å®šï¼ŒæŒ‡å®šport no. 1443 è‡ªå‹•æµæ°´è™Ÿè¨­å®š:é»é¸è©²è³‡æ–™æ¬„ä½ï¼Œå°‡ä¸‹æ–¹çš„è¡¨æ ¼å¾€ä¸Šæ‹‰(è³‡æ–™è¡Œå±¬æ€§)ï¼Œé»é¸è­˜åˆ¥è¦æ ¼ï¼Œç‹€æ…‹æ”¹ç‚ºâ€æ˜¯â€ï¼Œèµ·å§‹å€¼(è­˜åˆ¥å€¼ç¨®å­)è¨­100000ï¼Œå¢é‡æ•¸å€¼ç‚º9 æ–°å¢è³‡æ–™1234insert into IDTest(ch)values('Test')select @@IDENTITY ç·šä¸Šå¢æ›¸æ»‘é¼ é»åœ¨å…©å€‹@@ä¹‹é–“å¾ŒæŒ‰ä¸‹F1ï¼Œå¯é–‹å•Ÿç·šä¸Šå¢æ›¸ã€‚ ç´¢å¼•:æŸ¥è©¢æŒ‡ä»¤åŠŸèƒ½ åˆ°ä¸Šæ–¹å·¥å…·åˆ—çš„ â€œå·¥å…·â€ ä¸‹æ‹‰é»é¸ â€œé¸é …â€ -&gt; Designer -&gt;å–æ¶ˆå‹¾é¸â€é˜²æ­¢å„²å­˜è³‡æ–™è¡¨é‡å»ºçš„è®Šæ›´â€ å…¬å¼é‹ç®—ç·´ç¿’:è¨ˆç®—å›å ±æ—¥(resDate) = è©¢åƒ¹æ—¥(reqDate) + 3å¤© é»ReqDateæ¬„ä½ï¼Œè‡³ä¸‹æ–¹è¡¨æ ¼æ‰¾é è¨­æ¬„ä½è¼¸å…¥ (GetDate()) é»ResDateæ¬„ä½ï¼Œè¨­å®š (ReqDate + 3) 12345678910// æ–°å¢insert into DTest(ReqDate, ch)values('2019-5-19 14:00:00', 'Alex')select * from DTest// ä¿®æ”¹Update DTestSet ReqDate= ('2019-5-19 16:00:00')Where ch = 'Alex'select * from DTest Noteä»¥å¤©ç‚ºå–®ä½ä½¿ç”¨â€æ•´æ•¸â€ï¼Œæ™‚åˆ†ç§’ä»¥â€å°æ•¸é»â€è¡¨ç¤ºï¼Œå¦‚15åˆ†é˜: 15./24*60 Joinåˆä½µè¡¨æ ¼def:ç”¨æ–¼åæ­£è¦åŒ–ï¼Œå°‡åŸå…ˆåƒç…§çš„tableé †è‘—Referenceåˆä½µç‚ºä¸€å€‹å¤§çš„tableï¼Œ(å°è¡¨æ ¼ä½µç‚ºå¤§è¡¨æ ¼)ã€‚ å•é¡Œï¼šå“ªä¸€å€‹å®¢æˆ¶å¸‚äº¤æ˜“é‡æœ€å¤§çš„å®¢æˆ¶?éœ€è¦çš„è¡¨æ ¼æœ‰è¨‚å–®ã€è¨‚å–®æ˜ç´°ã€å®¢æˆ¶ èªªæ˜å°‡Order tableå«å‡ºä¾†ï¼Œä¸¦å°‡Order Detailsèˆ‡Customersåˆä½µè‡³Order æ­¥é©Ÿä¸€ï¼š1select * From Orders as O èªªæ˜:O ç‚º asæ‰€å‘½åçš„åˆ¥åï¼Œå¯ç°¡åŒ–ç‰©ä»¶åç¨±ï¼Œåœ–ä¸­Oç‚ºOrderçš„åˆ¥åã€‚aså¯ä»¥çœç•¥ æ­¥é©ŸäºŒ:123select * From Orders as Oinner join [Order Details] ODOn O.OrderID = OD.OrderID //åˆä½µæ¢ä»¶ èªªæ˜ :å°‡ordersåŠorder details å…©å¼µè¡¨ä½œåˆä½µ(join)ï¼Œåˆ†åˆ¥å‘½åç‚ºOåŠOD æ­¥é©Ÿä¸‰:12345select * From Orders as Oinner join [Order Details] ODOn O.OrderID = OD.OrderIDinner join [Customers] COn C.CustomerID = O.CustomerID //åˆä½µæ¢ä»¶ èªªæ˜:onä½œç‚ºåˆä½µæ¢ä»¶ï¼Œåœ–ä¸­æ˜¯å°‡Oçš„OrderIdèˆ‡ODçš„OrderIdåšåˆä½µæ¢ä»¶ æ­¥é©Ÿå››:12345select C.CompanyName, UnitPrice*Quantity*(1-Discount) From Orders as Oinner join [Order Details] ODOn O.OrderID = OD.OrderIDinner join [Customers] COn C.CustomerID = O.CustomerID èªªæ˜:å°‡Customeré€™å¼µè¡¨ç´å…¥ä½œåˆä½µï¼ŒUnitPriceQuantity(1-Discount)ç‚ºç¸½å’Œé‹ç®—å¼ã€‚ æ­¥é©Ÿäº”:12345select C.CompanyName, UnitPrice*Quantity*(1-Discount) as LineTotal From Orders as Oinner join [Order Details] ODOn O.OrderID = OD.OrderIDinner join [Customers] COn C.CustomerID = O.CustomerID èªªæ˜:æŸ¥è©¢åˆä½µå¾Œçš„è³‡æ–™è¡¨ï¼Œæ¬„ä½åç¨±ç‚ºCompanynameï¼Œä»¥åŠç¶“éé‹ç®—å¼æ‰€å¾—çš„å€¼ï¼Œå‘½åç‚ºLineTotalã€‚ æ­¥é©Ÿå…­:12345select O.OrderID,C.CompanyName, UnitPrice*Quantity*(1-Discount) as LineTotal From Orders as Oinner join [Order Details] ODOn O.OrderID = OD.OrderIDinner join [Customers] COn C.CustomerID = O.CustomerID èªªæ˜:æŸ¥è©¢ O çš„OrderIDã€Companynameã€LineTotal (æ³¨æ„: OrderIDéœ€æŒ‡å®šç‚ºå“ªå¼µè¡¨çš„OrderIDï¼Œè‹¥ç„¡æŒ‡å®šæœƒå ±éŒ¯èª¤è¨Šæ¯: æ¨¡ç¨œå…©å¯ ) æ­¥é©Ÿä¸ƒ:1234567select O.OrderID,C.CompanyName, UnitPrice*Quantity*(1-Discount) as LineTotal From Orders as Oinner join [Order Details] ODOn O.OrderID = OD.OrderIDinner join [Customers] COn C.CustomerID = O.CustomerIDGroup by CompanyName èªªæ˜:éŒ¯èª¤åŸå› ï¼šOrderID éGroupbyæ¢ä»¶æˆ–ç¸½åˆé‹ç®—æ‰€ä»¥å¿…é ˆæ‹¿æ‰ 123456select C.CompanyName, SUM( UnitPrice*Quantity*(1-Discount) ) as Total From Orders as Oinner join [Order Details] ODOn O.OrderID = OD.OrderIDinner join [Customers] COn C.CustomerID = O.CustomerIDGroup by CompanyName èªªæ˜:åˆªé™¤OrderIDå³å¯æ­£å¸¸åŸ·è¡Œï¼ŒGroup by ç‚ºç¾¤èšæ¢ä»¶ï¼Œä¾æŒ‡å®šæ¢ä»¶åˆä½µï¼Œå°‡å¤šç­†recordåˆä½µæˆå–®ä¸€record æ­¥é©Ÿå…«:æ’åº(ç”±å¤§åˆ°å°)1234567select C.CompanyName, SUM( UnitPrice*Quantity*(1-Discount) ) as Total From Orders as Oinner join [Order Details] ODOn O.OrderID = OD.OrderIDinner join [Customers] COn C.CustomerID = O.CustomerIDGroup by CompanyNameOrder by Total Desc //ååº èªªæ˜:Order byä½œç‚ºæ’åºæ¢ä»¶ï¼ŒDescç‚ºåæ’åº æ­¥é©Ÿä¹:æŒ‘å‡ºå‰å¹¾ç­†è³‡æ–™(åœ¨selectå¾Œé¢åŠ ä¸Šâ€Top æ•¸å­—â€)1234567select Top 1 C.CompanyName, SUM( UnitPrice*Quantity*(1-Discount) ) as Total From Orders as Oinner join [Order Details] ODOn O.OrderID = OD.OrderIDinner join [Customers] COn C.CustomerID = O.CustomerIDGroup by CompanyNameOrder by Total Desc é¡¯ç¤ºç¬¬ä¸€ç­†è³‡æ–™ é¡¯ç¤ºå‰äº”ç­†è³‡æ–™ æ–°å¢Viewdef:æª¢è¦–: å°‡å¸¸ç”¨çš„selectæŸ¥è©¢å»ºæˆè™›æ“¬è³‡æ–™ä¾†æºï¼Œä»¥æ–¹ä¾¿æŸ¥è©¢ä½¿ç”¨ï¼Œå¯¦éš›ä¸Šä¸å­˜æ”¾è³‡æ–™ï¼Œåªå­˜æ”¾selectï¼Œä½¿ç”¨æ™‚æ‰æŸ¥è©¢è³‡æ–™ã€‚ èªªæ˜:å°‡ä»¥ä¸Šè¤‡é›œçš„æŸ¥è©¢å»ºç«‹æˆä¸€å€‹View(æ–¹ä¾¿ä»¥å¾Œå¿«é€ŸæŸ¥è©¢)12345678910create view dbo.TopCustomersasselect C.CompanyName, SUM( UnitPrice*Quantity*(1-Discount) ) as Total From Orders as Oinner join [Order Details] ODOn O.OrderID = OD.OrderIDinner join [Customers] COn C.CustomerID = O.CustomerIDGroup by CompanyNameselect * From TopCustomers èªªæ˜:Create view å»ºç«‹viewï¼Œalter viewä¿®æ”¹viewã€‚ 1select Top 10 * From TopCustomers //å¾Viewä¸­æŒ‘é¸å‰10ç­†è³‡æ–™ å»ºç«‹æœ‰æ’åº(å¤§åˆ°å°)ä¸”å–å‰10ç­†è³‡æ–™123456789create view dbo.Top10Customersasselect Top 10 C.CompanyName, SUM( UnitPrice*Quantity*(1-Discount) ) as Total From Orders as Oinner join [Order Details] ODOn O.OrderID = OD.OrderIDinner join [Customers] COn C.CustomerID = O.CustomerIDGroup by CompanyNameOrder by Total Desc 1select * from Top10Customers clustered index æŸ¥è©¢: WHEREæ¯”å°å®Œæ•´æ¯”å°12select * from ProductsWHERE ProductName = 'Ipoh Coffee' ç‰¹æ®Šæƒ…æ³è‹¥è³‡æ–™æœ‰å–®å¼•è™Ÿï¼Œä¾‹å¦‚ï¼šBon appâ€™åœ¨å–®å¼•è™Ÿè£¡ï¼Œå‰‡ç”¨é›™å¼•è™Ÿè¡¨ç¤º -&gt; â€˜ Bon appâ€™â€™ â€˜ æ¨¡ç³Šæ¯”å°1234567891011121314select * from ProductsWHERE ProductName like 'c%' //å­—ä¸²é–‹é ­ç‚ºcselect * from ProductsWHERE ProductName like 'c_a%' //ç¬¬ä¸€å€‹å­—å…ƒç‚ºcï¼Œç¬¬äºŒå€‹å­—å…ƒç‚ºä»»æ„ï¼Œç¬¬ä¸‰å€‹å­—å…ƒç‚ºaselect * from ProductsWHERE ProductName like '[A-F]%' //é–‹é ­ç‚ºAæˆ–Bæˆ–Cæˆ–Dæˆ–Eæˆ–Få­—å…ƒçš„å­—ä¸²select * from ProductsWHERE ProductName like '[^A-F]%' //é–‹é ­ä¸ç‚ºAæˆ–Bæˆ–Cæˆ–Dæˆ–Eæˆ–Få­—å…ƒçš„å­—ä¸²select * from ProductsWHERE ProductName like '[^A-F, ^M-Q]%' //é–‹é ­ç‚ºGæˆ–Hæˆ–Iæˆ–Jæˆ–Kæˆ–Lå­—å…ƒçš„å­—ä¸² like é—œéµå­— % : ä¸ç®¡ä»»ä½•å­— _ : å¿½ç•¥ä»»ä¸€å­—å…ƒ []: è©²å­—å…ƒç‚ºæŒ‡å®šçš„å€é–“ [^ ]: è©²å­—å…ƒä¸ç‚ºæŒ‡å®šçš„å€é–“ Qï¼šå“ªäº›å®¢æˆ¶æ²’æœ‰æ¶ˆè²»?èªªæ˜ï¼šé¸å‡ºæ²’æœ‰åœ¨Ordersè£¡å‡ºç¾çš„CustomerID1234select * from Customerswhere CustomerID Not In( select Distinct CustomerID from Orders)//Distinct-&gt;ä¸é‡è¤‡ Qï¼šå“ªäº›ç”¢å“æ²’æœ‰å”®å‡º?èªªæ˜ï¼šé¸å‡ºæ²’æœ‰åœ¨Ordersè£¡å‡ºç¾çš„ProductID123select * from Productswhere ProductID Not In( select Distinct ProductID from Orders) Qï¼šå“ªäº›ç”¢å“æœªæ›¾å”®å‡º?(èª²å ‚å°è€ƒ)12345select * from ProductsWHERE ProductID Not In (select Distinct ProductID From [Order Details]) è¤‡è£½åŸæœ‰table è‡³æ–°çš„table123456789101112// å»ºç«‹ç›¸åŒçš„schema&amp;è³‡æ–™çš„tableselect * into product2 from Productsselect * from product2// å»ºç«‹ä¸€å€‹ç›¸åŒschemaä½†è³‡æ–™ç‚ºç©ºçš„tableselect * into product3 from Productswhere 1 = 2select * from product3// è¤‡è£½productså…§çš„è³‡æ–™åˆ°product3é€™å€‹ç©ºçš„tableinsert into product3select * from Products Inner Joinï¼šåˆä½µæ¢ä»¶ç‚ºå…©é‚Šéƒ½æœ‰çš„æ¬„ä½123select E.EmployeeID, O.EmployeeID from Employees Einner join [orders] OOn E.EmployeeID = O.EmployeeID (Right/Left/Full) Outer Joinï¼šä»¥(å³é‚Š/å·¦é‚Š/ä¸€é‚Š)çš„Data Objectç‚ºåŸºç¤å…¨éƒ¨é¡¯ç¤ºï¼Œ(å³é‚Š/å·¦é‚Š/ä¸€é‚Š)æœ‰è€Œå¦ä¸€é‚Šæ²’æœ‰çš„é¡¯ç¤ºç‚ºNullã€‚ 123select E.EmployeeID, O.EmployeeID from Employees ELeft Outer join [orders] OOn E.EmployeeID = O.EmployeeID Unionï¼šå°‡å…©å€‹çµæ§‹ç›¸å®¹(æ¬„ä½æ•¸ç›¸åŒï¼Œè³‡æ–™æ ¼å¼ç›¸å®¹)çš„è³‡æ–™é›†ç–ŠåŠ ï¼Œæ¬„ä½æ•¸ä¸å‹•ï¼Œè³‡æ–™ç­†æ•¸å¢åŠ ã€‚ ç¯„ä¾‹ä¸€ï¼šA+Bè³‡æ–™123select * from Products Where ProductID &lt; 10 //-&gt;Aè³‡æ–™union //åˆä½µselect * from Products Where ProductID &gt;30 AND ProductID &lt; 50 //-&gt;Bè³‡æ–™ ç¯„ä¾‹äºŒï¼šB+Aè³‡æ–™12345select * from Products Where ProductID &gt;30 AND ProductID &lt; 50 //-&gt;Bè³‡æ–™unionselect * from Products Where ProductID &lt; 10 //-&gt;Aè³‡æ–™ ç¯„ä¾‹ä¸‰ï¼šåƒ…å– ProductID [ID], ProductName [Name]ï¼Œå…©å€‹æ¬„ä½åˆä½µã€‚åˆä½µå¾Œçš„æ¬„ä½åç¨±ç‚ºï¼šIDã€Name123456select ProductID [ID], ProductName [Name] from Products Where ProductID &lt; 10unionselect ProductID [No.], ProductName [User] from Products Where ProductID &gt;30 AND ProductID &lt; 50 åˆä½µå¾Œçš„æ¬„ä½åç¨±ç‚ºï¼šNO.ã€User12345select ProductID [No.], ProductName [User] from Products Where ProductID &gt;30 AND ProductID &lt; 50unionselect ProductID [ID], ProductName [Name] from Products Where ProductID &lt; 10 Cross Joinå°‡Leftè³‡æ–™ç‰©ä»¶çš„æ¯ä¸€ç­†recordéƒ½å’ŒRightè³‡æ–™ç‰©ä»¶çš„æ¯ä¸€ç­†recordåšåˆä½µ =&gt;æ¬„ä½æ•¸ç›¸åŠ ï¼Œè³‡æ–™æ•¸ç›¸ä¹˜ã€‚ æ“ä½œåˆ†åˆ¥å»ºç«‹ Name1ã€ Name2 ã€Name3 ä¸‰å€‹tableï¼Œåœ¨ä¸‰å€‹tableä¸­å€‹åˆ¥æ–°å¢10ç­†è³‡æ–™ã€‚ Name1| æ¬„ä½åç¨± | è³‡æ–™çµæ§‹ || â€”â€”â€“ | â€”â€”â€“ || å§“ | NVarChar(2) | Name2| æ¬„ä½åç¨± | è³‡æ–™çµæ§‹ || â€”â€”â€“ | â€”â€”â€“ || å1 | NChar(1)|Name3| æ¬„ä½åç¨± | è³‡æ–™çµæ§‹ || â€”â€”â€“ | â€”â€”â€“ || å2 | NChar(1)| 123456select [å§“]+ [å1] + [å2] [å§“å] from Name1 cross join Name2 cross join Name3 //Cross Joinå¾Œç¸½å…±æœƒç”¢ç”Ÿ1000ç­†è³‡æ–™ã€‚ ä»¥XMLä½œç‚ºæ ¼å¼ä½œæŸ¥è©¢1select * from Customers for XML auto Stored Proceduresé å­˜ç¨‹åºï¼šå„²å­˜åœ¨DBMSç«¯çš„ç¨‹å¼ç¢¼ï¼Œæ–¹ä¾¿é‡è¤‡åŸ·è¡Œä¸€äº›å‹•ä½œï¼Œç¨‹å¼ç¢¼ä¹Ÿæ˜¯SQLèªæ³•å¯«æˆã€‚ä½æ–¼â€å¯ç¨‹å¼æ€§â€è³‡æ–™å¤¾ä¹‹ä¸‹ã€‚ 1234select * from Ordersexec [dbo].[Sales by Year] ' 1996-07-04 00:00:00.000', ' 1996-11-26 00:00:00.000' //exec -&gt; åŸ·è¡Œ//[dbo].[Sales by Year] -&gt; é å­˜ç¨‹å¼çš„åç¨±","link":"2019/07/14/Database/SQL%20Server/Database(%E6%93%8D%E4%BD%9C)/"},{"title":"[Python] Djangoé€£æ¥ç¾æœ‰MySQLè³‡æ–™åº«","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 01 å‰è¨€Djangoé è¨­çš„è³‡æ–™åº«ä½¿ç”¨sqlite3ï¼Œæœ¬ç¯‡ç´€éŒ„å¦‚ä½•å¾é è¨­çš„sqlite3æ”¹å®Œé€£æ¥MySQLä¸­ç¾æœ‰çš„è³‡æ–™åº«ï¼Œæœ¬ç¯‡ä¹Ÿä½œç‚ºä»Šå¹´åƒåŠ é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ°çš„é–‹ç¯‡ XD å®‰è£æˆ‘æ˜¯åœ¨è™›æ“¬ç’°å¢ƒä¸‹å®‰è£ï¼Œä½¿ç”¨pipenvåšå¥—ä»¶ç®¡ç†ã€‚ å®‰è£pymysql1pipenv install pymysql å®‰è£django1pipenv install django å»ºç«‹å°ˆæ¡ˆå»ºç«‹åç‚ºmysiteçš„å°ˆæ¡ˆåç¨±1django-admin startproject mysite å»ºç«‹åç‚ºexrateçš„APP1python manage.py startapp exrate ç›¸é—œè¨­å®šè¨­å®š__init__.pyæª”è‡³å°ˆæ¡ˆæ ¹ç›®éŒ„(mysite)ä¸‹çš„__init__.pyæª”ï¼Œæ·»åŠ ä¸‹æ–¹å…©è¡Œç¨‹å¼ç¢¼: 12import pymysqlpymysql.install_as_MySQLdb() è¨­å®šdatabaseè‡³å°ˆæ¡ˆæ ¹ç›®éŒ„(mysite)ä¸‹çš„settings.pyæª”ï¼Œæ›¿æ›æˆä¸‹æ–¹ç¨‹å¼ç¢¼: 123456789101112131415DATABASES = { 'default': { # ========= å°‡é è¨­çš„sqlite3 ENGINE é‚„æœ‰ NAME è¨»è§£æ‰ ========= # 'ENGINE': 'django.db.backends.sqlite3', # 'NAME': os.path.join(BASE_DIR, 'db.sqlite3'), # ========= é…ç½®è‡ªå·±çš„MySQL ========= 'ENGINE': 'django.db.backends.mysql', 'NAME': 'exrate', # ç›®æ¨™è³‡æ–™åº«çš„åç¨± 'USER': 'your account', # è³‡æ–™åº«å¸³è™Ÿ 'PASSWORD': 'your password', # è³‡æ–™åº«å¯†ç¢¼ 'HOST': 'localhost', # ä¸»æ©Ÿä½ç½®ï¼Œå¯ä»¥å…ˆæ¸¬æœ¬åœ°localhost 'PORT': '8889', # è¨­å®šé€£æ¥åŸ  }} é€£æ¥é€£æ¥å·²æœ‰çš„è³‡æ–™åº«èˆ‡Django app1python manage.py inspectdb å¯èƒ½æœƒé‡åˆ°çš„å•é¡Œ: ç‰ˆæœ¬å•é¡ŒåŸ·è¡Œä¸Šå€‹é€£æ¥æ­¥é©Ÿçš„æŒ‡ä»¤æ™‚ï¼Œå¯èƒ½æœƒé‡åˆ°ä»¥ä¸‹éŒ¯èª¤: è§£æ±ºæ–¹æ³•ä¸Šæ–¹åœ–ç‰‡ä¸­çš„éŒ¯èª¤è¨Šæ¯æœ‰æç¤ºå•é¡Œç™¼ç”Ÿåœ¨å“ªå€‹æª”æ¡ˆï¼Œæ‰“é–‹æç¤ºè·¯å¾‘ä¸‹çš„ç›®æ¨™æª”æ¡ˆbase.pyï¼Œæª”æ¡ˆå…§å°‹æ‰¾version = Database.version_infoçš„ç¨‹å¼ç¢¼ï¼Œæœƒçœ‹åˆ°ä¸‹æ–¹ç¨‹å¼ç¢¼: 123version = Database.version_infoif version &lt; (1, 3, 13): raise ImproperlyConfigured('mysqlclient 1.3.13 or newer is required; you have %s.' % Database.__version__) ä¸Šè¿°ç¨‹å¼ç¢¼æ”¹æˆ 1234version = Database.version_infoif version &lt; (1, 3, 13): pass #raise ImproperlyConfigured('mysqlclient 1.3.13 or newer is required; you have %s.' % Database.__version__) æ›´æ”¹å¾Œå­˜æª”ï¼Œåœ¨åŸ·è¡Œä¸€æ¬¡é€£æ¥MySQLè³‡æ–™åº«çš„æŒ‡ä»¤ 1python manage.py inspectdb åŸ·è¡Œçµæœ å¼•ç”¨inspectdbå¥—ä»¶å»ºç«‹æ¨¡å‹ç¬¬ä¸€ç¨®æ–¹æ³•è¤‡è£½åŸ·è¡Œå¾Œæ‰€çœ‹åˆ°çš„ç¨‹å¼ç¢¼å…§å®¹è²¼åˆ°å»ºç«‹çš„appå°ˆæ¡ˆè³‡æ–™å¤¾ä¸­çš„models.py ç¬¬äºŒç¨®æ–¹æ³•å°‡ä¸‹æ–¹æŒ‡ä»¤ä¸­çš„myappæ›¿æ›æˆè‡ªå·±å»ºç«‹çš„appå°ˆæ¡ˆåç¨±ä¸¦åŸ·è¡Œ 1python manage.py inspectdb &gt; myapp/models.py å»ºç«‹migrationsè³‡æ–™è¡¨myappæ›¿æ›æˆè‡ªå·±å»ºç«‹çš„appå°ˆæ¡ˆå 1python manage.py makemigrations myapp migrateåŒæ­¥è³‡æ–™è¡¨myappæ›¿æ›æˆè‡ªå·±å»ºç«‹çš„appå°ˆæ¡ˆå 1python manage.py migrate myapp å®Œæˆé·ç§»ï¼ åƒè€ƒè³‡æ–™å®˜æ–¹æ–‡ä»¶-èˆŠæœ‰è³‡æ–™åº«é·ç§»","link":"2020/02/13/Python/Django/%5BPython%5D%20Django%E9%80%A3%E6%8E%A5%E7%8F%BE%E6%9C%89MySQL%E8%B3%87%E6%96%99%E5%BA%AB/"},{"title":"[Python] Django ç­†è¨˜","text":"ä»€éº¼æ˜¯ Django?ä¸€å€‹åŸºæ–¼pythonå»ºç«‹çš„ï¼·ebæ¡†æ¶(Framework)ï¼Œå¹«ä½ æŠŠå¤§éƒ¨åˆ†çš„ç¨‹å¼æ¶æ§‹éƒ½å»ºæ§‹å¥½ï¼Œé–‹ç™¼è€…å¯åŸºæ–¼é€™å€‹éª¨å¹¹çµæ§‹åšé–‹ç™¼æ‡‰ç”¨ï¼ŒåŠ å¼·ç¨‹å¼é–‹ç™¼é€Ÿåº¦ã€é‡ç”¨æ€§å’Œç¨‹å¼çš„å¯è®€æ€§ã€‚ç›¸è¼ƒæ–¼å‚³çµ±çš„MVC(Model-View-Contorller)æ¶æ§‹ï¼ŒDjangoä¹Ÿæœ‰å±¬æ–¼å®ƒçš„MTV(Model-Template-Views)æ¶æ§‹ã€‚ Djangoçš„é‹ä½œçš„æ¶æ§‹åŠæµç¨‹æ¶æ§‹Djangoæ¶æ§‹ä¸»è¦åˆ†ç‚ºä¸‹é¢å››å€‹éƒ¨åˆ† Djangoæœ¬é«”ï¼šä¸»è¦æä¾›è·¯ç”±çš„åŠŸèƒ½ Model: èˆ‡è³‡æ–™æºé€š View: è™•ç†è«‹æ±‚ï¼Œé€²è¡Œè³‡æ–™è¨ˆç®—ï¼Œä¸¦æ±ºå®šé¡¯ç¤ºtemplateè³‡æ–™å…§å®¹ Template: è³‡æ–™å‘ˆç¾ï¼Œä¸»è¦æª”æ¡ˆæ˜¯æ”¾éœæ…‹é é¢ï¼Œé€šå¸¸æ˜¯htmlæ–‡ä»¶ Cache: ä¿å­˜æ“·å–éçš„ç¶²é è³‡æ–™ï¼ŒåŠ é€Ÿç€è¦½é€Ÿåº¦ MTVèˆ‡ä¸€èˆ¬çœ‹åˆ°çš„MVCæ¶æ§‹ç¨å¾®ä¸åŒçš„é»åœ¨æ–¼Templateä¸»è¦æ”¾ç´”éœæ…‹ç¶²é çš„è³‡æ–™ã€‚ æµç¨‹æ¥è‘—ä¾†çœ‹Djangoçš„é‹ä½œæµç¨‹å‡è¨­æœ‰ç”¨æˆ¶è¦è¨ªå•Djangoæ¶è¨­çš„é é¢ï¼Œæœƒåœ¨ç€è¦½å™¨ä¸Šè¼¸å…¥ç¶²å€ï¼Œç€è¦½å™¨åœ¨å¾—åˆ°ç¶²å€ä¹‹å¾Œï¼Œæœƒç¶“éè·¯ç”±ï¼Œå¦‚æœè·¯ç”±ç™¼ç¾é€™å€‹ç¶²é çš„å…§å®¹ä½¿ç”¨è€…å·²ç¶“æœ‰ï¼Œå¿«å–(Cache)æ¨¡çµ„å°±æœƒè¿”é‚„ä¹‹å‰æ“·å–éçš„è³‡æ–™ï¼ŒåŠ é€Ÿç€è¦½é€Ÿåº¦;è‹¥æ²’æœ‰ï¼Œå‰‡æœƒå»æ‰¾Templateè¦ç¶²é è³‡æ–™ï¼ŒTemplateå›å‚³åŸºæœ¬çš„htmlç¶²é ä¹‹å¾Œï¼ŒTemplateé¡¯ç¤ºçš„å…§å®¹ä¸€éƒ¨åˆ†çš„è³‡æ–™éœ€é€éViewå»æ±ºå®šï¼Œæœ‰äº›å…§å®¹å¯èƒ½éœ€è¦å¾è³‡æ–™æ’ˆå–çš„è©±ï¼Œæœƒé€éModelå‘è³‡æ–™åº«æºé€šã€‚ Hands on Labä½¿ç”¨Pipenvåœ¨è™›æ“¬ç’°å¢ƒä¸­å®‰è£django1pipenv install django å»ºç«‹Djangoå°ˆæ¡ˆå°ˆæ¡ˆåç¨±ç‚ºstocks 1django-admin.py startproject stocks è³‡æ–™å¤¾çµæ§‹ Djangoçš„Management commandsmanage.py ç‚ºDjangoæä¾›çš„å‘½ä»¤åˆ—å·¥å…·ï¼Œæä¾›è¨±å¤šä¸åŒåŠŸèƒ½çš„æŒ‡ä»¤ã€‚ å•Ÿå‹•Djangoä¼ºæœå™¨åˆ‡æ›stocksè³‡æ–™å¤¾ä¸‹ 1python manage.py runserver æ‰“é–‹ç€è¦½å™¨è¼¸å…¥ http://127.0.0.1:8000/ æˆ–æ˜¯ http://localhost:8000/ï¼Œæœƒçœ‹åˆ°djangoå°ˆæ¡ˆå·²æˆåŠŸåœ¨ web server ä¸ŠåŸ·è¡Œã€‚ è‹¥æƒ³äº†è§£æœ‰å“ªäº›æŒ‡ä»¤å¯ç”¨ï¼Œè¼¸å…¥ helpæˆ–-hæŒ‡ä»¤æœƒåˆ—å‡ºæ‰€æœ‰æŒ‡ä»¤åˆ—è¡¨: 1python manage.py -h ä¸Šåœ–å¯ä»¥çœ‹åˆ°ç´…è‰²éŒ¯èª¤è¨Šæ¯ï¼Œæˆ‘å€‘éœ€è¦å°è³‡æ–™åº«åšåŒæ­¥ã€‚ 1python manage.py migrate æŒ‡ä»¤æœƒæ ¹æ“šä½ å° Model çš„ä¿®æ”¹åˆªé™¤å»ºç«‹ä¸€å€‹æ–°çš„ migration æª”æ¡ˆï¼Œè®“ migrate æŒ‡ä»¤åŸ·è¡Œæ™‚ï¼Œå¯ä»¥ç…§è‘—é€™ä»½ç´€éŒ„æ›´æ–°è³‡æ–™åº«ã€‚Modelèªªæ˜æ–‡ä»¶ Adminå¤§éƒ¨ä»½ç¶²ç«™éƒ½è¨­è¨ˆæœ‰ç®¡ç†å¾Œå°ï¼Œè®“ç®¡ç†è€…æ–¹ä¾¿æ–°å¢æˆ–ç•°å‹•ç¶²ç«™å…§å®¹ã€‚è€Œé€™æ¨£çš„ç®¡ç†å¾Œå°ï¼ŒDjango ä¹Ÿæœ‰å…§å»ºä¸€å€‹ App â€“ Django Admin ã€‚åªéœ€è¦ç¨å¾®è¨­å®šï¼Œç¶²ç«™å°±èƒ½æ“æœ‰ç®¡ç†å¾Œå°åŠŸèƒ½ã€‚ å»ºç«‹ä¸€å€‹ç®¡ç†å“¡å¸³è™Ÿ(superuser) 1python manage.py createsuperuser æ¥è‘—å°‡å¸³è™Ÿå¯†ç¢¼ç­‰è¨­å®šå®Œæˆå¾Œé‡å•Ÿä¸€æ¬¡Djangoï¼Œè¼¸å…¥å‰›è¨­å®šçš„ç®¡ç†å“¡(superuser)å³å¯ç™»å…¥ å»ºç«‹ Django applicationï¼ˆappï¼‰æ¯ä¸€å€‹ Django project è£¡é¢å¯ä»¥æœ‰å¤šå€‹ Django appsã€‚å¯¦ä½œæ™‚ï¼Œé€šå¸¸æœƒä¾åŠŸèƒ½åˆ†æˆä¸åŒ appï¼Œæ–¹ä¾¿ç®¡ç†åŠé‡è¤‡ä½¿ç”¨ã€‚ä»¥quotesç‚ºappçš„åç¨±ç‚ºä¾‹: 1python manage.py startapp quotes æ­¤æ™‚çš„æª”æ¡ˆç›®éŒ„çµæ§‹å¤šä¸€å€‹quoteså°ˆæ¡ˆ(app)è³‡æ–™å¤¾ ä½†è‹¥è¦è®“ Django çŸ¥é“è¦ç®¡ç†å“ªäº› appsï¼Œé‚„éœ€å†èª¿æ•´è¨­å®šæª”ã€‚ä½œæ³•ï¼š æ‰“é–‹ stocks/settings.pyï¼Œæ‰¾åˆ° INSTALLED_APPS æ³¨æ„ app ä¹‹é–“æœ‰æ™‚å€™éœ€è¦ç‰¹å®šå…ˆå¾Œé †åºï¼Œç›¡é‡å°‡è‡ªè¨‚çš„appsåŠ åœ¨æœ€å¾Œé¢ åœ¨quoteså°ˆæ¡ˆè³‡æ–™å¤¾ä¸‹å‰µå»ºä¸€å€‹åç‚ºurl.pyçš„æª”æ¡ˆã€‚ å‡å¦‚ä¸€å€‹projectä¸­æœ‰å¤šå€‹appï¼Œç”¨ä»¥ä¸Šçš„æ–¹å¼ä¾†ç®¡ç†urlå¯èƒ½æœƒé€ æˆæ¯”è¼ƒæ··äº‚çš„å±€é¢ï¼Œç‚ºäº†è§£æ±ºé€™å€‹å•é¡Œï¼Œæˆ‘å€‘å¯ä»¥ç”¨includeçš„æ–¹æ³•ä¾†é…ç½®url 1234567from django.contrib import adminfrom django.urls import path , include # é…ç½®urlurlpatterns = [ path('admin/', admin.site.urls), path('', include(&quot;quotes.urls&quot;) ),] Django çš„ MTV æ¶æ§‹è™•ç† request çš„æµç¨‹: ç€è¦½å™¨é€å‡º HTTP request Djangoä¾URLé…ç½®åˆ†é…è‡³å°æ‡‰çš„View Viewé€²è¡Œè³‡æ–™åº«çš„æ“ä½œæˆ–å…¶ä»–é‹ç®—ï¼Œä¸¦å›å‚³HttpResponseç‰©ä»¶ ç€è¦½å™¨ä¾æ“š HTTP response é¡¯ç¤ºç¶²é ç•«é¢ Djangoçš„MTVæ¶æ§‹Viewç”¨ render é€™å€‹ function ç”¢ç”Ÿè¦å›å‚³çš„ HttpResponse ç‰©ä»¶å»ºç«‹ä¸€å€‹functionç”¨æ–¼è™•ç† HttpRequest ç‰©ä»¶ï¼Œä¸¦å›å‚³ HttpResponse ç‰©ä»¶ï¼Œä¸‹åœ–ç¯„ä¾‹æ˜¯åœ¨quotesè³‡æ–™å¤¾ä¸‹çš„views.pyæª”å¾ç¶²é æ¥æ”¶åˆ° request å¾Œï¼Œæœƒå°‡ request ä¸­çš„è³‡è¨Šå°è£ç”¢ç”Ÿä¸€å€‹ HttpRequest ç‰©ä»¶ï¼Œä¸¦ç•¶æˆç¬¬ä¸€å€‹åƒæ•¸ï¼Œå‚³å…¥å°æ‡‰çš„ view functionã€‚HttpResponse ç‰©ä»¶å®˜æ–¹èªªæ˜ ä¸Šé¢å¯ä»¥çœ‹åˆ°ç•¶about(requset)è¢«å‘¼å«æ™‚ï¼Œå›å‚³ä¸€å€‹åç‚ºabout.htmlçš„ç¶²é åç¨±ã€‚ URL è¨­å®šåœ¨quotesè³‡æ–™å¤¾ä¸‹å»ºç«‹ä¸€å€‹æ–°è³‡æ–™å¤¾åštemplatesï¼Œtemplatesè³‡æ–™å¤¾ä¸‹æ–°å¢about.htmlæª”ï¼Œç¾åœ¨è¦å°abouté€™å€‹ç¶²é åšè·¯å¾‘å°æ‡‰çš„é…ç½®ï¼Œé€šå¸¸æœƒå®šç¾©åœ¨urls.pyæª”ï¼Œæ‰€ä»¥åœ¨quotesè³‡æ–™å¤¾ä¸‹å‰µå»ºurls.pyï¼Œå»ºç«‹URL èˆ‡ view çš„å°æ‡‰é—œä¿‚ï¼Œç¨±ä½œURL conf (URL configuration)ç¯„ä¾‹: 123456from django.urls import pathfrom . import viewsurlpatterns = [ # è¨­ç½®è·¯å¾‘ã€æ¥æ”¶viewå›å‚³çš„é é¢ path('about.html', views.about, name= &quot;about&quot;),] å¾views.pyå°‡å®šç¾©å¥½çš„function åšimportã€‚ å†åˆ°stocksè³‡æ–™å¤¾ä¸‹çš„urls.pyåšé…ç½®ï¼Œå…ˆimport includeï¼ŒåŠ å…¥quotes.urlsï¼Œé€£çµquotesçš„urlé…ç½®ï¼Œæ–¹ä¾¿é€²è¡Œç®¡ç†ã€‚ TemplateTemplateå¯ä»¥å¹«åŠ©æˆ‘å€‘å°‡å‰ç«¯é é¢å­˜æ”¾çš„ä¸€å€‹ç¨ç«‹è³‡æ–™å¤¾ï¼Œä¸€ä¾†ä¸æœƒå…¨éƒ¨ä¸Ÿåœ¨viewå…§ï¼ŒäºŒä¾†å¦‚æœæœªä¾†ä¹Ÿæ¯”è¼ƒå¥½èˆ‡åšå‰ç«¯é é¢çš„äººåˆä½œï¼Œå°æ–¹åªéœ€è¦å°‡å¯«å¥½çš„é é¢æ”¾ç½®åœ¨templateä¸‹å³å¯ã€‚æ‰“é–‹è³‡æ–™å¤¾settings.pyï¼Œæœå°‹TEMPLATESï¼Œä¾¿èƒ½å¤ çœ‹åˆ°ä»¥ä¸Šè¨­å®šã€‚Django é è¨­æœƒå»æ‰¾ TEMPLATES çš„è¨­å®šï¼ŒDIRSæ˜¯è®“Djangoé¡å¤–æœå°‹TEMPLATESçš„ç›®éŒ„settings.pyå…§æœå°‹BASE_DIRï¼Œé€éBASE_DIRè¨­å®šï¼Œå¯ä»¥äº†è§£é è¨­çš„å°ˆæ¡ˆçš„è·¯å¾‘ã€‚ ModelDjangoé è¨­ä½¿ç”¨å¾Œç«¯çš„è³‡æ–™åº«ç³»çµ±ç‚ºSQLiteï¼Œå¯ä»¥åœ¨settings.pyæª”æ¡ˆä¸‹æœå°‹DATABASESï¼ŒDjangoå·²å…ˆåšå¥½è¨­ç½®ã€‚ èªªæ˜: ENGINE â€“ è¦ä½¿ç”¨çš„è³‡æ–™åº«å¼•æ“ã€‚ä¾‹å¦‚ï¼šMySQL: django.db.backends.mysqlSQLite3: django.db.backends.sqlite3PostgreSQL: django.db.backends.postgresql_psycopg2 NAME â€“ è³‡æ–™åº«åç¨±è‹¥ä½¿ç”¨MySQLæˆ–PostgreSQLç­‰å…¶ä»–è³‡æ–™åº«ï¼Œé‚„éœ€å¦å¤–è¨­å®šå®ƒçš„ä½ç½®ã€åç¨±ã€ä½¿ç”¨è€…ã€‚Modelçš„å¹¾å€‹é‡é»: è² è²¬è³‡æ–™å±¤ã€æ“ä½œDatabase åŸºæ–¼ORMï¼Œä¸”ç”¨Class å®šç¾©è³‡æ–™æ ¼å¼ï¼Œå»ºç«‹è³‡æ–™æ¬„ä½ã€‚ Model Fields å¯ç‚º Django Model å®šç¾©ä¸åŒå‹æ…‹è³‡æ–™å±¬æ€§ï¼Œç´€éŒ„å¹¾å€‹æ¯”è¼ƒå¸¸ç”¨çš„:CharField â€” å­—ä¸²æ¬„ä½ï¼Œé©åˆåƒ titleã€location é€™ç¨®æœ‰é•·åº¦é™åˆ¶çš„å­—ä¸²ã€‚TextField â€” åˆæ”¾å¤§é‡æ–‡å­—çš„æ¬„ä½URLField â€” URL è¨­è¨ˆçš„æ¬„ä½DateTimeField â€” æ—¥æœŸèˆ‡æ™‚é–“çš„æ¬„ä½ï¼Œä½¿ç”¨æ™‚æœƒè½‰æˆPython datetime å‹åˆ¥ã€‚ æ­¥é©Ÿ åˆ°model.pyæª”å…§å»ºç«‹åç‚ºStockçš„ç‰©ä»¶ï¼ŒDjangoæœƒä¾æ“šé€™å€‹å»ºç«‹è³‡æ–™è¡¨ï¼Œä»¥åŠè³‡æ–™è¡¨è£¡çš„æ¬„ä½è¨­å®šã€‚12345class Stock(models.Model): # CharField: å®šç¾©è³‡æ–™æ ¼å¼ç‚ºå­—ä¸² ticker = models.CharField(max_length=10) def __str__(self): return self.ticker æ¥è‘—åŸ·è¡Œpython manage.py makemigrationsï¼Œmakemigrationsæœƒå‘Šè¨´ Djangoï¼ŒModelæœ‰æ‰€è®Šå‹•ï¼Œé€™æœƒå»ºç«‹ä¸€å€‹é·ç§»ï¼ˆmigrationï¼‰æª”æ¡ˆã€‚ å°Modelé€²è¡Œè¨»å†Šï¼Œéœ€è¦åœ¨è®“DjangoçŸ¥é“ï¼Œæœ‰å“ªäº›Modeléœ€è¦ç®¡ç†å¾Œå°ã€‚è³‡æ–™åº«åŒæ­¥ï¼Œå®Œæˆé·ç§»ã€‚1python manage.py migrate åŸ·è¡Œä¸Šè¿°æŒ‡ä»¤å³å¯å®Œæˆé·ç§»ã€‚ åƒè€ƒæ•™å­¸:ä¾†æº1ä¾†æº2ä¾†æº3","link":"2020/01/11/Python/Django/%5Bpython%5DDjango%20%E7%AD%86%E8%A8%98/"},{"title":"[Python] æ·ºè«‡ Python ä¸­çš„Decorator (ä¸Š)","text":"å‰è¨€ä¹‹å‰å°ˆé¡Œå¯«Linebotæ™‚ç”¨Flaskä¸²æ¥Linebotçš„SDKï¼Œä¸€é–‹å§‹åªæ˜¯ç…§å€‹å®˜æ–¹çµ¦çš„ Sample Code å»æ¶è¨­Linebotï¼Œå¾Œä¾†æ·±å…¥ç ”ç©¶Sample Codeå¾Œä¸€ç›´ä¸å¤ªç†è§£è£¡é¢@çš„æ„æ¶µï¼Œåˆ©ç”¨ç©ºæª”æ’°å¯«é€™ç¯‡æ–‡ç« ï¼ŒåŠ æ·±å° Decorator çš„è§€å¿µã€‚ Decorator ä¸­æ–‡ç¿»ä½œ è£é£¾å™¨ï¼Œè£é£¾ Python ä¸­çš„ class å’Œ functionï¼Œå®ƒå…¶å¯¦æ˜¯ Python çš„ä¸€ç¨®èªæ³•ç³–(ç°¡åŒ–å¯«æ³•)ï¼Œä¸åƒ…èƒ½ä½¿ç¨‹å¼ç¢¼é‡è¤‡åˆ©ç”¨ï¼Œå°‡ç¨‹å¼ç¢¼åŒ–ç¹ç‚ºç°¡ï¼Œæ›´æ˜“æ–¼æ“´å……ï¼Œæ•…è¢«å»£æ³›å¯¦ä½œåœ¨å¥—ä»¶ä¸Šï¼Œè€Œè¾¨è­˜ Decorator çš„æ–¹æ³•å°±æ˜¯ Decorator åç¨±å‰é¢æœƒä»¥@åšé–‹é ­ã€‚å¦‚ä¸‹åœ–çš„ @app: DecoratorèƒŒå¾Œç‰½æ¶‰åˆ°å…©å€‹å¾ˆé‡è¦çš„è§€å¿µ - é–‰åŒ…(Closure) ä»¥åŠé ­ç­‰å‡½å¼ (First-class Function)ï¼Œ ç›¸é—œè¨è«–è¨˜éŒ„åœ¨é€™ç¯‡ç­†è¨˜ æœ¬æ–‡ä¸»è¦è‘—é‡æ¢è¨ Decorator çš„æ¦‚å¿µã€‚ å¯¦ä½œSmaple Code (Decorator)ä¾†çœ‹ç°¡å–®ç¯„ä¾‹: 12345678def print_my_name(name): print(&quot;My name is %s&quot; %(name()))@print_my_namedef my_name(): return &quot;Tom&quot; # My name is Tom åŸ·è¡Œä¸Šé¢çš„ç¯„ä¾‹çµæœï¼Œå¯ä»¥ç™¼ç¾å‡½å¼çœ‹èµ·ä¾†å¥½åƒæ²’æœ‰æ±è¥¿è¢«å‘¼å«ï¼Œå»è‡ªå‹•è¢«åŸ·è¡Œ?é‚£å¦‚æœæ”¹æˆå‘¼å«my_name()å‡½å¼çš„è©±æœƒå‡ºç¾éŒ¯èª¤æƒ…å½¢ã€‚ 12345678def print_my_name(name): print(&quot;My name is %s&quot; %(name()))@print_my_namedef my_name(): return &quot;Tom&quot; my_name() å¦‚æœå‘¼å« my_name() çš„è©±å°±å ± TypeError: 'NoneType' object is not callable çš„éŒ¯èª¤è¨Šæ¯ é‚„åŸSample Code (ä¸åŠ Decorator)ä¸Šè¿°æœ‰ä½¿ç”¨@åšç°¡åŒ–çš„ç¯„ä¾‹ç¨‹å¼ç¢¼ï¼Œå¦‚æœè¦é‚„åŸæˆä¸åŠ Decoratorçš„è©±: 12345678def print_my_name(name): print(&quot;My name is %s&quot; %(name())) return namedef my_name(): return &quot;Tom&quot;name = print_my_name(my_name) ç”±ä¸Šè¿°ä¾‹å­å¯çŸ¥: functionä¹Ÿå¯ä½œç‚ºåƒæ•¸å‚³éä¸¦åŸ·è¡Œã€‚ å‰å¾Œæ¯”è¼ƒæœ‰ç„¡Decoratorçš„ç¯„ä¾‹ç™¼ç¾ï¼Œæœ‰Decoratorçš„ç¨‹å¼ç¢¼çœç•¥æ‰name = print_my_name(my_name)ï¼Œä¸å¿…å¤šå¯«ã€‚é€éç¯„ä¾‹ï¼Œå¯ä»¥æŠŠå®ƒç°¡å–®ç†è§£ç‚º: å°ä¸€å€‹å‡½å¼é€²è¡Œæ‰“åŒ…çš„å‹•ä½œï¼Œå¾ŒçºŒå¯é‡è¤‡å‘¼å«æ‰“åŒ…éçš„å‡½å¼ã€‚åˆ©ç”¨functionå¯ä½œåƒæ•¸å‚³å…¥çš„ç‰¹æ€§ï¼Œå°‡my_name()ä½œç‚ºåƒæ•¸å‚³å…¥print_my_name(name)ä¸­(åšç‚ºdecorator)ã€‚ åŸå› name = print_my_name(my_name) è¡¨ç¤ºæŠŠmy_nameé€™å€‹ functionå‚³å…¥print_my_nameåšè™•ç†ï¼Œå†æŠŠ print_my_name(my_name) çš„å›å‚³å€¼assignçµ¦è®Šæ•¸nameã€‚ ä¸€é–‹å§‹çš„my_nameæ˜¯functionï¼Œä½†æ˜¯å› ç‚ºé‡æ–°è³¦å€¼çš„é—œä¿‚ï¼Œmy_name() å·²ç¶“ä¸æ˜¯ä¸€å€‹functionï¼Œè€Œæ˜¯èˆ‡ print_my_name(my_name)çš„å›å‚³å€¼é€£çµåœ¨ä¸€èµ·ã€‚ 12print(my_name)# None å› ç‚ºprint_my_nameæ²’æœ‰æŒ‡å®šå›å‚³çš„å€¼ï¼Œpythonæœƒé è¨­return Noneï¼Œæœ€å¾ŒåŸ·è¡Œprint(my_name)æ™‚å°±æœƒå¾—åˆ°Noneçš„çµæœã€‚ è§£æ±ºæ–¹æ³•é‡å°å‰›æ‰åŠ å…¥Decoratorç¯„ä¾‹ä¸­ï¼Œå‘¼å«my_name()å ±éŒ¯å•é¡Œï¼Œåªéœ€åœ¨åŠ ä¸Š@çš„å‡½å¼è£¡é¢åšreturnï¼Œå›å‚³ç”±å¤–éƒ¨å‚³å…¥çš„åƒæ•¸å³å¯ï¼ 1234567def print_my_name(name): print(&quot;My name is %s&quot; %(name())) return name @print_my_namedef my_name(): return &quot;Tom&quot; æˆ–æ˜¯å–®ç´”ä¸æƒ³å°å‡ºéŒ¯èª¤è¨Šæ¯çš„è©±å¯ä»¥åœ¨å‘¼å«å‡½å¼æ™‚åˆªé™¤() 12345678def print_my_name(name): print(&quot;My name is %s&quot; %(name()))@print_my_namedef my_name(): return &quot;Tom&quot; my_name åˆ†æå‡½æ•¸èˆ‰å‰›æ‰æœªä½¿ç”¨Decoratorç¯„ä¾‹ï¼Œè‹¥å°å‡ºnameçš„è©±: 123456789def print_my_name(name): print(&quot;My name is %s&quot; %(name())) return namedef my_name(): return &quot;Tom&quot;name = print_my_name(my_name)print(name) å›å‚³å€¼æœƒæ˜¯ä¸€å€‹functionç‰©ä»¶ã€‚è‹¥è¦åŸ·è¡Œfunctionç‰©ä»¶çš„å…§å®¹ï¼Œéœ€æ”¹æˆprint_my_name(my_name)()ï¼Œå› ç‚ºprint_my_name(my_name)åªæœƒreturn functionè‡ªå·±ï¼Œå¿…é ˆåœ¨å¾Œé¢åŠ ä¸Š()ä¾†å‘¼å«ã€‚ 12345678def print_my_name(name): print(&quot;My name is %s&quot; %(name())) return namedef my_name(): return &quot;Tom&quot;name = print_my_name(my_name)() ä»¥ä¸Šæ˜¯ç›®å‰æ•´ç†Pythonè£é£¾å™¨(Decorator)åˆæ­¥çš„ç”¨æ³•ï¼Œå…¶å¯¦è£é£¾å™¨çš„å¯«æ³•ç¸½å…±æœ‰å››ç¨®ï¼Œæ›´å¤šPython Decoratorçš„é€²éšç”¨æ³•ç•™å¾…ä¸‹ä¸€ç¯‡ã€‚ å¦‚æœè§€å¿µä¸Šæœ‰ä¸æ­£ç¢ºæˆ–æ˜¯æ–‡ç« å…§å®¹æœ‰éŒ¯èª¤ä¹‹è™•é‚„è«‹çœ‹éæ–‡ç« çš„äººæŒ‡æ•™ï¼ åƒé–± Advanced Uses of Python Decorators Python Decorator å…¥é–€æ•™å­¸ Pythoné€²éšæŠ€å·§ (3) â€” ç¥å¥‡åˆç¾å¥½çš„ Decorator è¬æƒ¡çš„ Python Decorator ç©¶ç«Ÿæ˜¯ä»€éº¼ï¼Ÿ","link":"2020/02/05/Python/Python/%5BPython%5D%20Decorator(%E4%B8%8A)/"},{"title":"[Python] Lambdaå‡½å¼","text":"å‰è¨€ä¸€èˆ¬ä¾†èªªï¼Œå¦‚æœPythonè¦å®šç¾©ä¸€å€‹å‡½å¼ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä½¿ç”¨defä¾†å®šç¾©ï¼Œè€ŒLambdaå‡½å¼æ˜¯ä¸€ç¨®ç„¡åå‡½å¼(anonymous function)ï¼Œä¸éœ€çµ¦å‡½æ•¸åç¨±ï¼ŒåŸºæ–¼è¿½æ±‚ç°¡æ½”çš„è¨­è¨ˆåŸå‰‡ï¼Œå…§å®¹åªèƒ½æœ‰ä¸€å‰‡é‹ç®—å¼ã€‚ Lambdaå‡½å¼çš„ç¨‹å¼ç¢¼åªèƒ½æœ‰ä¸€è¡Œï¼Œå¯ä»¥æ”¾ä¸€å€‹é‹ç®—å¼ï¼Œæˆ–æ˜¯ä¸€å€‹å–®è¡Œif-elseï¼Œä½†ä¸èƒ½ä½¿ç”¨æŒ‡å®šé‹ç®—å­ï¼Œä¹Ÿä¸å¯ä»¥è·‘è¿´åœˆã€‚ ç‰¹é» åŒ¿åçš„å‡½å¼ çµæ§‹ç°¡å–®ã€ä½¿ç”¨é »ç‡éå°‘ã€ç¯€çœè¨˜æ†¶é«” â€œç”¨å®Œå³ä¸Ÿâ€ï¼Œåªæœƒç”¨ä¸€æ¬¡ é‹ç®—å¼çš„è¨ˆç®—çµæœæœƒè‡ªå‹•å›å‚³ï¼Œä¸éœ€åšreturn å¯¦ä½œèªæ³•çµæ§‹ç‚º: lambda arg1, arg2, â€¦: operation ...argå¸¶å…¥ç›®æ¨™åƒæ•¸ï¼Œå†’è™Ÿ:å¾Œæ–¹çš„operationå‰‡å¯«å…¥é‹ç®—å¼æˆ–æ¢ä»¶åˆ¤æ–·å¼ç­‰ï¼Œå¥½æ¯”ä¸€èˆ¬å‡½å¼è£¡çš„ç¨‹å¼ç¢¼ã€‚ ç¯„ä¾‹1å‡è¨­ä»Šå¤©è¦å¯«ä¸€å€‹å‡½å¼åˆ¤æ–·å‚³å…¥çš„æ•¸æ˜¯å¦ç‚ºå¶æ•¸ ä¸€èˆ¬å¯«æ³•ï¼š12345def isEven(n): return &quot;yes&quot; if n %2 == 0 else &quot;no&quot;print(isEven(10)) # yesprint(isEven(5)) # no Lambdaå‡½å¼:123f = lambda n : &quot;yes&quot; if n %2 == 0 else &quot;no&quot;print(f(10)) # yesprint(f(5)) # no ç¯„ä¾‹2123def isEven1(a, b): return True if (a+b) % 2 == 0 else Falseprint(isEven1(2, 3)) Lambdaå‡½å¼:12f = lambda a, b : True if (a+b) % 2 == 0 else Falseprint(f(2, 3)) å¸¸æ­é…çš„å‡½å¼filter()åˆ©ç”¨filter()å‡½å¼é€²è¡Œè³‡æ–™ç¯©é¸ã€‚å‡è¨­ä»Šå¤©è¦å»ºç«‹ç¯©é¸ä¸åŠæ ¼æˆç¸¾çš„lambdaå‡½å¼å¯æ¡ä¸‹é¢çš„æ–¹æ³•ã€‚ 12345scores = [90, 10, 80, 30, 100, 80]faile = lambda x: True if x &lt; 60 else Falsefaile_scores = filter(faile, scores)print([k for k in faile_scores]) # [10, 30] map()map()åˆ©ç”¨ä¸€å€‹æŒ‡å®šçš„å‡½å¼ä¾†è™•ç†è³‡æ–™ï¼Œå›å‚³ä¸€çµ„è™•ç†éçš„æ–°è³‡æ–™ã€‚å‡è¨­ä»Šå¤©è¦èª¿æ•´å­¸ç”Ÿæˆç¸¾ï¼Œåˆ†æ•¸55åˆ†ä»¥ä¸Šä½†æœªæ»¿60åˆ†çš„åˆ†æ•¸ä¸€å¾‹ä»¥60åˆ†æ¡è¨ˆï¼Œä½œæ³•å¦‚ä¸‹ 123scores = [50, 55, 53, 56, 57, 54]adjust_scores = list(map(lambda score: 60 if 60 &gt; score &gt;= 55 else score, scores ))print(adjust_scores) # [50, 60, 53, 60, 60, 54] åƒè€ƒLambdaå‡½å¼ Day16-Lambdaå‡½å¼","link":"2020/01/05/Python/Python/%5BPython%5D%20Lambda%E5%87%BD%E5%BC%8F/"},{"title":"[Database] MongoDB è³‡æ–™æ“ä½œ","text":"å‰è¨€æœ¬ç¯‡ç´€éŒ„MongoDBæ•´åˆPythonçš„pymongoåŠmongo shellé€²è¡Œè³‡æ–™åº«æ“ä½œï¼Œå®‰è£æ–¹å¼åƒè€ƒæœ¬ç¯‡ã€‚ å‚³çµ±SQLèˆ‡MongoDBå…©è€…å°æ‡‰é—œä¿‚åœ¨æ“ä½œMongoDBå‰éœ€è¦äº†è§£å…©è€…çš„å°æ‡‰é—œä¿‚ï¼Œæ‰èƒ½ç†è§£å¦‚ä½•ä¸‹æ“ä½œæŒ‡ä»¤ ä½¿ç”¨Pymongoå®‰è£pymongo1pip install pymongo é€£æ¥pymongoé€£æ¥MongoDBæ™‚ï¼Œéœ€ä½¿ç”¨PyMongoåº«è£¡é¢çš„MongoClientã€‚ä¸€èˆ¬ä¾†èªªï¼Œå‚³å…¥MongoDBçš„hoståŠportå³å¯ï¼Œå…¶ä¸­ç¬¬ä¸€å€‹åƒæ•¸ç‚ºä¸»æ©Ÿä½ç½®(host)ï¼Œç¬¬äºŒå€‹åƒæ•¸ç‚ºport(å¦‚æœä¸å‚³åƒæ•¸ï¼Œé è¨­æ˜¯27017) 123from pymongo import MongoClient # å¼•å…¥pymongo# é€£æ¥pymongoclient = MongoClient(host='localhost', port=27017) ç´”å­—ä¸²çš„é€£æ¥æ–¹å¼1client = MongoClient('mongodb://localhost:27017/') é€£æ¥é›²ç«¯çš„MongoDB é»æ“ŠConnect Instructions -&gt; é¸æ“‡Connect Your Application -&gt; é¸æ“‡ç¨‹å¼èªè¨€ï¼Œä¸¦è¤‡è£½ä¸‹æ–¹æŒ‡ä»¤ è²¼ä¸Šå‰›æ‰è¤‡è£½çš„æŒ‡ä»¤ï¼Œä¸¦å°‡passwordæ›¿æ›æˆè‡ªå·±çš„ç”¨æˆ¶å¯†ç¢¼ 1client = MongoClient(&quot;mongodb://tomchen:user_password@cluster0-shard-00-00-q0zkl.mongodb.net:27017,cluster0-shard-00-01-q0zkl.mongodb.net:27017,cluster0-shard-00-02-q0zkl.mongodb.net:27017/test?ssl=true&amp;replicaSet=Cluster0-shard-0&amp;authSource=admin&amp;retryWrites=true&amp;w=majority&quot;) å»ºç«‹/æŒ‡å®šè³‡æ–™åº«MongoDBä¸­å¯ä»¥å»ºç«‹å¤šå€‹è³‡æ–™åº«ï¼Œéœ€è¦æŒ‡å®šæ“ä½œå“ªå€‹è³‡æ–™åº«ã€‚ä»¥testè³‡æ–™åº«ç‚ºä¾‹: æ–¹æ³•11db = client.test æ–¹æ³•21db = client['test'] å»ºç«‹/æŒ‡å®šCollectionMongoDBä¸­çš„collectionå°æ‡‰å‚³çµ±è³‡æ–™åº«çš„tableå»ºç«‹studentsç‚ºcollectionåç¨± æ–¹æ³•11collection = db.students æ–¹æ³•21collection = db[students] æ–°å¢è³‡æ–™æ–°å¢å–®ç­†è³‡æ–™æ¡insert_one()æ–¹æ³• 123456789student = { 'id': '20170101', 'name': 'Jordan', 'age': 20, 'gender': 'male'}result = collection.insert_one(student)print(result) æ–°å¢å¤šç­†è³‡æ–™æ¡insert_many()æ–¹æ³•ï¼Œå‚³å…¥ä¸€å€‹é™£åˆ—å½¢å¼çš„è³‡æ–™çµæ§‹ 1234567891011121314151617students = [ { 'id': '20180101', 'name': 'Jean', 'age': 20, 'gender': 'female' }, { 'id': '20190101', 'name': 'Tom', 'age': 22, 'gender': 'male' },]result = collection.insert_many(students)print(result.inserted_ids) # å›å‚³ ObjectId æŸ¥è©¢å¯ä»¥åˆ©ç”¨find_one()æˆ–find()æ–¹æ³•é€²è¡ŒæŸ¥è©¢ï¼Œå…¶ä¸­find_one()æŸ¥è©¢å¾—åˆ°çš„æ˜¯ç¬¦åˆæ¢ä»¶çš„ç¬¬ä¸€å€‹çµæœã€‚ å¦‚æœæŸ¥è©¢çµæœä¸å­˜åœ¨ï¼Œå‰‡æœƒè¿”å›None æŸ¥è©¢å–®ä¸€ç­†è³‡æ–™å¦‚æŸ¥è©¢nameç‚ºTomçš„è³‡æ–™ 123result = collection.find_one({'name': 'Tom'})print(type(result)) # å›å‚³çµæœæ˜¯dicé¡å‹print(result) æ ¹æ“šObjectIdä¾†æŸ¥è©¢éœ€è¦ä½¿ç”¨package-bsonè£¡é¢çš„objectid 123from bson.objectid import ObjectIdresult = collection.find_one({'_id': ObjectId('5e41253fe2d639ab3976e620')})print(result) æŸ¥è©¢å¤šç­†è³‡æ–™ æŸ¥è©¢å¤šç­†è³‡æ–™æ™‚ï¼Œå‹™å¿…è¦åœ¨æŸ¥è©¢çš„çµæœè½‰ç‚ºlist 12result = list(collection.find({'name': 'Tom'}))print(result) æ¢ä»¶æŸ¥è©¢å¤§æ–¼çš„æ¢ä»¶åœ¨dicå…§ä½¿ç”¨$gtä½œç‚ºç¯©é¸æ¢ä»¶ 12results = list(collection.find({'age': {'$gt': 20}}))print(results) å°æ–¼çš„æ¢ä»¶åœ¨dicå…§ä½¿ç”¨$ltä½œç‚ºç¯©é¸æ¢ä»¶ 12result = list(collection.find({'age': {'$lt': 22}}))print(results) é…åˆæ­£è¦è¡¨é”å¼åœ¨dicå…§ä½¿ç”¨$regexä½œç‚ºç¯©é¸æ¢ä»¶ï¼Œå¦‚: æŸ¥è©¢åå­—ä»¥Té–‹é ­çš„å­¸ç”Ÿè³‡æ–™ æ›´æ–°æ–¹æ³•ä¸€update()ä½¿ç”¨update()æ–¹æ³•ï¼Œå¦‚æ›´æ–°nameç‚ºTomçš„ageï¼šå…ˆæŒ‡å®šæŸ¥è©¢æ¢ä»¶ï¼Œå†æŸ¥è©¢è©²ç­†è³‡æ–™ï¼Œä¿®æ”¹å¹´é½¡å¾Œå‘¼å«update()æ–¹æ³•å°‡åŸæ¢ä»¶å’Œä¿®æ”¹å¾Œçš„è³‡æ–™å‚³å…¥ 123456condition = {'name': 'Tom'}student = collection.find_one(condition)print(student)student['age'] = 25result = collection.update_one(condition, student)print(result) å›å‚³çµæœ: ä¹Ÿå¯ä»¥ä½¿ç”¨$setå°è³‡æ–™é€²è¡Œæ›´æ–° 1result = collection.update(condition, {'$set': student}) æ–¹æ³•äºŒ: update_one()å’Œupdate_many()æ˜¯å®˜æ–¹æ¯”è¼ƒæ¨è–¦çš„æ–¹æ³•update_one()å’Œupdate_many()æ˜¯å®˜æ–¹æ¯”è¼ƒæ¨è–¦çš„æ–¹æ³•ï¼Œç”¨æ³•æ›´åŠ åš´è¬¹ 1result = collection.update_one(condition, {'$set': student}) åš´è¬¹çš„æ–¹æ³•æœƒå›å‚³UpdateResult objectï¼Œè€Œmatched_countå’Œmodified_countå±¬æ€§å‰‡æ˜¯æŒ‡ç²å¾—åŒ¹é…çš„è³‡æ–™æ•¸é‡å’Œæ›´å‹•çš„è³‡æ–™æ•¸é‡ å¦å¤–çš„ä¾‹å­: update_one()æŒ‡å®šæŸ¥è©¢æ¢ä»¶ç‚ºageå¤§æ–¼20ï¼Œæ›´æ–°æ¢ä»¶ç‚º{'$inc': {'age': 1}}ï¼Œä¹Ÿå°±æ˜¯ageåŠ 1ï¼ŒåŸ·è¡Œä¹‹å¾Œæœƒå°‡ç¬¬ä¸€æ¢ç¬¦åˆæ¢ä»¶çš„è³‡æ–™ageåŠ 1ã€‚ 12345condition = {'age': {'$gt': 20}}result = collection.update_one(condition, {'$inc': {'age': 1}})print(result)print(result.matched_count, result.modified_count) update_many()1234condition = {'age': {'$gt': 20}}result = collection.update_many(condition, {'$inc': {'age': 1}})print(result)print(result.matched_count, result.modified_count) å›å‚³çµæœå¯çœ‹åˆ°æ‰€æœ‰è³‡æ–™éƒ½è¢«æ›´æ–° åˆªé™¤ä½¿ç”¨delete_one()å’Œdelete_many()æ–¹æ³•æŒ‡å®šåˆªé™¤çš„æ¢ä»¶ï¼Œæ­¤æ™‚ç¬¦åˆæ¢ä»¶çš„è³‡æ–™æœƒè¢«åˆªé™¤ã€‚ 12345result = collection.delete_many({'name': 'Jean'})print(result)print(result.deleted_count) result = collection.delete_many({'age': {'$gt': 25}})print(result.deleted_count) deleted_countç‚ºè¢«åˆªé™¤çš„æ•¸é‡ ä½¿ç”¨Mongo Shellmongo æ˜¯ä¸€å€‹ç”¨ä¾†æ“ä½œMongoDBçš„JavaScriptä»‹é¢ï¼Œå¯ä»¥ä½¿ç”¨å®ƒä¾†é€²è¡Œæ–°å¢ã€åˆªé™¤ã€ä¿®æ”¹ã€æŸ¥è©¢è³‡æ–™åº«ä¸­çš„è³‡æ–™ï¼Œå¦å¤–ä¹Ÿå¯ä»¥é€²è¡Œè³‡æ–™åº«ç®¡ç†ã€‚ é€£çµæœ¬åœ°1mongo æ‰“é–‹çµ‚ç«¯æ©ŸåŸ·è¡Œmongo ä»¥MongoDB Shellä¾†é€£ç·šåˆ°MongoDBã€‚ä¸Šåœ–è¡¨ç¤ºé€£çµæˆåŠŸï¼ è‹¥ç„¡åŠ ä¸Šä»»ä½•åƒæ•¸ï¼ŒmongoæŒ‡ä»¤é è¨­æœƒé€£ç·šåˆ°localhost: 27017ï¼Œå¦‚æœè¦æ”¹è®Šä¸»æ©Ÿèˆ‡é€£æ¥åŸ ï¼Œåƒè€ƒ mongo Shell Reference Pageã€‚ æŸ¥çœ‹åŸºæœ¬çš„æ“ä½œèªªæ˜1help ä¸€é–‹å§‹é€²å…¥ MongoDB Shell æ™‚ï¼Œå¯ä»¥åŸ·è¡Œhelpä¾†æŸ¥çœ‹åŸºæœ¬çš„æ“ä½œèªªæ˜ é¸æ“‡ databaseåœ¨è¼¸å…¥è³‡æ–™ä¹‹å‰ï¼Œå…ˆä¸‹useæŒ‡ä»¤ä¾†é¸æ“‡ç›®æ¨™databaseã€‚ æ–°å¢è³‡æ–™MongoDBå…§æ–°å¢è³‡æ–™æ¡insert()æ–¹æ³•ï¼Œæ‰€æœ‰å„²å­˜åœ¨collectionä¸­çš„ documentéƒ½æœƒæœ‰ä¸€å€‹ _idçš„fieldåç¨±ä½œç‚º primary keyï¼Œå¦‚æœè¼¸å…¥è³‡æ–™æ™‚æ²’æœ‰åŠ ä¸Šé€™å€‹ fieldï¼ŒMongoDB æœƒè‡ªå‹•ç”¢ç”Ÿä¸€å€‹ ObjectId ä½œç‚º _idã€‚ç¯„ä¾‹ï¼šå¯«å…¥ä¸€å€‹åç‚ºstudentsçš„collection 1234567891011121314151617181920212223242526db.students.insert({ &quot;name&quot; : &quot;Tom&quot;, &quot;sid&quot; : &quot;41704620&quot;, &quot;gender&quot; : &quot;male&quot; , &quot;family&quot; : { &quot;fatherName&quot; : &quot;father&quot;, &quot;matherName&quot; : &quot;mather&quot;, &quot;totalMember&quot;: 3 }, &quot;city&quot; : &quot;é‡‘é–€&quot;, &quot;grades&quot; : [ { &quot;subject&quot;: &quot;é«”è‚²&quot;, &quot;date&quot;: ISODate(&quot;2019-10-01T00:00:00Z&quot;), &quot;grade&quot; : &quot;A+&quot;, &quot;score&quot; : 95 }, { &quot;subject&quot;: &quot;åœ‹æ–‡&quot;, &quot;date&quot; : ISODate(&quot;2014-01-16T00:00:00Z&quot;), &quot;grade&quot; : &quot;A-&quot;, &quot;score&quot; : 80 } ] }) æˆåŠŸå¯«å…¥ï¼ å¦‚æœé‡åˆ° collection ä¸å­˜åœ¨çš„ç‹€æ³ï¼ŒMongoDB æœƒè‡ªå‹•å»ºç«‹é€™å€‹ collectionã€‚åœ¨åŸ·è¡Œä¹‹å¾Œï¼Œæœƒå‚³å›ä¸€å€‹ WriteResult ç‰©ä»¶ï¼ŒnInserted çš„å€¼å°±æ˜¯è¼¸å…¥è³‡æ–™çš„ç­†æ•¸ æŸ¥è©¢è³‡æ–™æœªæŒ‡å®šæ¢ä»¶åŸ·è¡Œfind()ä¸åŠ ä»»ä½•æŸ¥è©¢æ¢ä»¶æ™‚ï¼Œæœƒåˆ—å‡ºè©²collectionä¸­æ‰€æœ‰çš„ documentsã€‚ 1db.students.find() æŸ¥è©¢æˆåŠŸï¼ æŒ‡å®šæŸ¥è©¢æ¢ä»¶ç¯„ä¾‹1æŸ¥è©¢æŸå€‹ç‰©ä»¶ 1db.students.find({&quot;name&quot; : &quot;Tom&quot;}) ç¯„ä¾‹2æŸ¥è©¢æŸå€‹ç‰©ä»¶ä¸‹çš„ç‰¹å®šç‰©ä»¶ï¼Œä½¿ç”¨dot.çš„æ–¹å¼å–å¾—ã€‚ 1db.students.find({&quot;family.fatherName&quot; : &quot;father&quot;}) ç¯„ä¾‹3ä¹Ÿå¯ä»¥ç”¨æ–¼æŸ¥è©¢é™£åˆ—ä¸­çš„fieldå€¼ã€‚ 1db.students.find({&quot;grades.grade&quot; : &quot;A+&quot;}) é…åˆé‹ç®—å­æŸ¥è©¢æ¢ä»¶ç¯„ä¾‹1å¤§æ–¼æ¢ä»¶ 1db.students.find({&quot;grades.score&quot; : {$gt: 90} }) ç¯„ä¾‹2å°æ–¼æ¢ä»¶ 1db.students.find({&quot;grades.score&quot; : {$lt: 90} }) å¤šå€‹æŸ¥è©¢æ¢ä»¶åšANDé‹ç®— 1db.students.find( {&quot;gender&quot; : &quot;male&quot;,&quot;city&quot; : &quot;é‡‘é–€&quot;} ) åšORé‹ç®— 123db.students.find( { $or: [ { &quot;gender&quot; : &quot;male&quot; }, { &quot;city&quot; : &quot;é‡‘é–€&quot; } ] }) æ’åºæŸ¥è©¢çµæœè®“æŸ¥è©¢çš„çµæœä¾ç…§ field ä¾†æ’åºï¼Œå¯ä»¥åŠ sort()æ–¹æ³•ï¼Œä¸¦ä¸”æŒ‡å®šæ’åºçš„ fieldåç¨±èˆ‡æ’åˆ—æ–¹å¼ï¼Œ1:è¡¨éå¢;-1ï¼šè¡¨éæ¸›ã€‚ 1db.students.find().sort( { &quot;grades&quot;: 1 } ) æ›´å¤šæŸ¥è©¢æ¢ä»¶ åˆ—å‡ºæ‰€æœ‰çš„collectionsä¸‹æ–¹ä¸‰è¡ŒæŒ‡ä»¤æ“‡ä¸€ 123show collectionsshow tablesdb.getCollectionNames() è³‡æ–™åº«ç³»çµ±è³‡è¨Š1db.stats() åƒè€ƒæ•™å­¸MongoDB åŸºç¤å…¥é–€æ•™å­¸ï¼šMongoDB Shell ç¯‡ Pythonæ“ä½œMongoDBçœ‹é€™ä¸€ç¯‡å°±å¤ äº†","link":"2019/09/12/Python/Python/%5BPython%5D%20MongoDB%20%E8%B3%87%E6%96%99%E6%93%8D%E4%BD%9C/"},{"title":"[Python] Pandasè³‡æ–™è™•ç†- åŸºæœ¬æ¦‚å¿µåŠæ“ä½œ","text":"å‰è¨€Pandasæ˜¯pythonçš„ä¸€å€‹æ•¸æ“šåˆ†æçš„å‡½å¼åº«ï¼Œæä¾›ç°¡æ˜“ä½¿ç”¨çš„è³‡æ–™æ ¼å¼ï¼Œä½¿ç”¨è€…é€éé€™é …å·¥å…·å¿«é€Ÿæ“ä½œåŠåˆ†æè³‡æ–™ï¼Œæä¾›ååˆ†å®¹æ˜“æ“ä½œçš„è³‡æ–™çµæ§‹å¦‚ï¼šDataFrameã€‚Pandasä¸ä½†å¯ä»¥ç¶²é ä¸­çš„è¡¨æ ¼è³‡æ–™ï¼Œé‚„èƒ½å¾å¤–éƒ¨åŒ¯å…¥è³‡æ–™ï¼Œå°‡é€™äº›è³‡æ–™é€²è¡Œæ’åºã€ä¿®æ”¹æˆ–æ˜¯åšæˆçµ±è¨ˆç›¸é—œçš„åœ–è¡¨ã€‚ å®‰è£ Pandas1pip install pandas Pandasè³‡æ–™çµæ§‹ Seriesæ˜¯ä¸€ç¶­é™£åˆ—çš„è³‡æ–™çµæ§‹ï¼Œèƒ½å¤ ä¿å­˜ä¸åŒè³‡æ–™çš„å‹æ…‹ï¼Œå¦‚ï¼šæ•´æ•¸ã€å­—ä¸²ã€æµ®é»æ•¸ã€‚ DataFrameæ˜¯ä¸€å€‹äºŒç¶­é™£åˆ—çš„è³‡æ–™çµæ§‹ï¼Œå¯ä»¥æ“ä½œæŸè¡Œ/åˆ—ï¼Œæˆ–æ˜¯å¤šè¡Œ/åˆ—çš„è³‡æ–™ï¼Œä¹Ÿå¯ä»¥åšæ’åºã€æ’å…¥ã€ä¿®æ”¹æˆ–åˆªé™¤ç­‰æ“ä½œã€‚ DataFrame æ˜¯å¸¸ç”¨è³‡æ–™è™•ç†çš„æ ¼å¼ï¼Œå°¤å…¶æ˜¯åœ¨åšå ±è¡¨è™•ç†çš„æ™‚å€™éå¸¸æ–¹ä¾¿ã€‚ SeriesåŸºæœ¬æ“ä½œå»ºç«‹SeriesSerieså¯ä»¥è™•ç†ä¸€ç¶­è³‡æ–™çš„å‹æ…‹åŒ…å«é™£åˆ—(array)ã€å­—å…¸(dictionary)ã€å–®ä¸€è³‡æ–™ã€‚ è³‡æ–™ç‚ºé™£åˆ—(array)æ™‚123456import pandas as pd cars = [&quot;é«˜é›„&quot;, &quot;èŠ±è“®&quot;, &quot;å°æ±&quot;, &quot;å°åŒ—&quot;, &quot;å°ä¸­&quot;]select = pd.Series(cars) print(select) è³‡æ–™ç‚ºå­—å…¸(dictionary)æ™‚123456789101112import pandas as pdseri = { &quot;col0&quot;: &quot;0&quot;, &quot;col1&quot;: &quot;1&quot;, &quot;col2&quot;: &quot;2&quot;, &quot;col3&quot;: &quot;3&quot;, &quot;col4&quot;: &quot;4&quot;,}seris = pd.Series(seri)seris å–å€¼é€éç´¢å¼•å€¼æˆ–keyåï¼Œç¯©é¸å‡ºç›®æ¨™å€¼12345678print(seris[1]) # ä¾ç…§ç´¢å¼•å€¼å–å–®ä¸€å€¼print(&quot;--------&quot;)print(seris[&quot;col2&quot;]) # ä¾ç…§keyåç¨±å–å–®ä¸€å€¼print(&quot;--------&quot;)print(seris[[0, 2, 4]]) # ä¾ç…§ç´¢å¼•å€¼å–å¤šå€‹å€¼print(&quot;--------&quot;)print(seris[[&quot;col1&quot;, &quot;col3&quot;, &quot;col4&quot;]]) # ä¾ç…§keyåç¨±å–å¤šå€‹å€¼print(&quot;--------&quot;) é€éç´¢å¼•å€¼æˆ–keyåï¼Œç¯©é¸å‡ºç›®æ¨™å€¼é€éåˆ‡ç‰‡(slice)çš„æ–¹å¼é€²è¡Œç´¢å¼•å€¼æˆ–keyåï¼Œåˆ†å‰²å‡ºç›®æ¨™å€¼çš„ç¯„åœã€‚ 123print(seris[:3]) # sliceæ–¹æ³•ä¾ç…§ç´¢å¼•å€¼é¸å–ç›®æ¨™ç¯„åœprint(&quot;--------&quot;)print(seris[:&quot;col3&quot;]) # sliceæ–¹æ³•ä¾ç…§&quot;key&quot;åç¨±é¸å–ç›®æ¨™ç¯„åœ è³‡æ–™ç‚ºè³‡æ–™ç‚ºå–®ä¸€è³‡æ–™æ™‚12345678910111213import pandas as pdstudent = &quot;Tom&quot; ser = pd.Series(student, index = range(3)) print(ser) &quot;&quot;&quot;çµæœ0 Tom1 Tom2 Tomdtype: object&quot;&quot;&quot; DataFrameåŸºæœ¬æ“ä½œå»ºç«‹DataFrameè³‡æ–™ç‚ºé™£åˆ—(array)æ™‚123456import pandas as pdstudents = [[&quot;A&quot;, &quot;male&quot;],[&quot;B&quot;, &quot;female&quot;], [&quot;C&quot;, &quot;male&quot;]]df = pd.DataFrame(students, columns = [&quot;name&quot;, &quot;gender&quot;]) # æŒ‡å®šæ¬„ä½åç¨± df è³‡æ–™ç‚ºå­—å…¸(dictionary)æ™‚1234567891011import pandas as pdstudents = { &quot;name&quot;: [&quot;A&quot;,&quot;B&quot;, &quot;C&quot;], &quot;stid&quot;: [1,2, 3], &quot;gender&quot;: [&quot;male&quot;,&quot;female&quot;, &quot;male&quot;], &quot;age&quot;: [20, 30, 40], &quot;city&quot;: [&quot;é«˜é›„&quot;, &quot;å°åŒ—&quot;, &quot;å°ä¸­&quot;]}df = pd.DataFrame(students)df è®€å–è³‡æ–™pandasæ”¯æ´çš„è³‡æ–™æ ¼å¼å¾ˆå¤šç¨®ï¼Œå¸¸è¦‹çš„æ ¼å¼åŒ…å«: read_csv() è®€å–*.csvæ ¼å¼çš„æª”æ¡ˆ read_html() è®€å–*.hemlæ ¼å¼çš„æª”æ¡ˆ read_sql() è®€å–*.csvæ ¼å¼çš„æª”æ¡ˆ read_excel() è®€å–*.xlsxæ ¼å¼çš„æª”æ¡ˆ read_json() è®€å–*.jsonæ ¼å¼çš„æª”æ¡ˆ å¯«å…¥è³‡æ–™ to_csv() è®€å–*.csvæ ¼å¼çš„æª”æ¡ˆ to_html() è®€å–*.hemlæ ¼å¼çš„æª”æ¡ˆ to_sql() è®€å–*.csvæ ¼å¼çš„æª”æ¡ˆ to_excel() è®€å–*.xlsxæ ¼å¼çš„æª”æ¡ˆ to_json() è®€å–*.jsonæ ¼å¼çš„æª”æ¡ˆ èªªæ˜ encoding=&quot;utf-8-sig&quot;: å°‡BOMå»é™¤çš„utf-8ç·¨ç¢¼ index_col=0: å»é™¤ç´¢å¼•æ¬„ä½ å¯«å…¥è³‡æ–™ç¯„ä¾‹(*.csvç‚ºä¾‹)1234567891011121314import pandas as pdscores = [ [60, 70, 80], [90, 66, 50], [47, 50, 88]]students = [ &quot;student1&quot;, &quot;student2&quot;, &quot;student3&quot;]subjects = [ &quot;åœ‹&quot;, &quot;è‹±&quot;, &quot;æ•¸&quot;]df = pd.DataFrame(scores, columns=subjects, index=students )print(df)df.to_csv(&quot;scores.csv&quot;, encoding=&quot;utf-8-sig&quot;) è®€å–è³‡æ–™ç¯„ä¾‹12345import pandas as pd# è®€æª”data = pd.read_csv(&quot;scores.csv&quot;, encoding=&quot;utf-8-sig&quot;, index_col=0)data.head() è®€å–ç·š.csvæª”é€éæ­£ç¢ºçš„URLå°±å¯ä»¥è®€å–ç¶²è·¯ä¸Šçš„ä»»æ„.csvæª”æ¡ˆè½‰æˆDataFrameã€‚ 12df = pd.read_csv('http://bit.ly/kaggletrain')df.head() é¡¯ç¤ºå‰5ç­†è³‡æ–™df.head(): ä½¿ç”¨.head()å¯ä»¥é¡¯ç¤ºè³‡æ–™ï¼Œ(é è¨­5ç­†)ï¼Œç•¶ç„¶ä¹Ÿèƒ½è‡ªè¨‚ï¼Œåªéœ€è¦å…§åŠ ä¸Šè¦é¡¯ç¤ºè³‡æ–™çš„ç­†æ•¸ é¡¯ç¤ºæœ€å¾Œä¸€ç­†df.head(1) é¡¯ç¤ºå¾Œ5ç­†è³‡æ–™df.tail():è¦é¡¯ç¤ºæœ€å¾Œäº”ç­†è³‡æ–™å‰‡å¯ä»¥ä½¿ç”¨df.tail()ï¼Œå’Œdf.head()ä¸€æ¨£ï¼Œå¯ä»¥åœ¨æ‹¬è™Ÿå…§åŠ ä¸Šè¦é¡¯ç¤ºè³‡æ–™çš„ç­†æ•¸ è³‡æ–™è³‡è¨Šä½¿ç”¨df.info()å¯ä»¥çœ‹åˆ°è©²æª”æ¡ˆè³‡è¨Š çŸ¥é“æª”æ¡ˆçš„å¤§å°å›å‚³è¨Šæ¯ç‚ºï¼šé¡¯ç¤º(rows,columns) ç¯©é¸è³‡æ–™é¸æ“‡ä¸€é …è³‡æ–™df[&quot;æ¬„ä½åç¨±&quot;]å‡è¨­æˆ‘å€‘æƒ³è¦é¸æ“‡æŸå€‹ç§‘ç›®çš„æ¬„ä½æ‰€æœ‰è³‡æ–™ï¼Œä»¥è‹±æ–‡ç‚ºä¾‹ 1df[&quot;è‹±&quot;] é¸æ“‡æŸå¹¾ç­†è³‡æ–™å‡è¨­æˆ‘å€‘è¦å‰å…©ç­†è‹±æ–‡ç§‘ç›®çš„æˆç¸¾è³‡æ–™ 1df[&quot;è‹±&quot;][:2] é¸æ“‡å¤šé …è³‡æ–™è¦æ“´å¢é¸æ“‡çš„æ¬„ä½å¾ˆç°¡å–®ï¼Œç”¨ä¸€å€‹listçš„è³‡æ–™çµæ§‹å³å¯å®Œæˆã€‚df[['æ¬„ä½åç¨±','æ¬„ä½åç¨±']]ä»¥å–å¾—è‹±æ–‡ã€æ•¸å­¸é€™å…©æ ¼æ¬„ä½ç‚ºä¾‹ 1df[[&quot;è‹±&quot;, &quot;æ•¸&quot;]].head() loc[&quot;x_label&quot;, &quot;y_label&quot;]loc[&quot;x_label&quot;, &quot;y_label&quot;]åŸºæ–¼è¡Œ(column)å’Œåˆ—(row)é€²è¡Œè³‡æ–™ç¯©é¸ï¼Œx_labelè¡¨ç¤ºåˆ—(row)çš„ç¯©é¸ï¼Œè€Œy_labelå‰‡æ˜¯åŸºæ–¼è¡Œ(column)ã€‚ ç¯„ä¾‹åŸå§‹è³‡æ–™:é‡å°student1è‡³student3åŠåœ‹æ–‡è‹±æ–‡ç§‘é€²è¡Œç¯©é¸ï¼Œæ¡ç”¨åˆ‡ç‰‡(slice)çš„æ–¹å¼ã€‚ 12# ç”¨indexçš„æ¨™ç±¤ä¾†ç¯©é¸å‡ºè³‡æ–™ concat_dfconcat_df.loc[&quot;student1&quot;:&quot;student3&quot;, :&quot;è‹±&quot;] iloc[]åŸºæ–¼è¡Œå’Œåˆ—çš„ç´¢å¼•å€¼é€²è¡Œç¯©é¸ï¼Œç´¢å¼•å€¼éƒ½æ˜¯å¾0é–‹å§‹ã€‚ ç¯„ä¾‹ç¯©é¸åˆ—(row)çš„å‰äº”ç­†åŠè¡Œ(column)çš„å‰å…©ç­† 12# ç”¨indexä½ç½®ä¾†ç¯©é¸å‡ºè³‡æ–™concat_df.iloc[:5, :2] é‹ç®—å­ç¯©é¸è³‡æ–™é™¤äº†ä¸Šè¿°æ–¹æ³•å¤–ï¼Œpandasä¹Ÿå¯ä»¥åˆ©ç”¨é‹ç®—å­çš„æ–¹å¼ä¾†ç¯©é¸æ¢ä»¶ï¼Œå¦‚æ¢ä»¶é‹ç®—çš„:== !=ã€&gt; &lt;ã€&gt;= &lt;=ï¼Œ ç¯„ä¾‹å‡è¨­è¦ç¯©é¸å‡ºè‹±æ–‡åˆ†æ•¸&gt;70åˆ†çš„å­¸ç”Ÿ 12# é‹ç®—å­ç¯©é¸è³‡æ–™concat_df[&quot;è‹±&quot;] &gt; 70 åŸ·è¡Œç¯„ä¾‹ç¨‹å¼ç¢¼å¾Œå¯çœ‹åˆ°å›å‚³æ¢ä»¶é¡¯ç¤ºTrueæˆ–Falseï¼Œæ¥è‘—ä»¥Trueæˆ–Falseç•¶ä½œç¯©é¸æ¢ä»¶ 12condition = (concat_df[&quot;è‹±&quot;] &gt; 70)concat_df[condition] å¤šå€‹é‹ç®—å­ç¯©é¸è³‡æ–™å¦‚æœéæ¿¾æ¢ä»¶ä¸åªä¸€å€‹ï¼Œå¸ƒæ—é‹ç®—å­å°±æ´¾ä¸Šç”¨å ´äº†ï¼ ç¯„ä¾‹ç¯©é¸å‡ºåœ‹ç­‰æ–¼80åˆ†ã€æ•¸å­¸å¤§æ–¼60åˆ†ã€è‹±æ–‡å¤§æ–¼70åˆ†çš„å­¸ç”Ÿï¼Œä¸‰å€‹æ¢ä»¶éƒ½é ˆç¬¦åˆçš„è©±ç”¨andé‹ç®—ï¼Œæˆ–æ˜¯&amp;ç¬¦è™Ÿã€‚ 1234condition1 = (concat_df[&quot;åœ‹&quot;] == 80)condition2 = (concat_df[&quot;æ•¸&quot;] &gt; 60)condition3 = (concat_df[&quot;è‹±&quot;] &gt; 70)concat_df[(condition1 &amp; condition2 &amp; condition3)] è³‡æ–™æ–°å¢æ–°å¢columnä¸¦åŠ ä¸Šè³‡æ–™ï¼Œæ¡ç”¨insert()æ–¹æ³•df.insert(ä½ç½®ç´¢å¼•å€¼,column=&quot;æ¬„ä½åç¨±&quot;,value=&quot;è©²ç­†è³‡æ–™çš„å€¼&quot;) æ–°å¢ä¸€å€‹å«ç‰©ç†çš„æ¬„ä½åç¨±åœ¨ç´¢å¼•å€¼ç‚º1(ç¬¬äºŒå€‹æ¬„ä½)çš„ä½ç½®ï¼Œè£¡é¢çš„å€¼æ˜¯[80, 90, 100] 12phy_arr=[80, 90, 100]df.insert(1, column=&quot;ç‰©ç†&quot;, value=phy_arr) ç©ºçš„è³‡æ–™å¡«å……æŠŠNaNçš„è³‡æ–™ä»£æ›æˆè‡ªè¨‚çš„è³‡æ–™ï¼Œèªæ³•: fillna(è¦æ›¿æ›çš„å€¼)ç¯„ä¾‹: 1df.fillna(0) è³‡æ–™åˆªé™¤DataFrame.drop(labels=None,axis=0, index=&quot;ç´¢å¼•å€¼&quot;, columns=&quot;æ¬„ä½å&quot;, inplace=False) åƒæ•¸èªªæ˜ï¼š labels: è¦åˆªé™¤çš„è¡Œ/åˆ—çš„åå­— axis: é è¨­ç‚º0ï¼ŒæŒ‡åˆªé™¤åˆ—(row);è‹¥è¦åˆªé™¤è¡Œ(column)æ™‚è¦æŒ‡å®šaxis=1ï¼› index: ç›´æ¥æŒ‡å®šè¦åˆªé™¤çš„åˆ—(row) columns: ç›´æ¥æŒ‡å®šè¦åˆªé™¤çš„è¡Œ(column) inplace =Falseï¼Œé è¨­ä¸æ”¹è®ŠåŸè³‡æ–™ï¼Œè€Œæ˜¯å›å‚³ä¸€å€‹åŸ·è¡Œåˆªé™¤æ“ä½œå¾Œçš„æ–°dataframeï¼› inplace=Trueï¼Œæœƒåœ¨åŸæ•¸æ“šä¸Šé€²è¡Œåˆªé™¤æ“ä½œï¼Œç„¡è¿”å›å€¼ã€‚ å› æ­¤ï¼Œåˆªé™¤è¡Œåˆ—æœ‰å…©ç¨®æ–¹å¼ï¼š1ï¼‰labels=None,axis=0çš„çµ„åˆ2ï¼‰indexæˆ–columnsç›´æ¥æŒ‡å®šè¦åˆªé™¤çš„è¡Œæˆ–åˆ— æ³¨æ„ æŒ‡å®šåƒæ•¸axis = 0è¡¨ç¤ºè¦åˆªé™¤çš„å€¼(row)ï¼Œaxis = 1è¡¨ç¤ºè¦åˆªé™¤æ¬„ä½(column)ã€‚ åˆªé™¤è³‡æ–™çš„è©±ï¼Œé è¨­ä¸æ”¹è®ŠåŸè³‡æ–™ï¼Œè€Œæ˜¯å›å‚³åˆªé™¤å¾Œçš„æ–°è¡¨æ ¼ï¼Œæ‰€ä»¥è¦å–æ–°è¡¨æ ¼çš„è³‡æ–™è¦æ¡ç”¨è³¦å€¼çš„æ–¹å¼ åˆªé™¤æ¬„ä½åˆ—(column)å‡è¨­ä»Šå¤©è¦åˆªé™¤ç‰©ç† 12345# åˆªé™¤æ¬„ä½df.drop(&quot;ç‰©ç†&quot;, axis=1)# æˆ–æ˜¯df.drop(columns=&quot;ç‰©ç†&quot;) åˆªé™¤åˆ—(row)åˆªé™¤ç´¢å¼•å€¼(index)ç‚ºstudent1çš„åˆ— 1234df.drop(&quot;student1&quot;)#æˆ–æ˜¯df.drop(index=[&quot;student1&quot;]) è‹¥è¦åˆªé™¤å¤šå€‹å€¼ï¼Œçµ¦å®šä¸€å€‹listå³å¯ã€‚ åˆªé™¤å¤šå€‹åˆ—ä¹ŸåŒç†ã€‚ åˆªé™¤ç©ºå€¼æœ‰æ™‚å€™å¾—åˆ°çš„è³‡æ–™ä¸ä¸€å®šæ˜¯å®Œå…¨éƒ½æœ‰æ•¸å€¼ï¼Œå¾ˆå¯èƒ½å«æœ‰NaNï¼Œé€™æ™‚å€™å°±éœ€è¦æŠŠå®ƒçµ¦åˆªé™¤ã€‚df.dropna() è³‡æ–™æ’åºsort_values()æŒ‡å®šæ¬„ä½çš„æ•¸å€¼æ’åºæ¡ç”¨.sort_values(&quot;æ¬„ä½å&quot;, ascending=True, axis=0)æ–¹æ³•ï¼Œascending=Trueå’Œaxis=0ç‚ºé è¨­çš„æ’åˆ—æ–¹å¼ 1234df.sort_values(&quot;ç‰©ç†&quot;, ascending=True)# é †åºåè½‰df.sort_values(&quot;ç‰©ç†&quot;, ascending=False) ç•¶axis=1æ™‚ï¼Œæ”¹ä»¥è¡Œ(columns)ç‚ºæ’åºæ–¹å¼1234df.sort_values(&quot;student1&quot;, axis=1)# åè½‰df.sort_values(&quot;student1&quot;, ascending=False, axis=1) åˆä½µè³‡æ–™åˆä½µå¤šå€‹CSVæª”æˆå–®ä¸€DataFrameï¼Œè‹¥é‡ä¸Šç›¸åŒé¡å‹çš„è³‡æ–™è¢«åˆ†æˆå¤šå€‹ä¸åŒçš„ CSVæª”çš„æƒ…å½¢ï¼Œå¯ä»¥å°‡ä¹‹åˆä½µã€‚ ç¯„ä¾‹å‡è¨­æœ¬åœ°åˆ†åˆ¥æœ‰scores1.csvã€scores2.csvå…©å€‹æª”æ¡ˆã€‚ 12345scores1_df = pd.read_csv(&quot;scores1.csv&quot;, encoding=&quot;utf-8-sig&quot;, index_col=0)print(scores1_df)# ========scores2_df = pd.read_csv(&quot;scores2.csv&quot;, encoding=&quot;utf-8-sig&quot;, index_col=0)print(scores2_df) è®€å–DataFrameså¾Œç™¼ç¾æ ¼å¼ä¸€æ¨¡ä¸€æ¨£ï¼Œå¯ä»¥å°‡å…¶é€²è¡Œåˆä½µã€‚ä½¿ç”¨pd.concat å°‡è³‡æ–™æ ¼å¼ç›¸åŒä½†åˆ†æ•£åœ¨ä¸åŒCSVæª”åˆä½µæˆå–®ä¸€ DataFrameï¼Œæ–¹ä¾¿ä¹‹å¾Œè™•ç†ã€‚ 12concat_df = pd.concat([scores1_df, scores2_df],axis=0)concat_df æ”¹è®Šæ¬„ä½åç¨±æ–¹æ³•ä¸€: df.rename(rename_dic, axis=1)é€édf.rename(rename_dic, axis=1)æ–¹æ³•ï¼Œå›å‚³ä¸€å€‹æ–°çš„dfï¼Œä¸æ”¹è®ŠåŸå§‹dfã€‚ pandasé è¨­è™•ç†çš„è»¸ç‚ºåˆ—(row)ï¼šä»¥axis=0è¡¨ç¤ºï¼›è€Œaxis=1è¡¨ç¤ºæƒ³ä»¥è¡Œ(column)ç‚ºå–®ä½ 1234## æ–¹æ³•ä¸€: df.rename(rename_dic, axis=1)ï¼Œä¸æ”¹è®ŠåŸå§‹dfrename_dic = {&quot;age&quot;: &quot;a&quot;, &quot;city&quot;: &quot;ct&quot;}new_df = df.rename(rename_dic, axis=1) new_df æ–¹æ³•äºŒ: df.columns()é€édf.columns()æ–¹æ³•ï¼Œæœƒæ”¹è®ŠåŸå§‹dfï¼Œå°ç›®æ¨™æ¬„ä½é‡æ–°å‘½åã€‚ 123## æ–¹æ³•äºŒ: df.columns() df.columns = ['na', 'id'] + list(df.columns[2:])df åƒè€ƒè³‡æ–™Python for Data Sciencetutorials[ç¬¬ 14 å¤©] å¸¸ç”¨å±¬æ€§æˆ–æ–¹æ³•ï¼ˆ3ï¼‰Data Frame è³‡æ–™ç§‘å­¸å®¶çš„ pandas å¯¦æˆ°æ‰‹å†Šï¼šæŒæ¡ 40 å€‹å¯¦ç”¨æ•¸æ“šæŠ€å·§ [Day08]Pandasè³‡æ–™çš„å–å¾—èˆ‡ç¯©é¸ï¼","link":"2019/09/04/Python/Python/%5BPython%5D%20Pandas%E8%B3%87%E6%96%99%E8%99%95%E7%90%86%E7%B3%BB%E5%88%971-%20%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%8F%8A%E6%93%8D%E4%BD%9C/"},{"title":"[Python] ä¸²åˆ—(List)&amp;å…ƒçµ„(Tuple)","text":"å‰è¨€ä¸²åˆ—æ˜¯å¤ æä¾›å„²å­˜è³‡æ–™çš„è¨˜æ†¶é«”ç©ºé–“ï¼ŒPythonä¸­çš„ä¸²åˆ—(List)é¡ä¼¼å…¶ä»–ç¨‹å¼èªè¨€ä¸­çš„é™£åˆ—(Array)ï¼Œæ˜¯ä¸€å€‹æœ‰é †åºæ€§çš„å…ƒç´ é›†åˆï¼Œè‹¥è¦å¯æ ¹æ“šlistä¸­çš„å¯¦éš›å…§å®¹æˆ–æ˜¯è©²å…ƒç´ åœ¨listä¸­çš„ä½ç½®ç”¨ç´¢å¼•å€¼(index)é€²è¡ŒæŸ¥æ‰¾ã€‚ ä¸²åˆ—(List)å»ºç«‹ç©ºä¸²åˆ—1arr = [] çµ¦å®šåˆå§‹å€¼å¾—ä¸²åˆ—1arr = [1, 2, 3, 4] ä¸²åˆ—å…§å…ƒç´ çš„è³‡æ–™å‹æ…‹å¯ä»¥ç›¸åŒæˆ–ä¸åŒï¼Œç”šè‡³å¯ä»¥æ˜¯ä¸²åˆ—1234list1 = [1, 2, 3, 4, 5] #å…ƒç´ çš†æ•´æ•¸list2 = [&quot;hey&quot;, &quot;hello&quot;, &quot;hi&quot;] #å…ƒç´ çš†å­—ä¸²list3 = [3, &quot;hey&quot;, True] #åŒ…å«ä¸åŒè³‡æ–™å‹æ…‹list4 = [&quot;Tom&quot;, 180, 65, &quot;student&quot;, ['Go', 'Python']] # listå…§ä¹Ÿå¯ä»¥æ”¾å…¥ä¸²åˆ— æ³¨æ„ç´¢å¼•å€¼æ˜¯å¾0é–‹å§‹è¨ˆ ç´¢å¼•å€¼ä¸å¯è¶…å‡ºä¸²åˆ—ç¯„åœï¼Œå¦å‰‡æœƒç”¢ç”ŸéŒ¯èª¤123list3 = [3, &quot;hey&quot;, True] print(list3[5])# list index out of range è² ç´¢å¼•å€¼ä¹ŸåŒæ¨£ä¸å¯è¶…å‡ºä¸²åˆ—ç¯„åœ å–å¾—ä¸²åˆ—é•·åº¦ä½¿ç”¨len()æ–¹æ³•ï¼Œå›å‚³è©²ä¸²åˆ—çš„é•·åº¦ï¼Œå¾—çŸ¥ä¸²åˆ—å…§åŒ…å«å¤šå°‘å…ƒç´ ã€‚ å–å¾—listå…§çš„å…ƒç´ ç¯„åœå–å€¼è‹¥æƒ³è¦å–å¾—ä¸€é€£ä¸²æŸå€‹ç¯„åœçš„å€¼ï¼Œä½¿ç”¨æ–¹æ³•è·Ÿåˆ‡ç‰‡ç›¸ä¼¼(Slice)ï¼Œçµæ§‹å¦‚ä¸‹: 1my_list[start:end:sep] å…¶ä¸­: start: é–‹å§‹ç´¢å¼•çš„ä½ç½®ï¼Œé è¨­çš„ç´¢å¼•ä½ç½®ç‚ºç¬¬ä¸€å€‹ end: çµæŸç´¢å¼•çš„ä½ç½®ï¼Œé è¨­çš„ç´¢å¼•ä½ç½®ç‚ºæœ€å¾Œä¸€å€‹ sep: ç´¢å¼•çš„é–“éš”ï¼Œé è¨­ç‚º1 ç¯„åœå–å€¼æ›´å¤šçš„æ‡‰ç”¨è‹¥ç¯„åœå–å€¼çš„startè¢«çœç•¥ï¼ŒPythonæœƒè‡ªå‹•é¸å–é è¨­çš„ç´¢å¼•ä½ç½® (ç¬¬ä¸€å€‹;index=0) ï¼Œè€Œç¯„åœå–å€¼çš„endè¢«çœç•¥ï¼Œå‰‡è‡ªå‹•é¸å–é è¨­çš„ç´¢å¼•ä½ç½® (æœ€å¾Œä¸€å€‹;index=-1)ã€‚ å–å‡ºä¾†çš„å€¼åªæœƒåŒ…å«é–‹é ­ï¼Œä¸æœƒåŒ…å«çµæŸçš„index å–å¾—æœ€å¾Œä¸€å€‹å…ƒç´ è‹¥æƒ³è¦å–å¾—listä¸­çš„æœ€å¾Œä¸€å€‹å…ƒç´ ï¼Œindexå€¼è¼¸å…¥-1ã€‚ä»¥æ­¤é¡æ¨ï¼Œè‹¥è¦é¸æ“‡å€’æ•¸ç¬¬äºŒå€‹ä½ç½®çš„å…ƒç´ ï¼Œindexå€¼å‰‡å¡«å…¥-2ã€‚ 12list3 = [3, &quot;hey&quot;, True] print(list3[-1]) # True è¤‡è£½ä¸²åˆ—çœç•¥startåŠendå…©å€‹ç´¢å¼•å€¼ï¼Œåªç•™ä¸€å€‹å†’è™Ÿåœ¨ä¸­æ‹¬è™Ÿä¸­ï¼Œå¦‚[:]å°±å¯ä»¥è¤‡è£½æ•´å€‹ä¸²åˆ—ã€‚ 123arr=[1,3,5] # å»ºç«‹ä¸€å€‹arrä¸²åˆ—arr1=arr[:] # å°‡arrä¸²åˆ—è¤‡è£½åˆ°arr1ä¸²åˆ—print(arr1) # å°å‡ºarr1ä¸²åˆ—ï¼š [1,3,5] é‡è¤‡næ¬¡list1 * næ–¹æ³•ï¼Œç¬¦è™Ÿä½¿ç”¨*ï¼Œæ¬¡æ•¸ç‚ºnã€‚ 1234arr = ['tom', 'jean', 'hank']arr1 = arr * 2print(arr1)# ['tom', 'jean', 'hank', 'tom', 'jean', 'hank'] å°å‡ºåˆ‡ç‰‡çš„ä¸²åˆ—12345numbs=[1,2,3,4,5]for num in numbs[1:3] : # å°å‡ºnumbsä¸²åˆ—ä¸­ç´¢å¼•å€¼ç‚º1å’Œ2çš„å…ƒç´  print(num)# 2# 3 å¤šç¶­ä¸²åˆ—å…§å…ƒç´ çš„å­˜å–ä½¿ç”¨å¤šå€‹ä¸­æ‹¬è™Ÿ[]çµ„åˆä¾†å®Œæˆã€‚å¦‚:my_list[index][index] 123list4 = [&quot;Tom&quot;, 180, 65, &quot;student&quot;, ['Go', 'Python']] print(list4[4]) # ['Go', 'Python']print(list4[4][0]) # Go å¢åŠ å…ƒç´ append()ä½¿ç”¨append() æ–¹æ³•å°‡æ–°å…ƒç´ å¢åŠ åˆ°listæœ€å¾Œé¢ã€‚ 123arr = ['hi', 'hello', 'hey']arr.append('ya')print(arr) # ['hi', 'hello', 'hey', 'ya'] insert()æŒ‡å®šæ‰€å¢åŠ å…ƒç´ çš„ä½ç½®ï¼Œä½¿ç”¨insert() æ–¹æ³•ï¼Œçµæ§‹æœƒæ˜¯:myList.insert(index, element)ã€‚ index: è¡¨æ’å…¥ä½ç½® element: è¡¨æ”¾å…¥çš„å…ƒç´ 123arr = ['hi', 'hello', 'hey']arr.insert(1, &quot;ya&quot;)print(arr) # ['hi', 'ya', 'hello', 'hey'] extend()extend() æ–¹æ³•å¯ä»¥ä¸€æ¬¡åŠ å…¥å¾ˆå¤šå€‹å€¼æˆ–å°‡æŸå€‹listä¸­çš„å…ƒç´ åŠ åˆ°å¦ä¸€å€‹listã€‚ 1234arr = ['hi', 'hello', 'hey']arr1 = [1, 2, 2]arr.extend(arr1)print(arr) # ['hi', 'hello', 'hey', 1, 2, 2] æ³¨æ„ï¼šå¦‚æœæ˜¯è¦ä¸€æ¬¡æ·»åŠ å¤šå€‹å…ƒç´ ï¼Œä¸èƒ½ä½¿ç”¨insert()æˆ–append()æ–¹æ³•ã€‚ ç¯„ä¾‹(æ¡ç”¨append()å¢åŠ )1234arr = ['hi', 'hello', 'hey']arr1 = [1, 2, 2]arr.append(arr1)print(arr) # ['hi', 'hello', 'hey', [1, 2, 2]] ç¯„ä¾‹(æ¡ç”¨insert()å¢åŠ )1234arr = ['hi', 'hello', 'hey']arr1 = [1, 2, 2]arr.insert(2,arr1)print(arr) # ['hi', 'hello', [1, 2, 2], 'hey'] ä¸Šè¿°ç¯„ä¾‹æœƒç™¼ç¾è‹¥æ¡ç”¨apppend()æˆ–æ˜¯insert()æ–¹æ³•ä¸€æ¬¡æ–°å¢listä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œæœƒç™¼ç”Ÿç›´æ¥æŠŠlistæ”¾å…¥å¦ä¸€å€‹listçš„æƒ…å½¢ã€‚ç°¡å–®ä¾†èªªï¼Œå‰å…©è€…æ˜¯ä»¥æ•´å€‹list çš„è³‡æ–™å‹æ…‹è¢«å¡å…¥ï¼Œè€Œä¸æ˜¯ä»¥å…ƒç´ çš„å½¢å¼è¢«åŠ å…¥ã€‚ Liståˆä½µPythonåœ¨åˆä½µä¸²åˆ—ä¸Šæä¾›ä¸€å€‹ç°¡å–®çš„æ–¹æ³•: +ï¼Œèˆ‡å­—ä¸²æ‹¼æ¥ç”¨æ³•ç›¸åŒï¼Œå°‡å¤šå€‹ä¸²åˆ—ç”¨+é€²è¡Œåˆä½µã€‚ 1234num = [23, 4, 53, 5 ,35, 6]strArr = [&quot;hi&quot;, &quot;hello&quot;, &quot;hey&quot;]# [23, 4, 53, 5, 35, 6, 'hi', 'hello', 'hey'] ç§»é™¤å…ƒç´ remove()å¦‚æœä¸ç¢ºå®šæˆ–ä¸åœ¨æ„å…ƒç´ åœ¨listä¸­çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨remove()æ ¹æ“šæŒ‡å®šçš„å€¼ä¾†åˆªé™¤å…ƒç´ ã€‚ 123arr = ['hi', 'hello', 'hey']arr.remove(&quot;hello&quot;)print(arr) # ['hi', 'hey'] pop()è—‰ç”±ç´¢å¼•å€¼ä½ç½®ä¾†æŒ‡å®šåˆªé™¤çš„å…ƒç´ ï¼Œä¸”æœƒå›å‚³è¢«åˆªé™¤çš„å€¼ã€‚çµæ§‹ç‚ºmyList.pop(index) è‹¥popå…§çœç•¥indexå€¼çš„è©±ï¼Œé è¨­ç‚ºåˆªé™¤æœ€å¾Œä¸€å€‹å…ƒç´ ï¼Œ 1234567891011# ==== åˆªé™¤ç´¢å¼•å€¼ç‚º0çš„å…ƒç´  =======arr = ['hi', 'hello', 'hey']word = arr.pop(0)print(arr) # ['hello', 'hey']print(word) # hi# ==== é è¨­ç‚ºåˆªé™¤æœ€å¾Œä¸€å€‹å…ƒç´  =======arr = ['hi', 'hello', 'hey']word = arr.pop()print(arr) # ['hi', 'hello']print(word) # hey delåˆªé™¤æŒ‡å®šä½ç½®å…ƒç´ ï¼Œä½¿ç”¨delæ–¹æ³•å¯ä»¥åˆªé™¤ä¸€å€‹å…ƒç´ ï¼Œç•¶å…ƒç´ åˆªé™¤ä¹‹å¾Œï¼Œä½æ–¼å®ƒå¾Œé¢çš„å…ƒç´ æœƒè‡ªå‹•å¾€å‰å¡«è£œç©ºå‡ºä¾†çš„ä½ç½®ã€‚ 123arr = ['hi', 'hello', 'hey']del arr[1]print(arr) æ’åºä½¿ç”¨sort()æ–¹æ³•å°listå…§çš„å…ƒç´ é€²è¡Œæ’åºï¼Œé è¨­æƒ…æ³ä¸‹ï¼Œå­—ä¸²æœƒç…§å­—æ¯é †åºæ’åˆ—ã€æ•¸å­—å‰‡æœƒæ˜¯éå¢æ’åˆ—ã€‚ å­—æ¯é †åºæ’åˆ—123arr = ['tom', 'jean', 'hank']word = arr.sort() print(arr) # ['hank', 'jean', 'tom'] æ•¸å­—éå¢æ’åˆ—123num = [23, 4, 53, 5 ,35, 6]num.sort()print(num) # [4, 5, 6, 23, 35, 53] sort()æ–¹æ³•æœƒæ”¹è®ŠåŸå§‹list ä¸æ”¹è®ŠåŸå§‹listçš„æ–¹æ³•è¤‡è£½ä¸€å€‹æ’åºéçš„listè‹¥æƒ³è¦ä¿å­˜å®Œæ•´çš„åŸå§‹è³‡æ–™ï¼Œä½†åŒæ™‚åˆéœ€è¦æœ‰è¢«æ’åºéçš„è³‡æ–™ã€‚å¯ä»¥ä½¿ç”¨sortedæ–¹æ³•ã€‚ 1234num = [23, 4, 53, 5 ,35, 6]newNum = sorted(num)print(num) # [23, 4, 53, 5, 35, 6]print(newNum) # [4, 5, 6, 23, 35, 53] æ’åºåè½‰æ•¸å­—éæ¸›æ’åˆ—ã€æˆ–æ˜¯ä¾ç…§å­—æ¯é †åºçš„åå‘æ’åˆ—ã€‚ 123num = [23, 4, 53, 5 ,35, 6]num.sort()print(num) # [4, 5, 6, 23, 35, 53] æ‹¬è™Ÿä¸­()å¯ä»¥è¨­å®šæ’åºçš„æ¢ä»¶åœ¨åŸæœ¬çš„sort()å…§åŠ ä¸Šåƒæ•¸reverse=Trueå³å¯ã€‚ 123num = [23, 4, 53, 5 ,35, 6]num.sort(reverse=True)print(num) # [53, 35, 23, 6, 5, 4] åè½‰æŠŠ listå…§çš„å…ƒç´ é †åºåè½‰å¯ä»¥ä½¿ç”¨reverse()ï¼Œæœƒç…§ç•¶å‰çš„é †åºé€²è¡Œåè½‰ã€‚ 123num = [23, 4, 53, 5 ,35, 6]num.reverse()print(num) # [6, 35, 5, 53, 4, 23] æŸ¥æ‰¾/æª¢æ¸¬/è¨ˆç®—æ‰¾æ¥µå¤§(max())ã€min(sum())èˆ‡è¨ˆç®—listå…§å…ƒç´ çš„ç¸½å’Œ(sum())1234num = [23, 4, 53, 5 ,35, 6]print(max(num)) # 53print(min(num)) # 4 print(sum(num)) # 126 æŸ¥æ‰¾æŸå€‹å…ƒç´ åœ¨listå…§çš„ç´¢å¼•å€¼æ¡ç”¨.index(element)çš„æ–¹æ³•ï¼Œelementç‚ºè¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œå›å‚³å€¼ç‚ºè©²å…ƒç´ çš„åœ¨listä¸­çš„ä½ç½®(indexå€¼) 123arr = ['tom', 'jean', 'hank']word = arr.index(&quot;jean&quot;) print(word) # 1 å¦‚æœè¼¸å…¥çš„å…ƒç´ ä¸¦ä¸åŒ…å«åœ¨listè£¡é¢çš„è©±ï¼Œæœƒå‡ºç¾ValueError 12345arr = ['tom', 'jean', 'hank']word = arr.index(&quot;yo&quot;)print(word)# ValueError: 'yo' is not in list æª¢æ¸¬æŸå€¼æ˜¯å¦ä¸åœ¨ä¸²åˆ—ä¸­ï¼šinã€not inlistå¯æ­é…Pythonä¸­çš„é‹ç®—å…ƒinåˆ¤æ–·ç›®æ¨™å…ƒç´ æ˜¯å¦åœ¨è©²listè£¡é¢ï¼Œå›å‚³å€¼ç‚ºTrueæˆ–Falseçš„boolå€¼ã€‚è‹¥é‹ç®—å…ƒç‚ºnot inï¼Œåˆ¤æ–·å¾Œçš„å›å‚³çµæœèˆ‡inç›¸åã€‚ 123arr = ['tom', 'jean', 'hank']print(&quot;hello&quot; in arr) # Falseprint(&quot;hello&quot; not in arr) # True åŒæ™‚å–å¾—ç›®æ¨™å…ƒç´ å€¼èˆ‡indexå€¼ä½¿ç”¨enumerate()æ–¹æ³•ï¼Œé…åˆfor loopé€²è¡Œå¯¦ä½œã€‚ 12345678for index, item in enumerate(arr): print(index, item)&quot;&quot;&quot;çµæœ0 tom1 jean2 hank&quot;&quot;&quot; indexå€¼å¯ä»¥çœç•¥ï¼Œå›å‚³å€¼ç‚ºtupleçš„è³‡æ–™çµæ§‹123456789for item in enumerate(arr): print(item)&quot;&quot;&quot;çµæœ(0, 'tom')(1, 'jean')(2, 'hank')&quot;&quot;&quot; æ›´æ”¹indexèµ·å§‹å€¼enumerate() å…§åŠ ä¸Šstartåƒæ•¸ä¸¦çµ¦indexå€¼å³å¯ã€‚ 12345678910111213141516for index, item in enumerate(arr, start=1): print(index, item)&quot;&quot;&quot;1 tom2 jean3 hank&quot;&quot;&quot;# ======= ç„¡index ========for item in enumerate(arr, start=1): print( item)&quot;&quot;&quot;(1, 'tom')(2, 'jean')(3, 'hank')&quot;&quot;&quot; ä¸Šé¢çš„ç¯„ä¾‹å°‡indexèµ·å§‹å€¼å¾é è¨­çš„0æ”¹ç‚º1 listè½‰æ›ç‚ºå­—ä¸²ä½¿ç”¨.join()æ–¹æ³•ï¼Œæ ¼å¼ç‚ºnewList = &quot;seperator&quot;.join(listName)ï¼Œå…¶ä¸­seperatoræ›¿æ›æˆè¦éš”é–‹çš„ç¬¦è™Ÿã€‚ 12345arr = ['There', 'are', 'tom', 'jean', 'hank']newstr = '_'.join(arr)newstr1 = ' '.join(arr)print(newstr) # There_are_tom_jean_hank print(newstr1) # There are tom jean hank æŠŠå­—ä¸²åˆ†å‰²æˆliståœ¨åŸæœ‰çš„å­—ä¸²ä¸Šä½¿ç”¨.split()åšåˆ†å‰²ï¼Œé è¨­ä»¥ç©ºç™½åšåˆ†å‰²çš„ç¬¦è™Ÿã€‚ 123newstr = &quot;There_are_tom_jean_hank&quot;newstr1 = newstr.split(&quot;_&quot;)print(newstr1) # ['There', 'are', 'tom', 'jean', 'hank'] å…ƒçµ„(Tuple)Tupleå°±æ˜¯ä¸å¯åšä¿®æ”¹çš„Listï¼Œå…ƒçµ„çš„çµæ§‹èˆ‡ä¸²åˆ—å®Œå…¨ç›¸åŒï¼Œå·®åˆ¥åœ¨æ–¼å…ƒç´ å€‹æ•¸åŠå…ƒç´ å€¼çš†ä¸èƒ½æ”¹è®Šï¼Œä½†ä¸²åˆ—å¯ä»¥ã€‚èªæ³•çµæ§‹æœƒæ˜¯:å…ƒçµ„å = (å…ƒç´ 1, å…ƒç´ 2,.... ) ç¯„ä¾‹12tuple1 = (1, 2, 3, 4, 5) #å…ƒç´ çš†æ•´æ•¸tuple2 = (0, &quot;Hey&quot;, False) #æ”¾å…¥ä¸åŒè³‡æ–™å‹æ…‹ è‹¥ç™¼ç”Ÿtupleå…§çš„å…ƒç´ è¢«ä¿®æ”¹æœƒå‡ºç¾TypeErrorçš„éŒ¯èª¤è³‡è¨Šã€‚ 12tuple1[0] = &quot;hello&quot; print(tuple1[0]) # TypeError: 'tuple' object does not support item assignment Tupleå¥½è™•: åŸ·è¡Œé€Ÿåº¦æ¯”Listå¿«: å› ç‚ºå…§å®¹ä¸æœƒæ”¹è®Šï¼Œå› æ­¤Tupleå…§éƒ¨çµæ§‹æ¯”Listç°¡å–®ï¼ŒåŸ·è¡Œé€Ÿåº¦è¼ƒå¿«ã€‚ å­˜æ–¼Tupleçš„è³‡æ–™è¼ƒç‚ºå®‰å…¨: å› ç‚ºå…§å®¹ä¸æœƒæ”¹è®Šï¼Œä¸æœƒå› ç¨‹å¼è¨­è¨ˆç–å¿½è€Œè®Šæ›´è³‡æ–™å…§å®¹ã€‚ åƒè€ƒPython åˆå­¸ç¬¬äº”è¬› â€” ä¸²åˆ—çš„åŸºæœ¬ç”¨æ³•DAY 04 ä¸²åˆ—çš„æ“ä½œèˆ‡é‹ç”¨Day09-Listçš„é€²éšæ“ä½œèˆ‡ç”¨æ³•","link":"2019/08/02/Python/Python/%5BPython%5D%20%E4%B8%B2%E5%88%97(List)&%E5%85%83%E7%B5%84(Tuple)/"},{"title":"[Python] ä½œç”¨åŸŸèˆ‡Closure(é–‰åŒ…)","text":"é¼ å¹´å…¨é¦¬éµäººæŒ‘æˆ° - WEEK 03 å‰è¨€å‰å¹¾ç¯‡æåˆ°Pythonä¸­çš„Decoratorï¼Œå…¶å¯¦éš±å«è¨±å¤šä½œç”¨åŸŸä»¥åŠé–‰åŒ…çš„æ¦‚å¿µï¼Œæ•…å¦å¤–ç¨ç«‹å¯«æˆä¸€ç¯‡ä¾†è¿‘ä¸€æ­¥è¨è«–é€™å…©è€…ã€‚ First-class Function(é ­ç­‰å‡½å¼)åœ¨äº†è§£Closureä¹‹å‰ï¼Œè¦å…ˆçŸ¥é“Pythonä¸­çš„ First-class Function æ˜¯ä»€éº¼ï¼ŒFirst-class Function åˆå¯ä»¥è¢«ç¨±åšé ­ç­‰å‡½æ•¸ï¼Œæˆ–æ˜¯é ­ç­‰ç‰©ä»¶(First-class Object)ï¼ŒPythonè£¡çš„æ¯å€‹functionéƒ½æ˜¯first-class functionã€‚æ ¹æ“šMDNçš„å®šç¾© A programming language is said to have First-class functions when functions in that language are treated like any other variable. For example, in such a language, a function can be passed as an argument to other functions, can be returned by another function and can be assigned as a value to a variable. ä¸Šé¢é€™æ®µæè¿°ç™½è©±ä¾†èªªå°±æ˜¯ï¼š å‡½æ•¸å¯ä»¥è¢«ç•¶åšåƒæ•¸å‚³éã€èƒ½å¤ ä½œç‚ºå‡½æ•¸å›å‚³å€¼ã€èƒ½å¤ è¢«ä¿®æ”¹ã€èƒ½å¤ è¢«è³¦å€¼çµ¦ä¸€å€‹è®Šæ•¸ã€‚é€™æ„å‘³è‘—å‡½æ•¸å¯ä»¥å‚³éå¯ç”¨ä½œåƒæ•¸ï¼Œå¦‚åŒå…¶ä»–ç‰©ä»¶ï¼ˆå­—ä¸²ã€æ•´æ•¸ã€æµ®é»æ•¸ã€listç­‰ï¼‰ä¸€æ¨£ ç¯„ä¾‹å¯è¢«è³¦å€¼çµ¦è®Šæ•¸123456789101112131415def compare(m, n): return m if m &gt; n else nfunc = compare # assign functionç‰©ä»¶çµ¦funcprint(compare)print(func)print(compare(10, 20))print(func(10, 20))&quot;&quot;&quot;çµæœ&lt;function compare at 0x112441e60&gt;&lt;function compare at 0x112441e60&gt;2020&quot;&quot;&quot; ç”±ä¸Šé¢çš„ç¯„ä¾‹ä¾†çœ‹ï¼Œcompare å‡½æ•¸ç‰©ä»¶è¢«è³¦å€¼çµ¦è®Šæ•¸ funcï¼Œprint å‡ºçš„çµæœé¡¯ç¤º compare å’Œ func æŒ‡å‘åŒä¸€å€‹å‡½æ•¸ç‰©ä»¶ã€‚ å¯ä½œç‚ºåƒæ•¸å‚³é12345678910def square(x): return x * xdef arr(f, items): return [f(item) for item in items]numbers = [1, 2, 3, 4, 5]total = arr(square, numbers)print(total) # [1, 4, 9, 16, 25] ç”±ä¸Šé¢çš„ç¯„ä¾‹ä¾†çœ‹ï¼Œå‡½æ•¸ square å‡½æ•¸ç‰©ä»¶è¢«ç•¶ä½œ arr å‡½æ•¸çš„åƒæ•¸å‚³éï¼Œéš¨å¾Œæ–¼ arr ä¸­é€²è¡Œé™£åˆ—è™•ç†ã€‚ å†çµ¦å€‹ä¾‹å­ï¼šä»¥ say_hello, be_awesome å…©å€‹å‡½ç¤ºåšç‚ºåƒæ•¸ï¼Œå‚³å…¥ greet_tom é€™é …å‡½å¼è£¡ï¼Œæ¥è‘—å‘¼å«è©²å‡½å¼ 123456789101112def say_hello(name): return f&quot;Hello {name}&quot;def be_awesome(name): return f&quot;Yo {name}, together we are the awesomest!&quot;def greet_tom(greeter_func): return greeter_func(&quot;Tom&quot;)print(greet_tom(say_hello)) # Hello Tomprint(greet_tom(be_awesome)) # Yo Tom, together we are the awesomest! ä¸Šè¿°ç¯„ä¾‹æµç¨‹ï¼š å…©å€‹å‡½ç¤ºåˆ†åˆ¥ç‚º greet_tom å‡½ç¤ºçš„åƒæ•¸ åŸ·è¡Œ greet_tom å‡½å¼å¾Œå‘¼å« greeter_func å‡½å¼ é€™æ™‚ say_hello, be_awesome å…©å€‹å‡½ç¤ºåˆ†åˆ¥ä»£è¡¨ä»¥ greeter_func çš„åƒæ•¸å½¢å¼é€²è¡Œå‡½å¼å‘¼å« greeter_func å‘¼å«æ™‚å‚³å…¥ Tom é€™å€‹å­—ä¸²å‹åˆ¥çš„åƒæ•¸ æœ€çµ‚æ ¹æ“šå‚³å…¥ä¸åŒçš„åƒæ•¸(å‡½ç¤º)ä¾†æºï¼Œå›å‚³ç›¸æ‡‰çš„çµæœ å¯ä½œç‚ºå‡½æ•¸çš„å›å‚³å€¼12345678# å¯ä½œç‚ºå‡½æ•¸çš„å›å‚³å€¼def logger(msg): def message(): print('Log:', msg) return messagelogWarning = logger('Warning')logWarning() # Log: Warning ç”±ä¸Šé¢çš„ç¯„ä¾‹ä¾†çœ‹ï¼Œåœ¨å‡½æ•¸ logger å…§éƒ¨å»ºç«‹å‡½æ•¸ messageï¼Œå‡½æ•¸ message å…§ä½¿ç”¨äº† logger å‚³å…¥çš„åƒæ•¸ msgï¼Œæœ€å¾Œ logger å°‡ message å‡½æ•¸ä½œç‚ºå›å‚³å€¼ï¼Œå†assignçµ¦ logWarning é€²è¡Œå‘¼å«ã€‚ æˆ–æ˜¯å¦å¤–ä¸€å€‹ä¾‹å­: 123456789101112def html_tag(tag): def wrap_text(text): print('&lt;{0}&gt;{1}&lt;/{0}&gt;'.format(tag, text, tag)) return wrap_texth1 = html_tag('h1')h1('This is a header') # &lt;h1&gt;This is a header&lt;/h1&gt;h1('This is a header, too') # &lt;h1&gt;This is a header, too&lt;/h1&gt;p = html_tag('p')p('This is the first paragraph') # &lt;p&gt;This is the first paragraph&lt;/p&gt;p('This is the second paragraph') # &lt;p&gt;This is the second paragraph&lt;/p&gt; Python Scope(ä½œç”¨åŸŸ)æœ‰äº†é ­ç­‰å‡½å¼æ¦‚å¿µä¹‹å¾Œï¼Œå†ä¾†è«‡è«‡ Python çš„ä½œç”¨åŸŸã€‚Python çš„ä½œç”¨åŸŸ(scope)è¦å‰‡è¦å‰‡å«åš LEGBï¼ŒæŸ¥æ‰¾æ™‚ scope æœƒå¾ªé€™å€‹è¦å‰‡ï¼Œé †åºç‚º Local -&gt; Enclosed -&gt; Global -&gt; Built-in Local: æ–¼ function æˆ–æ˜¯ class å…§å®£å‘Šçš„è®Šæ•¸å Enclosed: ä½æ–¼å·¢ç‹€å±¤æ¬¡çš„functionçµæ§‹ï¼Œå¸¸ç”¨æ–¼Closure Global: æœ€ä¸Šå±¤ä½æ–¼æ¨¡çµ„(module)çš„å…¨åŸŸè®Šæ•¸åç¨± Build-in: å…§å»ºæ¨¡çµ„(module)çš„åç¨±ï¼Œä¾‹å¦‚print, abs()é€™æ¨£çš„å‡½å¼ç­‰ç­‰ åœ–ç‰‡æº The Python Tutorialè£¡é¢æœ‰æ›´è©³ç´°çš„è§£é‡‹ã€‚ the innermost scope, which is searched first, contains the local names the scopes of any enclosing functions, which are searched starting with the nearest enclosing scope, contains non-local, but also non-global names the next-to-last scope contains the current moduleâ€™s global names the outermost scope (searched last) is the namespace containing built-in names Pythonçš„ä½œç”¨åŸŸæœ‰è¨±å¤šç´°ç¯€å¯ä»¥è¨è«–ï¼Œç‚ºäº†ç¸®çŸ­ç¯‡å¹…å’ŒæŒ‘å¹¾å€‹é‡é»å‡ºä¾†ï¼Œä¸»è¦å€åˆ†ç‚ºglobal(å…¨åŸŸ)ã€local(å€åŸŸ)è®Šæ•¸å’ŒEnclosed Scopeã€‚ global(å…¨åŸŸ)è®Šæ•¸æ”¾åœ¨functionå¤–çš„è®Šæ•¸ 123456789a = &quot;hello a&quot;def scope1(): print(a) scope1()&quot;&quot;&quot;åŸ·è¡Œçµæœ:hello a&quot;&quot;&quot; åŸ·è¡Œscope1()ï¼Œè¦å°å‡ºaè®Šæ•¸çš„å€¼æ™‚ï¼Œè‹¥åœ¨scope1å…§æ‰¾ä¸åˆ°è®Šæ•¸aï¼Œä¾¿æœƒå¾€å¤–æ‰¾ï¼Œæ‰¾åˆ°å…¨åŸŸä¸­å®£å‘Šçš„aè®Šæ•¸ local(å€åŸŸ)è®Šæ•¸åœ¨Pythonè£¡å‰µå»ºä¸€å€‹functionï¼Œfunctionå…§åŸ·è¡Œçš„å€åŸŸç¨±ä½œã€Œlocal scopeã€ï¼Œè€Œå»ºç«‹å€åŸŸè®Šæ•¸æœ€ç°¡å–®çš„æ–¹å¼æ˜¯æ–¼functionä¸­çµ¦å®šä¸€å€‹è®Šæ•¸ã€‚ä¸€èˆ¬ä¾†èªªï¼Œå…¨åŸŸè®Šæ•¸æ˜¯ç„¡æ³•è¢«è©²function scopeå…§é‡æ–°å®šç¾©çš„è®Šæ•¸é€²è¡Œå­˜å–ã€‚ ç¯„ä¾‹å‡è¨­æœ‰ä¸€è®Šæ•¸aåˆå§‹å€¼ç‚º hello aï¼Œæƒ³è¦é€é scope1() å‡½æ•¸å° a é‡æ–°è³¦å€¼ 123456789a = &quot;hello a&quot;def scope1(): a = 1scope1()print(a)&quot;&quot;&quot;åŸ·è¡Œçµæœ:hello a&quot;&quot;&quot; ä¸Šè¿°çµæœå‘Šè¨´æˆ‘å€‘ï¼Œa = 1ç„¡æ³•å°scope1()å¤–çš„aé‡æ–°è³¦å€¼ã€‚ è‹¥è¦è®“local scopeå…§çš„è®Šæ•¸è®“å¤–éƒ¨é€²è¡Œå­˜å–ï¼Œå¯ä»¥åœ¨ç›®æ¨™è®Šæ•¸çš„å‰é¢å®£å‘Šä¸€å€‹global 12345678910a = &quot;hello a&quot;def scope1(): global a a = 1scope1()print(a)&quot;&quot;&quot;åŸ·è¡Œçµæœ:1&quot;&quot;&quot; ç‰¹æ®Šæƒ…æ³åœ¨Pythonä¸­ï¼Œå€åŸŸè®Šæ•¸æˆ–æ˜¯å…¨åŸŸè®Šæ•¸ï¼Œå…©è€…åªèƒ½ã€Œé¸é‚Šç«™ã€ï¼Œä¸å¯ä»¥åŒæ™‚æŒ‡å®šç‚ºå€åŸŸè®Šæ•¸åŠå…¨åŸŸè®Šæ•¸ã€‚ 123456a = 5def scope(): print(a) a = 10scope() åŸ·è¡Œä¸Šè¿°ç¯„ä¾‹ï¼Œæœƒå¾—åˆ° UnboundLocalError çš„éŒ¯èª¤è³‡è¨Šã€‚ Enclosed Scopeä¾æ“šå·¢ç‹€å±¤æ¬¡å¾å…§åˆ°å¤–æœå°‹ï¼Œç•¶æœå°‹åˆ° LEGB çš„ E æ™‚ï¼ŒPythonæœƒå¾æœ€è¿‘çš„ enclosing scope å‘å¤–æ‰¾èµ·ï¼Œé‚£é€™äº›enclosing scopes è£¡çš„æ‰€æœ‰è®Šæ•¸ï¼Œç¨±ä½œ non-local variableã€‚ 12345678910111213# enclosuredef outer(a): b = a def inner(): c = 3 def inner_inner(b): k = b+c return b+c return inner_inner return inneroutcome = outer(5)ans = outcome()ans(3) # 6 ä»¥ä¸Šè¿°ç¯„ä¾‹ä¾†èªªï¼Œbæ˜¯outer()çš„å€åŸŸè®Šæ•¸ï¼Œcæ˜¯inner()çš„å€åŸŸè®Šæ•¸ï¼Œç”±æ–¼é›¢inner()æœ€è¿‘çš„scopeæ˜¯outeræ‰€å»ºç«‹çš„ï¼Œbåˆæ˜¯æ–¼æ­¤scopeè¢«å®£å‘Šï¼Œæ‰€ä»¥bæ˜¯inner()çš„non-local variableã€‚ å†å¾€ä¸‹èµ°ï¼Œä»¥inner_inner()ä¾†çœ‹ï¼Œkç‚ºå®ƒçš„local variable ï¼Œå€¼è¢«assignç‚ºb+cï¼Œé€™æ™‚çš„b ä¸¦éè¢«å®£å‘Šåœ¨outer()scopeè£¡ï¼Œè€Œæ˜¯è—‰ç”±åƒæ•¸å‚³éçš„ï¼Œä¹Ÿå°±æ˜¯èªªï¼Œbå±¬æ–¼local variableã€‚åä¹‹cå‰‡æ˜¯è¢«å®£å‘Šåœ¨inner()çš„scopeè£¡ï¼Œå°inner_inner()ä¾†èªªï¼Œæ˜¯å±¬æ–¼non-local variableã€‚ Closureå‰é¢æåˆ°å¾ˆå¤šé—œæ–¼é ­ç­‰å‡½å¼åŠä½œç”¨åŸŸï¼Œå¯ä»¥é–‹å§‹é€²å…¥æ­£é¡Œ: Closure å‡è¨­æœ‰å€‹å·¢ç‹€å‡½å¼ï¼Œæœ€å¤–å±¤çš„å‡½å¼æŠŠè‡ªå·±å…§å±¤åµŒå¥—å¦å¤–ä¸€å€‹å‡½å¼ï¼Œå°‡é€™å€‹åµŒå¥—çš„å‡½å¼ä½œç‚ºå›å‚³å€¼å‚³éå‡ºå»ï¼Œä¾¿æœƒå½¢æˆä¸€å€‹Closureã€‚ å…ˆçœ‹ä¸€æ®µç¯„ä¾‹: 12345678910111213141516171819def student(): height = 170 weight = 60 def info(): print(&quot;my height is {}.&quot;.format(height)) print(&quot;my weight is {}.&quot;.format(weight)) return infoprint(student)print(student())students = student()students()&quot;&quot;&quot;å›å‚³çµæœ:&lt;function student at 0x112479440&gt;&lt;function student.&lt;locals&gt;.info at 0x1124794d0&gt;my height is 170.my weight is 60.&quot;&quot;&quot; ä¸Šé¢çš„ç¯„ä¾‹å¯ä»¥è§€å¯Ÿå‡ºä¸€å€‹å¥‡æ€ªçš„é»ï¼Œä¸€èˆ¬æƒ…æ³ä¸‹ï¼Œfunctionä¸­å…§å€åŸŸè®Šæ•¸çš„ç”Ÿå‘½é€±æœŸ(life cycle)æœƒéš¨è‘—functionåŸ·è¡Œå®Œç•¢è€ŒçµæŸï¼Œä½†æ˜¯printå‡ºä¾†çš„çµæœå»é‚„å¯ä»¥è®€å–åˆ°heightã€weightå…©å€‹å±¬æ–¼student()scopeçš„è®Šæ•¸ã€‚ åŸå› åœ¨æ–¼return infoé€™å€‹åœ°æ–¹ï¼Œinfoé€™å€‹functionè¶è‘—returnçš„æ™‚å€™æ•æ‰å¤–å±¤å‡½å¼è£¡çš„è®Šæ•¸ï¼Œä¸¦å·æ¸¡é€²ä¾†è‡ªå·±çš„scopeè£¡é¢ã€‚ è¢«æ•æ‰çš„è®Šæ•¸ä¾¿ç¨±åšã€Œcaptured variableã€ï¼Œå¸¶æœ‰captured variableçš„å‡½å¼ç¨±ç‚ºclosureã€‚ æŸ¥çœ‹Closureè‹¥æƒ³çŸ¥é“é–‰åŒ…å„²å­˜å¤šå°‘ç‰©ä»¶ï¼Œå¯ä»¥å°å‡º__closure__å±¬æ€§æŸ¥çœ‹è³‡è¨Šï¼Œ__closure__æœƒæ˜¯ä¸€å€‹å”¯è®€å±¬æ€§ï¼›å°å‡ºçš„è³‡æ–™å‹æ…‹æ˜¯tupleã€‚ 12345678910111213141516def student(): height = 170 weight = 60 def info(): print(&quot;my height is {}.&quot;.format(height)) print(&quot;my weight is {}.&quot;.format(weight)) return infostudents = student()print(student.__closure__) # Noneprint(students.__closure__) # (&lt;cell at 0x112cb1d50: int object at 0x10d522670&gt;, &lt;cell at 0x112cb1d90: int object at 0x10d5218b0&gt;)print(type(students.__closure__)) # &lt;class 'tuple'&gt;print(students.__closure__[0].cell_contents) # 170print(students.__closure__[1].cell_contents) # 60 å¾ä¸Šé¢çš„ç¯„ä¾‹ä¾†çœ‹æœƒç™¼ç¾ï¼Œé›–ç„¶å°infoä¾†èªªï¼Œæœ‰heightã€weightå…©å€‹non-local variableï¼Œä½†å› ç‚ºinfoä¸¦æœªä½¿ç”¨å®ƒå€‘ï¼Œæ‰€ä»¥é€™æ™‚student.__closure__çš„å›å‚³å€¼æ˜¯Noneã€‚ å†å¾€ä¸‹ä¸€æ­¥ï¼Œå°studenté€²è¡Œå‘¼å«ï¼Œä¸¦assignçµ¦è®Šæ•¸studentsï¼Œè¨ªå•__closure__å±¬æ€§å‰‡æœƒå›å‚³(&lt;cell at 0x112cb1d50: int object at 0x10d522670&gt;, &lt;cell at 0x112cb1d90: int object at 0x10d5218b0&gt;)é€™æ¨£çš„ç‰©ä»¶è³‡è¨Šã€‚ è‹¥è¦å°å‡ºè£¡é¢çš„æŸå€‹ç‰©ä»¶çš„è©±ï¼Œå¦‚å–å¾—ç‰©ä»¶çš„å€¼ï¼Œè·Ÿtupleå–å€¼çš„æ–¹æ³•ç›¸åŒï¼Œ[]å¡«å…¥è¦ç´¢å¼•çš„ä½ç½®ï¼Œå¦‚students.__closure__[0].cell_contentsï¼Œå›å‚³index=0çš„å€¼ã€‚ Captured variables å¦‚ä½•è³¦å€¼å¦‚æœè¦å°Captured variablesé‡æ–°è³¦å€¼çš„è©±ï¼Œ 123456789101112def student(): height = 170 weight = 60 def info(): height += 1 weight -= 1 print(&quot;my height is {}.&quot;.format(height)) print(&quot;my weight is {}.&quot;.format(weight)) return infostudents = student()print(students()) # UnboundLocalError åŸ·è¡Œä¸Šè¿°ç¯„ä¾‹å¾Œæœƒçœ‹åˆ°é æœŸä¸åˆ°çš„éŒ¯èª¤: UnboundLocalErrorã€‚ åŸå› åœ¨function scopeä¸­ï¼Œç•¶è®Šæ•¸è¢«è³¦å€¼æ™‚ï¼ŒPythonæœƒè‡ªå‹•å°‡è®Šæ•¸è¨­å®šç‚ºå€åŸŸè®Šæ•¸(local variable)ã€‚å›é ­çœ‹ä¸Šé¢çš„ç¯„ä¾‹ä¸­ï¼Œheightã€weightè¢«é‡æ–°è³¦å€¼ï¼Œå…©è€…åœ¨infoé€™å€‹function scopeåˆ¤å®šç‚ºå€åŸŸè®Šæ•¸ï¼Œä½†å…©è€…æ‰¾ä¸åˆ°ç›¸å°æ‡‰çš„è®Šæ•¸åã€‚ åœ¨ä¸€èˆ¬æƒ…æ³ä¸‹ï¼Œè‹¥æƒ³åœ¨æŸå€‹functionä¸­assignæ–°çš„å€¼çµ¦å…ˆå‰å®£å‘Šåœ¨å…¨åŸŸè®Šæ•¸(global scope)ä¸­çš„è®Šæ•¸æ™‚ï¼Œä¸€æ¨£ä¹Ÿæœƒå ±UnboundLocalErroréŒ¯èª¤è¨Šæ¯ã€‚ 12345a = 5def scope(): a += 10scope() # UnboundLocalError è§£æ±ºæ–¹æ³•å®£å‘Šnonlocalå»æ“ä½œcaptured variableã€‚ä¾†çœ‹ç¯„ä¾‹: 123456789101112131415161718192021def student(): height = 170 weight = 60 def info(): # nonlocal nonlocal height nonlocal weight height += 1 weight -= 1 print(&quot;my height is {}.&quot;.format(height)) print(&quot;my weight is {}.&quot;.format(weight)) return infostudents = student()students()&quot;&quot;&quot;çµæœmy height is 171.my weight is 59.&quot;&quot;&quot; åŠ ä¸Šnonlocal heightã€nonlocal weightå¾Œå³å¯æ­£å¸¸assignè®Šæ•¸äº†å“¦ï¼ captured variableåœ¨Pythonä¸­ä¸¦éå€åŸŸæˆ–å…¨åŸŸè®Šæ•¸ï¼Œæ‰€ä»¥åªèƒ½ç”¨ nonlocalå»å®£å‘Šè®Šæ•¸ï¼Œæ‰èƒ½é€²è¡Œå…¶ä»–æ“ä½œã€‚ Captured variableså…·ç¨ç«‹æ€§123456789101112131415161718192021222324252627282930313233343536def student(): height = 170 weight = 60 def info(): # nonlocal nonlocal height nonlocal weight height += 1 weight -= 1 print(&quot;my height is {}.&quot;.format(height)) print(&quot;my weight is {}.&quot;.format(weight)) return infostudents1 = student()students1()students1()students1()print(&quot;\\n--- students1 æ¯”è¼ƒ students2 ---\\n&quot;)students2 = student()students2()&quot;&quot;&quot;çµæœ:my height is 171.my weight is 59.my height is 172.my weight is 58.my height is 173.my weight is 57.--- students1 æ¯”è¼ƒ students2 ---my height is 171.my weight is 59.&quot;&quot;&quot; ç”±ä¸Šè¿°ä¾‹å­å¯çŸ¥:å³ä½¿students1æŒçºŒå°‡heightèˆ‡weightå…©å€‹Captured variablesåŠ ç¸½å’Œéæ¸›ï¼Œå¦ä¸€å€‹students2å…§çš„Captured variableå®Œå…¨ä¸å—å½±éŸ¿ï¼Œæ¨è«–å…©å€‹closure functionå½¼æ­¤ç¨ç«‹ã€‚ ä»¥ä¸Šç‚ºé—œæ–¼ä½œç”¨åŸŸåŠClosureç›¸é—œæ¦‚å¿µï¼Œå¦‚æœ‰éŒ¯èª¤ä¹‹è™•ï¼Œé‚„è«‹æŒ‡æ•™ã€‚ åƒé–±ä»€éº¼æ˜¯first-class function èŠèŠ Python Closure Pythoné€²éšæŠ€å·§ (4) â€” Lambda Function èˆ‡ Closure ä¹‹è¬ï¼","link":"2020/02/26/Python/Python/%5BPython%5D%20%E4%BD%9C%E7%94%A8%E5%9F%9F%E8%88%87Closure(%E9%96%89%E5%8C%85)/"},{"title":"[Python] MySQL è³‡æ–™æ“ä½œ","text":"å‰è¨€æœ¬ç¯‡ç”¨æ–¼ç´€éŒ„ä½¿ç”¨Pythonæ“ä½œMySQL å®‰è£MySQLå› ç‚ºä¹‹å‰æœ‰ä¸‹è¼‰MAMPï¼Œè£¡é¢å·²ç¶“å®‰è£éMySQLã€‚ å®‰è£pysql123pip install pymysqlæˆ–pip3 install pymysql å®‰è£å®Œæˆå¾Œå»ºç«‹åç‚ºcrud_testçš„è³‡æ–™åº«ã€‚ å¯¦ä½œå¼•å…¥pymysqlä¸¦å‰µå»ºcursor1234import pymysqldb = pymysql.connect(&quot;127.0.0.1&quot;, port=8889 , user=&quot;root&quot;, password=&quot;root&quot;, db=&quot;crud_test&quot;, charset='utf8') # dbç‚ºæŒ‡å®šçš„è³‡æ–™åº«åç¨±#å»ºç«‹æ“ä½œæ¸¸æ¨™cursor = db.cursor() cursor()ç‚ºç²å¾—pythonåŸ·è¡Œï¼­ySQLèªæ³•çš„æ–¹æ³• æŸ¥è©¢è³‡æ–™åº«ç‰ˆæœ¬sqlæŸ¥è©¢æŒ‡ä»¤ç‚ºSELECT VERSION() 1234567891011121314#========== æŸ¥è©¢è³‡æ–™åº«ç‰ˆæœ¬ =======sql = 'SELECT VERSION()' #åŸ·è¡Œèªæ³•cursor.execute(sql)print(&quot;Success!!!!&quot;)#é¸å–ç¬¬ä¸€ç­†çµæœdata = cursor.fetchone()print (&quot;Database version : %s &quot; % data)#é—œé–‰é€£ç·šdb.close()# å›å‚³çµæœï¼šDatabase version : 5.6.35 æ–°å¢è³‡æ–™å…ˆå®šç¾©è¡¨æ ¼çµæ§‹ insertèªæ³•:insert into è³‡æ–™è¡¨åç¨±(æ¬„ä½1, æ¬„ä½2, æ¬„ä½3....) values (æ¬„ä½1çš„å€¼,æ¬„ä½2çš„å€¼, æ¬„ä½3çš„å€¼.... ); ç¯„ä¾‹123456789101112131415161718192021222324import pymysqlfrom datetime import datetimedb = pymysql.connect(&quot;127.0.0.1&quot;, port=8889 , user=&quot;root&quot;, password=&quot;root&quot;, db=&quot;crud_test&quot;, charset='utf8')#å»ºç«‹æ“ä½œæ¸¸æ¨™cursor = db.cursor()# sql æ–°å¢sql = &quot;insert into student_record(sid, name, gender, age, score) values (1, 'Jean', 'female', '20', 100);&quot;#åŸ·è¡Œèªæ³•try: cursor.execute(sql) #æäº¤ä¿®æ”¹ db.commit() print('success')except: #ç™¼ç”ŸéŒ¯èª¤æ™‚åœæ­¢åŸ·è¡ŒSQL db.rollback() print('error')# æäº¤commitï¼Œä¸ç„¶ç„¡æ³•å­˜æ–°å»ºæˆ–è€…ä¿®æ”¹çš„è³‡æ–™db.commit()# #é¸å–ç¬¬ä¸€ç­†çµæœdata = cursor.fetchone() å‹™å¿…è¨˜å¾—æäº¤commitï¼Œä¸ç„¶ç„¡æ³•å­˜æ–°å»ºæˆ–è€…ä¿®æ”¹çš„è³‡æ–™ æŸ¥çœ‹çµæœï¼šæ–°å¢æˆåŠŸä¸€ç­†è³‡æ–™ ä¿®æ”¹è³‡æ–™updateèªæ³•:update record set æ¬„ä½å where æ›´æ–°æ¢ä»¶ setå¾Œé¢æ¥æ›´æ–°ç›®æ¨™çš„æ¬„ä½ï¼Œwhereå¾Œé¢æ¥æ›´æ–°çš„æ¢ä»¶ ç¯„ä¾‹123456789101112131415161718192021222324import pymysqlfrom datetime import datetimedb = pymysql.connect(&quot;127.0.0.1&quot;, port=8889 , user=&quot;root&quot;, password=&quot;root&quot;, db=&quot;crud_test&quot;, charset='utf8')#å»ºç«‹æ“ä½œæ¸¸æ¨™cursor = db.cursor()# sql ä¿®æ”¹sql = &quot;update record set name= 'Tony' where age = '30' &quot; try: cursor.execute(sql) #æäº¤ä¿®æ”¹ db.commit() print('success')except: #ç™¼ç”ŸéŒ¯èª¤æ™‚åœæ­¢åŸ·è¡ŒSQL db.rollback() print('error')db.commit() # æäº¤commitï¼Œä¸ç„¶ç„¡æ³•å­˜æ–°å»ºæˆ–è€…ä¿®æ”¹çš„è³‡æ–™#é¸å–ç¬¬ä¸€ç­†çµæœdata = cursor.fetchone()#é—œé–‰é€£ç·šdb.close() æŸ¥è©¢select ç›®æ¨™æ¬„ä½ from è³‡æ–™è¡¨ï¼Œè¿”å›å€¼çš„è³‡æ–™å‹æ…‹ç‚ºtuple ç¯„ä¾‹(é¸å–ç¬¬ä¸€ç­†çµæœ):1234567891011121314151617181920212223242526import pymysqlfrom datetime import datetimedb = pymysql.connect(&quot;127.0.0.1&quot;, port=8889 , user=&quot;root&quot;, password=&quot;root&quot;, db=&quot;crud_test&quot;, charset='utf8')#å»ºç«‹æ“ä½œæ¸¸æ¨™cursor = db.cursor()# sql æŸ¥è©¢sql = &quot;select * from student_record&quot;#åŸ·è¡Œèªæ³•try: cursor.execute(sql) #æäº¤ä¿®æ”¹ db.commit() print('success')except: #ç™¼ç”ŸéŒ¯èª¤æ™‚åœæ­¢åŸ·è¡ŒSQL db.rollback() print('error')# æäº¤commitï¼Œä¸ç„¶ç„¡æ³•å­˜æ–°å»ºæˆ–è€…ä¿®æ”¹çš„è³‡æ–™db.commit()#é¸å–ç¬¬ä¸€ç­†çµæœdata = cursor.fetchone()print(data)# (1, 'Jean', 'female', 20, 100) ç¯„ä¾‹(é¸å–å…¨éƒ¨çµæœ):æ¡ç”¨fetchall() 1234567891011121314151617181920212223242526import pymysqlfrom datetime import datetimedb = pymysql.connect(&quot;127.0.0.1&quot;, port=8889 , user=&quot;root&quot;, password=&quot;root&quot;, db=&quot;crud_test&quot;, charset='utf8')#å»ºç«‹æ“ä½œæ¸¸æ¨™cursor = db.cursor()# sql æŸ¥è©¢sql = &quot;select * from student_record&quot;#åŸ·è¡Œèªæ³•try: cursor.execute(sql) #æäº¤ä¿®æ”¹ db.commit() print('success')except: #ç™¼ç”ŸéŒ¯èª¤æ™‚åœæ­¢åŸ·è¡ŒSQL db.rollback() print('error')# æäº¤commitï¼Œä¸ç„¶ç„¡æ³•å­˜æ–°å»ºæˆ–è€…ä¿®æ”¹çš„è³‡æ–™db.commit()#é¸å–ç¬¬ä¸€ç­†çµæœdata = cursor.fetchall()print(data)# ((1, 'Jean', 'female', 20, 100), (2, 'Tom', 'male', 21, 70), (3, 'Tony', 'male', 22, 60), (4, 'Jack', 'male', 30, 90)) ç¯„ä¾‹(æŒ‡å®šå–å›æŸ¥è©¢ç­†æ•¸):fetchmany(size= number)ï¼Œsizeé™åˆ¶æŸ¥è©¢ç­†æ•¸ã€‚ 12345678910111213141516171819202122232425import pymysqlfrom datetime import datetimedb = pymysql.connect(&quot;127.0.0.1&quot;, port=8889 , user=&quot;root&quot;, password=&quot;root&quot;, db=&quot;crud_test&quot;, charset='utf8')#å»ºç«‹æ“ä½œæ¸¸æ¨™cursor = db.cursor()# sql æŸ¥è©¢sql = &quot;select * from student_record&quot;#åŸ·è¡Œèªæ³•try: cursor.execute(sql) #æäº¤ä¿®æ”¹ db.commit() print('success')except: #ç™¼ç”ŸéŒ¯èª¤æ™‚åœæ­¢åŸ·è¡ŒSQL db.rollback() print('error')# æäº¤commitï¼Œä¸ç„¶ç„¡æ³•å­˜æ–°å»ºæˆ–è€…ä¿®æ”¹çš„è³‡æ–™db.commit()#é¸å–ç¬¬ä¸€ç­†çµæœdata = cursor.fetchmany(size=2)print(data)# ((1, 'Jean', 'female', 20, 100), (2, 'Tom', 'male', 21, 70)) åˆªé™¤delete from è³‡æ–™è¡¨åç¨± where åˆªé™¤æ¢ä»¶ ç¯„ä¾‹1234567891011121314151617181920212223import pymysqlfrom datetime import datetimedb = pymysql.connect(&quot;127.0.0.1&quot;, port=8889 , user=&quot;root&quot;, password=&quot;root&quot;, db=&quot;crud_test&quot;, charset='utf8')#å»ºç«‹æ“ä½œæ¸¸æ¨™cursor = db.cursor()# sql æŸ¥è©¢sql = &quot;delete from student_record where name= 'Jack' &quot; #åŸ·è¡Œèªæ³•try: cursor.execute(sql) #æäº¤ä¿®æ”¹ db.commit() print('success')except: #ç™¼ç”ŸéŒ¯èª¤æ™‚åœæ­¢åŸ·è¡ŒSQL db.rollback() print('error')# æäº¤commitï¼Œä¸ç„¶ç„¡æ³•å­˜æ–°å»ºæˆ–è€…ä¿®æ”¹çš„è³‡æ–™db.commit()#é¸å–ç¬¬ä¸€ç­†çµæœdata = cursor.fetchmany(size=2)print(data) çµæœ åƒè€ƒæ–‡ç« Day22- Python X MySql 2","link":"2019/09/13/Python/Python/%5BPython%5D%20MySQL%20%E8%B3%87%E6%96%99%E6%93%8D%E4%BD%9C/"},{"title":"[Python] ä½¿ç”¨ isinstance() ä¾†æª¢æŸ¥è³‡æ–™å‹åˆ¥å§ï¼","text":"å‰è¨€å…ˆå‰ä½¿ç”¨ Python æ¸¬è©¦ç‰©ä»¶ã€è®Šæ•¸æ˜¯å¦ç‚ºæŒ‡å®šçš„ã€é¡åˆ¥ã€æˆ–ã€è³‡æ–™å‹æ…‹ã€ æ™‚(e.g. intã€floatã€boolã€strã€list â€¦â€¦)ï¼Œéƒ½æ˜¯ä½¿ç”¨ type() æ–¹æ³•ï¼Œä½†å…¶å¯¦ Python æœ‰æä¾› isinstance() å‡½å¼ï¼Œæ­¤æ³•æ˜¯è¼ƒå¥½çš„ä½œæ³•ï¼Œä¸åƒ…åŸ·è¡Œé€Ÿåº¦è¼ƒå¿«ï¼Œä¹Ÿé©ç”¨æ–¼è‡ªå·±å»ºç«‹çš„ Class ç‰©ä»¶ç¹¼æ‰¿(type() ä¸è€ƒæ…®ç‰©ä»¶ç¹¼æ‰¿ï¼Œè‹¥ç‚ºç¹¼æ‰¿é¡åˆ¥çš„ç‰©ä»¶ä¸æœƒåˆ¤æ–·èˆ‡çˆ¶é¡æ˜¯ç›¸åŒé¡åˆ¥)æ•¸ï¼Œä¾†çœ‹çœ‹ä»–æœ‰å“ªäº›ç‰¹æ€§èˆ‡ç”¨æ³•å§ï¼ å¦‚ä½•åœ¨ Python ä¸­ä½¿ç”¨ isinstance() å‡½æ•¸èªæ³•isinstance() å‡½æ•¸éœ€å‚³å…¥å…©å€‹å¿…è¦åƒæ•¸ï¼Œè‹¥æª¢æŸ¥çš„çµæœç›¸ç¬¦ï¼Œå›å‚³çµæœç‚º Trueï¼Œåä¹‹ç‚º False object: æ­¤åƒæ•¸å‚³å…¥æŒ‡å®šçš„ é¡åˆ¥(Class) or è®Šæ•¸ classinfo: æ­¤åƒæ•¸å‚³å…¥æŒ‡å®šé¡åˆ¥(Class)åç¨±æˆ–è®Šæ•¸å‹åˆ¥ï¼Œå¦å¤–æ”¯æ´ä»¥tupleå½¢å¼å‚³éå¤šå€‹é¡åˆ¥ or è³‡æ–™å‹åˆ¥çš„å€¼ èªæ³•è¦å‰‡ï¼š1isinstance(object, classinfo) ç¯„ä¾‹1 - æª¢æŸ¥è®Šæ•¸çš„å‹åˆ¥æª¢æŸ¥ numb é€™é …è®Šæ•¸çš„å‹åˆ¥æ˜¯å¦ç‚º str(å­—ä¸²) 1234567word= &quot;hello&quot;result = isinstance(word, str)print(result)if result: print(&quot;Y&quot;)else: print(&quot;N&quot;) output: 12TrueY ç”±è¼¸å‡ºçµæœå¯çŸ¥ï¼Œé€é isinstance() å‡½å¼å° word è®Šæ•¸åšå‹åˆ¥æª¢æŸ¥æ˜¯å¦ç‚º stringï¼Œå›å‚³çµæœç‚º True è¡¨é¡å‹ç›¸ç¬¦ã€‚ isinstance() å‡½å¼äº¦èƒ½å°å…¶ä»– Pyhton å…§å»ºçš„å‹åˆ¥(e.g. )é€²è¡Œæª¢æŸ¥ï¼Œä»¥ä¸‹åˆ—å‡ºå¹¾å€‹ç¯„ä¾‹ 12345678910111213141516171819202122232425262728293031323334# æª¢æŸ¥ numb æ˜¯å¦ç‚º intnumb = 10print(isinstance(number, int))# output Trueprint(isinstance(number, float)) # output FalsePI = 3.14# æª¢æŸ¥ PI æ˜¯å¦ç‚º floatprint(isinstance(PI, float))# Output True# Check if (1 + 2j) is an instance of complexcomplex_num = 1 + 2jprint(isinstance(complex_num, complex))# Output True# Check if names is an instance of class listnames_list = [&quot;Tom&quot;, &quot;Jack&quot;, &quot;Jason&quot;]print(isinstance(names_list, list))# Output Truepeople = {&quot;Tom&quot;: 80, &quot;Jack&quot;: 70, &quot;Jason&quot;: 90}print(isinstance(people, dict))# Output Truenames_tuple = (&quot;Emma&quot;, &quot;Jackson&quot;, 'Amy')print(isinstance(names_tuple, tuple))# Output Truenumbs = {1, 2, 3, 4}print(isinstance(numbs, set))# Output True æ³¨æ„ï¼šè‹¥å°‡ isinstance() èˆ‡ä»»ä½•å¸¶æœ‰ None çš„è®Šæ•¸æˆ–ç‰©ä»¶ä¸€èµ·ä½¿ç”¨æ™‚ï¼Œå›å‚³çµæœç‚º False 12345none_var = None# ç©ºå­—ä¸²é None å€¼empty_str = ''print(isinstance(none_var, float)) # Falseprint(isinstance(empty_str, str)) # True ç¯„ä¾‹2 - æª¢æŸ¥é¡åˆ¥(Class)é™¤äº†é‡å°è®Šæ•¸åšå‹åˆ¥æª¢æŸ¥å¤–ï¼Œäº¦å¯å°é¡åˆ¥æª¢æŸ¥ 123456789101112131415161718class Animal: def __init__(self, name, age): self.name = name self.age = ageclass Student: def __init__(self, name, degree): self.name = name self.degree = degreeani = Animal(&quot;Amy&quot;, 3)stud = Student(&quot;Tom&quot;, &quot;master&quot;)# æª¢æŸ¥ stud æ˜¯å¦ç‚º Student é¡åˆ¥print(isinstance(ani, Animal)) # True# æª¢æŸ¥ stud æ˜¯å¦ç‚º Student é¡åˆ¥print(isinstance(stud, Student)) # False ç¯„ä¾‹3 - æª¢æŸ¥è®Šæ•¸çš„å¤šå€‹å‹åˆ¥å‰è¿°ç¬¬ä¸€å€‹ç¯„ä¾‹åªæœ‰é‡å°å–®ä¸€å‹åˆ¥åšæª¢æŸ¥ï¼Œisinstance() æä¾›ä¸€æ¬¡æª¢æŸ¥å¤šå€‹å‹åˆ¥çš„åŠŸèƒ½ï¼Œåƒæ•¸å¯ä»¥tuple å½¢å¼ä¸€æ¬¡å¸¶å…¥å¤šå€‹è³‡æ–™å‹åˆ¥ã€‚ä¾‹å¦‚æˆ‘å€‘æƒ³ç¢ºèªè©²è®Šæ•¸æ˜¯å¦ç‚ºæ•¸å€¼æ™‚ï¼Œå¯èƒ½åŒæ™‚åŒ…å« int, float å…©ç¨®å‹åˆ¥ï¼Œä»¥ä¸‹ä½œç‚ºç¯„ä¾‹ 1234567891011121314151617def is_number(numb): if isinstance(numb, (int, float)): print(f'è®Šæ•¸ {numb} ç‚ºæ•¸å€¼å‹åˆ¥çš„å¯¦ä¾‹') else: print(f'è®Šæ•¸ {numb} éæ•¸å€¼å‹åˆ¥çš„å¯¦ä¾‹')n1 = 80is_number(n1)# è®Šæ•¸ 80 ç‚ºæ•¸å€¼å‹åˆ¥çš„å¯¦ä¾‹n2 = 55.70is_number(n2)# è®Šæ•¸ 55.7 ç‚ºæ•¸å€¼å‹åˆ¥çš„å¯¦ä¾‹n3 = '20'is_number(n3)# è®Šæ•¸ 20 éæ•¸å€¼å‹åˆ¥çš„å¯¦ä¾‹ ç¯„ä¾‹4 - æª¢æŸ¥é¡åˆ¥ç¹¼æ‰¿(Class Inheritance)isinstance å‡½å¼ä¹Ÿå¯é‡å°ç‰©ä»¶å°å‘çš„é¡åˆ¥(Class)ç¹¼æ‰¿(å¦‚å­é¡åˆ¥çš„ç‰©ä»¶ä¹Ÿæ˜¯çˆ¶é¡åˆ¥çš„ä¸€ç¨®é¡å‹)åšæª¢æŸ¥ï¼Œè‹¥ instance() çš„ classinfo åƒæ•¸æ˜¯ç›®æ¨™é¡åˆ¥çš„çˆ¶é¡åˆ¥ï¼Œå‰‡å›å‚³ True ï¼Œåä¹‹ç‚º Falseï¼Œä¾†çœ‹å€‹ä¾‹å­: 1234567891011121314151617181920class Vehicle(object): def __init__(self, category): self.category = category def display(self): print(&quot;Vehicle: &quot;, self.category)class Car(Vehicle): def __init__(self, category, color): self.category = category self.color = color # é¡è‰²å±¬æ€§ def display(self): print(&quot;Category: &quot;, self.category, &quot;color: &quot;, self.color)obj = Car(&quot;car&quot;, &quot;red&quot;)print(isinstance(obj, Car)) # Output Trueprint(isinstance(obj, Vehicle)) # Output True æ¯”è¼ƒ type() èˆ‡ isinstance() å…©è€…çš„é€Ÿåº¦ type() 1python3 -m timeit -s &quot;variable = 'test'&quot; &quot;type(variable) is str&quot; output: 5000000 loops, best of 5: 43.7 nsec per loop isinstance() 1python3 -m timeit -s &quot;variable = 'test'&quot; &quot;isinstance(variable, str)&quot; output: 10000000 loops, best of 5: 35.5 nsec per loop åˆ†åˆ¥åŸ·è¡Œä¸Šè¿°å…©è€…é‡å°åŒä¸€è®Šæ•¸æ˜¯å¦ç‚ºå­—ä¸²æ™‚çš„æ¯”å°æ™‚ï¼ŒåŸ·è¡Œé€Ÿåº¦æ˜¯ isinstance() è¼ƒä½³ã€‚ ç¸½çµisinstance é€šå¸¸æ˜¯æ¯”è¼ƒé¡å‹çš„é¦–é¸ã€‚è—‰ç”±ä¸Šé¢å¹¾å€‹ç¯„ä¾‹å¯çŸ¥ï¼Œå®ƒä¸åƒ…æ›´å¿«ï¼ŒåŒæ™‚è€ƒæ…®ç¹¼æ‰¿ï¼Œä¸‹æ¬¡è‹¥è¦å°è³‡æ–™åšå‹åˆ¥æª¢æŸ¥æ™‚ï¼Œå°±å„ªå…ˆè€ƒæ…® isinstance é€™å€‹å‡½å¼å§ï½ Reference Python isinstance() function explained with examples type() vs. isinstance()","link":"2021/06/30/Python/Python/%5BPython%5D%20%E4%BD%BF%E7%94%A8%20isinstance()%20%E4%BE%86%E6%AA%A2%E6%9F%A5%E8%B3%87%E6%96%99%E5%9E%8B%E5%88%A5%E5%90%A7%EF%BC%81/"},{"title":"[Python] Module&amp;Package","text":"å‰è¨€ä»»ä½•ä¸€å€‹pythonç¨‹å¼éƒ½å¯ä»¥ä½œç‚ºpythonçš„æ¨¡çµ„(æ¨¡çµ„æ˜¯ä¸€å€‹.pyçš„æª”æ¡ˆ)ï¼Œè£¡é¢æœ‰è¨±å¤šå®šç¾©çš„è®Šæ•¸å’Œå‡½å¼ä¾›å…¶ä»–ç¨‹å¼ä½¿ç”¨ï¼Œæ¨¡çµ„è¨­è¨ˆç›®çš„æ˜¯ç”±å…¶ä»–ç¨‹å¼å¼•å…¥ä¸¦ä½¿ç”¨ï¼Œå°‡åŠŸèƒ½æ¨¡çµ„åŒ–å¸¶ä¾†çš„å¥½è™•æ˜¯æ¨¡çµ„åŒ–çš„ç¨‹å¼å¯ä»¥åœ¨ä¸åŒç¨‹å¼å¼•å…¥ï¼Œæ¸›å°‘é‡è¤‡å¯«ç›¸åŒåŠŸèƒ½çš„æƒ…æ³ã€‚åŒæ™‚ï¼Œå¦‚æœæœ‰åˆ¥äººåˆ¥äººå¯«å¥½å¯¦ç”¨çš„æ¨¡çµ„ï¼Œå¯ä»¥é€éå¼•å…¥çš„æ–¹å¼ï¼Œç›´æ¥æ‹¿ä¾†ä½¿ç”¨ã€‚ å¼•å…¥importæ–¹æ³•Pythonå¼•å…¥æ¨¡çµ„çš„æ–¹æ³•(import)æœ‰å››ç¨®: 12345678# å–®ç´”å¼•å…¥import module# å°‡å¼•å…¥çš„æ¨¡çµ„é€²è¡Œé‡æ–°å‘½åï¼Œå°‡nameæ›¿æ›è‡ªè¨‚çš„æ¨¡çµ„åç¨± -&gt; å¸¸ç”¨æ–¼æ¨¡çµ„åç¨±å¤ªé•·çš„æƒ…å½¢import module as name# å¼•å…¥æ¨¡çµ„å…§ç‰¹å®šçš„å‡½å¼æˆ–è®Šæ•¸ from module import variable/function# å¼•å…¥æ¨¡çµ„å…§æ‰€ä»¥æœ‰çš„å‡½å¼æˆ–è®Šæ•¸from module import * å–®ç´”å¼•å…¥æ¨¡çµ„çš„æƒ…æ³ä¸‹ï¼Œè‹¥è¦å‘¼å«è©²æ¨¡çµ„å…§ç‰¹å®šçš„å‡½å¼æˆ–è®Šæ•¸ï¼Œéœ€è¦module.functionæˆ– module.variable ä¾†å‘¼å«ç›®æ¨™å‡½å¼æˆ–æ˜¯è®Šæ•¸ã€‚ from module import variable/functionä½¿ç”¨æ™‚æ©Ÿåœ¨æ–¼ï¼Œæœ‰äº›moduleç›¸ç•¶é¾å¤§ï¼Œè‹¥æ¯æ¬¡éƒ½è¦å°‡æ•´å€‹moduleçš„å…§å®¹å¼•å…¥ï¼Œæœƒæœ‰æ•ˆèƒ½å•é¡Œã€‚ è‡ªè¨‚ä¸€å€‹æ¨¡çµ„å‡è¨­è‡ªè¨‚ä¸€å€‹åç‚ºmod.pyçš„æ¨¡çµ„ï¼Œè¦è®“main.pyå¼•å…¥ä½¿ç”¨ï¼Œå°‡å…©å€‹æª”æ¡ˆçš„ç¨‹å¼ç¢¼æ”¾åœ¨åŒä¸€å€‹ç›®éŒ„ä¸‹åŸ·è¡Œã€‚ 1234567891011&quot;&quot;&quot;&quot;mod.pyè¢«å°å‡ºçš„æ¨¡çµ„&quot;&quot;&quot;var = &quot;This is variable&quot;def sayHello(): return &quot;This is mod.py&quot;def sayGoodBy(): return &quot;Bye!&quot; 12345#### main.pyimport mod # éœ€è¦èˆ‡mod.pyåŒä¸€ç›®éŒ„ä¸‹print(mod.sayHello()) # å‘¼å« sayHelloå‡½å¼ -&gt; This is mod.pyprint(mod.var) # å‘¼å«varè®Šæ•¸ -&gt; This is variable æ¨¡çµ„çš„è·¯å¾‘å¯¦éš›æƒ…æ³æ˜¯ï¼Œä¸å¯èƒ½ç¸½æ˜¯æŠŠæ‰€æœ‰çš„ç¨‹å¼ç¢¼æ”¾åœ¨åŒä¸€å€‹è·¯å¾‘æˆ–æ˜¯è³‡æ–™å¤¾ã€‚ç‚ºäº†è¦è®“é€™ä¸€ä»½ç¨‹å¼ç¢¼èƒ½åœ¨åŒä¸€å€‹ç’°å¢ƒåº•ä¸‹ä»»ä½•æ™‚å€™éƒ½èƒ½ä½¿ç”¨ï¼Œéœ€è¦å°‡æª”æ¡ˆè¨­å®šåœ¨Pythonç’°å¢ƒçš„è·¯å¾‘ã€‚é‚£Python å¦‚ä½•çŸ¥é“åœ¨å“ªè£¡æœå°‹æ¨¡çµ„çš„è·¯å¾‘å‘¢ï¼Ÿé€™æ™‚å¯ä»¥ä½¿ç”¨sysæ¨¡çµ„å¹«åŠ©æˆ‘å€‘å°‹æ‰¾æ¨¡çµ„è·¯å¾‘ã€‚ 123456789import sysprint(sys.path)# çµæœ&quot;&quot;&quot;['/Users/tsungyuchen/Desktop/python_practice', '/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7', '/Users/tsungyuchen/Library/Python/3.7/lib/python/site-packages']&quot;&quot;&quot; å°å‡ºçµæœç‚ºPythonå°‹æ‰¾æ¨¡çµ„çš„è·¯å¾‘ï¼Œæˆ‘å€‘å¯ä»¥çœ‹åˆ°Python/3.7/lib/python/site-packagesçš„è·¯å¾‘ï¼Œå°‡mod.pyå°‡å…¥æ­¤è³‡æ–™å¤¾å¾Œï¼Œé›»è…¦ä¸Šå…¶ä»–ä½ç½®çš„å°ˆæ¡ˆå°±å¯ä»¥ç›´æ¥å¼•å…¥æ­¤æ¨¡çµ„ã€‚ è·¯å¾‘é…ç½®æœ‰æ™‚importæ¨¡çµ„æœƒå‡ºç¾ImportErrorçš„éŒ¯èª¤è¨Šæ¯ï¼Œå¤§å¤šæ•¸çš„æƒ…æ³éƒ½æ˜¯è·¯å¾‘çš„å•é¡Œï¼Œç‚ºäº†è§£æ±ºä¸Šè¿°å•é¡Œï¼Œéœ€è¦æ–°å¢æ¨¡çµ„æœå°‹è·¯å¾‘ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å¹¾ç¨®æ–¹å¼ï¼š å¢åŠ è·¯å¾‘é€šésysæ¨¡çµ„çš„append()æ–¹æ³•åœ¨Pythonç’°å¢ƒä¸­å¢åŠ æœå°‹è·¯å¾‘ï¼Œèªæ³•çµæ§‹ç‚º: 1sys.path.append('æ–°å¢çš„æœå°‹è·¯å¾‘') ä¿®æ”¹ç’°å¢ƒè®Šæ•¸ä¿®æ”¹PYTHONPATHè®Šæ•¸ã€‚ æ‰“é–‹vim 1vim ~/.bashrc è¨­ç½®è·¯å¾‘ä¸¦æ·»åŠ ä»¥ä¸‹å…§å®¹ï¼š 1export PYTHONPATH=$PYTHONPATH:ä½ è¦çš„è·¯å¾‘ é€€å‡ºå¾Œä¿å­˜(ç›¸é—œæŒ‡ä»¤èªªæ˜é»æˆ‘)ï¼Œå†é‡æ–°å•Ÿå‹•ã€‚ 1source ~/.bashrc Packageæœ‰æ™‚æœƒéœ€è¦å°‡åŠŸèƒ½é¡ä¼¼çš„moduleé€²è¡Œæ•´åˆï¼Œæœƒéœ€è¦å°‡é€™äº›æ¨¡çµ„æ”¾åœ¨åŒå€‹packageä¸‹ã€‚packageå¯ç°¡å–®çœ‹ä½œä¸€å€‹è³‡æ–™å¤¾ï¼Œè‹¥è¦è®“é›»è…¦è¾¨èªé€™æ˜¯ä¸€å€‹å¯è¢«å¼•å…¥çš„packageï¼Œè©²packageä¸‹å¿…é ˆè¦æ”¾ä¸€å€‹__init__.py æª”æ¡ˆã€‚æ­¤æª”æ¡ˆå¯ä»¥ç‚ºç©ºï¼Œæˆ–æ˜¯å¯«å…¥ä»»ä½•è©²packageæˆ–è©²packageå…§moduleè¢«å¼•å…¥æ™‚è¦åŸ·è¡Œçš„ç¨‹å¼ç¢¼ã€‚ å¼•ç”¨æ–¹æ³•12345import packageimport package.modulefrom package import module1, module2... ç¯„ä¾‹å‡è¨­æœ‰ä¸€å€‹åç‚ºpkgçš„è³‡æ–™å¤¾(è¦–ç‚ºä¸€å€‹package)ï¼Œåº•ä¸‹æœ‰mod1.pyã€mod2.pyã€mod3.pyä¸‰å€‹æ¨¡çµ„ï¼Œé€émain.pyæª”é€²è¡Œå‘¼å«ã€‚ åœ¨__init__.pyç‚ºç©ºçš„æƒ…æ³ä¸‹å¯«ä»¥ä¸‹ç¯„ä¾‹: 1234567891011121314151617# mod1.pyvar1 = &quot;This is variable1&quot;def sayHello(): return &quot;This is mod1.py&quot;def sayGoodBy(): return &quot;Bye!&quot;# mod2.pyvar2 = &quot;This is variable2&quot;def sayHello(): return &quot;This is mod2.py&quot;def sayGoodBy(): return &quot;Bye!&quot; åˆ†åˆ¥å¼•å…¥mod1.pyã€mod2.py 12345678910# main.pyfrom pkg import mod1, mod2print(mod1.sayHello())print(mod2.sayHello())&quot;&quot;&quot;This is mod1.pyThis is mod2.py&quot;&quot;&quot; __init__.py é…ç½®åœ¨__init__.pyåŠ å…¥è©²packageä¸‹ä¸åŒçš„æ¨¡çµ„æ‰€å‘¼å«çš„å‡½å¼æˆ–è®Šæ•¸ã€‚__init__.pyé…ç½®å€‹æ¨¡çµ„ä¸‹å‘¼å«çš„å‡½æ•¸ 123# __init__.pyfrom .mod1 import sayHellofrom .mod2 import sayHello 123456# main.pyimport pkg print(dir(pkg)) # æª¢è¦–ä¸€å€‹æ¨¡çµ„ä¸­å«æœ‰çš„å…§å®¹ï¼ˆattributeï¼‰print(pkg.mod1.sayHello())print(pkg.mod2.sayHello()) æª¢è¦–æ¨¡çµ„ã€packageä¸­çš„å…§å®¹(attribute)12345678print(dir(pkg))print(&quot;=============&quot;)print(dir(pkg.mod1))&quot;&quot;&quot;['__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__path__', '__spec__', 'mod1', 'mod2', 'sayHello']=============['__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'sayGoodBy', 'sayHello', 'var1']&quot;&quot;&quot; ä¸Šè¿°ç¯„ä¾‹å¯ä»¥çœ‹åˆ°è©²packageåŠæ¨¡çµ„ä¸­çš„å…§å®¹ã€‚ __builtins__è¡¨å…§å»ºæ¨¡çµ„ï¼Œä¸éœ€è¦æ‰‹å‹•åŒ¯å…¥ï¼Œæ‰€ä»¥åœ¨å•Ÿå‹•Pythonæ™‚ç³»çµ±å°±æœƒè‡ªå‹•åŒ¯å…¥äº†ï¼Œä»»ä½•ç¨‹å¼éƒ½èƒ½ç›´æ¥ä½¿ç”¨å®ƒå€‘ã€‚ __doc__: æŸ¥çœ‹å°æ–¼è©²æ¨¡çµ„çš„æ–‡ä»¶èªªæ˜ã€‚ __file__: æŸ¥çœ‹æ¨¡çµ„æ‰€åœ¨è·¯å¾‘ __package__ï¼šè©²packageçš„åç¨± __name__ï¼šè©²packageçš„åç¨± å¸¸ç”¨æ¨¡çµ„osæ¨¡çµ„åŒ…å«äº†å¸¸ç”¨çš„ä½œæ¥­ç³»çµ±åŠŸèƒ½ï¼Œæä¾›ç³»çµ±æ“ä½œçš„æ–¹æ³•ã€‚ 12345678910111213141516171819202122232425262728293031323334import os#å–å¾—ç³»çµ±å¹³å°è³‡è¨Šos.name#ç²å–ç•¶å‰å·¥ä½œç›®éŒ„os.getcwd()# å–å¾—æŒ‡å®šç›®éŒ„ä¸­æ‰€æœ‰çš„æª”æ¡ˆèˆ‡å­ç›®éŒ„åç¨±os.listdir(path)# åˆ¤æ–·è©²é …ç›®æ˜¯å¦ç‚ºæ™®é€šæª”æ¡ˆos.path.isfile# åˆ¤æ–·è©²é …ç›®æ˜¯å¦ç‚ºç›®éŒ„os.path.isdir# åˆ—å‡ºæŒ‡å®šçš„è·¯å¾‘ä¸‹æ‰€æœ‰å­ç›®éŒ„èˆ‡æª”æ¡ˆè³‡è¨Šos.walk#æ”¹è®Šç›®å‰è·¯å¾‘os.chdir(path)#å»ºç«‹æ–°ç›®éŒ„os.makedir(path)#åˆªé™¤ç©ºç›®éŒ„os.removedirs(path)#åˆªé™¤æ–‡ä»¶os.remove(&quot;æ–‡ä»¶å&quot;)#åŸ·è¡ŒShellæŒ‡ä»¤os.system(&quot;å‘½ä»¤&quot;)#å¾—åˆ°ç•¶å‰æ–‡ä»¶çš„çµ•å°è·¯å¾‘os.path.abspath()#è¼¸å…¥ä¸€å€‹å…¨è·¯å¾‘åã€‚å¾—åˆ°ç•¶å‰æ–‡ä»¶çš„è·¯å¾‘os.path.dirname(&quot;pathName&quot;)#è¼¸å…¥ä¸€å€‹å…¨è·¯å¾‘åã€‚å¾—åˆ°æ–‡ä»¶åos.path.basename(&quot;fullPathName&quot;)#åˆ¤æ–·è·¯å¾‘æ˜¯å¦å­˜åœ¨os.path.exists(&quot;fullPathName&quot;)#è·¯å¾‘æ‹¼æ¥os.path.join(&quot;pathName1&quot;,&quot;pathName2&quot;) ç¯„ä¾‹: å–å¾—æª”æ¡ˆåˆ—è¡¨åˆ©ç”¨os.listdir(path)å–å¾—æª”æ¡ˆåˆ—è¡¨ 12345678910111213141516171819202122from os import listdirfrom os.path import isfile, isdir, join, dirnamemypath = &quot;django&quot;# å–å¾—æ‰€æœ‰æª”æ¡ˆèˆ‡å­ç›®éŒ„åç¨±files = listdir(mypath)# ä»¥è¿´åœˆè™•ç†for f in files: # ç”¢ç”Ÿæª”æ¡ˆçš„çµ•å°è·¯å¾‘ fullpath = join(mypath, f) # åˆ¤æ–· fullpath æ˜¯æª”æ¡ˆé‚„æ˜¯ç›®éŒ„ if isfile(fullpath): print(&quot;æª”æ¡ˆï¼š&quot;, f) elif isdir(fullpath): print(&quot;ç›®éŒ„ï¼š&quot;, f) &quot;&quot;&quot;æª”æ¡ˆï¼š .DS_Storeç›®éŒ„ï¼š stocksæª”æ¡ˆï¼š Pipfileæª”æ¡ˆï¼š Pipfile.lock&quot;&quot;&quot; ç¯„ä¾‹: æ‹¼æ¥æ–‡ä»¶çš„çµ•å°è·¯å¾‘åˆ—å‡ºæŒ‡å®šçš„è·¯å¾‘ä¸‹æ‰€æœ‰å­ç›®éŒ„èˆ‡æª”æ¡ˆè³‡è¨Šã€‚os.walk å°‡æ¯ä¸€å€‹ç›®éŒ„ä¸­çš„æª”æ¡ˆéƒ½åˆ—å‡ºä¾†ï¼Œä¸¦ä¸”è‡ªå‹•å€åˆ†æª”æ¡ˆèˆ‡ç›®éŒ„ã€‚ 123456from os import walkfrom os.path import joinfor root, dirs, files in walk(mypath): print(&quot;è·¯å¾‘ï¼š&quot;, root) print(&quot;ç›®éŒ„ï¼š&quot;, dirs) print(&quot;æª”æ¡ˆï¼š&quot;, files) è¼¸å‡ºçµæœ å¯¦éš›æ‹¼æ¥ 12345678from os import walkfrom os.path import joinmypath = &quot;django&quot;# å–å¾—æ‰€æœ‰æª”æ¡ˆèˆ‡å­ç›®éŒ„åç¨±for root, dirs, files in walk(mypath): for f in files: fullpath = join(root, f) print(fullpath) å°å‡ºæ‰€æœ‰æª”æ¡ˆçš„çµ•å°è·¯å¾‘ sysæ¨¡çµ„12345678import syssys.argv # å›å‚³åŸ·è¡Œæ–‡ä»¶æ™‚çš„åƒæ•¸åˆ—è¡¨sys.exit([arg]) # é€€å‡ºç•¶å‰ç¨‹å¼sys.modules # sys.modulesæŸ¥è©¢ç•¶å‰ç³»çµ±æ¨¡çµ„åŒ…å«çš„è®Šæ•¸æˆ–é¡çš„è·¯å¾‘sys.path # sys.pathæŸ¥è©¢ç•¶å‰æ¨¡çµ„æ‰€è™•è·¯å¾‘sys.platform # sys.platformæŸ¥è©¢ç•¶å‰ç›´è­¯å™¨åŸ·è¡Œçš„å¹³è‡ºsys.stdin, stdout, stderr # å¸¸è¦‹è¼¸å…¥è¼¸å‡º åƒè€ƒDay17-æ¨¡çµ„ Day18-æ¨™æº–å‡½å¼åº« Pythoné€²éšç¯‡äºŒï¼šPythonæ¨¡çµ„ Python åˆ—å‡ºç›®éŒ„ä¸­æ‰€æœ‰æª”æ¡ˆæ•™å­¸ï¼šos.listdir èˆ‡ os.walk Python åˆå­¸ç¬¬åä¸‰è¬›â€”æ¨¡çµ„","link":"2019/08/05/Python/Python/%5BPython%5D%20module&package/"},{"title":"[Python] å­—ä¸²è™•ç†","text":"å‰è¨€æœ¬ç¯‡ç´€éŒ„ç¶“å¸¸ç”¨åˆ°çš„å­—ä¸²è™•ç†æ–¹æ³•, è€Œé€™äº›æ–¹æ³•å·²ç¶“å¯ä»¥æ»¿è¶³å¤§éƒ¨åˆ†å­—ä¸²è™•ç†çš„éœ€æ±‚ã€‚ å­—ä¸²(string)Pythonçš„å­—ä¸²æœ‰å–®å¼•è™Ÿ''æˆ–é›™å¼•è™Ÿ&quot;&quot;çš„å½¢å¼ï¼Œ è‹¥å­—ä¸²ä¸­æœ¬èº«å°±åŒ…å«å–®å¼•è™Ÿæˆ–æ˜¯é›™å¼•è™Ÿï¼Œå¯ä»¥ä½¿ç”¨å¦ä¸€ç¨®å¼•è™Ÿä»¥åˆ©å€åˆ¥ å¦‚æœåœ¨å­—ä¸²è³‡æ–™ä¸­é‡åˆ°ç›¸åŒå¼•è™Ÿæ™‚ï¼Œå‰‡éœ€ä½¿ç”¨è·³è„«(escape)å­—å…ƒ: \\åšè·³è„«è™•ç†ï¼Œé¿å…è¢«èª¤åˆ¤ç‚ºå­—ä¸²çš„çµæŸé»ã€‚ ç¯„ä¾‹è‹¥è¦å¯«å…¥I'mé€™é¡å‹çš„ç¸®å¯«æ–‡å­—ï¼Œç‚ºäº†é¿å…è¢«èª¤åˆ¤ç‚ºå­—ä¸²çš„çµæŸé»ï¼Œå¯ä»¥æ¡ç”¨å…©ç¨®æ–¹æ³•: æ–¹æ³•ä¸€: è·³è„«å­—å…ƒ12name = 'I\\'m Tom.'print(name) æ–¹æ³•äºŒ: æ”¹ç”¨å¦ä¸€å½¢å¼çš„å¼•è™Ÿ12name = &quot;I'm Tom.&quot;print(name) å»ºç«‹å­—ä¸²ä»¥ä¸‹ä¸‰å€‹éƒ½æ˜¯å»ºç«‹ç©ºå­—ä¸²çš„æ–¹æ³•ï¼Œç•¶ç„¶ä¹Ÿå¯ä»¥çµ¦å®šåˆå§‹å€¼ 1234567# å»ºç«‹ç©ºå­—ä¸²str1 = str()str2 = ''str3 = &quot;&quot;# çµ¦å®šåˆå§‹å€¼init_str = &quot;hello&quot; å­—ä¸²çš„è™•ç†å­—ä¸²æ‹¼æ¥å…©å€‹å­—ä¸²ä½œç›¸åŠ +é‹ç®—ï¼Œè³‡æ–™ä¸²æ¥èµ·ä¾†ã€‚ 123str1 = &quot;Hello, &quot;str2 = &quot; my name is Tom&quot;print(str1 + str2) é‡è¤‡å°å‡ºå­—ä¸²é€éä¹˜æ³•*å¯ä»¥é‡è¦†å­—ä¸²çš„å…§å®¹ã€‚ 12x = 'Hello'print(x*3) # HelloHelloHello æ˜¯åœ¨å“ˆå›‰? è¨ˆç®—å­—ä¸²é•·åº¦len()å‡½å¼å–å¾—å­—ä¸²çš„é•·åº¦ä¸¦å›å‚³ã€‚ 12str = &quot;Python&quot;print(len(str)) å­—ä¸²æ“·å–åˆ©ç”¨ä¸­æ‹¬è™Ÿ[èµ·å§‹ç´¢å¼•å€¼:çµæŸç´¢å¼•å€¼]å¯ä»¥å–å‡ºå­—ä¸²éœ€è¦çš„éƒ¨ä»½å…§å®¹ï¼Œå­—ä¸²çš„ç´¢å¼•å€¼(index)æ˜¯å¾0é–‹å§‹ï¼Œè‹¥è¦å–æœ€å¾Œä¸€å€‹å­—å¯ä»¥ç”¨ -1ã€‚ 12345str = &quot;Python&quot;print(str[4]) # è¡¨æ˜¯å¾index=0~4# &quot;o&quot;print(str[-1]) # &quot;n&quot; å­—ä¸²åˆ†å‰²split(&quot;åˆ†å‰²ç¬¦è™Ÿ&quot;)çš„æ–¹æ³•ä»¥()å…§çš„åˆ†å‰²ç¬¦è™Ÿä½œç‚ºåˆ†å‰²ä¾æ“šï¼Œå›å‚³listçš„è³‡æ–™çµæ§‹ã€‚ split()é è¨­ä»¥ç©ºç™½ä½œç‚ºåˆ†å‰²ä¾æ“šï¼Œå›å‚³æ‰€æœ‰å–®å­— 123456789101112131415161718str1 = 'My name is Tom.'str2 = '123.456.789'str3 = 'MMS-231-HIA-Hel988'list1 = str1.split(' ')print(list1)list2 = str2.split('.')print(list2)list3 = str3.split('-')print(list3)&quot;&quot;&quot;['My', 'name', 'is', 'Tom.']['123', '456', '789']['MMS', '231', 'HIA', 'Hel988']&quot;&quot;&quot; ç¿»è½‰å­—ä¸²Pythonåœ¨è™•ç†reverse stringéå¸¸å²å®³ï¼Œåªéœ€è¦ä¸€è¡Œç¨‹å¼ç¢¼å³å¯æå®šã€‚ä¹Ÿå¯ä»¥å‘¼å«reverse()é€™å€‹å‡½å¼ã€‚ 123456sss = 'abcdefg'sss = sss[::-1]print(sss) # æ­¤æ³•ä¹Ÿå¯ä»¥sss.reverse() ä¸Šé¢ç‚ºsliceæ–¹æ³•(åˆç¨±åˆ‡ç‰‡)ï¼Œçµæ§‹èªªæ˜: [èµ·å§‹é»:çµ‚é»:é–“éš”å€¼] æ ¼å¼åŒ– å¤§å°å¯«è½‰æ›123456s = &quot;Hello&quot;s.upper() #å…¨éƒ¨å­—å…ƒè½‰æˆå¤§å¯«s.lower() #å…¨éƒ¨å­—å…ƒè½‰æˆå°å¯«s.title() #é¦–å­—è½‰æˆå¤§å¯«s.capitalize #æ¯å€‹å­—è©çš„é¦–å­—è½‰æˆå¤§å¯«s.swapacase #å°‡å¤§å°å¯«é¡›å€’ æ–°å¢å’Œåˆªé™¤ç©ºæ ¼1234567891011121314space=&quot; abc &quot; space.strip() #åˆªé™¤å‰å¾Œçš„ç©ºæ ¼space.rstrip() #åˆªé™¤å³é‚Šçš„ç©ºæ ¼space.lstrip() #åˆªé™¤å·¦é‚Šçš„ç©ºæ ¼ numb=&quot;1112233111&quot;numb.strip(&quot;1&quot;) #åˆªé™¤ç‰¹å®šå­—å…ƒ space = &quot;this is the space&quot;space.center(30) #ç”¢ç”Ÿä¸€å®šæ•¸é‡çš„ç©ºæ ¼ï¼Œä¸¦ä¸­å¿ƒå°é½Šä¸€å€‹çµ¦å®šçš„å­—ä¸²space.ljust(30) #ç”¢ç”Ÿä¸€å®šé•·åº¦çš„ç©ºæ ¼ä¸¦å·¦å°é½Šspace.rjust(30) #ç”¢ç”Ÿä¸€å®šé•·åº¦çš„ç©ºæ ¼ä¸¦å³å°é½Š&quot;123&quot;.rjust(10,&quot;0&quot;) #èƒ½ä»¥ä»»æ„å­—å…ƒå¡«å……ç©ºæ ¼&quot;123&quot;.zfill(10) #åœ¨å·¦é‚Šå¡«å……ä¸€å®šæ•¸é‡çš„0 format()æ ¼å¼åŒ–åœ¨æ—¢æœ‰çš„å­—ä¸²ä¸­åŠ å…¥{}ï¼Œæ”¾å…¥è¢«format()æ ¼å¼åŒ–å¾Œçš„å€¼ã€‚12345678pi=3.14&quot;The value of pi is {}&quot;.format(pi) #ä¸²æ ¼å¼åŒ–å¾Œçš„å€¼&quot;&quot;&quot;First letter: {0}. Last letter: {1}.&quot;&quot;&quot; .format('A', 'Z')#{}ä¸­è¨­å®šæ•¸å­—ä»£è¡¨è¦æ’å…¥çš„åƒæ•¸çš„ç´¢å¼•&quot;&quot;&quot;First letter: {first}. Last letter: {last}.&quot;&quot;&quot; .format(last='Z', first='A')#è‹¥{}ä¸­åŒ…æ‹¬äº†ä¸€å€‹å­—ä¸²ï¼Œå‰‡å¯ä»¥åç¨±æŒ‡å®šè¦æ’å…¥çš„å€¼&quot;pi = {0:.3f}&quot;.format(pi)#æ•¸å­—çš„æ’å…¥ï¼Œ0ä»£è¡¨è¦æ’å…¥çš„åƒæ•¸çš„ç´¢å¼•ï¼Œ:ä»£è¡¨å¾Œé¢è¦è·Ÿè‘—æ ¼å¼åŒ–çš„ç¨‹å¼ç¢¼ï¼Œ.3fä»£è¡¨éœ€è¦çš„ç²¾åº¦è³‡è¨Šï¼Œå°æ•¸é»å¾Œä¿ç•™3ä½å°æ•¸çš„æµ®é»æ•¸ æŸ¥æ‰¾å­—ä¸²1234567stat = 'Today is not my day'stat.find('Today') #æŸ¥è©¢å­—ä¸²åœ¨å­—ä¸²ä¸­å‡ºç¾çš„ç´¢å¼•ï¼Œè‹¥æœå°‹ä¸åˆ°å­å­—ä¸²ï¼Œæœƒå›å‚³-1stat.index('Today') #æŸ¥è©¢å­—ä¸²åœ¨å­—ä¸²ä¸­å‡ºç¾çš„ç´¢å¼•ï¼Œè‹¥æœå°‹ä¸åˆ°å­å­—ä¸²ï¼Œæœƒå›å‚³ValueErrorstat.rfind('Today') #å¾å°¾éƒ¨å¾€å‰æŸ¥è©¢å­å­—ä¸²åœ¨å­—ä¸²ä¸­å‡ºç¾çš„ç´¢å¼• stat.endswith('day') #æª¢æŸ¥å­—ä¸²æœ€å¾Œä¸€å€‹å­—ä¸²stat.startswith('Today') #æª¢æŸ¥å­—ä¸²é¦–å€‹å­—ä¸² æ›¿æ›å­—ä¸²replace('èˆŠå­—ä¸²','æ–°å­—ä¸²')æ–¹æ³•åšæ–°/èˆŠå­—ä¸²çš„æ›¿æ›ã€‚ 1stat.replace('brown','red') å‹åˆ¥è½‰æ›ä¸€å€‹å€¼å¾ä¸€ç¨®å‹æ…‹è½‰è®Šç‚ºå¦å¤–ä¸€ç¨®å‹æ…‹ã€‚ ç¯„ä¾‹: å°‡ä¸€å€‹å­—ä¸² (str) è½‰ç‚ºæ•´æ•¸123456789101112131415stringNum = &quot;155&quot;intNum = int(stringNum)print(stringNum)print(intNum)print(type(stringNum))print(type(intNum))# çµæœ'''5555&lt;&lt;class 'str'&gt;&lt;&lt;class 'int'&gt;''' ç¯„ä¾‹: å°‡ä¸€å€‹æ•¸å€¼è½‰ç‚ºå­—ä¸² (str)å¯ç”¨str(æ•¸å€¼)çš„æ–¹æ³•å°‡æ•¸å€¼è½‰ç‚ºå­—ä¸²ã€‚ 12345intNum = 155stringNum = str(stringNum)print(type(stringNum))print(type(intNum)) æ¸¬è©¦å­—ä¸² isupper(): è‹¥å­—ä¸²ç‚ºå¤§å¯«å­—æ¯çµ„æˆ, å°±å›å‚³True islower(): è‹¥å­—ä¸²ç‚ºå°å¯«å­—æ¯çµ„æˆ, å°±å›å‚³True isspace(): è‹¥å­—ä¸²ç‚ºç©ºç™½å­—å…ƒçµ„æˆ, å°±å›å‚³True isalnum(): è‹¥å­—ä¸²ç‚ºå­—æ¯å’Œæ•¸å­—çµ„æˆ, å°±å›å‚³True isalpha(): è‹¥å­—ä¸²ç‚ºå­—æ¯çµ„æˆ, å°±å›å‚³True isdigit(): è‹¥å­—ä¸²ç‚ºæ•¸å­—çµ„æˆ, å°±å›å‚³True isidentifier(): è‹¥å­—ä¸²ç‚ºè­˜åˆ¥å­—, å°±å›å‚³True åƒè€ƒæ–‡ç« [Python]B13â”€å­—ä¸²è™•ç†(string processing)[Python] å­—ä¸²è™•ç†","link":"2019/08/01/Python/Python/%5BPython%5D%20%E5%AD%97%E4%B8%B2%E8%99%95%E7%90%86/"},{"title":"[Python] å­—ä¸²æ ¼å¼åŒ–","text":"å‰è¨€é€²è¡Œè³‡æ–™è™•ç†æ™‚ï¼Œå¾ˆå¤šæ™‚å€™éƒ½éœ€è¦å°æ•¸å€¼é€²è¡Œæ ¼å¼åŒ–è½‰ç‚ºå­—ä¸²åšæ‹¼æ¥ï¼Œæˆ–æ˜¯æŸæ®µå­—ä¸²èˆ‡è®Šæ•¸åšä¸²é€£ã€‚Pythonçš„å­—ä¸²æ ¼å¼åŒ–ç”¨æ–¼ç°¡åŒ–éœæ…‹å­—ä¸²å’Œè®Šæ•¸çš„ä¸²æ¥ï¼Œä¸¦æ ¼å¼åŒ–è®Šæ•¸ï¼Œç•¶ç„¶ä¹Ÿå¯ä»¥å°æ•¸å€¼é€²è¡Œæ ¼å¼åŒ–æˆå­—ä¸²ï¼Œå­—ä¸²æ ¼å¼åŒ–çš„æ–¹å¼æœ‰å››ç¨®: ç™¾åˆ†æ¯”(%) str.format =&gt; ä½œæ³•:'{}'.format() f-string(åˆä½œformatted string literals) æ¨£æ¿å­—ä¸²(Template String) f-stringæ˜¯Python3.6ä¹‹å¾Œæ‰æœ‰çš„ï¼Œå¯¦éš›ä¸Šå°æ¯”çš„è©±f-stringæ˜¯ä¸‰è€…ä¸­(ç™¾åˆ†æ¯”(%)èˆ‡'{}'.format())æ•ˆèƒ½æœ€å¥½çš„ï¼ŒåŒæ™‚ä¹Ÿæé«˜å¯è®€æ€§ï¼Œå»ºè­°å¯¦éš›é–‹ç™¼æ™‚ï¼Œç›´æ¥ç”¨f-stringæ–¹æ³•å–ä»£å‰å…©è€…å“¦ï¼ å¯¦ä½œç™¾åˆ†æ¯”(%)ç‚ºPythonæœ€æ—©æ ¼å¼åŒ–å­—ä¸²çš„æ–¹æ³•ï¼Œé€é%é‹ç®—ç¬¦è™Ÿï¼Œå°‡åœ¨tupleä¸­çš„ä¸€çµ„è®Šæ•¸ä¾ç…§æŒ‡å®šçš„æ ¼å¼åŒ–æ–¹å¼è¼¸å‡ºã€‚å¦‚æ ¼å¼åŒ–: å­—ä¸²(%s)ã€ åé€²ä½æ•´æ•¸(%d)ã€æµ®é»æ•¸(%f)ç­‰ã€‚ ç¯„ä¾‹1234567891011print('%d' % 20) # æ ¼å¼åŒ–æ•´æ•¸print('%f' % 1.11) # é è¨­ä¿ç•™6ä½å°æ•¸print('%.1f' % 1.11) # å–1ä½å°æ•¸print('My name is %s'% 'tom') # æ ¼å¼åŒ–å­—ä¸²&quot;&quot;&quot;201.1100001.1My name is tom&quot;&quot;&quot; ç¼ºé» ä¸é©åˆå¤šå€‹è®Šæ•¸ å¯è®€æ€§ä½ '{}'.format()ç›¸è¼ƒæ–¼ç¬¬ä¸€å€‹æ ¼å¼åŒ–æ–¹æ³•ï¼Œformat()æ–¹æ³•æ›´å¥½ç”¨ï¼Œä½¿ç”¨å¤§æ‹¬è™Ÿ{}ä½œç‚ºç‰¹æ®Šå­—å…ƒï¼Œæ”¾åœ¨ç›®æ¨™å­—ä¸²çš„æŒ‡å®šä½ç½®ï¼Œformat()ä¸­å‰‡æ”¾å…¥è¦æ‹¼æ¥çš„è®Šæ•¸ã€å­—ä¸²æˆ–æ•¸å€¼ã€‚ ç¯„ä¾‹: ä¸æŒ‡å®šé †åºè‹¥{}å…§ä¸æŒ‡å®šç´¢å¼•å€¼çš„è©±ï¼Œé è¨­ä¾åºå¾0é–‹å§‹ï¼Œ()æœƒä¾ç…§åƒæ•¸å¡«å…¥çš„é †åº 1234name = &quot;tom&quot;age = 20strr = &quot;my name is {} and my age is {}&quot;.format(name, age)strr ç¯„ä¾‹: æŒ‡å®šé †åºç•¶ç„¶ä»–ä¹Ÿå¯ä»¥æŒ‡å®šæ”¾å…¥çš„ä½ç½®ï¼Œåªè¦åœ¨{}å…§åŠ å…¥ç´¢å¼•å€¼(index)å³å¯ã€‚ 1234name = &quot;tom&quot;age = 20strr = &quot;my name is {1} and my age is {0}&quot;.format(name, age)strr åŸ·è¡Œä¸Šé¢çš„ç¨‹å¼ç¢¼å³å¯å°‡nameã€ageå…©å€‹è®Šæ•¸çš„ä½ç½®å°èª¿ str-formatting é™¤äº†å¯ä»¥æŒ‡å®šæ ¼å¼åŒ–è®Šæ•¸åç¨±åŠå®ƒçš„ä½ç½®å¤–ï¼Œäº¦å¯èª¿æ•´è¼¸å‡ºæ¨£å¼ï¼Œåªè¦åŠ å…¥^ï¼ˆç½®ä¸­ï¼‰ã€&lt;ï¼ˆå‘å·¦å°é½Šï¼‰ã€&gt;ï¼ˆå‘å³å°é½Šï¼‰ç­‰å­—å…ƒã€‚ ç¯„ä¾‹: å°é½Š12345678910# ========== å‘å³å°é½Š =============print('{:&gt;10}'.format('test')) # ========== å‘å·¦å°é½Š =============print('{:10}'.format('test'))# ç­‰åŒprint('{:&lt;10}'.format('test'))# ============ ç½®ä¸­ ===========print('{:^10}'.format('test')) æˆ–æ˜¯ä»¥'{:,}'çš„æ–¹å¼ä»¥é€—è™Ÿåˆ†éš”æ•¸å­— 1print('{:,}'.format(243554543)) é™¤äº†å°é½Šä¹‹å¤–ï¼Œé‚„å¯ä»¥æ‡‰ç”¨åœ¨listä¸²åˆ—ã€dicå­—å…¸åŠclassç‰©ä»¶ä¸­ ç¯„ä¾‹ï¼šæ ¼å¼åŒ–listä¸²åˆ—1print('The student is {students[1]}'.format(students=['Tom', 'Jack','Amy'])) # The student is Jack ç¯„ä¾‹åˆ†é–‹å­—ä¸²å¯ä½¿ç”¨*æ–¹æ³•åˆ†é–‹å­—ä¸² 1print('{} {} {} {} {} {}'.format(*'123456')) # 1 2 3 4 5 6 ç¯„ä¾‹ï¼šæ ¼å¼åŒ–dicå­—å…¸å¦‚æœè¦æ ¼å¼åŒ–å­—å…¸ï¼Œéœ€è¦åœ¨æ¯å€‹ç‰©ä»¶å‰é¢åŠ ä¸Š**ï¼Œå¦å‰‡æœƒå¦‚åŒä¸‹æ–¹ç¯„ä¾‹ï¼Œå ±KeyErroréŒ¯èª¤ 12print('My age is {age} and gender is {gender}'.format({'age':20}, {'gender': &quot;female&quot;} )) # KeyError: 'age' åœ¨æ¯å€‹ç‰©ä»¶å‰é¢åŠ ä¸Š**å¾Œå³å¯æ­£å¸¸åŸ·è¡Œã€‚ 12print('My age is {age} and gender is {gender}'.format(**{'age':20}, **{'gender': &quot;female&quot;} )) # My age is 20 and gender is female ç¯„ä¾‹ï¼šæ ¼å¼åŒ–ç‰©ä»¶ä¸­çš„å±¬æ€§1234567class Name: def __init__(self, name): self.name = name def __str__(self): return 'Name({self.name})'.format(self=self)print('My name is {0.name}'.format(Name('Tom'))) # My name is Tomprint(Name('Tom')) # Name(Tom) ç¼ºé» ç•¶è®Šæ•¸å¤ªå¤šæ™‚ï¼Œè¦æ’°å¯«çš„ç¨‹å¼ç¢¼å°±æœƒéé•· f-stringPython3.6+æ–¹å¯ä½¿ç”¨ï¼Œåªéœ€è¦åœ¨å­—ä¸²å‰é¢åŠ å€‹få³å¯é€²è¡Œæ ¼å¼åŒ–ï¼Œä¸¦å°‡{}å¡«å…¥ç›®æ¨™è®Šæ•¸ã€‚æŠŠå‰›å‰›çš„ç¯„ä¾‹æ”¹å¯«æˆf-stringçš„æ–¹å¼ 12345# f-stringname = &quot;tom&quot;age = 20strr = f&quot;my name is {name} and my age is {age}&quot;strr æœƒç²å¾—ç›¸åŒçµæœï¼ å¯æ”¾è¡¨é”å¼èˆ‡å‘¼å«å‡½æ•¸{}å¯ä»¥å¡«å…¥è¡¨é”å¼æˆ–å‘¼å«å‡½æ•¸ï¼ŒPythonæœƒå›å‚³æ±‚å‡ºçš„çµæœä¸¦å¡«å…¥å­—ä¸²å…§ 1234567891011121314151617181920print(f'A total number of {100 * 2 + 20}')print(f'Complex number {(2 + 2j) / (2 - 3j)}')print(f'convert STUDENT to lower words are {&quot;STUDENT&quot;.lower()}')import mathprint(f'The answer is {math.log(math.pi)}')score = 90print(f'My score is {score}, so I am {&quot;good&quot; if score &gt; 80 else &quot;bad&quot;}.') &quot;&quot;&quot;å›å‚³çµæœ:A total number of 220Complex number (-0.15384615384615388+0.7692307692307692j)convert STUDENT to lower words are studentThe answer is 1.1447298858494002My score is 90, so I am good.&quot;&quot;&quot; æ ¼å¼åŒ–listä¸²åˆ—1234students=['Tom', 'Jack','Amy']print(f'The student is {students[1]}') # The student is Jack æ ¼å¼åŒ–dicå­—å…¸1234567dic = { 'name': &quot;Tom&quot;, 'age':20, 'gender': &quot;female&quot; }print(f'My name is {dic[&quot;name&quot;]}, age is {dic[&quot;age&quot;]} and gender is {dic[&quot;gender&quot;]}') # My name is Tom, age is 20 and gender is female å·¢ç‹€çµæ§‹æ³¨æ„: å·¢ç‹€çµæ§‹åªèƒ½ä¸€å±¤ 123456print(f&quot;Ans: {12.3456789:10.6}&quot;) # Ans: 12.3457value = 12.3456789print(f&quot;Ans: {value:10.6}&quot;) # Ans: 12.3457width = 10precision = 6print(f&quot;Ans: {value:{width}.{precision}}&quot;) # Ans: 12.3457 å–®é›™å¼•è™Ÿã€å¤§æ‹¬è™Ÿ({})èˆ‡è·³è„«å­—å…ƒ123456789101112131415161718pens = 3print(f'I have {pens} pens.') print(f'I\\thave \\t{pens}\\t pens.') # å¼•å…¥tab è·³è„«å­—å…ƒprint(f'I have {pens} {{pens}}.') # é›™å¤§æ‹¬è™Ÿ =&gt; å¦‚æœéœ€è¦é¡¯ç¤ºå¤§æ‹¬è™Ÿï¼Œå‰‡æ‡‰è¼¸å…¥é€£çºŒå…©å€‹å¤§æ‹¬è™Ÿ{{å’Œ}}txt = f&quot;&quot;&quot;My\\tage\\tis\\t{age}&quot;&quot;&quot;print(txt)&quot;&quot;&quot;çµæœI have 3 pens.I have 3 pens.I have 3 {pens}.My age is 20&quot;&quot;&quot; f-stringå¤§æ‹¬è™Ÿå…§æ‰€ç”¨çš„å¼•è™Ÿä¸èƒ½å’Œå¤§æ‹¬è™Ÿå¤–çš„å¼•è™Ÿå®šç¾©çš„ç¬¦è™Ÿç›¸è¡çªï¼Œå¯ä¾ä½¿ç”¨æƒ…æ³åˆ‡æ›''å’Œ&quot;&quot;ã€‚è‹¥å¤§æ‹¬è™Ÿå…§å¤–å…©å€‹å¼•è™Ÿç›¸è¡çªï¼Œæœƒå ±SyntaxErroréŒ¯èª¤ã€‚ 123print(f'I am {'Tom'}') # SyntaxError: invalid syntaxprint(f'I am {&quot;Tom&quot;}') # I am Tom è‹¥&quot;&quot;å’Œ''ç„¡æ³•æ»¿è¶³éœ€æ±‚ï¼Œå¯ä»¥ä½¿ç”¨''' '''å’Œ&quot;&quot;&quot; &quot;&quot;&quot; 1234567print(f&quot;He said {&quot;I'm Tom&quot;}&quot;) # SyntaxError: invalid syntaxprint(f'He said {&quot;I'm Tom&quot;}') #SyntaxError: invalid syntaxprint(f&quot;&quot;&quot;He said {&quot;I'm Tom&quot;}&quot;&quot;&quot;) # I'm Tomprint(f'''He said {&quot;I'm Tom&quot;}''') # I'm Tom backslashæ–œæ§“(\\)çš„ä½¿ç”¨å¤§æ‹¬è™Ÿå¤–çš„å¼•è™Ÿå¯ä»¥ä½¿ç”¨\\ï¼Œä½†å¤§æ‹¬è™Ÿå…§ä¸èƒ½ä½¿ç”¨\\ 12print(f'''He\\'ll say {&quot;I'm Tom&quot;}''') # He'll say I'm Tomprint(f'''He'll say {&quot;I\\'m Tom&quot;}''') # SyntaxError: f-string expression part cannot include a backslash å¦‚æœåœ¨å¤§æ‹¬è™Ÿå…§ä½¿ç”¨\\ï¼Œæœƒå ±SyntaxErrorã€‚ è§£æ±ºæ–¹å¼å…ˆå°‡å«\\çš„å­—ä¸²assignçµ¦ä¸€è®Šæ•¸ï¼Œå†ä»¥è®Šæ•¸çš„å½¢å¼å¡«å…¥{}ä¸­ã€‚ 12name = &quot;I\\'m Tom&quot;print(f'''He'll say {name}''') # He'll say I'm Tom ä¸Šè¿°ä¾‹å­å³æ˜¯æŠŠ&quot;I\\'m Tom&quot;é€™å€‹å«æœ‰ç‰¹æ®Šå­—å…ƒçš„\\assignçµ¦ä¸€è®Šæ•¸ï¼Œé€éè§£æè®Šæ•¸çš„æ–¹å¼ä¾†é¿å…SyntaxErrorã€‚ ç”¨æ–¼å¤šè¡Œå­—ä¸²12345678age = 20gender = &quot;male&quot;txt = f&quot;&quot;&quot;My age is {age} and My gender is {gender}&quot;&quot;&quot;txt f-stringæ¡ç”¨{content:format}ä¾†è¨­å®šå­—ä¸²æ ¼å¼ï¼Œcontentæ˜¯æ›¿æ›ä¸¦å¡«å…¥å­—ç¬¦ä¸²çš„å…§å®¹ï¼Œå¯ä»¥æ˜¯è®Šæ•¸ã€è¡¨é”å¼(é‹ç®—å­äº¦å¯)æˆ–å‡½æ•¸ï¼Œformatæ˜¯æ ¼å¼è¨­å®šã€‚é è¨­æ ¼å¼ç‚º{:format}ã€‚ è®“è·³è„«å­—å…ƒå¤±æ•ˆè‹¥è¦è®“è·³è„«å­—å…ƒå¤±æ•ˆï¼Œåœ¨fæŒ‡ä»¤å‰å†åŠ ä¸Šrï¼Œè¡¨ç¤ºraw(åŸå§‹å­—å…ƒ) 12name = &quot;Tom&quot;print(rf'My\\tname\\tis\\tTom\\thave\\t{name}') ç¯„ä¾‹ï¼š åˆ†å‰²åƒåˆ†ä½12345678num = 1234567890.0987print(f'num is {num:f}' )print(f'num is {num:,f}' )&quot;&quot;&quot;num is 1234567890.098700num is 1,234,567,890.098700&quot;&quot;&quot; lambdaå¤§æ‹¬è™Ÿå…§ä¹Ÿå¯æ”¾å…¥lambdaåŒ¿åå‡½å¼ï¼Œä½†lambdaåŒ¿åå‡½å¼çš„:æœƒè¢«f-stringèª¤åˆ¤ï¼Œç‚ºé¿å…èª¤åˆ¤çš„æƒ…æ³ï¼Œéœ€å°‡lambdaå‡½å¼åŒ…åœ¨æ‹¬è™Ÿ()å…§ã€‚ æœªå°‡lambdaå‡½å¼åŒ…åœ¨æ‹¬è™Ÿ()å…§ 12print( f&quot;&quot;&quot;even ? answer: { lambda n : &quot;Yes&quot; if n %2 == 0 else &quot;No&quot; (10)}&quot;&quot;&quot; )# SyntaxError å°‡lambdaå‡½å¼åŒ…åœ¨æ‹¬è™Ÿ()å…§ 1234print( f&quot;&quot;&quot;even ? answer: {(lambda n : &quot;Yes&quot; if n %2 == 0 else &quot;No&quot;) (10)}&quot;&quot;&quot; )&quot;&quot;&quot;even ? answer: Yes&quot;&quot;&quot; æ¨£æ¿å­—ä¸²(Template String) éœ€è¦å¾ Python å…§å»ºæ¨¡çµ„ string å¼•å…¥Template ä½¿ç”¨Template()åŒ…ä½ç›®æ¨™å­—ä¸²ï¼Œä¸¦ä½¿ç”¨éŒ¢$ç¬¦è™Ÿä¾†æ¨™ç¤ºè®Šæ•¸ æ¨£æ¿å­—ä¸²é è¨­ä½¿ç”¨éŒ¢$ç¬¦è™Ÿä¾†æ¨™ç¤ºè®Šæ•¸ æ›¿æ›è³‡æ–™çš„æ ¼å¼ç‚ºdictionary æœ€å¾Œä½¿ç”¨substitute()ä¾†æ›¿æ›è®Šæ•¸ ä¾†çœ‹æ®µç¯„ä¾‹ï¼Œæ”¹å¯«è‡ªå®˜æ–¹æ–‡ä»¶ 123from string import Templates = Template('$who likes $what')s.substitute(who='Tom', what='Python') æˆ–æ˜¯ 1234temp_str = '$who likes $what'new = Template(temp_str)dic = {'who': 'Tom', 'what': 'Python'}new.substitute(dic) å…©å€‹ç¯„ä¾‹å¯å¾—ç›¸åŒçµæœ æ”¹è®Šé è¨­å®šç¾©è®Šæ•¸çš„$ç¬¦è™Ÿé€šéclassç¹¼æ‰¿çš„æ–¹æ³•é‡å¯«å®šç¾©è®Šæ•¸çš„ç¬¦è™Ÿ 123456from string import Templateclass MyTemplate(Template): delimiter = '%' s = MyTemplate('%who knows?')s.substitute(who='Tom')# 'Tom knows?' æƒ¡æ„è…³æœ¬æ³¨å…¥é›–ç„¶å‰é¢æåˆ°çš„str.formatæ–¹æ³•æ–¹ä¾¿ï¼Œä½†æ˜¯å¾ˆæœ‰å¯èƒ½åœ¨é¢å°è™•ç†ä½¿ç”¨è€…è¼¸å…¥çš„å€¼æ™‚ï¼Œé­åˆ°æƒ¡æ„å­—å…ƒçš„æ³¨å…¥ï¼Œä¾†çœ‹å€‹ç¯„ä¾‹: 1234567891011121314151617181920&quot;&quot;&quot;source: https://realpython.com/python-string-formatting/#4-template-strings-standard-library&quot;&quot;&quot;# é‡‘é‘°ã€å¯†ç¢¼ã€tokenç­‰ç­‰SECRET = 'this-is-a-secret'class Error: def __init__(self): pass# A malicious user can craft a format string that# can read data from the global namespace:### ä½¿ç”¨è€…è¼¸å…¥æƒ¡æ„å­—å…ƒuser_input = '{error.__init__.__globals__[SECRET]}'# This allows them to exfiltrate sensitive information,# like the secret key:err = Error()user_input.format(error=err) ä¸Šæ–¹ç¯„ä¾‹ä¸­ï¼Œä½¿ç”¨è€…è¼¸å…¥æƒ¡æ„å­—å…ƒ:'{error.__init__.__globals__[SECRET]}'ï¼Œç¶“æ ¼å¼åŒ–è™•ç†å¾Œï¼Œæœƒç™¼ç”Ÿé‡‘é‘°æˆ–tokenç­‰æ©Ÿå¯†æ€§è³‡æ–™æ´©æ¼çš„å•é¡Œã€‚ è§£æ±ºæ–¹æ³•é‚£å¦‚æœæ”¹æˆTemplate Stringçš„è©±å‘¢ï¼Ÿ 12345678910# solutionSECRET = 'this-is-a-secret'class Error: def __init__(self): passuser_input = '${error.__init__.__globals__[SECRET]}'Template(user_input).substitute(error=err) # ValueError: Invalid placeholder in string åŸ·è¡Œä¸Šè¿°ç¯„ä¾‹æœƒå¾—åˆ°ä¸€å€‹ValueErrorçš„éŒ¯èª¤çµæœï¼Œè¼ƒèƒ½æœ‰æ•ˆé˜²æ­¢æ´©æ¼æ©Ÿå¯†è³‡è¨Šã€‚ ä½¿ç”¨æ™‚æ©Ÿç¶œåˆä»¥ä¸Šçš„æ–¹æ³•ï¼Œå¯ä¾ç…§ä¸åŒæ™‚æ©Ÿé»ï¼Œå»ºè­°ä½¿ç”¨ä¸åŒæ ¼å¼åŒ–å­—ä¸²çš„æ–¹å¼ï¼Œä¸‹é¢ç°¡å–®åšå€‹æ•´ç†ï¼š é¢å°Userè¼¸å…¥çš„å­—å…ƒï¼Œä½¿ç”¨Template Stringï¼Œé¿å…æƒ¡æ„è…³æœ¬æ³¨å…¥ éUserè¼¸å…¥çš„å­—å…ƒï¼Œå¦‚æœä½¿ç”¨Python3.6ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œæ¡ç”¨str.format éUserè¼¸å…¥çš„å­—å…ƒä¸”ä½¿ç”¨Python3.6ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œæ¨è–¦ä½¿ç”¨f-stringæ–¹æ³• Source ä»¥ä¸Šç‚ºæ ¼å¼åŒ–å­—ä¸²çš„ç¸½æ•´ç†ï¼Œå¦‚æœæœ‰å¯«ä¸æ¸…æ¥šæˆ–æ˜¯éŒ¯èª¤ä¹‹è™•ï¼Œè«‹ç•™è¨€è·Ÿæˆ‘èªªï¼ åƒé–± PyFormat: Using % and .format() for great good! PEP 498 â€“ Literal String Interpolation Python å­—ä¸²æ ¼å¼åŒ–ï¼ˆå¥—ç”¨è®Šæ•¸ï¼‰ Pythonæ ¼å¼åŒ–å­—ç¬¦ä¸²f-stringæ¦‚è¦½","link":"2020/01/13/Python/Python/%5BPython%5D%20%E5%AD%97%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96/"},{"title":"[Python] å¯¦æˆ°ç³»åˆ— - æŠ“å–å°ç£éŠ€è¡Œç‰Œå‘ŠåŒ¯ç‡å¯«å…¥MySQL","text":"å‰è¨€æœ¬ç¯‡ä¸»è¦ç´€éŒ„å­¸ç¿’épandasã€æª”æ¡ˆå¯«å…¥ã€MySQLå¾Œåšæ•´åˆã€‚ å¯¦ä½œæ­¥é©Ÿ: pandasè®€å–htmlçš„tableæ¨™ç±¤ï¼Œè½‰ç‚ºdataframe è™•ç†dataframe ç¯©é¸ç›®æ¨™æ¬„ä½ï¼Œä¸¦æ›´æ”¹æ¬„ä½åç¨± æ›´æ”¹æŸæ¬„ä½çš„å€¼ è½‰ç‚º.csvä¸¦å­˜å…¥MySQL è§€å¯Ÿç›®æ¨™ç¶²é ä¸¦æ“·å–è³‡æ–™ å¼•å…¥ç›¸é—œå·¥å…·ï¼Œä½¿ç”¨pandasè®€å–htmlã€‚ 123456789import pandas as pdfrom datetime import datetimeimport pymysqlurl = 'https://rate.bot.com.tw/xrt?Lang=zh-TW'#è®€å–ç¶²é dfs=pd.read_html(url) # è¼¸å‡ºè³‡æ–™ç‚ºä¸€å€‹listdfs[0] é¡¯ç¤ºå‡ºä¾†çš„è³‡æ–™è¡¨æœ‰è¨±å¤šä¸éœ€è¦çš„æ¬„ä½è³‡æ–™ éæ¿¾è³‡æ–™å…ˆç¢ºèªè³‡æ–™æ ¼å¼ï¼Œç¢ºèªç‚ºdataframeå¾Œï¼Œéæ¿¾å‡ºç›®æ¨™å€¼ã€‚ 123456currency=dfs[0]type(currency) # ç¢ºèªè³‡æ–™æ ¼å¼# éæ¿¾å‡ºè¦çš„å€¼ï¼š å‰äº”å€‹columnscurrency_fix=currency.iloc[:,0:5] currency_fix æŸ¥çœ‹éæ¿¾å¾Œçš„dataframe è‡ªè¨‚æ¬„ä½åç¨±12currency_fix.columns=[u'å¹£åˆ¥',u'ç¾é‡‘åŒ¯ç‡-æœ¬è¡Œè²·å…¥',u'ç¾é‡‘åŒ¯ç‡-æœ¬è¡Œè³£å‡º',u'å³æœŸåŒ¯ç‡-æœ¬è¡Œè²·å…¥',u'å³æœŸåŒ¯ç‡-æœ¬è¡Œè³£å‡º']currency_fix æ›´æ–°å¹£åˆ¥æ¬„ä½çš„è³‡æ–™1currency_fix[u'å¹£åˆ¥'] # æŸ¥çœ‹&quot;å¹£åˆ¥&quot;æ¬„ä½ å°å¹£åˆ¥é€²è¡Œé‡æ–°å‘½å123# æ¡ç”¨æ­£è¦è¡¨é”å¼éæ¿¾å­—å…ƒï¼Œå…¶ä¸­`w+`è¡¨ç¤ºéæ¿¾å‡ºæ‡‰è‹±æ–‡å­—ä¸”ä¸€å€‹ä»¥ä¸Šcurrency_fix[u'å¹£åˆ¥'] = currency_fix[u'å¹£åˆ¥'].str.extract('\\((\\w+)\\)')currency_fix[u'å¹£åˆ¥'] æŸ¥çœ‹è³‡æ–™çµæœ 1currency_fix å¯«å…¥.csvä¸¦å­˜å…¥è³‡æ–™åº« ç¨‹å¼ç¢¼1234567currency_fix.to_csv('currency.csv')df = pd.read_csv(&quot;./currency.csv&quot;, sep=',')engine = create_engine('mysql+pymysql://root:root@localhost:8889/exrate?charset=utf8')df.to_sql('test_currency', engine, index = False,index_label = False)print(&quot;Write to MySQL successfully!&quot;) æ„Ÿè¬å¤§æ•¸å­¸å ‚æä¾›çš„æ•™å­¸å½±ç‰‡ï¼Œç°¡å–®åˆå¿«é€Ÿä¸Šæ‰‹ åƒè€ƒæŠ“å–å°ç£éŠ€è¡Œçš„ç‰Œå‘ŠåŒ¯ç‡","link":"2019/09/14/Python/Python/%5BPython%5D%20%E5%AF%A6%E6%88%B0%E7%B3%BB%E5%88%97-%E5%8F%B0%E7%81%A3%E9%8A%80%E8%A1%8C%E7%89%8C%E5%91%8A%E5%8C%AF%E7%8E%87%E5%AF%AB%E5%85%A5MySQL/"},{"title":"[Python] æ·ºè«‡ Python ä¸­çš„Decorator(ä¸‹)","text":"å‰è¨€ä¸Šä¸€ç¯‡æœ‰æåˆ°Decoratoråˆéšçš„æ¦‚å¿µï¼Œé€™ç¯‡å†ä¾†æ›´æ·±å…¥æ¢è¨Decoratoræœ‰å“ªäº›åšæ³•å§ï¼ ç¯„ä¾‹å…ˆä¾†å…©å€‹ç¯„ä¾‹ï¼Œè¨»è§£çš„åœ°æ–¹æ˜¯åŸ·è¡Œé †åº Function-based1234567891011121314151617181920212223# Decorator Function Sampledef logged(func): print('scope of logged') # 2 é€²å…¥logged scope print(&quot;Entering function name is: {}&quot;.format(func.__name__)) # 3 def with_logging(*args, **kwargs): print('scope of with_logging') # 6 print(&quot;Entering function name is: {}&quot;.format(func.__name__)) # 7 print(&quot;arg:&quot;,*args) # 8 print(&quot;kwarg:&quot;,**kwargs) # 9 result = func(*args, **kwargs) print(&quot;Exited&quot;, func.__name__) # 11 return result print('exit') # 4 return with_logging print('start using decorator') # 1@logged # å‘¼å«loggeddef test(k): print(&quot;excute k: {}&quot;.format(k)) # 10 return k print('excute') # 5print(test(10)) # 12 è¼¸å‡º: Class-based1234567891011121314151617181920212223# Decorator Class Sampleclass decorator(object): def __init__(self, f): print('enter init') self.f = f print('exit init') def __call__(self, *args, **kwargs): print(&quot;Entering&quot;, self.f.__name__) r = self.f(*args, **kwargs) print(&quot;Exited&quot;, self.f.__name__) return r print('start decorator ') @decoratordef hello(k): print('inside hello') return(&quot;k is: &quot; + k) print('excute')print(hello('say hello!')) å°å‡ºçµæœ: åŸ·è¡Œå®Œä¸Šè¿°å…©å€‹ç¯„ä¾‹ç¨‹å¼ç¢¼ï¼Œå¤§æ¦‚å¯ä»¥äº†è§£ä½¿ç”¨Class-basedã€Function-basedå…©è€…ä½¿ç”¨Decoratorçš„å·®åˆ¥ä»¥åŠåŸ·è¡Œé †åºã€‚ æ¥è‘—ä¾†ç´°åˆ†Decoratorç¨®é¡æœ‰å“ªå¹¾ç¨®å§ï¼ Decoratorç¨®é¡ ä¸å¸¶åƒæ•¸çš„function decorator å¸¶æœ‰åƒæ•¸çš„function decorator ä¸å¸¶åƒæ•¸çš„class decorator å¸¶æœ‰åƒæ•¸çš„class decorator ä¸å¸¶åƒæ•¸çš„function decorator1234567891011121314151617# ä¸å¸¶åƒæ•¸çš„ Decorator Functiondef decorator(f): print(&quot;excute \\&quot;{}\\&quot; decorate&quot;.format(f.__name__)) def print_df(*args, **kargs): print(&quot;print_df before call&quot;) result = f(*args, **kargs) # å‘¼å« hello()ï¼Œä¸¦å°‡å›å‚³å€¼å‚³éçµ¦result print(&quot;print_df after call&quot;) print(&quot;å°å‡ºå›å‚³å€¼: {}&quot;.format(result)) return result return print_df @decoratordef hello(): print(&quot;say hello.&quot;) return &quot;hello&quot;hello() å°å‡ºçµæœ: å¸¶æœ‰åƒæ•¸çš„function decorator123456789101112131415161718192021# å¸¶æœ‰åƒæ•¸çš„ Decorator Functiondef parseDecorator(param1, param2): print(&quot;excute 'parseDecorator'&quot;) # è§£æparseDecoratorå…§çš„åƒæ•¸ def decorator(f): print(&quot;excute \\&quot;{}\\&quot; decorate&quot;.format(f.__name__)) def print_df(*args, **kargs): print(&quot;params are: '{}', '{}' &quot;.format(param1, param2)) print(&quot;print_df before call&quot;) result = f(*args, **kargs) # å‘¼å« hello()ï¼Œä¸¦å°‡å›å‚³å€¼å‚³éçµ¦result print(&quot;print_df after call&quot;) print(&quot;å°å‡ºå›å‚³å€¼: {}&quot;.format(result)) return result return print_df return decorator @parseDecorator(&quot;param1&quot;, &quot;param2&quot;)def hello(): print(&quot;say hello.&quot;) return &quot;hello&quot;hello() å°å‡ºçµæœ: æ¯”è¼ƒæœ‰ç„¡åƒæ•¸çš„function decoratorè—‰ç”±ä¸Šè¿°å…©å€‹ä¾‹å­è§€å¯Ÿå·®ç•°ï¼Œå¸¶æœ‰åƒæ•¸çš„decoratoréœ€åœ¨decoratorå¤–å±¤å†åŒ…ä¸€å±¤functionï¼Œè€Œæœ€å¤–å±¤ç¨±ä½œparseDecoratorçš„functionæ˜¯ç”¨ä¾†è§£ædecoratoræ‰€å‚³éçš„åƒæ•¸ï¼ŒparseDecoratorçš„ä¸‹ä¸€å±¤decorator(f)æ˜¯ä¸»è¦è¦ä¿®é£¾çš„å‡½å¼ï¼Œè·Ÿä¸å¸¶åƒæ•¸çš„decoratorä½œç”¨ç™¼è¨ªç›¸åŒã€‚ ç°¡å–®ä¾†èªªå°±æ˜¯å°‡ç„¡åƒæ•¸çš„function decoratorï¼Œå¤–é¢å†åŒ…ä¸€å±¤functionï¼Œç”¨ä¾†å‚³éåƒæ•¸ã€‚ ä¸å¸¶åƒæ•¸çš„class decorator1234567891011121314151617# æ²’æœ‰åƒæ•¸çš„ Decorator Classclass decorator(): def __init__(self, f): # å°åƒæ•¸ã€å‡½å¼é€²è¡Œåˆå§‹åŒ– self.f = f def __call__(self, *args, **kargs): print(&quot;person1 before call&quot;) result = self.f() # å‘¼å« person1()ç²å¾—å›å‚³å€¼ï¼Œä¸¦å°‡å›å‚³å€¼assignçµ¦result print(&quot;result: {}&quot;.format(result)) # å°å‡ºå›å‚³å€¼ print(&quot;person1 after call&quot;) @decoratordef person1(): print(&quot;I'm person1&quot;) return &quot;person1&quot;person1() è¼¸å‡ºçµæœï¼š å¸¶æœ‰åƒæ•¸çš„class decorator12345678910111213141516171819202122232425# æœ‰åƒæ•¸çš„ Decorator Classclass decorateFruitClass(object): def __init__(self, fruit, amount): self.fruit = fruit self.amount = amount def __call__(self, f): def buy(*args, **kargs): print(&quot;%s %s before call&quot; % (self.amount, self.fruit)) result = f(*args, **kargs) print(&quot;%s %s after call&quot; % (self.amount, self.fruit)) return result return buy @decorateFruitClass('guava', 10)def person1(): print(&quot;I'm person1.&quot;)@decorateFruitClass('banana', 20)def person2(): print(&quot;I'm person2.&quot;)person1()print('-------')person2() è¼¸å‡ºçµæœï¼š Decorator çš„æœ‰åºæ€§å¦‚æœdecoratorså¤šå±¤çš„è©±ï¼ŒåŸ·è¡Œçš„é †åºå¯èƒ½æœƒå’Œä¸€èˆ¬çš„æƒ³æ³•ä¸å¤ªä¸€æ¨£ã€‚ 123456789101112131415161718192021222324def walk(func): print(&quot;walking outside&quot;) def warp_1(): print(&quot;walking inside&quot;) print(&quot;Now use function '{}'&quot;.format(func.__name__)) func() # call warp_2() return warp_1 # call warp_1()def jump(func): print(&quot;jumping outside&quot;) def warp_2(): print(&quot;jumping inside&quot;) print(&quot;Now use function '{}'&quot;.format(func.__name__)) print(func()) # call student() return warp_2 # å‚³å‡ºwarp_2çµ¦@walk@walk@jumpdef student(): print(&quot;I'm a student&quot;) return &quot;student&quot;student() åŸ·è¡Œçµæœ ä¸Šåœ–çš„åŸ·è¡Œé †åºæ˜¯ï¼Œå…ˆå‘¼å«@jumpå¾Œå‚³å‡ºæ–°function(å‚³å‡ºwarp_2)çµ¦å¾€ä¸Šä¸€å±¤çš„@walkï¼Œå†walk(func)ä¸­ä¾åºåŸ·è¡Œwarp_1()ï¼Œæœ€å¾Œå‘¼å«warp_2()ã€‚ é‡åˆ°å¤šå±¤decoratorsæ™‚ï¼Œé‚è¼¯è™•ç†æ¡ç”¨ â€œéè¿´(recursive)â€ çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯èªªï¼ŒåŸå‰‡ä¸Šæœƒå…ˆåˆä½µã€Œæœ€é è¿‘ã€çš„decoratorï¼Œå†å‚³å‡ºæ–°çš„functionçµ¦å¾€ä¸Šé¢ä¸€å±¤çš„decorator æœ¬ç¯‡ç´€éŒ„Pythonä¸­ä¸åŒé¡å‹çš„Decoratorï¼Œé€éå¯¦éš›ç¯„ä¾‹èƒ½å¤ æ›´äº†è§£ä¸åŒé¡å‹çš„Decoratoræ˜¯å¦‚ä½•å»é‹è¡Œï¼ åƒé–± Pythoné€²éšæŠ€å·§ (3) â€” ç¥å¥‡åˆç¾å¥½çš„ Decorator Python Decorator å››ç¨®å¯«æ³•ç¯„ä¾‹ Code [Python] å°Python è£é£¾å™¨çš„ç†è§£å¿ƒå¾—","link":"2020/02/07/Python/Python/%5BPython%5D%20%E6%B7%BA%E8%AB%87%20Python%20%E4%B8%AD%E7%9A%84Decorator(%E4%B8%8B)/"},{"title":"[Python] å­—å…¸-Dictionary","text":"å‰è¨€æ¯ä¸€å€‹å…ƒç´ éƒ½ç”±éµ(key)å’Œå€¼(value)çµ„æˆçš„éµå€¼å°ç‰©ä»¶ï¼Œçµæ§‹ç‚º{key: value}ï¼Œéµå’Œå€¼ä¹‹é–“æ˜¯ç”¨å†’è™Ÿ : ä¾†åˆ†éš”ï¼Œéµ-å€¼å°ä¹‹é–“æ˜¯ç”¨é€—è™Ÿ, åšåˆ†éš”ã€‚ å‰µå»ºå­—å…¸æ–¹å¼æœ‰å…©ç¨®: ä½¿ç”¨å¤§åˆ®è™Ÿ {} ä½¿ç”¨å…§å»ºå‡½æ•¸ dict() 1234567891011121314151617181920212223# ======= å¤§æ‹¬è™Ÿ{}æ–¹æ³•å»ºç«‹ ======student_1 = {'name': 'Tom', 'birth': 1997, 'ID': '1234567'}# ======= dic()æ–¹æ³•å»ºç«‹ ======student_2 = dict(name='Jack', birth=1985, ID='46383')# ==========================student_3 = {'name': 'Amy', 'birth': 2002, 'ID': '1938098'}# ====== å–å¾—å°æ‡‰çš„ value ========print(student_1['name']) print(student_2['birth']) print(student_3['ID']) &quot;&quot;&quot;çµæœ:Tom19851938098&quot;&quot;&quot; å­—å…¸è£¡çš„valueå¯ä»¥æ˜¯ä»»ä½•çš„è³‡æ–™å‹æ…‹ï¼Œä¾‹å¦‚: å­—ä¸²ã€listã€ç‰©ä»¶ç­‰ç­‰ã€‚ä½† key å¿…é ˆæ˜¯å”¯ä¸€ä¸”ä¸å¯è®Šçš„ã€‚ dictionary æ²’æœ‰é †åºæ€§ å›å‚³éŒ¯èª¤çš„è¨Šæ¯é è¨­å¦‚æœè¼¸å…¥äº†ä¸€å€‹ä¸å­˜åœ¨çš„ keyï¼Œå‰‡æœƒå›å‚³KeyErrorçš„éŒ¯èª¤è¨Šæ¯ã€‚ 1print(student_3[&quot;hi&quot;]) æ›¿æ›éŒ¯èª¤è¨Šæ¯è‹¥è¦é¿å…ä¸Šè¿°æƒ…å½¢çš„è©±ï¼Œå¯ä»¥ä½¿ç”¨get()ä¾†å–å€¼ï¼Œæ­¤æ™‚æœƒå›å‚³Noneï¼Œè€Œä¸æœƒå›å‚³éŒ¯èª¤è¨Šæ¯äº†ã€‚ 1print(student_3.get(&quot;hi&quot;)) # hi è‡ªè¨‚éŒ¯èª¤è¨Šæ¯è‹¥ä¸å¸Œæœ›å›å‚³Noneï¼Œæƒ³è‡ªè¨‚Noneè¨Šæ¯çš„è©±ï¼Œå¯åœ¨æ‹¬è™Ÿå…§è¨­å®šè‡ªå·±æƒ³è¦çš„`Noneè¨Šæ¯ã€‚ 1print(student_3.get(&quot;hi&quot;, &quot;ä¸å­˜åœ¨å“¦ï¼&quot;)) # ä¸å­˜åœ¨å“¦ï¼ æ–°å¢&amp;æ›´æ–°å­˜å–å€¼çš„æ–¹æ³•ä¾†æ–°å¢æˆ–æ˜¯æ›´å‹•æŸä¸€çµ„éµå€¼å°(key-value)ã€‚ 123456789student_1 = {'name': 'Tom', 'birth': 1997, 'ID': '1234567'} student_1[&quot;age&quot;] = 20 # æ–°å¢ageçš„éµå€¼å°student_1[&quot;ID&quot;] = 787878 # æ›´æ–°IDçš„éµå€¼å°print(student_1)# {'name': 'Tom', 'birth': 1997, 'ID': 787878, 'age': 20} æ›´æ–°å¤šç­†è³‡æ–™å¯ä»¥ä½¿ç”¨update(dic)æ–¹æ³•ï¼Œdicæ›¿æ›æˆè¦æ–°å¢çš„å­—å…¸ã€‚ 12345678910student_1 = {'name': 'Tom', 'birth': 1997, 'ID': '1234567'}dic = { &quot;age&quot;: 30, &quot;gender&quot;: &quot;male&quot;, &quot;city&quot;: &quot;é«˜é›„&quot;}student_1.update(dic)print(student_1) åˆªé™¤åˆªé™¤ä¸€ç­†å…ƒç´ ï¼Œæœ‰å…©ç¨®æ–¹æ³•: del123456student_1 = {'name': 'Tom', 'birth': 1997, 'ID': '1234567'}del student_1[&quot;birth&quot;]print(student_1)# {'name': 'Tom', 'ID': '1234567'} popå›å‚³åˆªæ‰çš„å€¼ï¼Œä¸”ä¸æ”¹è®ŠåŸå§‹å­—å…¸çš„è³‡æ–™ã€‚ è¨ˆç®—éµå€¼å°çš„å€‹æ•¸ç”¨len()æ–¹æ³• 12345student_1 = {'name': 'Tom', 'birth': 1997, 'ID': '1234567'}print(len(student_1))# 3 å°å‡ºå­—å…¸è£¡æ‰€æœ‰çš„key123print(student_1.keys())# dict_keys(['name', 'birth', 'ID']) å°å‡ºå­—å…¸è£¡æ‰€æœ‰çš„value123print(student_1.values())# dict_values(['Tom', 1997, '1234567']) å°å‡ºå­—å…¸è£¡çš„æ‰€æœ‰keyã€value`12print(student_1.items())# dict_items([('name', 'Tom'), ('birth', 1997), ('ID', '1234567')]) æª¢æŸ¥æŒ‡å®šçš„keyæ˜¯å¦å­˜åœ¨æ–¼å­—å…¸å…§ä½¿ç”¨iné€™å€‹é‹ç®—å…ƒåˆ¤å®škeyæ˜¯å¦å­˜åœ¨æ–¼å­—å…¸ä¸­ï¼Œè‹¥å­˜åœ¨å‰‡å›å‚³Trueï¼Œåä¹‹å‰‡å›å‚³False 12345print(&quot;ddf&quot; in student_1)print(&quot;birth&quot; in student_1)# False# True åˆ¤æ–·å…©å€‹å­—å…¸æ˜¯å¦ç‚ºåŒä¸€å€‹ç‰©ä»¶åˆ©ç”¨isé‹ç®—å­ï¼Œå¯ä»¥åˆ¤æ–·å…©å€‹å­—å…¸æ˜¯å¦ç‚ºç›¸åŒçš„ç‰©ä»¶ã€‚ 123456789101112131415student_1 = {'name': 'Tom', 'birth': 1997, 'ID': '1234567'} student_2 = dict(name='Jack', birth=1985, ID='46383')print(student_1 is student_1)print(student_1 is student_2)&quot;&quot;&quot;TrueFalse&quot;&quot;&quot; for loopæ‡‰ç”¨123dict_squares = {i: i**2 for i in range(6)}print(dict_squares)# {0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25} åƒè€ƒDAY 08 å­—å…¸æ‡‰ç”¨Python åˆå­¸ç¬¬ä¹è¬› â€” å­—å…¸","link":"2019/08/03/Python/Python/%5BPython%5D%20%E5%AD%97%E5%85%B8-Dictionary/"},{"title":"[Python] æ¢è¨ä¾‹å¤–éŒ¯èª¤çš„è™•ç†æ©Ÿåˆ¶","text":"å‰è¨€å¯«ç¨‹å¼æœ‰æ™‚å€™æœƒç™¼ç”Ÿä¸€äº›éŒ¯èª¤ï¼Œç¨‹å¼å°±æœƒç«‹å³åœæ­¢-&gt;ç«‹å³å‡ºç¾error mesaageã€‚é¿å…å› ç‚ºä½¿ç”¨è€…è¼¸å…¥çš„å•é¡Œæˆ–è¨­å®šçš„å•é¡Œé€ æˆç¨‹å¼è¢«è¿«ä¸­æ–·ï¼Œæˆ–ç”¢ç”Ÿä¸å¯é æœŸçš„ç‹€æ³ï¼Œæœ‰äº›ä¾‹å¤–éŒ¯èª¤å¿…é ˆåœ¨æŸäº›ç‰¹å®šçš„æƒ…æ³ä¸‹æ‰æœƒç™¼ç”Ÿï¼Œç‚ºäº†èƒ½å¤ æ›´æœ‰æ•ˆæ‡‰ä»˜é€™ç¨®éŒ¯èª¤ï¼Œå¯ä»¥ä½¿ç”¨ä¾‹å¤–è™•ç†ä¾†è§£æ±ºã€‚ ä¸€èˆ¬è™•ç†Try-except statementï¼Œä¸€èˆ¬æƒ…æ³ä¸‹ï¼ŒPythonåœ¨åšéŒ¯èª¤è™•ç†æ©Ÿåˆ¶ä½¿ç”¨try ... exceptä¾†æ•æ‰éŒ¯èª¤è¨Šæ¯ï¼Œä¸¦åœ¨æ­¤éŒ¯èª¤ç™¼ç”Ÿæ™‚ï¼ŒåŸ·è¡Œå¾ŒçºŒçš„ç¨‹å¼ç¢¼ã€‚å¦‚æœè¦é‡å°ä¸åŒéŒ¯èª¤è¨Šæ¯åšå€‹åˆ¥è™•ç†ï¼Œå¯ä»¥ç¹¼çºŒå¢åŠ exceptæŒ‡ä»¤ æ•æ‰ç‰¹å®šéŒ¯èª¤è¨Šæ¯å¯ä»¥é‡å°PythonæŸå€‹é¡å‹çš„éŒ¯èª¤è¨Šæ¯é€²è¡Œæ•æ‰ï¼Œç¨‹å¼çµæ§‹å¤§æ¦‚æ˜¯ï¼š 1234567try: # æƒ³è¦åŸ·è¡Œçš„ç¨‹å¼except (ä¾‹å¤–éŒ¯èª¤é¡å‹1, ä¾‹å¤–éŒ¯èª¤é¡å‹2, â€¦) as ä¾‹å¤–ç‰©ä»¶: # ç™¼ç”Ÿä¾‹å¤–éŒ¯èª¤æ™‚è¦åŸ·è¡Œçš„ç¨‹å¼ç¢¼except (ä¾‹å¤–éŒ¯èª¤é¡å‹3, ä¾‹å¤–éŒ¯èª¤é¡å‹4, â€¦) as ä¾‹å¤–ç‰©ä»¶: # code# å¯ä¾éœ€æ±‚å¢åŠ  æ•æ‰ä»»ä½•éŒ¯èª¤è¨Šæ¯exceptæ”¯æ´å¤šç¨®éŒ¯èª¤ï¼Œè‹¥ä¸æŒ‡å®šä»»ä½•éŒ¯èª¤é¡å‹çš„è©±åªéœ€è¦å¯«exceptï¼Œå³å¯æ•æ‰æ‰€æœ‰éŒ¯èª¤é¡å‹ï¼Œåªè¦æœ‰éŒ¯èª¤è¨Šæ¯ç™¼ç”Ÿï¼Œå°±æœƒåŸ·è¡Œexceptå¾ŒçºŒçš„ç¨‹å¼ç¢¼ã€‚ å€¼å¾—ä¸€æçš„äº‹:tryåªæœƒæ•æ‰ç¬¬ä¸€å€‹éŒ¯èª¤,å‡è¨­tryè£¡æœ‰2è¡Œç¨‹å¼ç¢¼, 2è¡Œéƒ½æœ‰éŒ¯èª¤, ç¬¬ä¸€è¡Œè¢«æ•æ‰åˆ°ä»¥å¾Œ, å°±æœƒè·³åˆ°except, ä¸¦ä¸æœƒå…©å€‹éŒ¯èª¤éƒ½è¢«æ‰¾å‡ºä¾†. 1234try: # æƒ³è¦åŸ·è¡Œçš„ç¨‹å¼except: # ç™¼ç”Ÿä¾‹å¤–éŒ¯èª¤æ™‚è¦åŸ·è¡Œçš„ç¨‹å¼ç¢¼ ç¯„ä¾‹123a = 100b = 0print(a/b) åŸ·è¡Œä¸Šè¿°é€™æ®µç¨‹å¼ç¢¼æœƒè·³å‡ºZeroDivisionErrorçš„éŒ¯èª¤è¨Šæ¯ï¼Œå¦‚æœè¦æ•æ‰æ­¤éŒ¯èª¤ï¼Œä¸¦å°å‡ºâ€åˆ†æ¯ä¸å¯ç‚º0â€è¨Šæ¯ï¼Œå¯ä»¥æŠŠç¨‹å¼ç¢¼æ”¹æˆ: 123456789a = 100b = 0try: print(a/b)except ZeroDivisionError as error: print(&quot;åˆ†æ¯ä¸å¯ç‚º0, ç³»çµ±éŒ¯èª¤è¨Šæ¯ç‚º:&quot;, error)# çµæœ# åˆ†æ¯ä¸å¯ç‚º0, ç³»çµ±éŒ¯èª¤è¨Šæ¯ç‚º: division by zero é€²éšè™•ç†é™¤äº†ä¸€èˆ¬è™•ç†å¤–ï¼Œä¹Ÿå¯ä¾ç…§è‡ªå·±éœ€æ±‚å¢åŠ else .... finally ...çš„æ–¹æ³•åšè¿‘ä¸€æ­¥è™•ç†ã€‚ç¨‹å¼çµæ§‹æœƒæ˜¯: 12345678910try: # codeexcept (ä¾‹å¤–éŒ¯èª¤) as ä¾‹å¤–ç‰©ä»¶: # codeelse: # without errror finally: # program still run here if there are errors elseæŒ‡çš„æ˜¯ç•¶tryæŒ‡ä»¤å…§çš„ç¨‹å¼é †åˆ©åŸ·è¡Œå®Œç•¢ï¼Œä¸”æ²’æœ‰ç™¼ç”Ÿä»»ä½•éŒ¯èª¤æ™‚æ‰åŸ·è¡Œï¼Œè€Œfinallyå¾Œçš„æŒ‡ä»¤å‰‡æ˜¯ç„¡è«–æœ‰ç„¡éŒ¯èª¤è¨Šæ¯ï¼Œä»é ˆé€²è¡Œè©²æŒ‡ä»¤ä¸‹çš„ç¨‹å¼ç¢¼ï¼Œæœ€å¸¸è¦‹çš„åœ°æ–¹ç”¨æ–¼é–‹æª”/è®€æª”æ™‚ï¼Œä½¿ç”¨open()æ–¹æ³•ï¼Œå³ä½¿æœ‰éŒ¯èª¤ç”¢ç”Ÿï¼Œä»é ˆæ­£å¸¸é—œé–‰æª”æ¡ˆã€‚ ç¯„ä¾‹ä»¥open()æ–¹æ³•é–‹å•Ÿæª”æ¡ˆç‚ºä¾‹ 12345678f = open(&quot;./123.txt&quot;, &quot;r&quot;)print(&quot;--------æ˜¯å¦æœ‰åŸ·è¡Œåˆ°é€™è£&quot;)words = f.read()print(&quot;--------æ˜¯å¦æœ‰åŸ·è¡Œåˆ°é€™è£&quot;)print(words)print(&quot;--------æ˜¯å¦æœ‰åŸ·è¡Œåˆ°é€™è£&quot;)f.close()print(&quot;--------æ­£å¸¸é—œé–‰&quot;) è‹¥ç„¡æ­¤æª”æ¡ˆå­˜åœ¨ï¼Œå‰‡æœƒæ‹‹å‡ºä¸€å€‹FileNotFoundErrorçš„éŒ¯èª¤è³‡è¨Šï¼Œé€™æ™‚ç¨‹å¼æœƒå› éŒ¯èª¤è€Œä¸­æ–·ï¼Œç„¡æ³•å¾€ä¸‹åŸ·è¡Œ(å¾ŒçºŒçš„è¨Šæ¯éƒ½æœªè¢«å°å‡ºä¾†)ã€‚ åƒè€ƒæ–‡ç« [Pythonåˆå­¸èµ·æ­¥èµ°-Day15] - ä¾‹å¤–è™•ç† ä¾‹å¤–è™•ç†çš„èªæ³•","link":"2019/08/12/Python/Python/%5BPython%5D%20%E6%8E%A2%E8%A8%8E%E4%BE%8B%E5%A4%96%E9%8C%AF%E8%AA%A4%E7%9A%84%E8%99%95%E7%90%86%E6%A9%9F%E5%88%B6/"},{"title":"[Python] çˆ¬èŸ²ç­†è¨˜1-åŸºæœ¬æ¦‚å¿µ","text":"å‰è¨€é€™å­¸æœŸå› ç‚ºå°ˆé¡Œéœ€è¦ç”¨åˆ°ç¶²è·¯çˆ¬èŸ²é€²è¡Œå¯¦ä½œï¼Œæ‰€ä»¥å°‡å­¸ç¿’åˆ°çš„çŸ¥è­˜åšä¸€ç¯‡ç´€éŒ„ï¼Œä¹‹å¾Œå¿˜è¨˜å¯ä»¥å›ä¾†è¤‡ç¿’ä¸€ä¸‹ã€‚ ä»€éº¼æ˜¯çˆ¬èŸ²?æ ¹æ“šç¶­åŸºç™¾ç§‘å®šç¾©: ä¹Ÿå«ç¶²è·¯èœ˜è››ï¼ˆspiderï¼‰ï¼Œæ˜¯ä¸€ç¨®ç”¨ä¾†è‡ªå‹•ç€è¦½å…¨çƒè³‡è¨Šç¶²çš„ç¶²è·¯æ©Ÿå™¨äººã€‚å…¶ç›®çš„ä¸€èˆ¬ç‚ºç·¨çº‚ç¶²è·¯ç´¢å¼•ã€‚ç¶²è·¯æœå°‹å¼•æ“ç­‰ç«™é»é€šéçˆ¬èŸ²è»Ÿé«”æ›´æ–°è‡ªèº«çš„ç¶²ç«™å…§å®¹æˆ–å…¶å°å…¶ä»–ç¶²ç«™çš„ç´¢å¼•ã€‚ç¶²è·¯çˆ¬èŸ²å¯ä»¥å°‡è‡ªå·±æ‰€å­˜å–çš„é é¢å„²å­˜ä¸‹ä¾†ï¼Œä»¥ä¾¿æœå°‹å¼•æ“äº‹å¾Œç”Ÿæˆç´¢å¼•ä¾›ç”¨æˆ¶æœå°‹ã€‚ ç°¡å–®ä¾†èªªå°±æ˜¯å°ç¶²ç«™é€²è¡Œè³‡æ–™æ“·å–ï¼Œå¯ä»¥é€éå®ƒè‡ªå‹•è’é›†æˆ‘å€‘æ‰€æƒ³è¦çš„è³‡æ–™ï¼Œå°‡è³‡æ–™é€²è¡Œåˆ†ææˆ–æ˜¯å†åˆ©ç”¨ï¼Œé€™æ¨£çš„æŠ€è¡“åœ¨è³‡æ–™ç§‘å­¸é ˜åŸŸç®—æ˜¯å¹¾ä¹éœ€å…·å‚™çš„æŠ€èƒ½ã€‚ ç‚ºä½•é¸æ“‡Python? å·¥å…·å¤šå…ƒ å®¹æ˜“ä¸Šæ‰‹ å­¸ç¿’è³‡æºå¤š æœ‰å“ªäº›å¯ç”¨çš„å·¥å…·?Pythonå·¥å…·éå¸¸å¤šï¼Œå…§å»ºçš„å‡½å¼åº«åŒ…å«urllibæˆ–æ˜¯ç¬¬ä¸‰æ–¹å¥—ä»¶å¦‚:requestsã€seleiumç­‰å¼·å¤§æ˜“ä¸Šæ‰‹å·¥å…·ã€‚æœ¬ç¯‡æœƒå…ˆç´€éŒ„urllibã€requestsé€™å…©å€‹å¸¸ç”¨åœ¨çˆ¬å–éœæ…‹ç¶²ç«™çš„å·¥å…·ã€‚ urllibæ˜¯Pythonå…§å»ºçš„å‡½å¼åº«ï¼Œåªè¦å®‰è£pythonå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ï¼Œä¸éœ€é¡å¤–å®‰è£ã€‚ 1234import urlliburl = urllib.request.urlopen('https://www.google.com')print(url.read()) ä¸Šé¢é‚£æ®µç¨‹å¼ç¢¼æœƒé€²è¡Œç¶²é è§£æï¼Œä½†è‹¥æ˜¯é‡åˆ°ç¶²ç«™æœ‰åçˆ¬èŸ²æ©Ÿåˆ¶å°±æœƒå›å ±éŒ¯èª¤ï¼Œä¾‹å¦‚ä¸‹æ®µç¨‹å¼ç¢¼: 12url = urllib.request.urlopen('https://group.i-fit.com.tw/?route=buy&amp;id=1&amp;in=')print(url.read()) çµæœ:æœ‰äº›ç¶²ç«™ç‚ºé˜²æ­¢é€™ç¨®éæ­£å¸¸çš„è¨ªå•ï¼Œæœƒè¨­åçˆ¬èŸ²æ©Ÿåˆ¶ï¼Œé©—è­‰è«‹æ±‚ä¸­çš„UserAgentã€‚é€™æ™‚å°±å¿…é ˆè¨­ç½®ä¸€å€‹headerï¼ŒåŠ å…¥UserAgentå³å¯ã€‚ 123456import urllibfrom urllib.request import Request, urlopenurl = Request('https://group.i-fit.com.tw/?route=buy&amp;id=1&amp;in=', headers={'User-Agent': 'Mozilla/5.0'})webpage = urlopen(url).read()print(webpage) é€™æ™‚å€™å°±å¯ä»¥æ­£å¸¸é€²è¡Œè¨ªå•ï¼Œå¾ŒçºŒé€²è¡Œç¶²é è§£ææ™‚æˆ‘å€‘å¯ä»¥é€ébs4é€™å€‹å¥—ä»¶å”åŠ©æˆ‘å€‘parseç¶²é çµæ§‹ã€‚ 1234567from bs4 import BeautifulSoupfrom urllib.request import Request, urlopenurl = Request('https://group.i-fit.com.tw/?route=buy&amp;id=1&amp;in=', headers={'User-Agent': 'Mozilla/5.0'})webpage = urlopen(url).read()sp = BeautifulSoup(webpage, &quot;html.parser&quot;)print(sp) ç¹éåçˆ¬èŸ²çš„æ–¹æ³•æœ‰äº›ç¶²ç«™ä¸å–œæ­¡è®“å¤–éƒ¨ä½¿ç”¨è€…æ“·å–ç¶²ç«™è³‡æ–™ï¼Œæœƒæ¡ç”¨ä¸€äº›åçˆ¬èŸ²æ©Ÿåˆ¶ï¼Œè¦ç¹éé€™äº›æ©Ÿåˆ¶å¯ä»¥æ¡ç”¨å¹¾å€‹æ‰‹æ®µ: UserAgent å› ç‚ºçˆ¬èŸ²æ˜¯æ©Ÿå™¨äººï¼Œç‚ºäº†è¦å½è£æˆå¦‚çœŸäººä¸€èˆ¬é€ è¨ªç¶²ç«™ï¼Œé€éè¨­ç½®UserAgentä¾†é”æˆçœŸäººè¨ªå•ç¶²ç«™çš„æ•ˆæœã€‚ é™åˆ¶è¨ªå•é »ç‡ æœ‰äº›ç¶²ç«™ç„¡æ³•é€²è¡ŒçŸ­æ™‚é–“å…§é »ç¹çš„è«‹æ±‚ï¼Œåœ¨ä¸€å®šæ™‚é–“å…§å°ç¶²ç«™ç™¼å‡ºè¶…éç‰¹å®šæ¬¡æ•¸çš„è«‹æ±‚æœƒå°é–IPï¼Œå¯ä»¥è¨­å®šè¨ªå•æ™‚é–“çš„é–“éš”ç‚ºä¸€å€‹éš¨æ©Ÿå€¼ï¼Œä¾‹å¦‚é–“éš”0~5ç§’éš¨æ©Ÿç™¼å‡ºè«‹æ±‚ã€‚ requestsæ˜¯ç¬¬ä¸‰æ–¹å¥—ä»¶ï¼Œépythonä¸­å…§å»ºï¼Œåœ¨ä½¿ç”¨å®ƒçš„æ™‚å€™å°±éœ€è¦å…ˆå®‰è£ï¼ŒåŸ·è¡Œpip install requestsï¼›requestsåŠŸèƒ½éå¸¸å¼·å¤§ï¼Œå®ƒæ¯”urllibæ›´åŠ æ–¹ä¾¿å¿«é€Ÿã€‚ç¯„ä¾‹ï¼Œä½¿ç”¨getæ–¹æ³•é€²è¡Œç¶²ç«™è«‹æ±‚: 12345678import requestsheader={'User-Agent': 'Mozilla/5.0'}page = requests.get(&quot;https://group.i-fit.com.tw/?route=buy&amp;id=1&amp;in=&quot;, headers= header)print(page) # &lt;Response [200]&gt;print(page.text) # è§£æç¶²é  -&gt; ä»¥Unicodeé€²è¡Œç·¨ç¢¼ ä¸Šé¢çš„ç¯„ä¾‹ç¨‹å¼ç¢¼è£¡é¢print(page)æœƒå›å‚³ä¸€å€‹&lt;Response [200]&gt;çš„responseç‰©ä»¶ï¼Œpage.textæœƒä»¥Unicodeçš„å½¢å¼é€²è¡Œç·¨ç¢¼ã€‚ å¹¾å€‹çˆ¬èŸ²è¦é» é¸å®šç›®æ¨™ç¶²å€ åˆ†æç›®æ¨™ç¶²ç«™çš„HTMLç¶²é çµæ§‹ Devtoolsè§€å¯Ÿrequestè¨Šæ¯ æ“·å–ç›®æ¨™è³‡æ–™ é¸å®šç›®æ¨™ç¶²å€é¸å®šç›®æ¨™ç¶²ç«™ã€‚ åˆ†æç›®æ¨™ç¶²ç«™çš„HTMLç¶²é çµæ§‹å‘ç›®æ¨™ç¶²å€ç™¼é€HTTPè«‹æ±‚å°åŒ…ï¼Œä¼ºæœå™¨æœƒå›æ‡‰HTMLç¶²é åŸå§‹ç¢¼ï¼Œæˆ‘å€‘è¦å®šä½ç¶²é è³‡æ–™ã€‚ Devtoolsè§€å¯Ÿrequestè¨Šæ¯æ‰“é–‹Devtoolsçš„Networkï¼Œè§€å¯Ÿrequest headerï¼Œè£¡é¢æœ‰è¨±å¤šé‡è¦çš„è¨Šæ¯ï¼Œå¹«åŠ©æˆ‘å€‘åœ¨çˆ¬èŸ²æ™‚èƒ½å¤ å¿«é€Ÿäº†è§£ç¶²ç«™è¨Šæ¯ï¼Œæ±ºå®šæ¡ç”¨ä½•ç¨®æ“·å–è³‡æ–™çš„æ–¹æ³•ã€‚ æ“·å–ç›®æ¨™è³‡æ–™å°‡æ“·å–ä¸‹ä¾†çš„è³‡æ–™å„²å­˜æˆç‰¹å®šæ ¼å¼ï¼Œå¸¸è¦‹å¦‚: JSON CSV XLSX SQL é€™ç¯‡ä¸»è¦ç´€éŒ„çˆ¬èŸ²çš„ç›®çš„ã€æ³¨æ„è¦é»ï¼Œä¸‹ç¯‡æœƒç´€éŒ„æˆ‘ç›®å‰å¸¸ç”¨çš„æ–¹æ³•ã€‚","link":"2019/09/01/Python/Python/%5BPython%5D%20%E7%88%AC%E8%9F%B2%E7%AD%86%E8%A8%981/"},{"title":"[Python] çˆ¬èŸ²ç­†è¨˜3- Selenium","text":"å‰è¨€Selenium æ˜¯ä¸€å€‹ç€è¦½å™¨è‡ªå‹•åŒ–æ¸¬è©¦å·¥å…·ï¼Œæœ€åˆæ˜¯ç‚ºäº†è‡ªå‹•åŒ–æ¸¬è©¦é–‹ç™¼ï¼Œåœ¨çˆ¬èŸ²æµè¡Œé–‹å§‹å¾Œï¼Œä¹Ÿæˆç‚ºå…¶ä¸­ä¸€ç¨®çˆ¬èŸ²å·¥å…·ã€‚å®ƒçš„åŠŸèƒ½å¯ä»¥æ§åˆ¶ç€è¦½å™¨ï¼Œæ¨¡æ“¬äººå°ç€è¦½å™¨æ“ä½œï¼Œæ•´å€‹éç¨‹æ˜¯è‡ªå‹•åŒ–çš„ã€‚seleniumæ”¯æ´Javaã€JavaScriptã€Pythonç­‰å¤šç¨®ä¸»æµç¨‹å¼èªè¨€ï¼Œæœ¬ç¯‡ä¸»è¦ç”¨Pythonå¯¦ä½œã€‚ å®‰è£Selenium1pip install selenium æˆåŠŸå¾Œï¼Œé¡¯ç¤ºSuccessfully installed selenium. ä¸‹è¼‰webdriverè¦è®“Selenuimèƒ½å¤ æ§åˆ¶ç€è¦½å™¨ã€è·Ÿç€è¦½å™¨é€²è¡Œæºé€šï¼Œå°±éœ€è¦ä½¿ç”¨Webdriverä¸»æµç€è¦½å™¨webdriverè¼‰é»: Chrome Edge Firefoxè‡ªå·±ä¸»è¦ä»¥Chromeç‚ºä¸»è¦ç€è¦½å™¨ï¼Œæ‰€ä»¥ä¸‹è¼‰ChromeDriver å¯¦ä½œ.get('ç›®æ¨™ç¶²å€') 123from selenium import webdriver #å¾libraryä¸­å¼•å…¥webdriverbrowser = webdriver.Chrome('./chromedriver') # å»ºç«‹chrome browser ç‰©ä»¶browser.get('https://www.google.com/') :::warning å¯èƒ½æœƒé‡åˆ°çš„å•é¡Œ:ç‰ˆæœ¬å•é¡Œwebdriverçš„ç‰ˆæœ¬è¦å’Œç›®å‰ç€è¦½å™¨çš„ç‰ˆæœ¬ç›¸ç¬¦åˆï¼Œä¸ç„¶æœƒæœ‰ç‰ˆæœ¬è™Ÿä¸åŒçš„éŒ¯èª¤è¨Šæ¯ï¼Œç€è¦½å™¨æœƒæœ‰é–ƒé€€çš„æƒ…æ³ï¼Œå¦‚ä¸‹æ–¹: è§£æ±ºæ–¹æ³• ç¢ºèªChrome ç€è¦½å™¨ç‰ˆæœ¬ é–‹å•Ÿç€è¦½å™¨å³ä¸Šæ–¹çš„é¸å–® é¸æ“‡èªªæ˜&gt;é—œæ–¼ Google Chrome æŸ¥çœ‹ç•¶å‰ç‰ˆæœ¬ ä¸‹è¼‰å¯æ”¯æ´æ­¤Chromeç‰ˆæœ¬çš„ChromeDriver è·¯å¾‘å•é¡ŒåŸ·è¡Œbrowser = webdriver.Chrome()ä¹‹å¾Œï¼Œæœƒé¡¯ç¤ºMessage: â€˜chromedriverâ€™ executable needs to be in PATH. è§£æ±ºæ–¹æ³•æŠŠchromeDriverèˆ‡çš„.pyæª”æ”¾ç½®åœ¨åŒä¸€ç›®éŒ„ä¸‹ï¼Œé¿å…ç¨‹å¼æ‰¾ä¸åˆ°ChromeDriverã€‚::: åŸ·è¡Œçµæœé‹è¡Œå¾Œï¼Œå³å¯çœ‹åˆ°Chromeç›®å‰å—åˆ°è‡ªå‹•æ¸¬è©¦è»Ÿé«”æ§åˆ¶ï¼Œå®Œæˆç¬¬ä¸€å€‹Chromeè‡ªå‹•åŒ–å°ˆæ¡ˆï¼Œæˆ‘å€‘å‰›æ‰çš„å‹•ä½œå°±æ˜¯åœ¨æ¨¡æ“¬ç€è¦½å™¨ç™»å…¥Googleç¶²ç«™ï¼ é—œé–‰ç€è¦½å™¨å‰é¢çš„å¯¦ä½œæœƒç™¼ç¾æ‰“é–‹ç€è¦½å™¨å¾Œç„¡æ³•è‡ªå‹•é—œé–‰ç€è¦½å™¨ï¼Œé€™æ™‚å€™å¯ä»¥åŸ·è¡Œclose()é€²è¡Œé—œé–‰ã€‚ 1browser.close() è®“ç€è¦½å™¨åœ¨èƒŒæ™¯åŸ·è¡Œ webdriver.ChromeOptions() ä¾†å®£å‘Šoptions options.add_argument('--headless') èƒŒæ™¯åŸ·è¡Œ å°‡optionsåŠ å…¥Chromeæ–¹æ³•è£¡é¢ *è¨»: executable_path ç‚ºwebdriveråŸ·è¡Œçš„è·¯å¾‘ 123456options = webdriver.ChromeOptions()options.add_argument('--headless')browser=webdriver.Chrome(chrome_options=options, executable_path='./chromedriver')#åœ¨ç€è¦½å™¨æ‰“ä¸Šç¶²å€é€£å…¥browser.get(&quot;https://www.google.com/&quot;) ä¸Šè¿°ç¨‹å¼ç¢¼å¯ä»¥åœ¨ä¸é–‹å•Ÿç€è¦½å™¨çš„æƒ…æ³ä¸‹åŸ·è¡Œè‡ªå‹•åŒ–è…³æœ¬ é–‹å•Ÿç„¡ç—•æ¨¡å¼å°‡ç¨‹å¼ç¢¼åŠ å…¥options.add_argument(&quot;--incognito&quot;)å³å¯ä»¥ç„¡ç—•æ¨¡å¼é–‹å•Ÿç€è¦½å™¨ 1234options = webdriver.ChromeOptions()options.add_argument(&quot;--incognito&quot;) browser=webdriver.Chrome(chrome_options=options, executable_path='./chromedriver')browser.get(&quot;https://www.google.com/&quot;) ç€è¦½å™¨è¦–çª—è¨­å®š è¦–çª—å¤§å°è¨­å®š: browser.set_window_size(480, 800) è¦–çª—æœ€å¤§åŒ–: browser.maximize_window() è¦–çª—æœ€å°åŒ–: browser.minimize_window() å¸¸ç”¨å®šä½ç¶²é å…ƒç´ çš„æ–¹æ³• æœå°‹å¸¶æœ‰ç‰¹å®šidåç¨±çš„å…ƒç´ : find_element_by_id() æœå°‹å¸¶æœ‰ç‰¹å®šnameå±¬æ€§åç¨±çš„å…ƒç´ : find_element_by_name() æœå°‹å¸¶æœ‰ç‰¹å®šclassåç¨±çš„å…ƒç´ :find_element_by_class_name() æœå°‹å¸¶æœ‰ç‰¹å®šåç¨±çš„ç¶²é æ¨™ç±¤:find_element_by_tag_name() ç”¨Xpathä¾†å®šä½ç¶²é å…ƒç´ : find_element_by_xpath() ç”¨CSSé¸æ“‡å™¨å®šä½ç¶²é å…ƒç´ find_element_by_css_selector() ä¸Šè¿°çš„æ–¹æ³•éƒ½åªæœ‰æœå°‹ç¬¬ä¸€å€‹ç¬¦åˆæ¢ä»¶çš„å…ƒç´ ï¼Œå¦‚æœè¦æœå°‹å¤šå€‹å…ƒç´ ï¼Œåªè¦åœ¨find_elementä¸Šæ”¹ç‚ºfind_elementså³å¯ï¼Œè¿”å›çµæœç‚ºlistçš„è³‡æ–™çµæ§‹ã€‚ XpathXpath å…¨åç‚ºXML Path Languageï¼Œå³XMLè·¯å¾‘èªè¨€ï¼Œå®ƒå¯ä»¥åœ¨XMLæª”æ¡ˆä¸­æŸ¥æ‰¾ã€‚æœ€åˆè¨­è¨ˆæ˜¯ç”¨ä¾†å°‹æ‰¾XMLæª”æ¡ˆï¼Œä½†æ˜¯å®ƒåŒæ¨£ä¹Ÿé©ç”¨åœ¨æœå°‹HTMLæª”ã€‚å¦å¤–ï¼ŒXPathçš„å®šä½å…ƒç´ åŠŸèƒ½ååˆ†å¼·å¤§ï¼Œæä¾›éå¸¸ç°¡æ½”çš„å®šä½æ–¹æ³•ï¼Œå¹¾ä¹æ‰€æœ‰æˆ‘å€‘æƒ³è¦å®šä½çš„å…ƒç´ ç¯€é»éƒ½å¯ä»¥é XPathå¹«æˆ‘å€‘å®Œæˆã€‚ Xpathçš„èªæ³•éå¸¸å¤šï¼Œå…ˆè¨˜éŒ„æ¯”è¼ƒå¸¸ç”¨çš„è¦å‰‡ï¼ŒæŒæ¡å¤§æ–¹å‘å¾Œå…¶ä»–çš„å†æ‰¾æ–‡ä»¶å¾ˆå¿«å°±èƒ½ä¸Šæ‰‹ã€‚ XPathå¸¸ç”¨è¦å‰‡/ : å¾ç•¶å‰ç¯€é»é¸å–ç›´æ¥å­ç¯€é»// : å¾ç•¶å‰ç¯€é»é¸å–å­å­«ç¯€é». : é¸å–ç•¶å‰ç¯€é».. : é¸å–ç•¶å‰ç¯€é»çš„çˆ¶ç¯€é»@ : é¸å–å±¬æ€§ ä¸éŒ¯çš„ç¯„ä¾‹æ–‡ç«  selenium çš„ç­‰å¾…seleniumç­‰å¾…æ–¹å¼å¸¸è¦‹çš„æœ‰ä¸‹åˆ—3ç¨®ï¼Œå„æœ‰å…¶å„ªç¼ºé»ã€‚ å¼ºåˆ¶ç­‰å¾…å¾timeæ¨¡çµ„è£¡é¢å«å‡ºsleepæ–¹æ³•ï¼Œå¼·è¿«ç¨‹å¼éœ€éæŒ‡å®šçš„æ™‚é–“å¾Œæ‰å¯å¾€ä¸‹åŸ·è¡Œã€‚ 1234567from time import sleepoptions = webdriver.ChromeOptions()options.add_argument(&quot;--incognito&quot;) browser=webdriver.Chrome(options=options, executable_path='./chromedriver')browser.get(&quot;https://www.google.com/&quot;) sleep(3) # å¼·åˆ¶ç­‰å¾…3ç§’å†åŸ·è¡Œä¸‹ä¸€æ­¥browser.close() éš±æ€§ç­‰å¾…éš±å½¢ç­‰å¾…æ˜¯è¨­ä¸€å€‹æœ€é•·çš„ç­‰å¾…æ™‚é–“ï¼Œè‹¥åœ¨è¦å®šæ™‚é–“å…§ç¶²é è¼‰å…¥å®Œæˆï¼Œå‰‡åŸ·è¡Œä¸‹ä¸€æ­¥ï¼Œå¦å‰‡ä¸€ç›´ç­‰åˆ°æ™‚é–“æˆªæ­¢ï¼Œç„¶å¾ŒåŸ·è¡Œä¸‹ä¸€æ­¥ã€‚é€™è£¡æœ‰ä¸€å€‹å•é¡Œ: ç¨‹å¼æœƒä¸€ç›´ç­‰å¾…æ•´å€‹é é¢è¼‰å…¥å®Œæˆã€‚ 123456options = webdriver.ChromeOptions()options.add_argument(&quot;--incognito&quot;) browser=webdriver.Chrome(chrome_options=options, executable_path='./chromedriver')browser.implicitly_wait(10) # éš±æ€§ç­‰å¾…æœ€é•·æ™‚é–“ç‚º10ç§’å†åŸ·è¡Œä¸‹ä¸€æ­¥browser.get(&quot;https://www.google.com/&quot;) browser.close() é¡¯æ€§ç­‰å¾…WebDriverWaitï¼Œé…åˆuntil()å’Œuntil_not()æ–¹æ³•ï¼Œèƒ½æ ¹æ“šåˆ¤æ–·æ¢ä»¶è€Œé€²è¡Œå½ˆæ€§è¨­å®šç­‰å¾…æ™‚é–“ã€‚ è©³ç´°çš„æ‡‰ç”¨åƒè€ƒé€™ç¯‡ã€‚ ç²å¾—å…ƒç´ çš„ç›¸é—œè¨Šæ¯æ•´ç† size ç²å¾—å…ƒç´ çš„å°ºå¯¸ text ç²å¾—å…ƒç´ çš„æ–‡å­—å…§å®¹ get_attribute(name) ç²å¾—è©²å±¬æ€§åå°æ‡‰çš„å±¬æ€§å€¼ page_source å›å‚³ç¶²é åŸå§‹ç¢¼ driver.title å›å‚³ç¶²é æ¨™é¡Œ current_url ç²å¾—ç•¶å‰ç¶²é çš„ç¶²å€ is_displayed() åˆ¤æ–·æ­¤å…ƒç´ æ˜¯å¦å¯è¦‹ is_enabled() åˆ¤æ–·æ­¤å…ƒç´ æ˜¯å¦è¢«ä½¿ç”¨ is_selected() åˆ¤æ–·æ­¤å…ƒç´ æ˜¯å¦è¢«é¸åˆ° tag_name å›å‚³å…ƒç´ çš„tagNameç¯„ä¾‹é¡¯ç¤ºå…ƒç´ å°ºå¯¸find_element_by_id(&quot;size&quot;).sizeé¡¯ç¤ºå…ƒç´ æ–‡å­—find_element_by_id(&quot;txt&quot;).text å¾éš±è—å…ƒç´ ä¸­ç²å–æ–‡å­—åœ¨æŸäº›æƒ…æ³ä¸‹ï¼Œå…ƒç´ çš„æ–‡å­—æœƒè¢«éš±è—ï¼Œæˆ‘å€‘éœ€è¦ç²å¾—éš±è—å…ƒç´ çš„æ–‡å­—ã€‚é€™äº›å…§å®¹åœ¨ä½¿ç”¨element.attribute('attributeName')å¾ˆå¸¸é‡åˆ°,é€étextContent,innerText,innerHTMLç­‰å±¬æ€§ç²å–ã€‚ innerHTML: å›å‚³å…ƒç´ çš„å…§éƒ¨HTMLï¼ŒåŒ…å«æ‰€æœ‰çš„HTMLæ¨™ç±¤ã€‚ textContent å’ŒinnerTextåªæœƒå¾—åˆ°æ–‡å­—å…§å®¹ï¼Œè€Œä¸æœƒåŒ…å«HTML æ¨™ç±¤ã€‚ textContent æ˜¯ W3C ç›¸å®¹çš„æ–‡å­—å…§å®¹å±¬æ€§ï¼Œä½†æ˜¯ IE ä¸æ”¯æ´innerText ä¸æ˜¯ W3C DOM çš„æŒ‡å®šå…§å®¹ï¼ŒFireFoxä¸æ”¯æ´ æ“ä½œå…ƒç´ çš„æ–¹æ³•ä¸‹é¢æ•´ç†å¹¾å€‹æ¯”è¼ƒå¸¸ç”¨æ¨¡æ“¬è¨ªå•ç€è¦½å™¨å¸¸ç”¨çš„æ“ä½œæ–¹æ³•ã€‚ æ•´ç† clear(): æ¸…é™¤å…ƒç´ å†…å®¹ send_keys(): éµç›¤è¼¸å…¥çš„å€¼ click(): é»æ“Šå…ƒç´  submit(): é€å‡ºè¡¨å–® æ›´å¤šåƒè€ƒé€™ç¯‡ æ“ä½œç€è¦½å™¨æŒ‰éˆ• back(): æŒ‰ç€è¦½å™¨ â€œä¸Šä¸€é â€ éˆ• forward(): æŒ‰ç€è¦½å™¨ â€œä¸‹ä¸€é â€ éˆ• refresh(): æŒ‰ç€è¦½å™¨ â€œæ›´æ–°â€ éˆ• quit(): æŒ‰ç€è¦½å™¨ â€œé—œé–‰â€ éˆ•, åŒæ™‚é—œé–‰é©…å‹•ç¨‹å¼ close(): æŒ‰ç€è¦½å™¨ â€œé—œé–‰â€ éˆ• ç²å¾—Cookie.get_cookies() å„²å­˜ç¶²é æˆªåœ–(screenshot)save_screenshot(filename): å°‡ç›®å‰ç¶²é å„²å­˜ç‚º .png æª”æ¡ˆä¸‹è¼‰ã€‚*è¨»: å‚³å…¥åƒæ•¸è‹¥å–®ç´”åªæœ‰æª”å, å‰‡pngæª”æœƒå„²å­˜åœ¨ Python å®‰è£ç›®éŒ„ä¸‹;è‹¥è¦å­˜åœ¨æŒ‡å®šç›®éŒ„ä¸‹ï¼Œå‰‡éœ€å‚³å…¥åŒ…å«è·¯å¾‘ä¹‹æª”åã€‚ ç¯„ä¾‹ç¨‹å¼:1234from selenium import webdriver browser=webdriver.Chrome() browser.get(&quot;http://google.com&quot;) browser.save_screenshot(&quot;google.png&quot;) #å„²å­˜PNGåœ–æª” ç¸½çµå•Ÿç”¨seleniumä¹‹å¾Œï¼Œè¢«æŒ‡å®šçš„ç€è¦½å™¨å°±æœƒé–‹å•Ÿï¼Œä¸¦ä¾ç…§è‡ªå·±æ’°å¯«çš„è…³æœ¬åŸ·è¡Œï¼Œæ‰€æœ‰ç¶²é çš„æ“ä½œï¼ŒåŒ…å«: è¼¸å…¥å¸³è™Ÿã€å¯†ç¢¼ã€é»é¸æŒ‰éˆ•ã€æ»¾å‹•é é¢ã€è®ŠåŒ–è¦–çª—ç­‰ï¼Œéƒ½å¯ä»¥é€²è¡Œæ¨¡æ“¬æ“ä½œã€‚å› ç‚ºæ˜¯çœŸæ­£çš„ç€è¦½å™¨åœ¨é‹ä½œï¼Œå¯ä»¥è¼•é¬†çš„ç¹éå¤§éƒ¨åˆ†ç¶²ç«™åçˆ¬èŸ²æ©Ÿåˆ¶ï¼Œä½†ä¹Ÿå°è‡´é‹è¡Œé€Ÿåº¦æ¥µæ…¢ã€‚å¯¦éš›ä¸Šé‚„æ˜¯æœƒå…ˆå˜—è©¦ä½¿ç”¨requestsç²å–ç¶²é åŸå§‹ç¢¼ï¼Œä½†å¦‚æœå¯¦åœ¨ç„¡æ³•çªç ´å°æ–¹ç¶²ç«™ä¼ºæœå™¨çš„é˜»éš”æ™‚ï¼Œå†å˜—è©¦æ”¹ç”¨seleniumã€‚æˆ‘è‡ªå·±çš„è©±é€šå¸¸åªæœ‰é‡åˆ°å‹•æ…‹è¼‰å…¥çš„ç¶²é æ‰æœƒä½¿ç”¨seleniumã€‚","link":"2019/09/03/Python/Python/%5BPython%5D%20%E7%88%AC%E8%9F%B2%E7%AD%86%E8%A8%983-%20Selenium/"},{"title":"[Python] ç‰©ä»¶å°å‘å…¥é–€","text":"ä»€éº¼æ˜¯ç‰©ä»¶å°å‘ï¼Ÿå°‡ç¾å¯¦ç”Ÿæ´»ä¸­çš„äººã€äº‹ã€æ™‚ã€åœ°ã€ç‰©é€²è¡Œè³‡æ–™æŠ½è±¡åŒ–ã€‚é¡åˆ¥ï¼Œæ˜¯å…·æœ‰ç›¸åŒå±¬æ€§(Attribute)å’ŒåŠŸèƒ½(Method)çš„ç‰©ä»¶æŠ½è±¡é›†åˆï¼Œé¡åˆ¥ä¸­åŒ…å«è³‡æ–™çš„å±¬æ€§ã€æ–¹æ³•(ä¹Ÿå¯ä»¥ç¨±ä½œè¡Œç‚º)ï¼Œå°‡é€™äº›é¡åˆ¥å°æ‡‰åˆ°çœŸå¯¦ç”Ÿæ´»ä¸­çš„äººã€äº‹ã€æ™‚ã€åœ°ã€ç‰©æ™‚ç¨±ä½œâ€å¯¦ä¾‹åŒ–â€ï¼Œå¯ä»¥èªªé€™äº›å°æ‡‰çš„å¯¦éš›å¯¦é«”ç‚ºå¯¦éš›æ¡ˆä¾‹(ç°¡ç¨±â€å¯¦ä¾‹â€)ï¼Œä¹Ÿä½œâ€ç‰©ä»¶â€ã€‚ ç™½è©±ä¸€é»å°±æ˜¯: â€œé¡åˆ¥â€ åªæ˜¯å°‡çœŸå¯¦ä¸–ç•Œçš„äººã€äº‹ã€æ™‚ã€åœ°ã€ç‰©åšåˆ†é¡çš„â€æ¦‚å¿µâ€ï¼Œéœ€å°æ‡‰çœŸå¯¦ä¸–ç•Œä¸­çš„å¯¦ä¾‹æ‰å…·æ„ç¾©æˆ–æ˜¯è³‡æ–™è™•ç†çš„åƒ¹å€¼ï¼Œé¡åˆ¥åº•ä¸‹æœƒæœ‰å¤šå€‹ç‰©ä»¶(å¤šå€‹å¯¦ä¾‹)ã€‚ ä¸åŒç‰©ä»¶æœƒæœ‰ä¸åŒå±¬æ€§å€¼ï¼Œå¦‚: ä»¥å­¸ç”Ÿç‚ºé¡åˆ¥(Class)åï¼Œå­¸ç”ŸAé€™å€‹ç‰©ä»¶æœ‰å…©å€‹å±¬æ€§ï¼Œå±¬æ€§åç‚ºå§“åã€å­¸è™Ÿï¼Œè€Œå±¬æ€§å€¼ç‚ºAã€01;å¦ä¸€å€‹å­¸ç”ŸBçš„ç‰©ä»¶å‰‡å±¬æ€§å€¼åˆ†åˆ¥ç‚ºBã€02ã€‚ç”±æ–¼é›–ç„¶æºè‡ªåŒä¸€é¡åˆ¥(å­¸ç”Ÿ)ï¼Œä½†ç‰©ä»¶å„è‡ªç¨ç«‹ï¼Œå±¬æ€§å€¼ä¹Ÿè·Ÿè‘—ç¨ç«‹ï¼Œå½¼æ­¤äº’ä¸å½±éŸ¿ã€‚ å¥½è™•æ˜¯ä»€éº¼? å®¹æ˜“æ“´å±•:å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œå»ºç«‹ä¸€å€‹åç‚ºå­¸ç”Ÿçš„é¡åˆ¥ï¼Œåº•ä¸‹å¯ä»¥ä¸€ç›´å¢åŠ ä¸åŒçš„å­¸ç”Ÿï¼Œä»–å€‘éƒ½æœ‰è‡ªå·±çš„å±¬æ€§åƒæ•¸ã€‚ å¯é‡è¤‡ä½¿ç”¨:åŒä¸€å€‹ç‰©ä»¶ã€é¡åˆ¥å¯ä»¥é‡è¤‡é€²è¡Œå‘¼å«ï¼Œæ¸›å°‘æ’°å¯«é‡è¤‡çš„ç¨‹å¼ç¢¼ æ¨¡çµ„åŒ–å¯å°‡ç³»çµ±ç´°åˆ†ç„¶å¾Œåˆ†é…çµ¦ä¸åŒåœ˜éšŠä¾†é€²è¡Œå·¥ä½œ å¼·èª¿é‡é» ä¸€å€‹ç‰©ä»¶ï¼ˆObjectï¼‰å¯ä»¥åŒ…å«å±¬æ€§ï¼ˆAttributeï¼‰èˆ‡æ–¹æ³•ï¼ˆMethodï¼‰ï¼Œè€Œclassçš„æ¦‚å¿µæ˜¯å±¬æ€§é›†åˆï¼Œä¸¦éæ‰€æœ‰ç‰©ã€‚ ç‰©ä»¶å°å‘å…·æœ‰ä¸‰å¤§ç‰¹æ€§: å¤šå‹: è¡¨ç¤ºä¸åŒç‰©ä»¶å¯ä»¥åŸ·è¡Œç›¸åŒå‹•ä½œï¼Œä½†è¦é€éå®ƒå€‘è‡ªå·±çš„å¯¦ä½œä¾†åŸ·è¡Œã€‚ å¦‚æœå­é¡åˆ¥è¦å®Œå…¨å¯¦ä½œçˆ¶é¡åˆ¥çš„æˆå“¡ï¼Œçˆ¶é¡åˆ¥å‰‡å°‡è©²æˆå“¡å®£å‘Šç‚ºè™›æ“¬(virtual)ã€‚å­é¡åˆ¥å¯ä»¥ä½¿ç”¨overrideçš„æ–¹å¼ï¼Œå°‡è‡ªå·±çš„å¯¦ä½œå–ä»£æ‰çˆ¶é¡åˆ¥çš„å¯¦ä½œã€‚ å°è£: æ¯å€‹ç‰©ä»¶éƒ½åŒ…å«æœ¬èº«æ“ä½œæ‰€éœ€è¦çš„è³‡è¨Šï¼Œé€™å€‹ç‰¹æ€§ç¨±ä¹‹ç‚ºå°è£ï¼Œå› æ­¤ç‰©ä»¶ä¸éœ€ä¾è³´å…¶ä»–ç‰©ä»¶ä¾†å®Œæˆè‡ªå·±çš„æ“ä½œã€‚ é‚£å°è£çš„å¥½è™•æœ‰å“ªäº›ï¼Ÿ è‰¯å¥½çš„å°è£èƒ½æ¸›å°‘æ¨¡çµ„é–“çš„è€¦åˆã€‚ é¡åˆ¥å…§éƒ¨çš„å¯¦ä½œå¯ä»¥è‡ªç”±ä¿®æ”¹ã€‚ é¡åˆ¥æœ‰æ˜ç¢ºçš„å°å¤–æ¥å£ï¼Œè®“å¤–éƒ¨é€²è¡Œå‘¼å«ã€‚ ç¹¼æ‰¿(åƒæ˜¯è¦ªå±¬çš„å‚ç›´é—œä¿‚): è³¦äºˆç‰©ä»¶é‡è¤‡ä½¿ç”¨å’Œæ“´å……çš„èƒ½åŠ›ï¼Œçˆ¶é¡åˆ¥çš„è³‡æºå¯ä»¥é€éå­é¡åˆ¥åšæ“´å……å’Œé‡è¤‡ä½¿ç”¨ã€‚ ç¹¼æ‰¿èƒ½å®šç¾©å‡ºçˆ¶é¡åˆ¥èˆ‡å­é¡åˆ¥ï¼Œå…¶ä¸­å­é¡åˆ¥ç¹¼æ‰¿çˆ¶é¡åˆ¥æ‰€æœ‰çš„ç‰¹æ€§ï¼Œä¸”å­é¡åˆ¥é‚„èƒ½å®šç¾©æ–°çš„ç‰¹æ€§ã€‚ç¹¼æ‰¿æœ‰å¹¾å€‹é‡é»ï¼š å­é¡åˆ¥å¯æ‹“å±•çˆ¶é¡åˆ¥æ²’æœ‰çš„å±¬æ€§å’Œæ–¹æ³• å­é¡åˆ¥èƒ½é‡å¯«çˆ¶é¡åˆ¥çš„æ–¹æ³• æ¦‚ç•¥äº†è§£ç‰©ä»¶å°å‘å¾Œå°±å¯é€²è¡Œå¯¦ä½œã€‚ å¯¦ä½œ å®£å‘Šé¡åˆ¥: Pythonä½¿ç”¨classèªæ³•ä¾†å®šç¾©é¡åˆ¥ï¼Œé€šå¸¸æœƒç”¨é¦–å­—å¤§å¯«ï¼ˆCapitalizedï¼‰çš„å–®å­—ç‚ºé¡åˆ¥å‘½å def __init__(self): ä»£è¡¨å®£å‘Šæ™‚æœƒè‡ªå‹•åŸ·è¡Œçš„å‡½å¼ï¼Œå¸¸ç”¨ä¾†å®šç¾©è©²é¡åˆ¥çš„ç‰©ä»¶å±¬æ€§ï¼Œselfç‚ºå¿…è¦ä¹‹åƒæ•¸ã€‚ é¡åˆ¥ä¸­å®šç¾©æ–¹æ³•æ¡ç”¨defé€²è¡Œæ–¹æ³•å®£å‘Š è¨ªå•é¡åˆ¥å…§çš„ç‰©ä»¶å±¬æ€§ä½¿ç”¨é¡åˆ¥å.å±¬æ€§åçš„æ–¹å¼ 1234567891011121314class Student: # å®šç¾©é¡åˆ¥å±¬æ€§åï¼Œé€²è¡Œé¡åˆ¥å®£å‘Š major = &quot;CSE&quot; # å®šç¾© static variabl def __init__(self, rollNumber, name): self.rolNo = rollNumber self.name = namestudent1 = Student(1, &quot;Tom&quot;)student2 = Student(2, &quot;Ken&quot;)# å–å¾—å±¬æ€§åå°æ‡‰çš„å±¬æ€§å€¼ print(student1.name, student2.name) # Tom Ken# è¨ªå•Classå…§çš„static variablprint(Student.major, student1.major, student2.major) # CSE CSE CSE ä¸Šè¿°ç¯„ä¾‹å®£å‘Šä¸€å€‹åç‚ºStudentçš„é¡åˆ¥(class)ï¼Œä¸¦å»ºç«‹å…¶å±¬æ€§ï¼Œå…ˆå‚³å…¥ä¸åŒçš„åƒæ•¸ï¼Œåœ¨è³¦å€¼çµ¦student1ã€student2ï¼Œæœ€å¾Œå†é€é.è¨ªå•å±¬æ€§å€¼ã€‚ æˆ‘å€‘é‚„å¯ä»¥åœ¨Class å…§å®šç¾©å¦ä¸€å€‹Class1234567891011121314class Car: def __init__(self, make, year): self.make = make self.year = year class Egine: def __init__(self, number): self.number = number def start(self): return &quot;Egine Start!&quot;car1 = Car(&quot;BMW&quot;, 2017)egine = car1.Egine(&quot;MHP-9778&quot;)print(egine.start(), egine.number, car1.make, car1.year)# Egine Start! MHP-9778 BMW 2017 ä¸Šé¢ç¯„ä¾‹å»ºç«‹ä¸€å€‹Caré¡åˆ¥ï¼Œåº•ä¸‹é™¤äº†å®šç¾©ç‰©ä»¶å±¬æ€§å¤–ï¼Œå¦å»ºç«‹ä¸€å€‹æ–°é¡åˆ¥Egineï¼Œä¸¦åœ¨Egineä¸‹å®šç¾©å…¶å±¬æ€§ååŠæ–¹æ³•ã€‚car1 = Car(&quot;BMW&quot;, 2017)å»ºç«‹BMWç‰©ä»¶ï¼Œåœ¨BMWä¸‹car1.Egine(&quot;MHP-9778&quot;)å»ºç«‹ç·¨è™Ÿç‚ºMHP-9778çš„Egineç‰©ä»¶ï¼Œegine.start()ç”¨ä¾†å‘¼å«Egineå®šç¾©å¥½çš„æ–¹æ³•ã€‚ æˆ‘å€‘ä¹Ÿå¯ä»¥æ›´æ”¹ç‰©ä»¶å±¬æ€§ä¾‹å­: 1234567891011class NewStudent: def __init__(self, sid = 123, name=&quot;Tom&quot;): self.id = sid self.name = name def display(self): return self.id, self.namenews1 = NewStudent()print(news1.id, news1.name) # 123 Tomnews1.id = 345print(news1.id, news1.name) # 345 Tom è³‡è¨Šéš±è—(information hiding)ç‰©ä»¶å±¬æ€§æœ‰æ™‚å¦‚æœè®Šæ•¸ä¸å¸Œæœ›æˆ–ä¸è©²éš¨æ„çµ¦å¤–éƒ¨ç¨‹å¼æ›´æ”¹ï¼Œåªéœ€åœ¨å±¬æ€§å‰åŠ ä¸Šé€£çºŒå…©å€‹åº•ç·šã€‚ è³‡è¨Šéš±è—å¾Œ: åœ¨å±¬æ€§åå‰é¢åŠ ä¸Š __1234567891011121314class NewStudent: def __init__(self, sid = 123, name=&quot;Tom&quot;): self.__id = sid self.__name = name def display(self): return self.__id, self.__name# ç„¡æ³•ç›´æ¥è¨ªå•å±¬æ€§å€¼print(news1.id, news1.name)# 'NewStudent' object has no attribute 'id'print(news1.__id, news1.__name) # AttributeError: 'NewStudent' object has no attribute '__id' ä½†ä¹Ÿä¸¦éå®Œå…¨ç„¡æ³•æ›´æ”¹ï¼Œåªæ˜¯éœ€è¦å…¶ä»–æ–¹å¼ï¼Œä¾‹å¦‚methodæ–¹æ³•è¨ªå•å±¬æ€§å€¼ï¼Œæˆ–æ˜¯é€é â€œ_â€ çš„æ–¹å¼é€²è¡Œç›´æ¥è¨ªå• 12345# method è¨ªå•å±¬æ€§å€¼print(news1.display()) # (123, 'Tom') # é€é &quot;_&quot; çš„æ–¹å¼é€²è¡Œç›´æ¥è¨ªå•print(news1._NewStudent__id, news1._NewStudent__name) # 123 Tom å›é¡§é‡é»: Pythonä½¿ç”¨classèªæ³•ä¾†å®šç¾©é¡åˆ¥ï¼Œé€šå¸¸æœƒç”¨é¦–å­—å¤§å¯«ï¼ˆCapitalizedï¼‰çš„å–®å­—ç‚ºé¡åˆ¥å‘½å def __init__(self): ä»£è¡¨å®£å‘Šæ™‚æœƒè‡ªå‹•åŸ·è¡Œçš„å‡½å¼ï¼Œå¸¸ç”¨ä¾†å®šç¾©è©²é¡åˆ¥çš„ç‰©ä»¶å±¬æ€§ï¼Œselfç‚ºå¿…è¦ä¹‹åƒæ•¸ã€‚ é¡åˆ¥ä¸­å®šç¾©æ–¹æ³•æ¡ç”¨defé€²è¡Œæ–¹æ³•å®£å‘Š è¨ªå•é¡åˆ¥å…§çš„ç‰©ä»¶å±¬æ€§ä½¿ç”¨é¡åˆ¥å.å±¬æ€§åçš„æ–¹å¼ ç‰©ä»¶å±¬æ€§æœ‰æ™‚å¦‚æœè®Šæ•¸ä¸å¸Œæœ›æˆ–ä¸è©²éš¨æ„çµ¦å¤–éƒ¨ç¨‹å¼æ›´æ”¹ï¼Œåªéœ€åœ¨å±¬æ€§å‰åŠ ä¸Šé€£çºŒå…©å€‹åº•ç·š__ã€‚ åƒè€ƒæ–‡ç«  ç‰©ä»¶å°å‘èˆ‡å°è£ Name mangling Class å®˜æ–¹æ–‡ä»¶èªªæ˜ æ·ºè«‡ Python çš„ç‰¹æ®Šæ–¹æ³• (Special Method Names) (1) ç‰©ä»¶å°å‘ç¨‹å¼è¨­è¨ˆ (OOP) åŸºç¤è§€å¿µ Pythonçš„é¡åˆ¥(Class)â€¦åŸºæœ¬ç¯‡ ç¹¼æ‰¿","link":"2020/01/03/Python/Python/%5BPython%5D%20%E7%89%A9%E4%BB%B6%E5%B0%8E%E5%90%91%E5%85%A5%E9%96%80/"},{"title":"[Python] è®“Pythonç¨‹å¼ç¢¼æ›´Pythonic","text":"å‰è¨€ä¹‹å‰è·Ÿæœ‹å‹ä¸€èµ·è¨è«–ç¨‹å¼æ™‚ï¼Œæœ‰æ™‚è¦ºå¾—å¯«çš„ç¨‹å¼ç¢¼å¤ªå¤šè¡Œï¼Œæƒ³è¾¦æ³•ç›¡é‡å¯«å¾—ç²¾ç°¡ä¸€äº›ï¼Œæ–¼æ˜¯é–‹å§‹æ‰¾ç¶²è·¯ä¸Šå„å€‹å¤§ç¥çš„å¯«æ³•ï¼Œæ²’æŸ¥é‚„å¥½ï¼Œä¸€æŸ¥å¤©ç‚ºé©šäººï¼Œè—‰æ­¤æ©Ÿæœƒç­†è¨˜ä¸€ä¸‹ï¼Œä¹‹å¾Œå¯ä»¥å›éé ­ä¾†æª¢è¦–ä¸€ä¸‹è‡ªå·±å¯«çš„ç¨‹å¼ç¢¼å“è³ªã€‚ å…©å€‹è®Šæ•¸çš„å€¼é€²è¡Œäº¤æ›1234567# worst casetemp = aa = bb = temp# best casea,b = b,a éˆå¼æ¯”è¼ƒ1234567a = 3b = 1 # worst caseb &gt;= 1 and b &lt;= a and a &lt; 10 #True # best case1 &lt;= b &lt;= a &lt; 10 #True çœŸå€¼æ¸¬è©¦1234567891011name = 'Tim'langs = ['AS3', 'Lua', 'C']info = {'name': 'Tim', 'sex': 'Male', 'age':23 } # worst caseif name != '' and len(langs) &gt; 0 and info != {}: print('All True!') #All True!# best caseif name and langs and info: print('All True!') #All True! å°æ–¼ä»»æ„ç›®æ¨™è®Šæ•¸ï¼Œç›´æ¥åˆ¤æ–·å…¶çœŸå‡ï¼Œç„¡éœ€å¯«åˆ¤æ–·æ¢ä»¶ï¼Œé€™æ¨£æ—¢èƒ½ä¿è­‰æ­£ç¢ºæ€§ï¼Œåˆèƒ½æ¸›å°‘ç¨‹å¼ç¢¼çš„é‡ã€‚ è¦è¨£: è¨˜ä½Falseæ¢ä»¶ True False ä»»æ„éç©ºå­—ä¸² ç©ºçš„å­—ä¸² â€˜â€™ ä»»æ„éæ•¸å­—0 æ•¸å­—0 ä»»æ„éç©ºå®¹å™¨ ç©ºçš„å®¹å™¨ [] () {} set() å…¶ä»–ä»»æ„éFalse None å­—ä¸²åè½‰123456789101112name = 'Tim'langs = ['AS3', 'Lua', 'C']info = {'name': 'Tim', 'sex': 'Male', 'age':23 } # worst casefor x in range(len(string)-1,-1,-1): newstring += string[x]print(newstring) # nohtyp# best casestring = &quot;python&quot;print(string[::-1]) # nohtyp å­—ä¸²ã€åˆ—è¡¨(list)åˆä½µ12345678910111213strList = [&quot;Python&quot;, &quot;is&quot;, &quot;good&quot;] # worst caseres = ''for s in strList: res += s + ' 'print(res) #Python is good # best caseres = ' '.join(strList) print(res) #Python is good List Comprehensionç¶²è·¯ä¸Šæœ‰å¾ˆå¤šå„ªé›…çš„å¯«æ³•ï¼Œå¯é»æ“Šæ­¤ç¶²ç«™åƒè€ƒã€‚ è¡¨é”å¼åœ¨listå…§åšfor loopæ™‚å‰é¢å…ˆå®£å‘Šä¸€å€‹è¡¨é”å¼(expression) 123456789101112# Add three to all list members.a = [3, 4, 5]b = a # worst casefor i in range(len(a)): a[i] += 3 # b[i] also changes# best casea = [i + 3 for i in a]b = a[:] # copy a listprint(a, b) # [6, 7, 8] [6, 7, 8] æ¯”è¼ƒå…©å€‹List12345678910# worst casecashier_5 = []for item in cart_1: if item in cart_2: cashier_5.append(item)print(cashier_5) # [8, 58, 88]# best casecashier_5 = [item for item in cart_1 if item in cart_2]print(cashier_5) # [8, 58, 88] è¡¨é”å¼&amp;å–®ä¸€æ¢ä»¶åˆ¤æ–·åœ¨listå…§åšfor loopæ™‚ï¼Œé™¤äº†å¯ä»¥å‰é¢å…ˆå®£å‘Šä¸€å€‹è¡¨é”å¼(expression)ä¹‹å¤–ï¼Œé‚„å¯ä»¥åœ¨å¾Œæ–¹æ·»åŠ æ¢ä»¶åˆ¤æ–· 123456789101112strList = [&quot;Python&quot;, &quot;is&quot;, &quot;good&quot;]# worst casel = []for x in range(10): if x % 3 == 0: l.append(x*x) print(l) # [0, 9, 36, 81]# best casel = [x*x for x in range(10) if x % 3 == 0]print(l) # [0, 9, 36, 81] è¡¨é”å¼&amp;å–®ä¸€æ¢ä»¶åˆ¤æ–·&amp;åµŒå…¥å¤šå€‹æ¢ä»¶åˆ¤æ–·12num_list = [y for y in range(100) if y % 2 == 0 if y % 5 == 0]print(num_list) è¿´åœˆåµŒå¥—1234567891011121314151617181920# worst transposed = []matrix = [[1, 2, 3, 4], [4, 5, 6, 8]]for i in range(len(matrix[0])): transposed_row = [] for row in matrix: transposed_row.append(row[i]) transposed.append(transposed_row)print(transposed)# [[1, 4], [2, 5], [3, 6]]# bestmatrix = [[1, 2], [3,4], [5,6], [7,8]]transpose = [[row[i] for row in matrix] for i in range(2)]print (transpose) # [[1, 3, 5, 7], [2, 4, 6, 8]] if-else ç°¡å¯«123456789# worst caseif 'a'=='a': x=Trueelse : x=Falseprint(x) # True# best casex=True if 'a'=='a' else False print(x) # True Dictionary12345678910# worst casedict_squares = {}for i in range(6): dict_squares[i] = i**2print(dict_squares) # {0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25}# best casedict_squares = {i: i**2 for i in range(6)}print(dict_squares) # {0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25} è®€å–æª”æ¡ˆä»¥è®€æª”æ¡ˆçš„æ¨¡å¼é–‹å•Ÿä¸€å€‹æª”æ¡ˆç‰©ä»¶ï¼Œå¯ç”¨Pythonå…§å»ºçš„open(&quot;æª”å&quot;, 'æ“ä½œæ¨¡å¼çš„ç¬¦è™Ÿ')å‡½å¼ã€‚ 1234567891011# Bad practicetry: f = open(&quot;test.txt&quot;,encoding = 'utf-8') a = f.read() print(a)finally: f.close()# Best practicewith open(&quot;test.txt&quot;,encoding = 'utf-8') as f: print(f.read()) åƒè€ƒæ–‡ç« The Hitchhikerâ€™s Guide to Python","link":"2020/01/01/Python/Python/%5BPython%5D%20%E8%AE%93Python%E7%A8%8B%E5%BC%8F%E7%A2%BC%E6%9B%B4pythonic/"},{"title":"[Python] çˆ¬èŸ²ç­†è¨˜2-requests&amp;BeautifulSoup","text":"å‰è¨€ç¹¼ä¸Šç¯‡ç­†è¨˜ä¹‹å¾Œï¼Œæœ¬ç¯‡ä¸»è¦ç´€éŒ„æˆ‘å¸¸ç”¨çš„çˆ¬èŸ²å·¥å…·ï¼šrequestsã€BeautifulSoupé€™å…©å€‹æ¨¡çµ„ã€‚ æ‰€éœ€å…ˆå‚™çŸ¥è­˜-äº†è§£ç¶²ç«™è«‹æ±‚å‘ç¶²ç«™ç™¼è«‹æ±‚æ™‚ï¼ŒGETèˆ‡POSTæ˜¯å¸¸è¦‹çš„HTTP Methodï¼Œçˆ¬èŸ²å¤§å¤šæ¡ç”¨é€™å…©ç¨®æ–¹æ³•ã€‚ å®‰è£requestså’Œbs412pip install bs4pip install requests å¼•å…¥æ¨¡çµ„12import requestsfrom bs4 import BeautifulSoup requestsrequestsæ¨¡çµ„å¯ä»¥è®€å–ç¶²ç«™çš„åŸå§‹ç¢¼ï¼Œå†åˆ©ç”¨æ­£è¦è¡¨é”å¼å–å¾—ç›®æ¨™è³‡æ–™ã€‚ GET Methodå‡è¨­ä»Šå¤©è¦æŠ“å–PTTçš„NBAç‰ˆï¼Œè®€å–ç¶²é çš„æ–¹æ³•æœƒæ˜¯: 1requests.get(&quot;ç›®æ¨™ç¶²å€&quot;, headers=ä½ è¨­ç½®çš„header) ç¯„ä¾‹: 12header={'User-Agent': 'Mozilla/5.0'}url = requests.get(&quot;https://www.ptt.cc/bbs/NBA/index.html&quot;, headers=header) requestsç›¸é—œçŸ¥è­˜: httpç‹€æ…‹ç¢¼: resp.status_codehttpç‹€æ…‹ç¢¼(status code)ï¼Œç”¨æ–¼è¡¨ç¤ºå‘ç¶²ç«™è«‹æ±‚çš„ç‹€æ…‹ã€‚ é€šå¸¸2é–‹é ­ç‚ºè«‹æ±‚æˆåŠŸ é–‹é ­ç‚º4ç‚ºè«‹æ±‚å¤±æ•—ï¼Œè¡¨ç¤ºClientç«¯éŒ¯èª¤ é–‹é ­ç‚º5ç‚ºè«‹æ±‚å¤±æ•—ï¼Œè¡¨ç¤ºServerç«¯éŒ¯èª¤å¯ä»¥ä¾ç…§httpç‹€æ…‹ç¢¼ä¾†æ’æŸ¥å•é¡Œï¼Œæ›´è©³ç´°çš„ç‹€æ…‹èªªæ˜å¯ä»¥çœ‹é€™ç¯‡ã€‚ æŸ¥çœ‹ç¶²é ç·¨ç¢¼: url.encodingæœ‰æ™‚å€™è§£æä¸‹ä¾†çš„ç¶²é æœƒæœ‰æ–‡å­—ç·¨ç¢¼å•é¡Œï¼Œpython3å…§æ‰€æœ‰çš„æ–‡å­—éƒ½æ˜¯ unicodeé¡å‹çš„strï¼Œå¯ä»¥é€éencodingçš„æ–¹å¼æŸ¥çœ‹ç·¨ç¢¼ï¼Œä¹Ÿå¯ä»¥æ”¹è®Šç¶²é ç·¨ç¢¼ï¼Œå¦‚:12345print(url.encoding) # utf-8# æ”¹è®Šç·¨ç¢¼æ–¹å¼url.encoding = 'big5'print(url.encoding) # big5 è§£æç¶²é å…§å®¹ç¢ºå®šç¶²é è«‹æ±‚æˆåŠŸå¾Œ(ç‹€æ…‹ç¢¼ç‚º200)ï¼Œæ¥è‘—é€²è¡Œç¶²é å…§å®¹è§£æï¼Œç²å–çš„è³‡æ–™å¤§éƒ¨åˆ†æœƒç”¨ä¸Šé¢å…©ç¨®å‹å¼å„²å­˜: text: è¿”å›çš„æ˜¯ Unicodeå‹æ…‹çš„è³‡æ–™ï¼Œå¸¸ç”¨æ–¼å­—ä¸²ã€‚ content: è¿”å›çš„æ˜¯byteså‹æ…‹çš„è³‡æ–™ï¼Œå¸¸ç”¨æ–¼åœ–ç‰‡ã€æ–‡ä»¶ã€‚ åœ¨ç¶²å€åˆ—åŠ ä¸ŠæŸ¥è©¢åƒæ•¸(Query String)æœ‰æ™‚æœƒåœ¨ç™¼GETè«‹æ±‚æ™‚ï¼Œåœ¨ç¶²å€åˆ—åŠ ä¸ŠæŸ¥è©¢çš„åƒæ•¸ï¼Œå¯æ¡è‡ªè¨‚payload(dicè³‡æ–™å‹æ…‹)çš„æ–¹æ³•ï¼ŒGETä»¥paramsç‚ºåƒæ•¸ï¼Œå°‡è‡ªè¨‚çš„åƒæ•¸å€¼assignçµ¦params:12payload = {'key1': 'value1', 'key2': 'value2'}requests.get(&quot;ç›®æ¨™ç¶²å€&quot;, params=payload) ä»¥é›…è™è‚¡å¸‚æ–°èç‚ºä¾‹ï¼Œåƒæ•¸pgå¾Œé¢æŒ¾å¸¶çš„æ•¸å€¼è¡¨ç¤ºé æ•¸:1234payload = {'q': '', 'pg': '2'}page = requests.get(&quot;https://tw.stock.yahoo.com/news_list/url/d/e/N1.html&quot;, headers=header, params=payload)print(page.url)# çµæœ: https://tw.stock.yahoo.com/news_list/url/d/e/N1.html?q=&amp;pg=1 POST Methodç›¸è¼ƒæ–¼GETï¼ŒPOSTè«‹æ±‚çš„è³‡æ–™é€šå¸¸éƒ½æ˜¯ç¶²é è®“ä½¿ç”¨è€…å¡«è¡¨å–®æ™‚æœƒæ¡ç”¨çš„æ–¹æ³•ã€‚POSTä»¥dataç‚ºåƒæ•¸ï¼Œå°‡è‡ªè¨‚çš„åƒæ•¸å€¼assignçµ¦data: 12payload = {'key1': 'value1', 'key2': 'value2'}requests.post(&quot;ç›®æ¨™ç¶²å€&quot;, data=payload) ç¯„ä¾‹: 123payload = {'key1': 'value1', 'key2': 'value2'}page = requests.post(&quot;http://httpbin.org/post&quot;, headers=header,data=page)print(page.text) Session Methodæœ‰æ™‚ä½¿ç”¨è€…(Client)é€ è¨ªç¶²ç«™æ™‚ï¼Œç¶²ç«™(server)ç‚ºäº†è¦è¾¨è­˜ä½¿ç”¨è€…èº«ä»½ï¼Œæœƒç™¼ä¸€å€‹æ†‘è­‰çµ¦è¨ªå•è€…ï¼Œæ†‘è­‰è‹¥å„²å­˜åœ¨Clientç«¯ç¨±ä½œcookieï¼Œå­˜åœ¨Serverç«¯ç¨±ä½œSessionï¼Œå…©è€…å¸¸ç”¨æ–¼ç´€éŒ„ç™»å…¥è€…è³‡è¨Šï¼Œé€™æ™‚å¯ç”¨Sessionæ–¹æ³•ç´€éŒ„cookieè¨Šæ¯ã€‚ å¯¦ä½œ:å‡è¨­ä»Šå¤©ç›®æ¨™ç‚ºPTTçš„å…«å¦ç‰ˆï¼Œåœ¨ç¬¬ä¸€æ¬¡è¨ªå•æ™‚æœƒå°å‘å¦ä¸€å€‹é é¢å…ˆç¢ºå®šä½¿ç”¨è€…æ˜¯å¦è¶…é18æ­²ï¼Œä»¥ç¶²è·¯çˆ¬èŸ²ä¾†èªªï¼Œå¿…é ˆå…ˆç¶“ç”±èªè­‰çš„è¡Œç‚ºä¾†å–å¾—åˆæ³•èº«ä»½ï¼Œä½¿ç”¨è€…è³‡è¨Šæœƒå¤¾é›œåœ¨sessionè£¡é¢ã€‚åœ¨æˆ‘åŒæ„çš„æŒ‰éˆ•ä¸Šé»æ“Šå³éµæ‰“é–‹é–‹ç™¼è€…å·¥å…·è§€å¯Ÿå…ƒç´ ï¼Œå¯ä»¥ç™¼ç¾é è¨­å€¼ç‚ºyesï¼Œä¸¦ä»¥POSTçš„å½¢å¼å‚³é€è³‡æ–™ï¼Œ 12345678910111213import requestspayload = { 'from': 'https://www.ptt.cc/bbs/Gossiping/index.html', 'yes': 'yes' }headers = { 'user-agent': 'Mozilla/5.0'}rs = requests.Session()rs.post('https://www.ptt.cc/ask/over18', data=payload, headers=headers)res = rs.get('https://www.ptt.cc/bbs/Gossiping/index.html', headers=headers)print(res.text) ä¸Šè¿°ç¯„ä¾‹ç¨‹å¼ç¢¼ä¸­ï¼Œfromè¡¨ä¾†æºç¶²é ï¼Œyesç‚ºæŒ‰éˆ•çš„é è¨­å€¼ã€‚ BeautifulSoupé€šå¸¸è§£æå‡ºä¾†çš„ç¶²é çµæ§‹éƒ½æ¯”è¼ƒè¤‡é›œï¼Œè¦æ“·å–ç‰¹å®šè³‡æ–™éœ€è¦å…¶ä»–å·¥å…·ä¾†å”åŠ©æˆ‘å€‘ï¼Œé€™æ™‚BeautifulSoupå°±æ´¾ä¸Šç”¨å ´äº†ï¼Œç•¶ç„¶é™¤äº†BeautifulSoupä¹‹å¤–ï¼Œå¸¸ç”¨çš„å·¥å…·é‚„åŒ…å«xpathã€æ­£è¦è¡¨ç¤ºå¼(re)ç­‰æ–¹æ³•ï¼Œæœ¬ç¯‡å…ˆè¨˜éŒ„BeautifulSoupã€‚å»¶çºŒä¸Šä¸€æ®µæœªå®Œæˆçš„PTTå…«å¦ç‰ˆç¨‹å¼ç¢¼ï¼Œå¦‚æœè¦å–å¾—å¤šå€‹æ¨™é¡Œæ–‡ç« ï¼Œå¯ä»¥ç”¨ä¸‹é¢é€™æ®µå®Œæ•´çš„ç¨‹å¼ç¢¼: 1234567891011121314151617# PTTå…«å¦ç‰ˆçˆ¬èŸ²import requestsfrom bs4 import BeautifulSouppayload = { 'from': 'https://www.ptt.cc/bbs/Gossiping/index.html', 'yes': 'yes' }headers = { 'user-agent': 'Mozilla/5.0'}rs = requests.Session()rs.post('https://www.ptt.cc/ask/over18', data=payload, headers=headers)res = rs.get('https://www.ptt.cc/bbs/Gossiping/index.html', headers=headers)soup = BeautifulSoup(res.text, 'html.parser')items = soup.select('.r-ent')for item in items: print(item.select('.date')[0].text, item.select('.author')[0].text, item.select('.title')[0].text) BeautifulSoup(res.text, 'html.parser')æ¡ç”¨è§£æå™¨:html.parseræ˜¯Pythonå…§å»ºçš„ï¼Œé™¤äº†html.parserå¤–ï¼Œé‚„æ”¯æ´lxmlï¼Œæ›´å¤šè§£æå™¨åŠæ¯”è¼ƒå¯åƒè€ƒé€™ç¯‡æ–‡ç«  1soup.prettify() ä¸Šè¿°æ–¹æ³•å¯å°å‡ºå®Œæ•´çš„HTMLçµæ§‹(æ’ç‰ˆå¾Œ)ã€‚æ¥è‘—è§€å¯Ÿç¶²é çµæ§‹çš„HTMLæ¨™ç±¤ å¸¸ç”¨çš„æ–¹æ³•find()ã€find_all() find(â€œæ¨™ç±¤åç¨±â€): å›å‚³ç¬¬ä¸€å€‹ç¬¦åˆæŒ‡å®šçš„æ¨™ç±¤å…§å®¹ï¼Œæ‰¾ä¸åˆ°å‰‡å›å‚³Noneã€‚ find_all(â€œæ¨™ç±¤åç¨±â€): å›å‚³å¤šå€‹ç¬¦åˆæŒ‡å®šçš„æ¨™ç±¤å…§å®¹ï¼Œæ˜¯ä¸€å€‹listçµæ§‹ï¼Œæ‰¾ä¸åˆ°å‰‡å›å‚³ç©ºçš„listã€‚ ç²å–æ¨™ç±¤å…§å®¹1234567## ç¯„ä¾‹soup.find('p').text # å°å‡ºç¬¬ä¸€å€‹pæ¨™ç±¤soup.find_all('p')[0].get_text() # å°å‡ºç¬¬ä¸€å€‹pæ¨™ç±¤çš„æ–‡å­—å…§å®¹soup.find_all(class_=&quot;outer-text&quot;) # å–å¾—æœ‰classå¾—tagsoup.find(id='link2') # å–å¾—æœ‰idå¾—tag ä¸Šè¿°çš„soup.find('h1')ä¹Ÿå¯ä»¥å¯«ä½œsoup.h1ã€‚ æ³¨æ„ findç”¨.texté¡¯ç¤ºæ–‡å­—findç”¨.get_text()é¡¯ç¤ºæ–‡å­—(è³‡æ–™å‹æ…‹é ˆç‚ºå­—ä¸²) å°‹æ‰¾æŒ‡å®šçš„æ¨™ç±¤ä¸­ç¬¦åˆå±¬æ€§æ¢ä»¶çš„å…§å®¹1find(&quot;æ¨™ç±¤å&quot;, { &quot;å±¬æ€§å&quot; : &quot;å±¬æ€§å€¼&quot;}) æˆ– find_all(&quot;æ¨™ç±¤å&quot;, { &quot;å±¬æ€§å&quot; : &quot;å±¬æ€§å€¼&quot;}) ç¯„ä¾‹ 1soup.find('h1',{'class':'hello'}) # å°å‡ºç¬¬ä¸€å€‹h4æ¨™ç±¤ä¸”classåç¨±ç‚ºhelloä¸­çš„å…§å®¹ å–å¾—æ¨™ç±¤çš„å±¬æ€§å…§å®¹å¦‚æœæƒ³å–å¾—å›å‚³å€¼çš„å±¬æ€§å…§å®¹ä¹Ÿå¯ä»¥ç”¨get(&quot;å±¬æ€§åç¨±&quot;)æˆ–æ˜¯[&quot;å±¬æ€§åç¨±&quot;] 1234567&lt;a id=&quot;link&quot; href=&quot;http://example.com&quot;&gt;&lt;/a&gt;dataList = soup.select(&quot;#link&quot;)# å–å¾—hrefçš„å±¬æ€§å…§å®¹print(dataList[0].get(&quot;href&quot;)) # http://example.comprint(dataList[0][&quot;href&quot;]) # http://example.com æœå°‹å¤šå€‹æ¨™ç±¤1tags = soup.find_all([&quot;title&quot;, &quot;p&quot;]) æœå°‹å¤šå€‹æ¨™ç±¤ä¸¦é™åˆ¶æ•¸é‡1tags = soup.find_all([&quot;title&quot;, &quot;p&quot;], limit=2) select()ä»¥CSSé¸æ“‡å™¨çš„æ–¹å¼å®šä½å…ƒç´ ï¼Œè®€å–æŒ‡å®šçš„è³‡æ–™ï¼Œå›å‚³å€¼æ˜¯listçš„è³‡æ–™çµæ§‹ã€‚å¸¸è¦‹çš„CSSé¸æ“‡å™¨: æ¨™ç±¤ id(å”¯ä¸€): è¦ç²å–å…·æœ‰idçš„æ¨™ç±¤éœ€åœ¨å‰é¢åŠ ä¸Š#ï¼Œå¦‚select(&quot;#title&quot;)ï¼Œidè¡¨å”¯ä¸€çš„é¸æ“‡å™¨ã€‚ class(é¡åˆ¥): è¦ç²å–å…·æœ‰classçš„æ¨™ç±¤éœ€åœ¨å‰é¢åŠ ä¸Š.ï¼Œå¦‚select(&quot;.title&quot;)ï¼Œclassé¸æ“‡å™¨å¯ä»¥åŒæ™‚æ“æœ‰å¤šå€‹ã€‚ç¯„ä¾‹:123bs.select('h1') # å°‹æ‰¾h1æ¨™ç±¤bs.select('#id_tag') # å°‹æ‰¾idåç‚ºid_tagbs.select('.class_tag') # å°‹æ‰¾classåç‚ºPclass_tag å¤šå±¤å¦‚æœé‡ä¸Šå±¤å±¤åµŒå¥—çš„çµæ§‹æ™‚å¯ä»¥æ¡ç”¨ç¯„ä¾‹çš„æ–¹æ³•:ç²å–htmlåº•ä¸‹çš„headåº•ä¸‹çš„titleæ¨™ç±¤å…§å®¹ 1title = soup.select(&quot;html head title&quot;) ç›´æ¥é¸æ“‡æ¨™ç±¤Tag12345678# è¼¸å‡ºtitleæ¨™ç±¤print(soup.title)# è¼¸å‡ºtitleæ¨™ç±¤çš„å±¬æ€§print(soup.title.name)# è¼¸å‡ºtitleæ¨™ç±¤çš„å…§å®¹print(soup.title.string)# è¼¸å‡ºç¶²é ä¸­çš„æ‰€æœ‰æ–‡å­—soup.get_text() ä»¥ä¸Šç‚ºrequests&amp;BeautifulSoupå¸¸ç”¨çš„æ–¹æ³•","link":"2019/09/02/Python/Python/%5BPython%5D%20%E7%88%AC%E8%9F%B2%E7%AD%86%E8%A8%982-requests&BeautifulSoup/"},{"title":"[Python] è®“Pipenv å¹«ä½ åšå¥—ä»¶ç®¡ç†","text":"ä»€éº¼æ˜¯Pipenv?Pipenv æ˜¯ä¸€å€‹ç°¡å–®ã€æ›´å¿«é€Ÿçš„ Python å¥—ä»¶ç®¡ç†å·¥å…·ï¼Œæ•´åˆPipfile, pip, virtualenvï¼Œæˆ‘å€‘éœ€è¦ä¸€å€‹ä¹¾æ·¨ç’°å¢ƒä¾†é–‹ç™¼ï¼Œæœƒä½¿ç”¨ virtualenv å»ºä¸€å€‹è™›æ“¬ç’°å¢ƒï¼Œå†é€é pip ä»¥åŠ requirements.txt å»ç®¡ç†å¥—ä»¶çš„ç‰ˆæœ¬ã€‚è§£æ±ºç—›é»:å‰›å­¸pythonæ™‚ï¼Œå°æ–¼å¥—ä»¶ç®¡ç†ä¸æ˜¯é‚£éº¼ç†Ÿæ‚‰ï¼Œè·¯å¾‘è¨­ç½®ä¹Ÿæ˜¯ä¸€çŸ¥åŠè§£ï¼Œç”¨åˆ°çš„å¥—ä»¶éƒ½äº‚å®‰è£ï¼Œå®‰è£æ–¹å¼æœ‰æ™‚æ ¹æœ¬å¤§é›œç‡´ï¼Œ(macç‚ºä¾‹)å¯èƒ½ç”¨brew install ï¼Œåˆç”¨anaconda installï¼Œæˆ–æ˜¯ pip installï¼Œåˆæœ‰ pip3 installï¼Œæœ‰æ™‚å€™ç™¼ç”Ÿï¼Œæ˜æ˜å°±æœ‰è£ï¼Œä½†æ˜¯ import çš„æ™‚å€™å»æ‰¾ä¸åˆ°å¥—ä»¶ï¼Œå¾Œä¾†æ‰ç™¼ç¾åŸä¾†æ˜¯è©²ç›®éŒ„æ²’æœ‰åŠ å…¥pathï¼Œæˆ–æ˜¯æŠŠå°ˆæ¡ˆç™¼ä½ˆçš„æ™‚ï¼Œä¸æ¸…æ¥šé€™å€‹å°ˆæ¡ˆåˆ°åº•å®‰è£äº†å“ªäº›å¥—ä»¶ï¼Œä¸€å€‹ä¸€å€‹å›å»æŸ¥æ‰¾å°ˆæ¡ˆå…§å®¹ç­‰å•é¡Œâ€¦â€¦é€™æ™‚å¦‚æœæœ‰å€‹å·¥å…·å¯åœ¨è™›æ“¬ç’°å¢ƒä¸‹åšå¥—ä»¶ç®¡ç†ï¼Œå°±å¯ä»¥è§£æ±ºä¸Šè¿°å•é¡Œ å»ºç«‹è™›æ“¬ç’°å¢ƒçš„å¹¾å€‹å¥½è™•: ä¸åŒå°ˆæ¡ˆå¯ä½¿ç”¨ä¸åŒç‰ˆæœ¬ç›¸åŒå¥—ä»¶ï¼Œä¸”ä¸äº’ç›¸å½±éŸ¿ï¼Œå¯é¿å…ç‰ˆæœ¬è¡çªã€‚ åœ¨è™›æ“¬ç’°å¢ƒè£¡ï¼Œpip å®‰è£çš„å¥—ä»¶æœƒè¢«æ”¾åœ¨è™›æ“¬ç’°å¢ƒä¸­ï¼Œæ¯å€‹å°ˆæ¡ˆå¯æ“æœ‰ç¨ç«‹ç’°å¢ƒã€‚ å¥—ä»¶ç‰ˆæœ¬å‡ç´šæ™‚ä¸æœƒå½±éŸ¿åˆ°å…¶ä»–çš„å°ˆæ¡ˆã€‚ å‰é¢èªªäº†é€™éº¼å¤šï¼Œæ¥è‘—é–‹å§‹å¯¦ä½œçœ‹çœ‹å§ï¼å®‰è£1pip install pipenv macä¹Ÿå¯ä»¥ç”¨homebrewé€²è¡Œå®‰è£ 1brew install pipenv `` é€²å…¥å°ˆæ¡ˆè³‡æ–™å¤¾ä¸­å»ºç«‹æ–°çš„å°ˆæ¡ˆè³‡æ–™å¤¾ï¼Œä¸¦åˆ‡æ›è‡³è©²è³‡æ–™å¤¾ä¸‹ã€‚ å‰µå»ºè™›æ“¬ç’°å¢ƒ1pipenv install ä½ è¦çš„å¥—ä»¶ è‹¥å¾Œé¢æ²’æœ‰å¸¶ä»»ä½•åƒæ•¸å‰‡æœƒå®‰è£Pipfileå…§æ‰€æœ‰å¥—ä»¶ã€‚pipenv install å®‰è£ç‰¹å®šå¥—ä»¶å¯åƒè€ƒä¸‹æ–¹ç¯„ä¾‹: 123pipenv install --three #ä½¿ç”¨python 3å»ºç«‹ç’°å¢ƒpipenv install --two #ä½¿ç”¨python 2å»ºç«‹ç’°å¢ƒpipenv install --python 3.7.4 #æ›´ç²¾ç¢ºçš„æŒ‡å®šç‰ˆæœ¬ å®‰è£æˆåŠŸ ç›®éŒ„ä¸‹è‹¥ç„¡Pipfileï¼ŒPipenvæœƒé è¨­ç”¢ç”Ÿä¸€å€‹Pipfileï¼ŒPipfileæœƒå¹«ä½ è¨˜éŒ„æ‰€è¼‰çš„ç›¸ä¾å¥—ä»¶è‹¥æˆ‘ä¸‹è¼‰requestsé€™å€‹å¥—ä»¶ 1pipenv install requests Pipfileå…§çš„packagesæœƒæ–°å¢requestsé€™é …ç´€éŒ„ï¼ŒPipfile.lockä¹Ÿæœƒæœ‰requestsç´€éŒ„ï¼ŒåŒæ™‚è¨˜éŒ„ requests æ‰€éœ€ç›¸ä¾å¥—ä»¶çš„ç‰ˆæœ¬ï¼Œç”¨ä¾†ç¢ºä¿åœ¨ä»»ä½•åœ°æ–¹é€éé€™ä»½æª”æ¡ˆå®‰è£å¥—ä»¶éƒ½æ˜¯ç›¸åŒçš„å¥—ä»¶ã€‚ åŸ·è¡Œpythonç›¸é—œæŒ‡ä»¤å¦‚ä¸‹: ä¸é€²å…¥è™›æ“¬ç’°å¢ƒä¸­ 1pipenv run python test.py é€²å…¥è™›æ“¬ç’°å¢ƒä¸­ 1pipenv shell å°å‡ºå°ˆæ¡ˆç›¸ä¾å¥—ä»¶çš„åœ– 1pipenv graph å¦‚æœä»ç„¶éœ€è¦å°å‡º requirements.txtï¼Œå¯èƒ½æ˜¯è¦éƒ¨ç½²è‡³ç‰¹å®šå¹³å°æœå‹™ï¼Œå¦‚AWS 1pipenv lock --requirements &gt; requirements.txt å…¶ä»–æŒ‡ä»¤:ç§»é™¤æŒ‡å®šå¥—ä»¶ 1pipenv uninstall requests æ›´æ–°pipenvï¼†pipåˆ°æœ€æ–°ç‰ˆæœ¬ 1pipenv --upgrade é¡¯ç¤ºè™›æ“¬ç’°å¢ƒæ ¹ç›®éŒ„è³‡è¨Š 1pipenv --upgrade pipenv --where é¡¯ç¤ºè™›æ“¬ç’°å¢ƒåŸ·è¡Œæª”æ‰€åœ¨ç›®éŒ„ 1pipenv --venv é¡¯ç¤ºç›®å‰ä½¿ç”¨çš„pythonåŸ·è¡Œæª”è³‡è¨Š(åŒwhich python) 1pipenv --py è¼¸å‡ºç›¸é—œç’°å¢ƒè®Šæ•¸ 1pipenv --envs é¡¯ç¤ºç‰ˆæœ¬ 1pipenv --version åƒè€ƒæ–‡ç« åƒè€ƒæ–‡ç« åœ–ç‰‡","link":"2020/01/10/Python/Python/%5BPython%5D%20%E8%AE%93Pipenv%20%E5%B9%AB%E4%BD%A0%E5%81%9A%E5%A5%97%E4%BB%B6%E7%AE%A1%E7%90%86/"},{"title":"[Python] æª”æ¡ˆè®€å¯«","text":"å‰è¨€æœ¬ç¯‡ç´€éŒ„Pythonåœ¨é–‹æª”/è®€æª”çš„æ“ä½œæ–¹æ³•ï¼Œä¸¦ä»¥.txtæª”ç‚ºç¯„ä¾‹ã€‚ é–‹å•Ÿæª”æ¡ˆé¸å®šè¦è™•ç†å¾—ç›®æ¨™æª”æ¡ˆï¼Œå»ºç«‹æª”æ¡ˆç‰©ä»¶(file object)ï¼Œè‹¥æª”æ¡ˆä¸å­˜åœ¨ï¼Œopen()å‡½å¼å°±æœƒæ‹‹å‡ºä¸€å€‹FileNotFoundErrorçš„éŒ¯èª¤è¨Šæ¯ã€‚f = open(æª”å, &quot;æ“ä½œæ¨¡å¼&quot;, encoding=&quot;ç·¨ç¢¼æ–¹å¼&quot;) Python æä¾›å¤šå€‹é–‹å•Ÿæª”æ¡ˆçš„æ¨¡å¼ï¼Œç´€éŒ„å¹¾å€‹å¸¸ç”¨çš„é–‹æª”æ¨¡å¼ï¼š &quot;r&quot; =&gt; å”¯è®€æ¨¡å¼(é è¨­æƒ…æ³)ï¼šåªèƒ½å¾æŒ‡å®šçš„æª”æ¡ˆè®€å–è³‡æ–™ï¼Œä¸èƒ½å°æ­¤æª”æ¡ˆå…§å®¹é€²è¡Œæ›´æ”¹ã€‚è‹¥æŒ‡å®šæª”æ¡ˆä¸å­˜åœ¨ï¼Œæœƒç”¢ç”Ÿ FileNotFoundErrorçš„ä¾‹å¤–éŒ¯èª¤ã€‚&quot;w&quot; =&gt; (è¦†å¯«æ¨¡å¼ï¼‰ï¼šé€²è¡Œæª”æ¡ˆçš„å¯«å…¥ï¼Œæœƒåœ¨é–‹å•Ÿçš„ä½ç½®ç›´æ¥è¦†è“‹æ‰åŸæœ¬çš„æª”æ¡ˆã€‚è‹¥æŒ‡å®šçš„æª”æ¡ˆè·¯å¾‘/åç¨±ä¸å­˜åœ¨ï¼Œæœƒè‡ªå‹•æ–°å¢ä¸€å€‹æ–°æª”æ¡ˆã€‚&quot;a&quot; =&gt; (çºŒå¯«æ¨¡å¼ï¼‰ï¼šåœ¨æ­¤æ¨¡å¼ä¸‹é–‹å•Ÿæª”æ¡ˆè¦é€²è¡Œå¯«å…¥æ™‚ï¼Œæœƒå¾åŸæœ¬çš„æª”æ¡ˆæœ€å¾Œé¢ç‚ºèµ·å§‹é»ç¹¼çºŒå¯«å…¥ã€‚&quot;r+&quot; =&gt; æª”æ¡ˆå­˜åœ¨çš„æƒ…æ³ä¸‹è®€å–èˆŠè³‡æ–™ä¸¦å¯«å…¥(å§‹æ–¼æ¸¸æ¨™æ‰€åœ¨ä½ç½®)&quot;w+&quot; =&gt; æ¸…ç©ºæª”æ¡ˆå…§å®¹ï¼Œå¯å†è®€å‡ºæ–°å¯«å…¥çš„æ±è¥¿(æª”æ¡ˆå¯ä¸å­˜åœ¨ï¼Œæœƒè‡ªå‹•æ–°å¢) ç¯„ä¾‹1f = open('./test.txt', 'r') é—œé–‰æª”æ¡ˆåœ¨ç¨‹å¼ç•¶ä¸­é–‹å•Ÿäº†æª”æ¡ˆä»¥å¾Œï¼Œå¦‚æœè¦åœæ­¢å°æ–¼é€™å€‹æª”æ¡ˆçš„æ›´å‹•æˆ–å¯«å…¥ï¼Œå¯ä»¥å°‡æª”æ¡ˆé—œé–‰ï¼Œä½¿ç”¨close()æ–¹æ³•é€²è¡Œé—œé–‰ã€‚ç¯„ä¾‹ 1f.close() è®€å–æª”æ¡ˆæˆåŠŸé–‹å•Ÿæª”æ¡ˆä»¥å¾Œï¼Œå†ä¾†è¦è®€å–æª”æ¡ˆç•¶ä¸­çš„è³‡æ–™ã€‚Pythonåœ¨file object ç•¶ä¸­æä¾›äº†å¹¾ç¨®å¾æª”æ¡ˆè®€å–è³‡æ–™çš„æ–¹æ³•: file.read()file.read(size)ï¼Œè‹¥æœ‰è¨­å®šsizeçš„å€¼ï¼Œæœƒè®€åˆ°æŒ‡å®šçš„å­—ç¯€æ•¸é‡ï¼Œè‹¥æ²’æœ‰è¨­å®šå‰‡æœƒè®€å–æ•´å€‹æª”æ¡ˆã€‚ ç¯„ä¾‹ï¼šä¸Šæ–¹ç‚º 1234567891011121314151617f = open(&quot;./sample.txt&quot;, &quot;r&quot;)words = f.read(5)print(words)f.close()# å›å‚³çµæœ# This is python example.# python is fun.# ======= è¨­å®šsize ================f = open(&quot;./sample.txt&quot;, &quot;r&quot;)words = f.read(5)print(words)f.close()# å›å‚³çµæœ# This file.readline()è®€å–æª”æ¡ˆä¸­çš„æ•´è¡Œå…§å®¹ï¼Œä½†ä¸€æ¬¡åªè®€å–ä¸€è¡Œï¼ŒåŒ…å«\\nå­—å…ƒï¼Œè‹¥æª”æ¡ˆå…§å®¹åŒ…å«äº†å¤šè¡Œçš„è³‡æ–™ï¼Œæˆ‘å€‘å°±å¿…é ˆå‘¼å«f.readline() å¤šæ¬¡ã€‚ 12345678f = open(&quot;./sample.txt&quot;, &quot;r&quot;)first = f.readline()second = f.readline()print(second, first, sep = &quot;\\n&quot;)f.close()# å›å‚³çµæœ# python is fun.# This is python example file.readlines()é€è¡Œè®€å–æª”æ¡ˆæ‰€æœ‰å…§å®¹ï¼Œå›å‚³ä¸€å€‹listè³‡æ–™çµæ§‹ï¼Œä¸¦ä¸”åœ¨æ¯ä¸€è¡Œæ–‡å­—æœ€å¾Œé¢æœƒåŠ ä¸Šä¸€å€‹\\nã€‚ 12345678f = open(&quot;./sample.txt&quot;, &quot;r&quot;)lines = f.readlines()print(lines)f.close()# å›å‚³çµæœ# ['This is python example.\\n', 'python is fun.'] å¯«å…¥æª”æ¡ˆå°‡open()å‡½æ•¸å…§çš„è®€æª”æ¨¡å¼æ”¹ç‚º&quot;w&quot;ï¼Œä¸¦ä½¿ç”¨file.write()ï¼Œç›¸å°æ–¼å‰›æ‰æåˆ°çš„f.read()ï¼Œèªæ³•: 1f.write(&quot;string&quot;) å¯«å…¥æª”æ¡ˆï¼Œä¸¦å›å‚³å¯«å…¥çš„stringé•·åº¦ã€‚ ç¯„ä¾‹12345f = open(&quot;./sample.txt&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;)words = f.write(&quot;This is a new line be written&quot;)print(words)f.close()# 29 å¯«å…¥å¤šè¡Œè‹¥ä¸æƒ³è¦æ¯è¼¸å‡ºä¸€æ®µæ±è¥¿å°±åŸ·è¡Œä¸€æ¬¡ f.write(sequence)ï¼Œå¯ä»¥ä½¿ç”¨file.writelines()ï¼Œä¸€æ¬¡å¯«å…¥å¤šè¡Œã€‚ sequenceåƒæ•¸ç‚ºlistæˆ–æ˜¯tupleç­‰é€™é¡çš„è³‡æ–™å‹æ…‹ ç¯„ä¾‹12345f = open(&quot;./sample.txt&quot;, &quot;w&quot;, encoding=&quot;utf-8&quot;)seq = [&quot;æ¸¬è©¦ç¬¬ä¸€è¡Œ\\n&quot;,&quot;æ¸¬è©¦ç¬¬äºŒè¡Œ&quot;]words = f.writelines(seq)print(words)f.close() è¼¸å‡ºçµæœ è®€å¯«æª”æ¡ˆçš„éŒ¯èª¤è™•ç†ä½¿ç”¨with openï¼ˆï¼‰asè®€å¯«æª”æ¡ˆï¼Œæœ€å‰›é–‹å§‹é–‹å•Ÿæª”æ¡ˆæ™‚ï¼Œæˆ–æª”æ¡ˆä¸å­˜åœ¨ï¼ŒPythonæœƒæ‹‹å‡ºFileNotFoundErroré€™é¡çš„éŒ¯èª¤è¨Šæ¯ã€‚ ç”±æ–¼æª”æ¡ˆè®€å¯«æ™‚éƒ½æœ‰å¯èƒ½ç”¢ç”ŸéŒ¯èª¤ï¼Œè‹¥éŒ¯èª¤ç™¼ç”Ÿï¼Œå¾Œé¢çš„f.close()å°±ä¸æœƒè¢«åŸ·è¡Œã€‚ç‚ºäº†ä¿è­‰ç„¡è«–æ˜¯å¦å‡ºéŒ¯éƒ½èƒ½æ­£ç¢ºåœ°é—œé–‰æª”æ¡ˆï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨try ... finallyä¾†å®Œæˆã€‚ finallyè¡¨ç¤ºç•¶éŒ¯èª¤ç™¼ç”Ÿæ™‚ï¼Œfinallyå¾ŒçºŒçš„ç¨‹å¼ç¢¼ç¹¼çºŒåŸ·è¡Œ ç¯„ä¾‹123456try: f = open('./sample.txt', 'r') print(f.read())finally: if f: f.close() å¦‚æœæ¯æ¬¡éƒ½é€™éº¼å¯«æœƒé¡¯å¾—éæ–¼å†—é•·ï¼Œwith ...æ–¹æ³•å¯ä»¥è‡ªå‹•å‘¼å«close()æ–¹æ³• ç¯„ä¾‹12with open('./sample.txt', 'r') as f: print(f.read()) é€éwithæ–¹æ³•å®šç¾©fç‚ºè®Šæ•¸åç¨±ï¼ŒåŒæ™‚åˆä¸éœ€è¦å¯«try ... finallyä¾†ç¢ºä¿æª”æ¡ˆæ­£å¸¸é—œé–‰ã€‚ åƒè€ƒpython ä½¿ç”¨ with openï¼ˆï¼‰ as è®€å¯«æª”æ¡ˆ","link":"2019/08/10/Python/Python/%5BPython%5D%20%E8%AE%80%E5%AF%AB%E6%AA%94%E6%A1%88/"}],"tags":[{"name":"Canvas","slug":"Canvas","link":"tags/Canvas/"},{"name":"Github","slug":"Github","link":"tags/Github/"},{"name":"Css","slug":"Css","link":"tags/Css/"},{"name":"Database","slug":"Database","link":"tags/Database/"},{"name":"Postgres","slug":"Postgres","link":"tags/Postgres/"},{"name":"Go","slug":"Go","link":"tags/Go/"},{"name":"JSDC","slug":"JSDC","link":"tags/JSDC/"},{"name":"Conference","slug":"Conference","link":"tags/Conference/"},{"name":"Network","slug":"Network","link":"tags/Network/"},{"name":"Proxy","slug":"Proxy","link":"tags/Proxy/"},{"name":"Webhook","slug":"Webhook","link":"tags/Webhook/"},{"name":"WebSocket","slug":"WebSocket","link":"tags/WebSocket/"},{"name":"SSL","slug":"SSL","link":"tags/SSL/"},{"name":"Certbot","slug":"Certbot","link":"tags/Certbot/"},{"name":"Ubuntu","slug":"Ubuntu","link":"tags/Ubuntu/"},{"name":"JavaScript","slug":"JavaScript","link":"tags/JavaScript/"},{"name":"Session","slug":"Session","link":"tags/Session/"},{"name":"Cookie","slug":"Cookie","link":"tags/Cookie/"},{"name":"GoogleMap","slug":"GoogleMap","link":"tags/GoogleMap/"},{"name":"Mac","slug":"Mac","link":"tags/Mac/"},{"name":"Linux","slug":"Linux","link":"tags/Linux/"},{"name":"w3HexSchool","slug":"w3HexSchool","link":"tags/w3HexSchool/"},{"name":"OS","slug":"OS","link":"tags/OS/"},{"name":"OOP","slug":"OOP","link":"tags/OOP/"},{"name":"Vue","slug":"Vue","link":"tags/Vue/"},{"name":"AWS","slug":"AWS","link":"tags/AWS/"},{"name":"Python","slug":"Python","link":"tags/Python/"},{"name":"MySQL","slug":"MySQL","link":"tags/MySQL/"},{"name":"è¨ˆæ¦‚","slug":"è¨ˆæ¦‚","link":"tags/%E8%A8%88%E6%A6%82/"},{"name":"Kubernetes","slug":"Kubernetes","link":"tags/Kubernetes/"},{"name":"K8s","slug":"K8s","link":"tags/K8s/"},{"name":"VSCode","slug":"VSCode","link":"tags/VSCode/"},{"name":"DevOps","slug":"DevOps","link":"tags/DevOps/"},{"name":"GithubAction","slug":"GithubAction","link":"tags/GithubAction/"},{"name":"CICD","slug":"CICD","link":"tags/CICD/"},{"name":"Docker","slug":"Docker","link":"tags/Docker/"},{"name":"ELK","slug":"ELK","link":"tags/ELK/"},{"name":"Kibana","slug":"Kibana","link":"tags/Kibana/"},{"name":"Elasticsearch","slug":"Elasticsearch","link":"tags/Elasticsearch/"},{"name":"Terraform","slug":"Terraform","link":"tags/Terraform/"},{"name":"Ansible","slug":"Ansible","link":"tags/Ansible/"},{"name":"Redis","slug":"Redis","link":"tags/Redis/"},{"name":"MongoDB","slug":"MongoDB","link":"tags/MongoDB/"},{"name":"NoSQL","slug":"NoSQL","link":"tags/NoSQL/"},{"name":"SQL Server","slug":"SQL-Server","link":"tags/SQL-Server/"},{"name":"Django","slug":"Django","link":"tags/Django/"},{"name":"Pandas","slug":"Pandas","link":"tags/Pandas/"},{"name":"Project","slug":"Project","link":"tags/Project/"},{"name":"WebScraping","slug":"WebScraping","link":"tags/WebScraping/"}],"categories":[{"name":"Frontend","slug":"Frontend","link":"categories/Frontend/"},{"name":"Tool","slug":"Tool","link":"categories/Tool/"},{"name":"Backend","slug":"Backend","link":"categories/Backend/"},{"name":"Conference","slug":"Conference","link":"categories/Conference/"},{"name":"Network","slug":"Network","link":"categories/Network/"},{"name":"OS","slug":"OS","link":"categories/OS/"},{"name":"Cloud","slug":"Cloud","link":"categories/Cloud/"},{"name":"DevOps","slug":"DevOps","link":"categories/DevOps/"}]}