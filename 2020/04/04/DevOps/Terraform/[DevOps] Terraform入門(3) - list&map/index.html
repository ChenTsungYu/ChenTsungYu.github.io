<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>[Terraform] Terraform入門(3) - list&amp;map - Tom&#039;s Blog</title><link rel="manifest" href="../../../../../../manifest.json"><meta name="application-name" content="Tom&#039;s Blog"><meta name="msapplication-TileImage" content="/img/dragon_red.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Tom&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="前言本篇為Terraform系列的第三篇，主要紀錄在Terraform中的list和map兩種資料結構"><meta property="og:type" content="blog"><meta property="og:title" content="[Terraform] Terraform入門(3) - list&amp;map"><meta property="og:url" content="https://github.com/ChenTsungYu/2020/04/04/DevOps/Terraform/[DevOps]%20Terraform%E5%85%A5%E9%96%80(3)%20-%20list&amp;map/"><meta property="og:site_name" content="Tom&#039;s Blog"><meta property="og:description" content="前言本篇為Terraform系列的第三篇，主要紀錄在Terraform中的list和map兩種資料結構"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://i.imgur.com/AAuuSBv.png"><meta property="og:image" content="https://i.imgur.com/s2rVgKa.png"><meta property="og:image" content="https://i.imgur.com/PYkFQ6w.png"><meta property="og:image" content="https://i.imgur.com/CCq1Bpu.png"><meta property="og:image" content="https://i.imgur.com/NtHgcLD.png"><meta property="og:image" content="https://i.imgur.com/2sZtba9.png"><meta property="og:image" content="https://i.imgur.com/nojhPp7.png"><meta property="og:image" content="https://i.imgur.com/7bTuXjB.png"><meta property="og:image" content="https://i.imgur.com/QbNTAKR.png"><meta property="article:published_time" content="2020-04-04T00:00:10.000Z"><meta property="article:modified_time" content="2021-09-28T09:36:25.939Z"><meta property="article:author" content="Tsung Yu Chen"><meta property="article:tag" content="AWS"><meta property="article:tag" content="DevOps"><meta property="article:tag" content="Terraform"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://i.imgur.com/AAuuSBv.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://github.com/ChenTsungYu/2020/04/04/DevOps/Terraform/[DevOps]%20Terraform%E5%85%A5%E9%96%80(3)%20-%20list&map/"},"headline":"[Terraform] Terraform入門(3) - list&map","image":["https://i.imgur.com/AAuuSBv.png","https://i.imgur.com/s2rVgKa.png","https://i.imgur.com/PYkFQ6w.png","https://i.imgur.com/CCq1Bpu.png","https://i.imgur.com/NtHgcLD.png","https://i.imgur.com/2sZtba9.png","https://i.imgur.com/nojhPp7.png","https://i.imgur.com/7bTuXjB.png","https://i.imgur.com/QbNTAKR.png"],"datePublished":"2020-04-04T00:00:10.000Z","dateModified":"2021-09-28T09:36:25.939Z","author":{"@type":"Person","name":"Tsung Yu Chen"},"publisher":{"@type":"Organization","name":"Tom's Blog","logo":{"@type":"ImageObject","url":"https://github.com/img/dragon_blue.png"}},"description":"前言本篇為Terraform系列的第三篇，主要紀錄在Terraform中的list和map兩種資料結構"}</script><link rel="canonical" href="https://github.com/ChenTsungYu/2020/04/04/DevOps/Terraform/[DevOps]%20Terraform%E5%85%A5%E9%96%80(3)%20-%20list&amp;map/"><link rel="icon" href="../../../../../../img/dragon_red.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="../../../../../../css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="../../../../../../index.html"><img src="../../../../../../img/dragon_blue.png" alt="Tom&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="../../../../../../index.html">Home</a><a class="navbar-item" href="../../../../../../archives">Archives</a><a class="navbar-item" href="../../../../../../categories">Categories</a><a class="navbar-item" href="../../../../../../tags">Tags</a><a class="navbar-item" href="../../../../../../about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="../../../../../../https:/github.com/ChenTsungYu"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-04-04T00:00:10.000Z" title="4/4/2020, 8:00:10 AM">2020/04/04</time></span><span class="level-item"><a class="link-muted" href="../../../../../../categories/DevOps/">DevOps</a></span><span class="level-item">8 minutes read (About 1213 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">[Terraform] Terraform入門(3) - list&amp;map</h1><div class="content"><!-- toc -->
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>本篇為Terraform系列的第三篇，主要紀錄在Terraform中的list和map兩種資料結構</p>
<span id="more"></span>
<h1 id="Hands-on-Lab"><a href="#Hands-on-Lab" class="headerlink" title="Hands on Lab"></a>Hands on Lab</h1><h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p>terraform list 如同一般程式語言的陣列結構，我們可以存放多個元素在陣列內，透過索引值(index)的方式進行查找。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># declare variable</span><br>variable <span class="hljs-string">&quot;names&quot;</span> &#123;<br>  default = [<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-string">&quot;tonny&quot;</span>]<br>&#125;<br><br><span class="hljs-comment"># Configure the AWS Provider</span><br>provider <span class="hljs-string">&quot;aws&quot;</span> &#123;<br>  region  = <span class="hljs-string">&quot;us-east-2&quot;</span><br>  version = <span class="hljs-string">&quot;~&gt; 2.55&quot;</span><br>&#125;<br><br>resource <span class="hljs-string">&quot;aws_iam_user&quot;</span> <span class="hljs-string">&quot;my_iam_user&quot;</span> &#123;<br>  count = length(var.names)<br>  name  = var.names[count.index]<br>&#125;<br></code></pre></td></tr></table></figure>
<p>分別執行下方指令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">terraform init<br>terraform apply<br></code></pre></td></tr></table></figure>

<p>在AWS IAM User分別新增<code>tom</code>、<code>jack</code>、<code>tonny</code>三位Users</p>
<p>接著進入terraform console</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">terraform console<br></code></pre></td></tr></table></figure>
<h3 id="取得變數長度"><a href="#取得變數長度" class="headerlink" title="取得變數長度"></a>取得變數長度</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">length(var.names)<br><br><span class="hljs-comment"># 3</span><br></code></pre></td></tr></table></figure>

<h3 id="反轉list中的元素順序"><a href="#反轉list中的元素順序" class="headerlink" title="反轉list中的元素順序"></a>反轉list中的元素順序</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">reverse(var.names)<br><span class="hljs-comment"># [</span><br><span class="hljs-comment">#   &quot;tonny&quot;,</span><br><span class="hljs-comment">#   &quot;jack&quot;,</span><br><span class="hljs-comment">#   &quot;tom&quot;,</span><br><span class="hljs-comment"># ]</span><br></code></pre></td></tr></table></figure>

<h3 id="合併list"><a href="#合併list" class="headerlink" title="合併list"></a>合併list</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">concat(var.names, [<span class="hljs-string">&quot;amy&quot;</span>])<br></code></pre></td></tr></table></figure>
<p>注意，合併時，資料結構為<strong>list</strong>，否則會報<code>Invalid value for &quot;seqs&quot; parameter: all arguments must be lists or tuples; got
string.</code>的錯誤訊息<br><img src="https://i.imgur.com/AAuuSBv.png" alt=""></p>
<blockquote>
<p><code>concat()</code>合併list時，不影響原始的list</p>
</blockquote>
<h3 id="排序list"><a href="#排序list" class="headerlink" title="排序list"></a>排序list</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sort(var.names)<br></code></pre></td></tr></table></figure>

<h3 id="檢查是否存在"><a href="#檢查是否存在" class="headerlink" title="檢查是否存在"></a>檢查是否存在</h3><p>可以透過<code>contains</code>進行元素是否存在，存在的話回傳為<code>true</code>，反之為<code>false</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">contains(var.names, <span class="hljs-string">&quot;tom&quot;</span>)<br>contains(var.names, <span class="hljs-string">&quot;hey&quot;</span>)<br></code></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/s2rVgKa.png" alt=""></p>
<h3 id="限定範圍"><a href="#限定範圍" class="headerlink" title="限定範圍"></a>限定範圍</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">range(start, end, space)<br></code></pre></td></tr></table></figure>
<ul>
<li>start：表起始值</li>
<li>end：表結束值(實際印出的值為end-1)</li>
<li>space：間隔(預設為1)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">range(1,10)<br></code></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/PYkFQ6w.png" alt=""></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">range(1,20, 2)<br></code></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/CCq1Bpu.png" alt=""></p>
<p>更多Terraform 內建的functions可參考<a target="_blank" rel="noopener" href="https://www.terraform.io/docs/configuration/functions.html">官方文件</a></p>
<h3 id="添加terraform-list"><a href="#添加terraform-list" class="headerlink" title="添加terraform list"></a>添加terraform list</h3><p>terraform list預設index以數值0開始做排序，如果想改以element名稱來排序的話，改成下方作法:<br><code>main,tf</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># declare variable</span><br>variable <span class="hljs-string">&quot;names&quot;</span> &#123;<br>  default = [<span class="hljs-string">&quot;jason&quot;</span>,<span class="hljs-string">&quot;tom&quot;</span>, <span class="hljs-string">&quot;jack&quot;</span>, <span class="hljs-string">&quot;chris&quot;</span>]<br>&#125;<br><br><span class="hljs-comment"># Configure the AWS Provider</span><br>provider <span class="hljs-string">&quot;aws&quot;</span> &#123;<br>  region  = <span class="hljs-string">&quot;us-east-2&quot;</span><br>  version = <span class="hljs-string">&quot;~&gt; 2.55&quot;</span><br>&#125;<br><br>resource <span class="hljs-string">&quot;aws_iam_user&quot;</span> <span class="hljs-string">&quot;my_iam_user&quot;</span> &#123;<br>  <span class="hljs-comment"># count = length(var.names)</span><br>  <span class="hljs-comment"># name  = var.names[count.index]</span><br>  for_each = toset(var.names)<br>  name = each.value<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>for_each</code>可參考<a target="_blank" rel="noopener" href="https://www.terraform.io/docs/configuration/resources.html">官方文件</a>, <code>each.value</code>可參考<a target="_blank" rel="noopener" href="https://www.terraform.io/docs/configuration/expressions.html#local-named-values">官方文件</a><br>執行<code>terraform apply -refresh=false</code>後查看<code>terraform.tfstate</code>這個檔案內容，觀察變化。</p>
<p><img src="https://i.imgur.com/NtHgcLD.png" alt=""><br><code>index_key</code>由原本的數值轉為<code>jack</code></p>
<h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><p>map在Terraform中的資料結構用<code>&#123;key : value&#125;</code>來表示，如要取得key對應的value值，語法為<code>key.value</code>。<br>範例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># declare variable</span><br>variable <span class="hljs-string">&quot;names&quot;</span> &#123;<br>  default = &#123;<br>    tom : <span class="hljs-string">&quot;Taiwan&quot;</span>,<br>    jack : <span class="hljs-string">&quot;UK&quot;</span>,<br>    chris : <span class="hljs-string">&quot;US&quot;</span>,<br>  &#125;<br>&#125;<br><br><span class="hljs-comment"># Configure the AWS Provider</span><br>provider <span class="hljs-string">&quot;aws&quot;</span> &#123;<br>  region  = <span class="hljs-string">&quot;us-east-2&quot;</span><br>  version = <span class="hljs-string">&quot;~&gt; 2.55&quot;</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p>進入<code>terraform console</code></p>
<h3 id="取得map內所有資料"><a href="#取得map內所有資料" class="headerlink" title="取得map內所有資料"></a>取得map內所有資料</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">var.names<br></code></pre></td></tr></table></figure>
<h3 id="取得某個key對應的value"><a href="#取得某個key對應的value" class="headerlink" title="取得某個key對應的value"></a>取得某個key對應的value</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">var.names.jack<br></code></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/2sZtba9.png" alt=""></p>
<h3 id="map內取得所有的key名稱"><a href="#map內取得所有的key名稱" class="headerlink" title="map內取得所有的key名稱"></a>map內取得所有的key名稱</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">keys(var.names)<br><br><span class="hljs-comment"># [</span><br><span class="hljs-comment">#   &quot;chris&quot;,</span><br><span class="hljs-comment">#   &quot;jack&quot;,</span><br><span class="hljs-comment">#   &quot;tom&quot;,</span><br><span class="hljs-comment"># ]</span><br></code></pre></td></tr></table></figure>
<h3 id="map內取得所有的value"><a href="#map內取得所有的value" class="headerlink" title="map內取得所有的value"></a>map內取得所有的value</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">values(var.names)<br><br><span class="hljs-comment"># [</span><br><span class="hljs-comment">#   &quot;US&quot;,</span><br><span class="hljs-comment">#   &quot;UK&quot;,</span><br><span class="hljs-comment">#   &quot;Taiwan&quot;,</span><br><span class="hljs-comment"># ]</span><br></code></pre></td></tr></table></figure>

<h3 id="查看特定值"><a href="#查看特定值" class="headerlink" title="查看特定值"></a>查看特定值</h3><p>採<code>lookup(obj, &quot;key&quot;)</code></p>
<ul>
<li><code>obj</code>: 目標物件</li>
<li><code>key</code>: 物件中的某個key<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">lookup(var.names, <span class="hljs-string">&quot;jack&quot;</span>)<br><br><span class="hljs-comment"># UK</span><br></code></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="綜合練習"><a href="#綜合練習" class="headerlink" title="綜合練習"></a>綜合練習</h2><p>假設今天想建立三個IAM Users，分別讓每個User加上tag，tag值為對應所在的國家 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># declare variable</span><br>variable <span class="hljs-string">&quot;users&quot;</span> &#123;<br>  default = &#123;<br>    tom : <span class="hljs-string">&quot;Taiwan&quot;</span>,<br>    jack : <span class="hljs-string">&quot;UK&quot;</span>,<br>    chris : <span class="hljs-string">&quot;US&quot;</span>,<br>  &#125;<br>&#125;<br><span class="hljs-comment"># Configure the AWS Provider</span><br>provider <span class="hljs-string">&quot;aws&quot;</span> &#123;<br>  region  = <span class="hljs-string">&quot;us-east-2&quot;</span><br>  version = <span class="hljs-string">&quot;~&gt; 2.55&quot;</span><br>&#125;<br>resource <span class="hljs-string">&quot;aws_iam_user&quot;</span> <span class="hljs-string">&quot;my_iam_user&quot;</span> &#123;<br>  for_each = var.users<br>  name = each.key <span class="hljs-comment"># 對每個user加上key</span><br>  tags = &#123;<br>    country :each.value <span class="hljs-comment"># 加上key對應的value</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>上述程式碼寫完執行<code>terraform apply</code><br>查看aws IAM User管理介面，會新增程式碼寫的3個user<br><img src="https://i.imgur.com/nojhPp7.png" alt=""><br>可點開單一user查看詳情，確認剛才建立的tag是否有真的加上去，以chris為例:<br><img src="https://i.imgur.com/7bTuXjB.png" alt=""></p>
<p>或是採第二種做法： 原物件內再包一層物件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">variable <span class="hljs-string">&quot;users&quot;</span> &#123;<br>  default = &#123;<br>    tom : &#123;country :<span class="hljs-string">&quot;Taiwan&quot;</span>, department: <span class="hljs-string">&quot;ABC&quot;</span>&#125;<br>    jack : &#123;country :<span class="hljs-string">&quot;UK&quot;</span>, department: <span class="hljs-string">&quot;EFG&quot;</span>&#125;,<br>    chris : &#123;country :<span class="hljs-string">&quot;US&quot;</span>, department: <span class="hljs-string">&quot;XYZ&quot;</span>&#125;,<br>  &#125;<br>&#125;<br><br><span class="hljs-comment"># Configure the AWS Provider</span><br>provider <span class="hljs-string">&quot;aws&quot;</span> &#123;<br>  region  = <span class="hljs-string">&quot;us-east-2&quot;</span><br>  version = <span class="hljs-string">&quot;~&gt; 2.55&quot;</span><br>&#125;<br><br>resource <span class="hljs-string">&quot;aws_iam_user&quot;</span> <span class="hljs-string">&quot;my_iam_user&quot;</span> &#123;<br>  for_each = var.users<br>  name = each.key<br>  tags = &#123;<br>    <span class="hljs-comment"># country :each.value</span><br>    country :each.value.country <span class="hljs-comment"># 直接從第二層物件取value</span><br>    department :each.value.department<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="https://i.imgur.com/QbNTAKR.png" alt=""></p>
<h2 id="補充"><a href="#補充" class="headerlink" title="補充"></a>補充</h2><p>本篇包含前面幾篇有關Teraaform的文章範例裡面，有提到<code>terraform apply</code>指令，眼尖的人會發現我後面在下執行的指令時，會在後面加<code>-refresh=false</code>。<br>主因是若日後專案變大，Terraform寫得腳本愈多，涉及到的服務愈來愈雜，每次執行時會花大量時間進行資源的請求，為了減少每次請求的數量及時間，採用cache的方式，每次執行時<strong>只更新有異動的部分</strong>，而非對所有服務重新請求所有的服務資源。</p>
<p><a target="_blank" rel="noopener" href="https://www.terraform.io/docs/state/purpose.html">Ref</a></p>
<blockquote>
<p>For larger infrastructures, querying every resource is too slow. Many cloud providers do not provide APIs to query multiple resources at once, and the round trip time for each resource is hundreds of milliseconds. On top of this, cloud providers almost always have API rate limiting so Terraform can only request a certain number of resources in a period of time. Larger users of Terraform make heavy use of the -refresh=false flag as well as the -target flag in order to work around this. In these scenarios, the cached state is treated as the record of truth.</p>
</blockquote>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="../../../../../../tags/AWS/">AWS</a><a class="link-muted mr-2" rel="tag" href="../../../../../../tags/DevOps/">DevOps</a><a class="link-muted mr-2" rel="tag" href="../../../../../../tags/Terraform/">Terraform</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="../../../../12/DevOps/Terraform/%5BDevOps%5D%20Terraform%E5%85%A5%E9%96%80(4)%20-%20%E5%88%A9%E7%94%A8Terraform%E4%BE%86%E6%93%8D%E4%BD%9CAWS%20EC2/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">[Terraform] Terraform入門(4) - 利用Terraform來操作AWS EC2</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="../../../../03/DevOps/Terraform/%5BDevOps%5D%20Terraform%E5%85%A5%E9%96%80(2)%20-%20%E8%AE%8A%E6%95%B8/"><span class="level-item">[Terraform] Terraform入門(2) - 變數</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: "92f75153a2afdc09d60cfc1e5a06996e",
            repo: "ChenTsungYu.github.io",
            owner: "ChenTsungYu",
            clientID: "7913190f1a943b88e276",
            clientSecret: "8c54a86c8fe06b650efe932eb53bc421ddf84773",
            admin: ["ChenTsungYu"],
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 20,
            pagerDirection: "last",
            
            
            enableHotKey: true,
            
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="../../../../../../img/avatar1.jpg" alt="Tsung Yu Chen"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Tsung Yu Chen</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Taiwan</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="../../../../../../archives"><p class="title">109</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="../../../../../../categories"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="../../../../../../tags"><p class="title">49</p></a></div></div></nav><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="../../../../../../https:/github.com/ChenTsungYu"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="../../../../../../https:/www.facebook.com/zong.y.r/"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="LinkedIn" href="../../../../../../https:/www.linkedin.com/in/tom-chen-1012/"><i class="fab fa-linkedin-in"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="../../../../../../categories/Backend/"><span class="level-start"><span class="level-item">Backend</span></span><span class="level-end"><span class="level-item tag">47</span></span></a></li><li><a class="level is-mobile" href="../../../../../../categories/Cloud/"><span class="level-start"><span class="level-item">Cloud</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="../../../../../../categories/Conference/"><span class="level-start"><span class="level-item">Conference</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="../../../../../../categories/DevOps/"><span class="level-start"><span class="level-item">DevOps</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="../../../../../../categories/Frontend/"><span class="level-start"><span class="level-item">Frontend</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile" href="../../../../../../categories/Network/"><span class="level-start"><span class="level-item">Network</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="../../../../../../categories/OS/"><span class="level-start"><span class="level-item">OS</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="../../../../../../categories/Tool/"><span class="level-start"><span class="level-item">Tool</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="../../../../../../archives/2022/11/"><span class="level-start"><span class="level-item">November 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2022/01/"><span class="level-start"><span class="level-item">January 2022</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2021/09/"><span class="level-start"><span class="level-item">September 2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2021/04/"><span class="level-start"><span class="level-item">April 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2021/03/"><span class="level-start"><span class="level-item">March 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2020/09/"><span class="level-start"><span class="level-item">September 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2020/07/"><span class="level-start"><span class="level-item">July 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2020/05/"><span class="level-start"><span class="level-item">May 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2020/04/"><span class="level-start"><span class="level-item">April 2020</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2020/03/"><span class="level-start"><span class="level-item">March 2020</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2020/02/"><span class="level-start"><span class="level-item">February 2020</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2019/08/"><span class="level-start"><span class="level-item">August 2019</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="../../../../../../archives/2019/07/"><span class="level-start"><span class="level-item">July 2019</span></span><span class="level-end"><span class="level-item tag">25</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="../../../../../../tags/AWS/"><span class="tag">AWS</span><span class="tag">14</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Ansible/"><span class="tag">Ansible</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/CICD/"><span class="tag">CICD</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Canvas/"><span class="tag">Canvas</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Certbot/"><span class="tag">Certbot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Conference/"><span class="tag">Conference</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Cookie/"><span class="tag">Cookie</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Css/"><span class="tag">Css</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Database/"><span class="tag">Database</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/DevOps/"><span class="tag">DevOps</span><span class="tag">16</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Django/"><span class="tag">Django</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Docker/"><span class="tag">Docker</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/ELK/"><span class="tag">ELK</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Elasticsearch/"><span class="tag">Elasticsearch</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Github/"><span class="tag">Github</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/GithubAction/"><span class="tag">GithubAction</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Go/"><span class="tag">Go</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/GoogleMap/"><span class="tag">GoogleMap</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/JSDC/"><span class="tag">JSDC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/K8s/"><span class="tag">K8s</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Kibana/"><span class="tag">Kibana</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Kubernetes/"><span class="tag">Kubernetes</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Linux/"><span class="tag">Linux</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Mac/"><span class="tag">Mac</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/MongoDB/"><span class="tag">MongoDB</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/MySQL/"><span class="tag">MySQL</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Network/"><span class="tag">Network</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/NoSQL/"><span class="tag">NoSQL</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/OOP/"><span class="tag">OOP</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/OS/"><span class="tag">OS</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Pandas/"><span class="tag">Pandas</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Postgres/"><span class="tag">Postgres</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Project/"><span class="tag">Project</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Proxy/"><span class="tag">Proxy</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Python/"><span class="tag">Python</span><span class="tag">26</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Redis/"><span class="tag">Redis</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/SQL-Server/"><span class="tag">SQL Server</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/SSL/"><span class="tag">SSL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Session/"><span class="tag">Session</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Terraform/"><span class="tag">Terraform</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Ubuntu/"><span class="tag">Ubuntu</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/VSCode/"><span class="tag">VSCode</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Vue/"><span class="tag">Vue</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/WebScraping/"><span class="tag">WebScraping</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/WebSocket/"><span class="tag">WebSocket</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/Webhook/"><span class="tag">Webhook</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/w3HexSchool/"><span class="tag">w3HexSchool</span><span class="tag">20</span></a></div><div class="control"><a class="tags has-addons" href="../../../../../../tags/%E8%A8%88%E6%A6%82/"><span class="tag">計概</span><span class="tag">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#前言"><span class="level-left"><span class="level-item">1</span><span class="level-item">前言</span></span></a></li><li><a class="level is-mobile" href="#Hands-on-Lab"><span class="level-left"><span class="level-item">2</span><span class="level-item">Hands on Lab</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#List"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">List</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#取得變數長度"><span class="level-left"><span class="level-item">2.1.1</span><span class="level-item">取得變數長度</span></span></a></li><li><a class="level is-mobile" href="#反轉list中的元素順序"><span class="level-left"><span class="level-item">2.1.2</span><span class="level-item">反轉list中的元素順序</span></span></a></li><li><a class="level is-mobile" href="#合併list"><span class="level-left"><span class="level-item">2.1.3</span><span class="level-item">合併list</span></span></a></li><li><a class="level is-mobile" href="#排序list"><span class="level-left"><span class="level-item">2.1.4</span><span class="level-item">排序list</span></span></a></li><li><a class="level is-mobile" href="#檢查是否存在"><span class="level-left"><span class="level-item">2.1.5</span><span class="level-item">檢查是否存在</span></span></a></li><li><a class="level is-mobile" href="#限定範圍"><span class="level-left"><span class="level-item">2.1.6</span><span class="level-item">限定範圍</span></span></a></li><li><a class="level is-mobile" href="#添加terraform-list"><span class="level-left"><span class="level-item">2.1.7</span><span class="level-item">添加terraform list</span></span></a></li></ul></li><li><a class="level is-mobile" href="#map"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">map</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#取得map內所有資料"><span class="level-left"><span class="level-item">2.2.1</span><span class="level-item">取得map內所有資料</span></span></a></li><li><a class="level is-mobile" href="#取得某個key對應的value"><span class="level-left"><span class="level-item">2.2.2</span><span class="level-item">取得某個key對應的value</span></span></a></li><li><a class="level is-mobile" href="#map內取得所有的key名稱"><span class="level-left"><span class="level-item">2.2.3</span><span class="level-item">map內取得所有的key名稱</span></span></a></li><li><a class="level is-mobile" href="#map內取得所有的value"><span class="level-left"><span class="level-item">2.2.4</span><span class="level-item">map內取得所有的value</span></span></a></li><li><a class="level is-mobile" href="#查看特定值"><span class="level-left"><span class="level-item">2.2.5</span><span class="level-item">查看特定值</span></span></a></li></ul></li><li><a class="level is-mobile" href="#綜合練習"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">綜合練習</span></span></a></li><li><a class="level is-mobile" href="#補充"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">補充</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="../../../../../../js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-11-27T08:00:19.787Z">2022/11/27</time></p><p class="title"><a href="../../../../../../2022/11/27/DevOps/CICD/GitHub%20Action%20OIDC/">[Github Action] Github Action 整合 AWS OIDC 進行安全強化</a></p><p class="categories"><a href="../../../../../../categories/DevOps/">DevOps</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-06-29T05:23:10.000Z">2022/06/29</time></p><p class="title"><a href="../../../../../../2022/06/29/Database/Index/">[Postgres] 資料庫的索引(Index)</a></p><p class="categories"><a href="../../../../../../categories/Backend/">Backend</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-06-20T05:23:10.000Z">2022/06/20</time></p><p class="title"><a href="../../../../../../2022/06/20/Database/%E8%B3%87%E6%96%99%E5%BA%AB%E5%A6%82%E4%BD%95%E5%AD%98%E6%94%BE%E8%B3%87%E6%96%99/">[Postgres] 資料庫裡的儲存概念</a></p><p class="categories"><a href="../../../../../../categories/Backend/">Backend</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-15T05:23:10.000Z">2022/01/15</time></p><p class="title"><a href="../../../../../../2022/01/15/Database/Redis/%5BBackend%5D%20%E6%8F%90%E9%AB%98%20Redis%20%E5%9F%B7%E8%A1%8C%E6%95%88%E7%8E%87%E7%9A%84%E6%96%B9%E6%B3%95%20-%20Pipeline/">[Redis] 提高 Redis 執行效率的方法 - Pipeline</a></p><p class="categories"><a href="../../../../../../categories/Backend/">Backend</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-11T05:23:10.000Z">2022/01/11</time></p><p class="title"><a href="../../../../../../2022/01/11/Database/Redis/%5BBackend%5D%20Redis%20-%20Transction/">[Redis] Redis - Transaction</a></p><p class="categories"><a href="../../../../../../categories/Backend/">Backend</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="../../../../../../index.html"><img src="../../../../../../img/dragon_blue.png" alt="Tom&#039;s Blog" height="28"></a><p class="is-size-7"><span>&copy; 2022 Tsung Yu Chen</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="../../../../../../https:/creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="../../../../../../https:/creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="../../../../../../https:/github.com/ChenTsungYu"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="../../../../../../js/column.js"></script><script src="../../../../../../js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="../../../../../../js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="../../../../../../js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="../../../../../../js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"../../../../../../content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>